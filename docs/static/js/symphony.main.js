var symphony=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/symphony-2/",t(t.s=96)}([function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}t.a=r},function(e,t,n){"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}t.a=r},function(e,t,n){"use strict";function r(){}function i(e,t){this.x=e||0,this.y=t||0}function o(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function a(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function u(e,t,n,r,o,a,c,l,h,p){Object.defineProperty(this,"id",{value:Oc++}),this.uuid=kc.generateUUID(),this.name="",this.image=void 0!==e?e:u.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:u.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Fs,this.wrapT=void 0!==r?r:Fs,this.magFilter=void 0!==o?o:Ws,this.minFilter=void 0!==a?a:Xs,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:lu,this.type=void 0!==l?l:Qs,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:Zu,this.version=0,this.onUpdate=null}function c(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function l(e,t,n){this.width=e,this.height=t,this.scissor=new c(0,0,e,t),this.scissorTest=!1,this.viewport=new c(0,0,e,t),n=n||{},this.texture=new u(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ws,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function h(e,t,n){l.call(this,e,t,n),this.samples=4}function p(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function f(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||f.DefaultOrder}function d(){this.mask=1}function m(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:Rc++}),this.uuid=kc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=m.DefaultUp.clone();var n=new a,r=new f,i=new o,u=new a(1,1,1);r._onChange(e),i._onChange(t),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new p},normalMatrix:{value:new s}}),this.matrix=new p,this.matrixWorld=new p,this.matrixAutoUpdate=m.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new d,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function g(){m.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function v(e,t){this.min=void 0!==e?e:new a(1/0,1/0,1/0),this.max=void 0!==t?t:new a(-1/0,-1/0,-1/0)}function y(e,t){this.center=void 0!==e?e:new a,this.radius=void 0!==t?t:0}function b(e,t){this.origin=void 0!==e?e:new a,this.direction=void 0!==t?t:new a}function _(e,t,n){this.a=void 0!==e?e:new a,this.b=void 0!==t?t:new a,this.c=void 0!==n?n:new a}function x(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function w(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function T(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function E(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function S(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new a,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new x,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function k(){Object.defineProperty(this,"id",{value:Nc++}),this.uuid=kc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Wa,this.side=Na,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=Ga,this.opacity=1,this.transparent=!1,this.blendSrc=os,this.blendDst=as,this.blendEquation=Qa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ms,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=Sc,this.stencilRef=0,this.stencilMask=255,this.stencilFail=hc,this.stencilZFail=hc,this.stencilZPass=hc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function C(e){k.call(this),this.type="MeshBasicMaterial",this.color=new x(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_s,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function M(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function A(e,t,n){M.call(this,new Int8Array(e),t,n)}function O(e,t,n){M.call(this,new Uint8Array(e),t,n)}function D(e,t,n){M.call(this,new Uint8ClampedArray(e),t,n)}function I(e,t,n){M.call(this,new Int16Array(e),t,n)}function R(e,t,n){M.call(this,new Uint16Array(e),t,n)}function P(e,t,n){M.call(this,new Int32Array(e),t,n)}function L(e,t,n){M.call(this,new Uint32Array(e),t,n)}function N(e,t,n){M.call(this,new Float32Array(e),t,n)}function U(e,t,n){M.call(this,new Float64Array(e),t,n)}function F(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function B(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function j(){Object.defineProperty(this,"id",{value:Uc+=2}),this.uuid=kc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function G(e,t){m.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new C({color:16777215*Math.random()}),this.drawMode=Ku,this.updateMorphTargets()}function V(){Object.defineProperty(this,"id",{value:Fc+=2}),this.uuid=kc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function z(e,t,n,r,i,o){V.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new H(e,t,n,r,i,o)),this.mergeVertices()}function H(e,t,n,r,i,o){function s(e,t,n,r,i,o,s,m,g,v,y){var b,_,x=o/g,w=s/v,T=o/2,E=s/2,S=m/2,k=g+1,C=v+1,M=0,A=0,O=new a;for(_=0;_<C;_++){var D=_*w-E;for(b=0;b<k;b++){var I=b*x-T;O[e]=I*r,O[t]=D*i,O[n]=S,l.push(O.x,O.y,O.z),O[e]=0,O[t]=0,O[n]=m>0?1:-1,h.push(O.x,O.y,O.z),p.push(b/g),p.push(1-_/v),M+=1}}for(_=0;_<v;_++)for(b=0;b<g;b++){var R=f+b+k*_,P=f+b+k*(_+1),L=f+(b+1)+k*(_+1),N=f+(b+1)+k*_;c.push(R,P,N),c.push(P,L,N),A+=6}u.addGroup(d,A,y),d+=A,f+=M}j.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var u=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var c=[],l=[],h=[],p=[],f=0,d=0;s("z","y","x",-1,-1,n,t,e,o,i,0),s("z","y","x",1,-1,n,t,-e,o,i,1),s("x","z","y",1,1,e,n,t,r,o,2),s("x","z","y",1,-1,e,n,-t,r,o,3),s("x","y","z",1,-1,e,t,n,r,i,4),s("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new N(l,3)),this.addAttribute("normal",new N(h,3)),this.addAttribute("uv",new N(p,2))}function W(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function q(e){for(var t={},n=0;n<e.length;n++){var r=W(e[n]);for(var i in r)t[i]=r[i]}return t}function Y(e){k.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=jc,this.fragmentShader=Gc,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function X(){m.call(this),this.type="Camera",this.matrixWorldInverse=new p,this.projectionMatrix=new p,this.projectionMatrixInverse=new p}function K(e,t,n,r){X.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Q(e,t,n,r){m.call(this),this.type="CubeCamera";var i=new K(Vc,zc,e,t);i.up.set(0,-1,0),i.lookAt(new a(1,0,0)),this.add(i);var o=new K(Vc,zc,e,t);o.up.set(0,-1,0),o.lookAt(new a(-1,0,0)),this.add(o);var s=new K(Vc,zc,e,t);s.up.set(0,0,1),s.lookAt(new a(0,1,0)),this.add(s);var u=new K(Vc,zc,e,t);u.up.set(0,0,-1),u.lookAt(new a(0,-1,0)),this.add(u);var c=new K(Vc,zc,e,t);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var l=new K(Vc,zc,e,t);l.up.set(0,-1,0),l.lookAt(new a(0,0,-1)),this.add(l),r=r||{format:cu,magFilter:Ws,minFilter:Ws},this.renderTarget=new J(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,a=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,u),e.setRenderTarget(r,4),e.render(t,c),r.texture.generateMipmaps=a,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function J(e,t,n){l.call(this,e,t,n)}function Z(e,t,n,r,i,o,a,s,c,l,h,p){u.call(this,null,o,a,s,c,l,r,i,h,p),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:js,this.minFilter=void 0!==l?l:js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function $(e,t){this.normal=void 0!==e?e:new a(1,0,0),this.constant=void 0!==t?t:0}function ee(e,t,n,r,i,o){this.planes=[void 0!==e?e:new $,void 0!==t?t:new $,void 0!==n?n:new $,void 0!==r?r:new $,void 0!==i?i:new $,void 0!==o?o:new $]}function te(){function e(i,o){!1!==n&&(r(i,o),t.requestAnimationFrame(e))}var t=null,n=!1,r=null;return{start:function(){!0!==n&&null!==r&&(t.requestAnimationFrame(e),n=!0)},stop:function(){n=!1},setAnimationLoop:function(e){r=e},setContext:function(e){t=e}}}function ne(e){function t(t,n){var r=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function r(e){return e.isInterleavedBufferAttribute&&(e=e.data),a.get(e)}function i(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=a.get(t);n&&(e.deleteBuffer(n.buffer),a.delete(t))}function o(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var i=a.get(e);void 0===i?a.set(e,t(e,r)):i.version<e.version&&(n(i.buffer,e,r),i.version=e.version)}var a=new WeakMap;return{get:r,remove:i,update:o}}function re(e,t,n,r){V.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ie(e,t,n,r)),this.mergeVertices()}function ie(e,t,n,r){j.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i,o,a=e/2,s=t/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,h=c+1,p=e/u,f=t/c,d=[],m=[],g=[],v=[];for(o=0;o<h;o++){var y=o*f-s;for(i=0;i<l;i++){var b=i*p-a;m.push(b,-y,0),g.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var _=i+l*o,x=i+l*(o+1),w=i+1+l*(o+1),T=i+1+l*o;d.push(_,x,T),d.push(x,w,T)}this.setIndex(d),this.addAttribute("position",new N(m,3)),this.addAttribute("normal",new N(g,3)),this.addAttribute("uv",new N(v,2))}function oe(e,t,n,r){function i(t,r,i,p){var f=r.background,d=e.vr,m=d.getSession&&d.getSession();if(m&&"additive"===m.environmentBlendMode&&(f=null),null===f?(o(u,c),l=null,h=0):f&&f.isColor&&(o(f,1),p=!0,l=null,h=0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLRenderTargetCube)){void 0===s&&(s=new G(new H(1,1,1),new Y({type:"BackgroundCubeMaterial",uniforms:W(qc.cube.uniforms),vertexShader:qc.cube.vertexShader,fragmentShader:qc.cube.fragmentShader,side:Ua,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(s));var g=f.isWebGLRenderTargetCube?f.texture:f;s.material.uniforms.tCube.value=g,s.material.uniforms.tFlip.value=f.isWebGLRenderTargetCube?1:-1,l===f&&h===g.version||(s.material.needsUpdate=!0,l=f,h=g.version),t.unshift(s,s.geometry,s.material,0,0,null)}else f&&f.isTexture&&(void 0===a&&(a=new G(new ie(2,2),new Y({type:"BackgroundMaterial",uniforms:W(qc.background.uniforms),vertexShader:qc.background.vertexShader,fragmentShader:qc.background.fragmentShader,side:Na,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),a.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&h===f.version||(a.material.needsUpdate=!0,l=f,h=f.version),t.unshift(a,a.geometry,a.material,0,0,null))}function o(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var a,s,u=new x(0),c=0,l=null,h=0;return{getClearColor:function(){return u},setClearColor:function(e,t){u.set(e),c=void 0!==t?t:1,o(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,o(u,c)},render:i}}function ae(e,t,n,r){function i(e){s=e}function o(t,r){e.drawArrays(s,t,r),n.update(r,s)}function a(i,o,a){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](s,o,a,i.maxInstancedCount),n.update(a,s,i.maxInstancedCount)}var s;this.setMode=i,this.render=o,this.renderInstances=a}function se(e,t,n){function r(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o,a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",u=i(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),d=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:r,getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function ue(){function e(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a){var s=r+4*o,h=t.matrixWorldInverse;c.getNormalMatrix(h),(null===a||a.length<s)&&(a=new Float32Array(s));for(var p=0,f=r;p!==o;++p,f+=4)u.copy(e[p]).applyMatrix4(h,c),u.normal.toArray(a,f),a[f+3]=u.constant}l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,u=new $,c=new s,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,u,c,h,p){if(!o||null===n||0===n.length||a&&!u)a?t(null):e();else{var f=a?0:i,d=4*f,m=h.clippingState||null;l.value=m,m=t(n,c,d,p);for(var g=0;g!==d;++g)m[g]=r[g];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}}}function ce(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function le(e,t,n){function r(e){var i=e.target,o=u[i.id];null!==o.index&&t.remove(o.index);for(var a in o.attributes)t.remove(o.attributes[a]);i.removeEventListener("dispose",r),delete u[i.id];var s=c[o.id];s&&(t.remove(s),delete c[o.id]),n.memory.geometries--}function i(e,t){var i=u[t.id];return i||(t.addEventListener("dispose",r),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new j).setFromObject(e)),i=t._bufferGeometry),u[t.id]=i,n.memory.geometries++,i)}function o(e){var n=e.index,r=e.attributes;null!==n&&t.update(n,34963);for(var i in r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)t.update(a[s],34962)}function a(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var a=r.array;o=r.version;for(var s=0,u=a.length;s<u;s+=3){var l=a[s+0],h=a[s+1],p=a[s+2];n.push(l,h,h,p,p,l)}}else{var a=i.array;o=i.version;for(var s=0,u=a.length/3-1;s<u;s+=3){var l=s+0,h=s+1,p=s+2;n.push(l,h,h,p,p,l)}}var f=new(B(n)>65535?L:R)(n,1);f.version=o,t.update(f,34963);var d=c[e.id];d&&t.remove(d),c[e.id]=f}function s(e){var t=c[e.id];if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return c[e.id]}var u={},c={};return{get:i,update:o,getWireframeAttribute:s}}function he(e,t,n,r){function i(e){u=e}function o(e){c=e.type,l=e.bytesPerElement}function a(t,r){e.drawElements(u,r,c,t*l),n.update(r,u)}function s(i,o,a){var s;if(r.isWebGL2)s=e;else{var s=t.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}s[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](u,a,c,o*l,i.maxInstancedCount),n.update(a,u,i.maxInstancedCount)}var u,c,l;this.setMode=i,this.setIndex=o,this.render=a,this.renderInstances=s}function pe(e){function t(e,t,n){switch(n=n||1,i.calls++,t){case 4:i.triangles+=n*(e/3);break;case 5:case 6:i.triangles+=n*(e-2);break;case 1:i.lines+=n*(e/2);break;case 3:i.lines+=n*(e-1);break;case 2:i.lines+=n*e;break;case 0:i.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}var r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:r,render:i,programs:null,autoReset:!0,reset:n,update:t}}function fe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function de(e){function t(t,i,o,a){var s=t.morphTargetInfluences,u=s.length,c=n[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];n[i.id]=c}for(var h=o.morphTargets&&i.morphAttributes.position,p=o.morphNormals&&i.morphAttributes.normal,l=0;l<u;l++){var f=c[l];0!==f[1]&&(h&&i.removeAttribute("morphTarget"+l),p&&i.removeAttribute("morphNormal"+l))}for(var l=0;l<u;l++){var f=c[l];f[0]=l,f[1]=s[l]}c.sort(fe);for(var l=0;l<8;l++){var f=c[l];if(f){var d=f[0],m=f[1];if(m){h&&i.addAttribute("morphTarget"+l,h[d]),p&&i.addAttribute("morphNormal"+l,p[d]),r[l]=m;continue}}r[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",r)}var n={},r=new Float32Array(8);return{update:t}}function me(e,t){function n(n){var r=t.render.frame,o=n.geometry,a=e.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),e.update(a),i[a.id]=r),a}function r(){i={}}var i={};return{update:n,dispose:r}}function ge(e,t,n,r,i,o,a,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:Os,a=void 0!==a?a:cu,u.call(this,e,t,n,r,i,o,a,s,c,l),this.flipY=!1}function ve(e,t,n,r){u.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=js,this.minFilter=js,this.wrapR=Fs,this.generateMipmaps=!1,this.flipY=!1}function ye(e,t,n,r){u.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=js,this.minFilter=js,this.wrapR=Fs,this.generateMipmaps=!1,this.flipY=!1}function be(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Jc[i];if(void 0===o&&(o=new Float32Array(i),Jc[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function _e(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function xe(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function we(e,t){var n=Zc[t];void 0===n&&(n=new Int32Array(t),Zc[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Te(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ee(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(_e(n,t))return;e.uniform2fv(this.addr,t),xe(n,t)}}function Se(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(_e(n,t))return;e.uniform3fv(this.addr,t),xe(n,t)}}function ke(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(_e(n,t))return;e.uniform4fv(this.addr,t),xe(n,t)}}function Ce(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(_e(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),xe(n,t)}else{if(_e(n,r))return;tl.set(r),e.uniformMatrix2fv(this.addr,!1,tl),xe(n,r)}}function Me(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(_e(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),xe(n,t)}else{if(_e(n,r))return;el.set(r),e.uniformMatrix3fv(this.addr,!1,el),xe(n,r)}}function Ae(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(_e(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),xe(n,t)}else{if(_e(n,r))return;$c.set(r),e.uniformMatrix4fv(this.addr,!1,$c),xe(n,r)}}function Oe(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Yc,i)}function De(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Xc,i)}function Ie(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Kc,i)}function Re(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Qc,i)}function Pe(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Le(e,t){var n=this.cache;_e(n,t)||(e.uniform2iv(this.addr,t),xe(n,t))}function Ne(e,t){var n=this.cache;_e(n,t)||(e.uniform3iv(this.addr,t),xe(n,t))}function Ue(e,t){var n=this.cache;_e(n,t)||(e.uniform4iv(this.addr,t),xe(n,t))}function Fe(e){switch(e){case 5126:return Te;case 35664:return Ee;case 35665:return Se;case 35666:return ke;case 35674:return Ce;case 35675:return Me;case 35676:return Ae;case 35678:case 36198:return Oe;case 35679:return Ie;case 35680:return Re;case 36289:return De;case 5124:case 35670:return Pe;case 35667:case 35671:return Le;case 35668:case 35672:return Ne;case 35669:case 35673:return Ue}}function Be(e,t){e.uniform1fv(this.addr,t)}function je(e,t){e.uniform1iv(this.addr,t)}function Ge(e,t){e.uniform2iv(this.addr,t)}function Ve(e,t){e.uniform3iv(this.addr,t)}function ze(e,t){e.uniform4iv(this.addr,t)}function He(e,t){var n=be(t,this.size,2);e.uniform2fv(this.addr,n)}function We(e,t){var n=be(t,this.size,3);e.uniform3fv(this.addr,n)}function qe(e,t){var n=be(t,this.size,4);e.uniform4fv(this.addr,n)}function Ye(e,t){var n=be(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Xe(e,t){var n=be(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ke(e,t){var n=be(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Qe(e,t,n){var r=t.length,i=we(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Yc,i[o])}function Je(e,t,n){var r=t.length,i=we(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Qc,i[o])}function Ze(e){switch(e){case 5126:return Be;case 35664:return He;case 35665:return We;case 35666:return qe;case 35674:return Ye;case 35675:return Xe;case 35676:return Ke;case 35678:return Qe;case 35680:return Je;case 5124:case 35670:return je;case 35667:case 35671:return Ge;case 35668:case 35672:return Ve;case 35669:case 35673:return ze}}function $e(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Fe(t.type)}function et(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Ze(t.type)}function tt(e){this.id=e,this.seq=[],this.map={}}function nt(e,t){e.seq.push(t),e.map[t.id]=t}function rt(e,t,n){var r=e.name,i=r.length;for(nl.lastIndex=0;;){var o=nl.exec(r),a=nl.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){nt(n,void 0===c?new $e(s,e,t):new et(s,e,t));break}var l=n.map,h=l[s];void 0===h&&(h=new tt(s),nt(n,h)),n=h}}function it(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);rt(i,e.getUniformLocation(t,i.name),this)}}function ot(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function at(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function st(e){switch(e){case Zu:return["Linear","( value )"];case $u:return["sRGB","( value )"];case tc:return["RGBE","( value )"];case rc:return["RGBM","( value, 7.0 )"];case ic:return["RGBM","( value, 16.0 )"];case oc:return["RGBD","( value, 256.0 )"];case ec:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ut(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+at(e.getShaderSource(t))}function ct(e,t){var n=st(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function lt(e,t){var n=st(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ht(e,t){var n;switch(t){case Es:n="Linear";break;case Ss:n="Reinhard";break;case ks:n="Uncharted2";break;case Cs:n="OptimizedCineon";break;case Ms:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function pt(e,t,n){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mt).join("\n")}function ft(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function dt(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i),a=o.name;n[a]=e.getAttribLocation(t,a)}return n}function mt(e){return""!==e}function gt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function vt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function yt(e){function t(e,t){var n=Hc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return yt(n)}var n=/^[ \t]*#include +<([\w\d.\/]+)>/gm;return e.replace(n,t)}function bt(e){function t(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function _t(e,t,n,r,i,o,a){var s=e.getContext(),u=r.defines,c=i.vertexShader,l=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===Pa?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===La&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case Os:case Ds:p="ENVMAP_TYPE_CUBE";break;case Ls:case Ns:p="ENVMAP_TYPE_CUBE_UV";break;case Is:case Rs:p="ENVMAP_TYPE_EQUIREC";break;case Ps:p="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case Ds:case Rs:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case _s:d="ENVMAP_BLENDING_MULTIPLY";break;case xs:d="ENVMAP_BLENDING_MIX";break;case ws:d="ENVMAP_BLENDING_ADD"}}var m,g,v=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":pt(r.extensions,o,t),b=ft(u),_=s.createProgram();if(r.isRawShaderMaterial?(m=[b].filter(mt).join("\n"),m.length>0&&(m+="\n"),g=[y,b].filter(mt).join("\n"),g.length>0&&(g+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(mt).join("\n"),g=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ts?"#define TONE_MAPPING":"",o.toneMapping!==Ts?Hc.tonemapping_pars_fragment:"",o.toneMapping!==Ts?ht("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Hc.encodings_pars_fragment:"",o.mapEncoding?ct("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?ct("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?ct("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?ct("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?lt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(mt).join("\n")),c=yt(c),c=gt(c,o),c=vt(c,o),l=yt(l),l=gt(l,o),l=vt(l,o),c=bt(c),l=bt(l),a.isWebGL2&&!r.isRawShaderMaterial){var x=!1,w=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==c.match(w)&&null!==l.match(w)&&(x=!0,c=c.replace(w,""),l=l.replace(w,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#version 300 es\n","#define varying in",x?"":"out highp vec4 pc_fragColor;",x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var T=m+c,E=g+l,S=ot(s,35633,T),k=ot(s,35632,E);if(s.attachShader(_,S),s.attachShader(_,k),void 0!==r.index0AttributeName?s.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_),e.debug.checkShaderErrors){var C=s.getProgramInfoLog(_).trim(),M=s.getShaderInfoLog(S).trim(),A=s.getShaderInfoLog(k).trim(),O=!0,D=!0;if(!1===s.getProgramParameter(_,35714)){O=!1;var I=ut(s,S,"vertex"),R=ut(s,k,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(_,35715),"gl.getProgramInfoLog",C,I,R)}else""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==M&&""!==A||(D=!1);D&&(this.diagnostics={runnable:O,material:r,programLog:C,vertexShader:{log:M,prefix:m},fragmentShader:{log:A,prefix:g}})}s.deleteShader(S),s.deleteShader(k);var P;this.getUniforms=function(){return void 0===P&&(P=new it(s,_)),P};var L;return this.getAttributes=function(){return void 0===L&&(L=dt(s,_)),L},this.destroy=function(){s.deleteProgram(_),this.program=void 0},this.name=i.name,this.id=rl++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=S,this.fragmentShader=k,this}function xt(e,t,n){function r(e){var t=e.skeleton,r=t.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function i(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Zu,n===Zu&&t&&(n=ec),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,s,u,c,l,h){var p=a[t.type],f=h.isSkinnedMesh?r(h):0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var m=e.getRenderTarget();return{shaderID:p,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:i(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:i(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:i(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:i(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Ls||t.envMap.mapping===Ns),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:i(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===cc,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!u,useFog:t.fog,fogExp:u&&u.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Fa,flipSided:t.side===Ua,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<s.length;o++)r.push(n[s[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(r,i,a,s){for(var u,c=0,l=o.length;c<l;c++){var h=o[c];if(h.code===s){u=h,++u.usedTimes;break}}return void 0===u&&(u=new _t(e,t,s,r,i,a,n),o.push(u)),u},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function wt(){function e(e){var t=i.get(e);return void 0===t&&(t={},i.set(e,t)),t}function t(e){i.delete(e)}function n(e,t,n){i.get(e)[t]=n}function r(){i=new WeakMap}var i=new WeakMap;return{get:e,remove:t,update:n,dispose:r}}function Tt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Et(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function St(){function e(){a=0,s.length=0,u.length=0}function t(e,t,n,r,i,s){var u=o[a];return void 0===u?(u={id:e.id,object:e,geometry:t,material:n,program:n.program||c,groupOrder:r,renderOrder:e.renderOrder,z:i,group:s},o[a]=u):(u.id=e.id,u.object=e,u.geometry=t,u.material=n,u.program=n.program||c,u.groupOrder=r,u.renderOrder=e.renderOrder,u.z=i,u.group=s),a++,u}function n(e,n,r,i,o,a){var c=t(e,n,r,i,o,a);(!0===r.transparent?u:s).push(c)}function r(e,n,r,i,o,a){var c=t(e,n,r,i,o,a);(!0===r.transparent?u:s).unshift(c)}function i(){s.length>1&&s.sort(Tt),u.length>1&&u.sort(Et)}var o=[],a=0,s=[],u=[],c={id:-1};return{opaque:s,transparent:u,init:e,push:n,unshift:r,sort:i}}function kt(){function e(t){var n=t.target;n.removeEventListener("dispose",e),delete r[n.id]}function t(t,n){var i,o=r[t.id];return void 0===o?(i=new St,r[t.id]={},r[t.id][n.id]=i,t.addEventListener("dispose",e)):void 0===(i=o[n.id])&&(i=new St,o[n.id]=i),i}function n(){r={}}var r={};return{get:t,dispose:n}}function Ct(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new a,color:new x,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new a,direction:new a,color:new x,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new a,color:new x,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new x,groundColor:new x};break;case"RectAreaLight":n={color:new x,position:new a,halfWidth:new a,halfHeight:new a}}return e[t.id]=n,n}}}function Mt(){function e(e,r,a){for(var u=0,c=0,l=0,h=0;h<9;h++)n.probe[h].set(0,0,0);for(var p=0,f=0,d=0,m=0,g=0,v=a.matrixWorldInverse,h=0,y=e.length;h<y;h++){var b=e[h],_=b.color,x=b.intensity,w=b.distance,T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*x,c+=_.g*x,l+=_.b*x;else if(b.isLightProbe)for(var E=0;E<9;E++)n.probe[E].addScaledVector(b.sh.coefficients[E],x);else if(b.isDirectionalLight){var S=t.get(b);if(S.color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),S.shadow=b.castShadow,b.castShadow){var k=b.shadow;S.shadowBias=k.bias,S.shadowRadius=k.radius,S.shadowMapSize=k.mapSize}n.directionalShadowMap[p]=T,n.directionalShadowMatrix[p]=b.shadow.matrix,n.directional[p]=S,p++}else if(b.isSpotLight){var S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(_).multiplyScalar(x),S.distance=w,S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){var k=b.shadow;S.shadowBias=k.bias,S.shadowRadius=k.radius,S.shadowMapSize=k.mapSize}n.spotShadowMap[d]=T,n.spotShadowMatrix[d]=b.shadow.matrix,n.spot[d]=S,d++}else if(b.isRectAreaLight){var S=t.get(b);S.color.copy(_).multiplyScalar(x),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),s.identity(),o.copy(b.matrixWorld),o.premultiply(v),s.extractRotation(o),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),n.rectArea[m]=S,m++}else if(b.isPointLight){var S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){var k=b.shadow;S.shadowBias=k.bias,S.shadowRadius=k.radius,S.shadowMapSize=k.mapSize,S.shadowCameraNear=k.camera.near,S.shadowCameraFar=k.camera.far}n.pointShadowMap[f]=T,n.pointShadowMatrix[f]=b.shadow.matrix,n.point[f]=S,f++}else if(b.isHemisphereLight){var S=t.get(b);S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(x),S.groundColor.copy(b.groundColor).multiplyScalar(x),n.hemi[g]=S,g++}}n.ambient[0]=u,n.ambient[1]=c,n.ambient[2]=l;var C=n.hash;C.directionalLength===p&&C.pointLength===f&&C.spotLength===d&&C.rectAreaLength===m&&C.hemiLength===g&&C.shadowsLength===r.length||(n.directional.length=p,n.spot.length=d,n.rectArea.length=m,n.point.length=f,n.hemi.length=g,C.directionalLength=p,C.pointLength=f,C.spotLength=d,C.rectAreaLength=m,C.hemiLength=g,C.shadowsLength=r.length,n.version=il++)}for(var t=new Ct,n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;r<9;r++)n.probe.push(new a);var i=new a,o=new p,s=new p;return{setup:e,state:n}}function At(){function e(){o.length=0,a.length=0}function t(e){o.push(e)}function n(e){a.push(e)}function r(e){i.setup(o,a,e)}var i=new Mt,o=[],a=[];return{init:e,state:{lightsArray:o,shadowsArray:a,lights:i},setupLights:r,pushLight:t,pushShadow:n}}function Ot(){function e(t){var n=t.target;n.removeEventListener("dispose",e),delete r[n.id]}function t(t,n){var i;return void 0===r[t.id]?(i=new At,r[t.id]={},r[t.id][n.id]=i,t.addEventListener("dispose",e)):void 0===r[t.id][n.id]?(i=new At,r[t.id][n.id]=i):i=r[t.id][n.id],i}function n(){r={}}var r={};return{get:t,dispose:n}}function Dt(e){k.call(this),this.type="MeshDepthMaterial",this.depthPacking=ac,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function It(e){k.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Rt(e,t,n){function r(t,n,r,i,o,a){var s=t.geometry,u=null,c=b,l=t.customDepthMaterial;if(r&&(c=_,l=t.customDistanceMaterial),l)u=l;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var p=t.isSkinnedMesh&&n.skinning,f=0;h&&(f|=g),p&&(f|=v),u=c[f]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var d=u.uuid,m=n.uuid,y=x[d];void 0===y&&(y={},x[d]=y);var T=y[m];void 0===T&&(T=u.clone(),y[m]=T),u=T}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:w[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function o(n,i,a,u){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||s.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var c=t.update(n),l=n.material;if(Array.isArray(l))for(var h=c.groups,p=0,f=h.length;p<f;p++){var d=h[p],g=l[d.materialIndex];if(g&&g.visible){var v=r(n,g,u,m,a.near,a.far);e.renderBufferDirect(a,null,c,v,n,d)}}else if(l.visible){var v=r(n,l,u,m,a.near,a.far);e.renderBufferDirect(a,null,c,v,n,null)}}for(var y=n.children,b=0,_=y.length;b<_;b++)o(y[b],i,a,u)}}for(var s=new ee,u=new p,h=new i,f=new i(n,n),d=new a,m=new a,g=1,v=2,y=1+(g|v),b=new Array(y),_=new Array(y),x={},w={0:Ua,1:Na,2:Fa},T=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],E=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],S=[new c,new c,new c,new c,new c,new c],k=0;k!==y;++k){var C=0!==(k&g),M=0!==(k&v),A=new Dt({depthPacking:sc,morphTargets:C,skinning:M});b[k]=A;var O=new It({morphTargets:C,skinning:M});_[k]=O}var D=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Pa,this.render=function(t,n,r){if(!1!==D.enabled&&(!1!==D.autoUpdate||!1!==D.needsUpdate)&&0!==t.length){var i=e.getRenderTarget(),a=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),p=e.state;p.setBlending(Ha),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var g,v=0,y=t.length;v<y;v++){var b=t[v],_=b.shadow,x=b&&b.isPointLight;if(void 0!==_){var w=_.camera;if(h.copy(_.mapSize),h.min(f),x){var k=h.x,C=h.y;S[0].set(2*k,C,k,C),S[1].set(0,C,k,C),S[2].set(3*k,C,k,C),S[3].set(k,C,k,C),S[4].set(3*k,0,k,C),S[5].set(k,0,k,C),h.x*=4,h.y*=2}if(null===_.map){var M={minFilter:js,magFilter:js,format:lu};_.map=new l(h.x,h.y,M),_.map.texture.name=b.name+".shadowMap",w.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(b);var A=_.map,O=_.matrix;m.setFromMatrixPosition(b.matrixWorld),w.position.copy(m),x?(g=6,O.makeTranslation(-m.x,-m.y,-m.z)):(g=1,d.setFromMatrixPosition(b.target.matrixWorld),w.lookAt(d),w.updateMatrixWorld(),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(w.projectionMatrix),O.multiply(w.matrixWorldInverse)),e.setRenderTarget(A),e.clear();for(var I=0;I<g;I++){if(x){d.copy(w.position),d.add(T[I]),w.up.copy(E[I]),w.lookAt(d),w.updateMatrixWorld();var R=S[I];p.viewport(R)}u.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),s.setFromMatrix(u),o(n,r,w,x)}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}D.needsUpdate=!1,e.setRenderTarget(i,a,c)}}}function Pt(e,t,n,r){function i(){var t=!1,n=new c,r=null,i=new c(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function o(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?f(2929):d(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ps:e.depthFunc(512);break;case fs:e.depthFunc(519);break;case ds:e.depthFunc(513);break;case ms:e.depthFunc(515);break;case gs:e.depthFunc(514);break;case vs:e.depthFunc(518);break;case ys:e.depthFunc(516);break;case bs:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function a(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){e?f(2960):d(2960)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}function s(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}function u(){for(var e=0,t=N.length;e<t;e++)N[e]=0}function l(e){h(e,0)}function h(n,i){if(N[n]=1,0===U[n]&&(e.enableVertexAttribArray(n),U[n]=1),F[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),F[n]=i}}function p(){for(var t=0,n=U.length;t!==n;++t)U[t]!==N[t]&&(e.disableVertexAttribArray(t),U[t]=0)}function f(t){!0!==B[t]&&(e.enable(t),B[t]=!0)}function d(t){!1!==B[t]&&(e.disable(t),B[t]=!1)}function m(){if(null===j&&(j=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)j.push(n[r]);return j}function g(t){return G!==t&&(e.useProgram(t),G=t,!0)}function v(t,r,i,o,a,s,u,c){if(t===Ha)return void(V&&(d(3042),V=!1));if(V||(f(3042),V=!0),t===Ka)a=a||r,s=s||i,u=u||o,r===H&&a===Y||(e.blendEquationSeparate(n.convert(r),n.convert(a)),H=r,Y=a),i===W&&o===q&&s===X&&u===K||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),W=i,q=o,X=s,K=u),z=t,Q=null;else if(t!==z||c!==Q){if(H===Qa&&Y===Qa||(e.blendEquation(32774),H=Qa,Y=Qa),c)switch(t){case Wa:e.blendFuncSeparate(1,771,1,771);break;case qa:e.blendFunc(1,1);break;case Ya:e.blendFuncSeparate(0,0,769,771);break;case Xa:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Wa:e.blendFuncSeparate(770,771,1,771);break;case qa:e.blendFunc(770,1);break;case Ya:e.blendFunc(0,769);break;case Xa:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}W=null,q=null,X=null,K=null,z=t,Q=c}}function y(e,t){e.side===Fa?d(2884):f(2884);var n=e.side===Ua;t&&(n=!n),b(n),e.blending===Wa&&!1===e.transparent?v(Ha):v(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),R.setFunc(e.depthFunc),R.setTest(e.depthTest),R.setMask(e.depthWrite),I.setMask(e.colorWrite);var r=e.stencilWrite;P.setTest(r),r&&(P.setFunc(e.stencilFunc,e.stencilRef,e.stencilMask),P.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),w(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function b(t){J!==t&&(t?e.frontFace(2304):e.frontFace(2305),J=t)}function _(t){t!==Ca?(f(2884),t!==Z&&(t===Ma?e.cullFace(1029):t===Aa?e.cullFace(1028):e.cullFace(1032))):d(2884),Z=t}function x(t){t!==$&&(re&&e.lineWidth(t),$=t)}function w(t,n,r){t?(f(32823),ee===n&&te===r||(e.polygonOffset(n,r),ee=n,te=r)):d(32823)}function T(e){e?f(3089):d(3089)}function E(t){void 0===t&&(t=33984+ne-1),ae!==t&&(e.activeTexture(t),ae=t)}function S(t,n){null===ae&&E();var r=se[ae];void 0===r&&(r={type:void 0,texture:void 0},se[ae]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||le[t]),r.type=t,r.texture=n)}function k(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function C(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function M(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function A(t){!1===ue.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ue.copy(t))}function O(t){!1===ce.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ce.copy(t))}function D(){for(var t=0;t<U.length;t++)1===U[t]&&(e.disableVertexAttribArray(t),U[t]=0);B={},j=null,ae=null,se={},G=null,z=null,J=null,Z=null,I.reset(),R.reset(),P.reset()}var I=new i,R=new o,P=new a,L=e.getParameter(34921),N=new Uint8Array(L),U=new Uint8Array(L),F=new Uint8Array(L),B={},j=null,G=null,V=null,z=null,H=null,W=null,q=null,Y=null,X=null,K=null,Q=!1,J=null,Z=null,$=null,ee=null,te=null,ne=e.getParameter(35661),re=!1,ie=0,oe=e.getParameter(7938);-1!==oe.indexOf("WebGL")?(ie=parseFloat(/^WebGL\ ([0-9])/.exec(oe)[1]),re=ie>=1):-1!==oe.indexOf("OpenGL ES")&&(ie=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(oe)[1]),re=ie>=2);var ae=null,se={},ue=new c,ce=new c,le={};return le[3553]=s(3553,3553,1),le[34067]=s(34067,34069,6),I.setClear(0,0,0,1),R.setClear(1),P.setClear(0),f(2929),R.setFunc(ms),b(!1),_(Ma),f(2884),v(Ha),{buffers:{color:I,depth:R,stencil:P},initAttributes:u,enableAttribute:l,enableAttributeAndDivisor:h,disableUnusedAttributes:p,enable:f,disable:d,getCompressedTextureFormats:m,useProgram:g,setBlending:v,setMaterial:y,setFlipSided:b,setCullFace:_,setLineWidth:x,setPolygonOffset:w,setScissorTest:T,activeTexture:E,bindTexture:S,compressedTexImage2D:k,texImage2D:C,texImage3D:M,scissor:A,viewport:O,reset:D}}function Lt(e,t,n,r,i,o,a){function s(e,t){return V?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?kc.floorPowerOfTwo:Math.floor,a=o(i*e.width),u=o(i*e.height);void 0===j&&(j=s(a,u));var c=n?s(a,u):j;c.width=a,c.height=u;return c.getContext("2d").drawImage(e,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+u+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function c(e){return kc.isPowerOfTwo(e.width)&&kc.isPowerOfTwo(e.height)}function l(e){return!i.isWebGL2&&(e.wrapS!==Fs||e.wrapT!==Fs||e.minFilter!==js&&e.minFilter!==Ws)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==js&&e.minFilter!==Ws}function p(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function f(e,n){if(!i.isWebGL2)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function d(e){return e===js||e===Gs||e===zs?9728:9729}function m(e){var t=e.target;t.removeEventListener("dispose",m),v(t),t.isVideoTexture&&delete G[t.id],a.memory.textures--}function g(e){var t=e.target;t.removeEventListener("dispose",g),y(t),a.memory.textures--}function v(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}function y(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function b(){z=0}function _(){var e=z;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),z+=1,e}function x(e,t){var i=r.get(e);if(e.isVideoTexture&&U(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void M(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function w(e,t){var i=r.get(e);if(e.version>0&&i.__version!==e.version)return void M(i,e,t);n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture)}function T(e,t){var i=r.get(e);if(e.version>0&&i.__version!==e.version)return void M(i,e,t);n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture)}function E(t,a){var s=r.get(t);if(6===t.image.length)if(t.version>0&&s.__version!==t.version){C(s,t),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,d=t.image[0]&&t.image[0].isDataTexture,m=[],g=0;g<6;g++)m[g]=l||d?d?t.image[g].image:t.image[g]:u(t.image[g],!1,!0,i.maxCubemapSize);var v=m[0],y=c(v)||i.isWebGL2,b=o.convert(t.format),_=o.convert(t.type),x=f(b,_);k(34067,t,y);for(var g=0;g<6;g++)if(l)for(var w,T=m[g].mipmaps,E=0,S=T.length;E<S;E++)w=T[E],t.format!==lu&&t.format!==cu?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+g,E,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,E,x,w.width,w.height,0,b,_,w.data);else d?n.texImage2D(34069+g,0,x,m[g].width,m[g].height,0,b,_,m[g].data):n.texImage2D(34069+g,0,x,b,_,m[g]);s.__maxMipLevel=l?T.length-1:0,h(t,y)&&p(34067,t,v.width,v.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function S(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function k(n,a,s){var u;if(s?(e.texParameteri(n,10242,o.convert(a.wrapS)),e.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,o.convert(a.wrapR)),e.texParameteri(n,10240,o.convert(a.magFilter)),e.texParameteri(n,10241,o.convert(a.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Fs&&a.wrapT===Fs||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,d(a.magFilter)),e.texParameteri(n,10241,d(a.minFilter)),a.minFilter!==js&&a.minFilter!==Ws&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===nu&&null===t.get("OES_texture_float_linear"))return;if(a.type===ru&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function C(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++)}function M(t,r,a){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),C(t,r),n.activeTexture(33984+a),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var d=l(r)&&!1===c(r.image),m=u(r.image,d,!1,i.maxTextureSize),g=c(m)||i.isWebGL2,v=o.convert(r.format),y=o.convert(r.type),b=f(v,y);k(s,r,g);var _,x=r.mipmaps;if(r.isDepthTexture){if(b=6402,r.type===nu){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=36012}else i.isWebGL2&&(b=33189);r.format===du&&6402===b&&r.type!==$s&&r.type!==tu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=$s,y=o.convert(r.type)),r.format===mu&&(b=34041,r.type!==su&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=su,y=o.convert(r.type))),n.texImage2D(3553,0,b,m.width,m.height,0,v,y,null)}else if(r.isDataTexture)if(x.length>0&&g){for(var w=0,T=x.length;w<T;w++)_=x[w],n.texImage2D(3553,w,b,_.width,_.height,0,v,y,_.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,b,m.width,m.height,0,v,y,m.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var w=0,T=x.length;w<T;w++)_=x[w],r.format!==lu&&r.format!==cu?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(3553,w,b,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,b,_.width,_.height,0,v,y,_.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,b,m.width,m.height,m.depth,0,v,y,m.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,b,m.width,m.height,m.depth,0,v,y,m.data),t.__maxMipLevel=0;else if(x.length>0&&g){for(var w=0,T=x.length;w<T;w++)_=x[w],n.texImage2D(3553,w,b,v,y,_);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,b,v,y,m),t.__maxMipLevel=0;h(r,g)&&p(3553,r,m.width,m.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function A(t,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),l=f(u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=N(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var i=N(n);e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),u=f(a,s);if(r){var i=N(n);e.renderbufferStorageMultisample(36161,i,u,n.width,n.height)}else e.renderbufferStorage(36161,u,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===du)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==mu)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}function I(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");D(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),O(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function R(t){var s=r.get(t),u=r.get(t.texture);t.addEventListener("dispose",g),u.__webglTexture=e.createTexture(),a.memory.textures++;var l=!0===t.isWebGLRenderTargetCube,d=!0===t.isWebGLMultisampleRenderTarget,m=c(t)||i.isWebGL2;if(l){s.__webglFramebuffer=[];for(var v=0;v<6;v++)s.__webglFramebuffer[v]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),d)if(i.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var y=o.convert(t.texture.format),b=o.convert(t.texture.type),_=f(y,b),x=N(t);e.renderbufferStorageMultisample(36161,x,_,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),O(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,u.__webglTexture),k(34067,t.texture,m);for(var v=0;v<6;v++)A(s.__webglFramebuffer[v],t,36064,34069+v);h(t.texture,m)&&p(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,u.__webglTexture),k(3553,t.texture,m),A(s.__webglFramebuffer,t,36064,3553),h(t.texture,m)&&p(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&I(t)}function P(e){var t=e.texture;if(h(t,c(e)||i.isWebGL2)){var o=e.isWebGLRenderTargetCube?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(o,a),p(o,t,e.width,e.height),n.bindTexture(o,null)}}function L(t){if(t.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var o=t.width,a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function N(e){return i.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,e.samples):0}function U(e){var t=e.id,n=a.render.frame;G[t]!==n&&(G[t]=n,e.update())}function F(e,t){e&&e.isWebGLRenderTarget&&(!1===H&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),H=!0),e=e.texture),x(e,t)}function B(e,t){e&&e.isWebGLRenderTargetCube&&(!1===W&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),W=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):S(e,t)}var j,G={},V="undefined"!==typeof OffscreenCanvas,z=0,H=!1,W=!1;this.allocateTextureUnit=_,this.resetTextureUnits=b,this.setTexture2D=x,this.setTexture2DArray=w,this.setTexture3D=T,this.setTextureCube=E,this.setTextureCubeDynamic=S,this.setupRenderTarget=R,this.updateRenderTargetMipmap=P,this.updateMultisampleRenderTarget=L,this.safeSetTexture2D=F,this.safeSetTextureCube=B}function Nt(e,t,n){function r(e){var r;if(e===Us)return 10497;if(e===Fs)return 33071;if(e===Bs)return 33648;if(e===js)return 9728;if(e===Gs)return 9984;if(e===zs)return 9986;if(e===Ws)return 9729;if(e===qs)return 9985;if(e===Xs)return 9987;if(e===Qs)return 5121;if(e===iu)return 32819;if(e===ou)return 32820;if(e===au)return 33635;if(e===Js)return 5120;if(e===Zs)return 5122;if(e===$s)return 5123;if(e===eu)return 5124;if(e===tu)return 5125;if(e===nu)return 5126;if(e===ru){if(n.isWebGL2)return 5131;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(e===uu)return 6406;if(e===cu)return 6407;if(e===lu)return 6408;if(e===hu)return 6409;if(e===pu)return 6410;if(e===du)return 6402;if(e===mu)return 34041;if(e===gu)return 6403;if(e===Qa)return 32774;if(e===Ja)return 32778;if(e===Za)return 32779;if(e===ts)return 0;if(e===ns)return 1;if(e===rs)return 768;if(e===is)return 769;if(e===os)return 770;if(e===as)return 771;if(e===ss)return 772;if(e===us)return 773;if(e===cs)return 774;if(e===ls)return 775;if(e===hs)return 776;if((e===vu||e===yu||e===bu||e===_u)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(e===vu)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===yu)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===bu)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===_u)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===xu||e===wu||e===Tu||e===Eu)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===xu)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===wu)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Tu)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Eu)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Su&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((e===ku||e===Cu||e===Mu||e===Au||e===Ou||e===Du||e===Iu||e===Ru||e===Pu||e===Lu||e===Nu||e===Uu||e===Fu||e===Bu)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return e;if(e===$a||e===es){if(n.isWebGL2){if(e===$a)return 32775;if(e===es)return 32776}if(null!==(r=t.get("EXT_blend_minmax"))){if(e===$a)return r.MIN_EXT;if(e===es)return r.MAX_EXT}}if(e===su){if(n.isWebGL2)return 34042;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function Ut(){m.call(this),this.type="Group"}function Ft(e){K.call(this),this.cameras=e||[]}function Bt(e,t,n){ol.setFromMatrixPosition(t.matrixWorld),al.setFromMatrixPosition(n.matrixWorld);var r=ol.distanceTo(al),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],p=a*l,f=a*h,d=r/(-l+h),m=d*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=a+d,v=s+d,y=p-m,b=f+(r-m),_=u*s/v*g,x=c*s/v*g;e.projectionMatrix.makePerspective(y,b,_,x,g,v)}function jt(e){function t(){return null!==d&&!0===d.isPresenting}function n(){if(t()){var n=d.getEyeParameters("left");l=2*n.renderWidth*_,h=n.renderHeight*_,M=e.getPixelRatio(),e.getSize(A),e.setDrawingBufferSize(l,h,1),S.viewport.set(0,0,l/2,h),k.viewport.set(l/2,0,l/2,h),D.start(),f.dispatchEvent({type:"sessionstart"})}else f.enabled&&e.setDrawingBufferSize(A.width,A.height,M),D.stop(),f.dispatchEvent({type:"sessionend"})}function r(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("HTC Vive Focus")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}function s(){for(var e=0;e<v.length;e++){var t=v[e],n=r(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(y),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var o="Daydream Controller"===n.id?0:1;void 0===O[e]&&(O[e]=!1),O[e]!==n.buttons[o].pressed&&(O[e]=n.buttons[o].pressed,!0===O[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}function u(e,t){null!==t&&4===t.length&&e.set(t[0]*l,t[1]*h,t[2]*l,t[3]*h)}var l,h,f=this,d=null,m=null,g=null,v=[],y=new p,b=new p,_=1,x="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(m=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var w=new p,T=new o,E=new a,S=new K;S.viewport=new c,S.layers.enable(1);var k=new K;k.viewport=new c,k.layers.enable(2);var C=new Ft([S,k]);C.layers.enable(1),C.layers.enable(2);var M,A=new i,O=[];this.enabled=!1,this.getController=function(e){var t=v[e];return void 0===t&&(t=new Ut,t.matrixAutoUpdate=!1,t.visible=!1,v[e]=t),t},this.getDevice=function(){return d},this.setDevice=function(e){void 0!==e&&(d=e),D.setContext(e)},this.setFramebufferScaleFactor=function(e){_=e},this.setReferenceSpaceType=function(e){x=e},this.setPoseTarget=function(e){void 0!==e&&(g=e)},this.getCamera=function(e){var n="local-floor"===x?1.6:0;if(!1===t())return e.position.set(0,n,0),e.rotation.set(0,0,0),e;if(d.depthNear=e.near,d.depthFar=e.far,d.getFrameData(m),"local-floor"===x){var r=d.stageParameters;r?y.fromArray(r.sittingToStandingTransform):y.makeTranslation(0,n,0)}var i=m.pose,o=null!==g?g:e;o.matrix.copy(y),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==i.orientation&&(T.fromArray(i.orientation),o.quaternion.multiply(T)),null!==i.position&&(T.setFromRotationMatrix(y),E.fromArray(i.position),E.applyQuaternion(T),o.position.add(E)),o.updateMatrixWorld(),S.near=e.near,k.near=e.near,S.far=e.far,k.far=e.far,S.matrixWorldInverse.fromArray(m.leftViewMatrix),k.matrixWorldInverse.fromArray(m.rightViewMatrix),b.getInverse(y),"local-floor"===x&&(S.matrixWorldInverse.multiply(b),k.matrixWorldInverse.multiply(b));var a=o.parent;null!==a&&(w.getInverse(a.matrixWorld),S.matrixWorldInverse.multiply(w),k.matrixWorldInverse.multiply(w)),S.matrixWorld.getInverse(S.matrixWorldInverse),k.matrixWorld.getInverse(k.matrixWorldInverse),S.projectionMatrix.fromArray(m.leftProjectionMatrix),k.projectionMatrix.fromArray(m.rightProjectionMatrix),Bt(C,S,k);var c=d.getLayers();if(c.length){var l=c[0];u(S.viewport,l.leftBounds),u(k.viewport,l.rightBounds)}return s(),C},this.getStandingMatrix=function(){return y},this.isPresenting=t;var D=new te;this.setAnimationLoop=function(e){D.setAnimationLoop(e),t()&&D.start()},this.submitFrame=function(){t()&&d.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",n)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Gt(e,t){function n(){return null!==l&&null!==h}function r(e){for(var t=0;t<m.length;t++)g[t]===e.inputSource&&m[t].dispatchEvent({type:e.type})}function i(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),x.stop(),u.dispatchEvent({type:"sessionend"})}function o(e){h=e,x.setContext(l),x.start(),u.dispatchEvent({type:"sessionstart"})}function a(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}function s(t,n){if(null!==(d=n.getViewerPose(h))){var r=d.views,i=l.renderState.baseLayer;e.setFramebuffer(i.framebuffer);for(var o=0;o<r.length;o++){var a=r[o],s=i.getViewport(a),u=a.transform.inverse.matrix,c=b.cameras[o];c.matrix.fromArray(u).getInverse(c.matrix),c.projectionMatrix.fromArray(a.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===o&&b.matrix.copy(c.matrix)}}for(var o=0;o<m.length;o++){var p=m[o],f=g[o];if(f){var v=n.getPose(f.targetRaySpace,h);if(null!==v){p.matrix.fromArray(v.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.visible=!0;continue}}p.visible=!1}_&&_(t)}var u=this,l=null,h=null,f="local-floor",d=null,m=[],g=[],v=new K;v.layers.enable(1),v.viewport=new c;var y=new K;y.layers.enable(2),y.viewport=new c;var b=new Ft([v,y]);b.layers.enable(1),b.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=m[e];return void 0===t&&(t=new Ut,t.matrixAutoUpdate=!1,t.visible=!1,m[e]=t),t},this.setFramebufferScaleFactor=function(e){},this.setReferenceSpaceType=function(e){f=e},this.getSession=function(){return l},this.setSession=function(e){null!==(l=e)&&(l.addEventListener("select",r),l.addEventListener("selectstart",r),l.addEventListener("selectend",r),l.addEventListener("end",i),l.updateRenderState({baseLayer:new XRWebGLLayer(l,t)}),l.requestReferenceSpace(f).then(o),g=l.inputSources,l.addEventListener("inputsourceschange",function(){g=l.inputSources,console.log(g);for(var e=0;e<m.length;e++){m[e].userData.inputSource=g[e]}}))},this.getCamera=function(e){if(n()){var t=e.parent,r=b.cameras;a(b,t);for(var i=0;i<r.length;i++)a(r[i],t);e.matrixWorld.copy(b.matrixWorld);for(var o=e.children,i=0,s=o.length;i<s;i++)o[i].updateMatrixWorld(!0);return Bt(b,v,y),b}return e},this.isPresenting=n;var _=null,x=new te;x.setAnimationLoop(s),this.setAnimationLoop=function(e){_=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new p},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Vt(e){function t(){return null===fe?ke:1}function n(){Ue=new ce(K),Fe=new se(K,Ue,e),Fe.isWebGL2||(Ue.get("WEBGL_depth_texture"),Ue.get("OES_texture_float"),Ue.get("OES_texture_half_float"),Ue.get("OES_texture_half_float_linear"),Ue.get("OES_standard_derivatives"),Ue.get("OES_element_index_uint"),Ue.get("ANGLE_instanced_arrays")),Ue.get("OES_texture_float_linear"),$e=new Nt(K,Ue,Fe),Be=new Pt(K,Ue,$e,Fe),Be.scissor(we.copy(Me).multiplyScalar(ke).floor()),Be.viewport(xe.copy(Ce).multiplyScalar(ke).floor()),je=new pe(K),Ge=new wt,Ve=new Lt(K,Ue,Be,Ge,Fe,$e,je),ze=new ne(K),He=new le(K,ze,je),We=new me(He,je),Qe=new de(K),qe=new xt(Q,Ue,Fe),Ye=new kt,Xe=new Ot,Ke=new oe(Q,Be,We,V),Je=new ae(K,Ue,je,Fe),Ze=new he(K,Ue,je,Fe),je.programs=qe.programs,Q.capabilities=Fe,Q.extensions=Ue,Q.properties=Ge,Q.renderLists=Ye,Q.state=Be,Q.info=je}function r(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),J=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),J=!1,n()}function s(e){var t=e.target;t.removeEventListener("dispose",s),u(t)}function u(e){l(e),Ge.remove(e)}function l(e){var t=Ge.get(e).program;e.program=void 0,void 0!==t&&qe.releaseProgram(t)}function h(e,t){e.render(function(e){Q.renderBufferImmediate(e,t)})}function f(e,t,n){if(n&&n.isInstancedBufferGeometry&&!Fe.isWebGL2&&null===Ue.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Be.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var c=u.normalized,l=u.itemSize,h=ze.get(u);if(void 0===h)continue;var p=h.buffer,f=h.type,d=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,g=m.stride,v=u.offset;m&&m.isInstancedInterleavedBuffer?(Be.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):Be.enableAttribute(s),K.bindBuffer(34962,p),K.vertexAttribPointer(s,l,f,c,g*d,v*d)}else u.isInstancedBufferAttribute?(Be.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Be.enableAttribute(s),K.bindBuffer(34962,p),K.vertexAttribPointer(s,l,f,c,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:K.vertexAttrib2fv(s,y);break;case 3:K.vertexAttrib3fv(s,y);break;case 4:K.vertexAttrib4fv(s,y);break;default:K.vertexAttrib1fv(s,y)}}}}Be.disableUnusedAttributes()}function d(e){et.isPresenting()||nt&&nt(e)}function m(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)X.pushLight(e),e.castShadow&&X.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Oe.intersectsSprite(e)){r&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Pe);var i=We.update(e),o=e.material;o.visible&&Y.push(e,i,o,n,Le.z,null)}}else if(e.isImmediateRenderObject)r&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Pe),Y.push(e,null,e.material,n,Le.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Oe.intersectsObject(e))){r&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Pe);var i=We.update(e),o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&Y.push(e,i,l,n,Le.z,c)}else o.visible&&Y.push(e,i,o,n,Le.z,null)}for(var h=e.children,s=0,u=h.length;s<u;s++)m(h[s],t,n,r)}}function g(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){_e=n;for(var h=n.cameras,p=0,f=h.length;p<f;p++){var d=h[p];s.layers.test(d.layers)&&(Be.viewport(xe.copy(d.viewport)),X.setupLights(d),v(s,t,d,u,c,l))}}else _e=null,v(s,t,n,u,c,l)}}function v(e,t,n,r,i,o){if(e.onBeforeRender(Q,t,n,r,i,o),X=Xe.get(t,_e||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){Be.setMaterial(i);var a=b(n,t.fog,i,e);ye.geometry=null,ye.program=null,ye.wireframe=!1,h(e,a)}else Q.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(Q,t,n,r,i,o),X=Xe.get(t,_e||n)}function y(e,t,n){var r=Ge.get(e),i=X.state.lights,o=X.state.shadowsArray,a=i.state.version,u=qe.getParameters(e,i.state,o,t,De.numPlanes,De.numIntersection,n),c=qe.getProgramCode(e,u),h=r.program,p=!0;if(void 0===h)e.addEventListener("dispose",s);else if(h.code!==c)l(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,p=!1;else{if(void 0!==u.shaderID)return;p=!1}if(p){if(u.shaderID){var f=qc[u.shaderID];r.shader={name:e.type,uniforms:W(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,Q),c=qe.getProgramCode(e,u),h=qe.acquireProgram(e,r.shader,u,c),r.program=h,e.program=h}var d=h.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<Q.maxMorphTargets;m++)d["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var m=0;m<Q.maxMorphNormals;m++)d["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var g=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=De.numPlanes,r.numIntersection=De.numIntersection,g.clippingPlanes=De.uniform),r.fog=t,r.lightsStateVersion=a,e.lights&&(g.ambientLightColor.value=i.state.ambient,g.lightProbe.value=i.state.probe,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),y=it.seqWithValue(v.seq,g);r.uniformsList=y}function b(e,t,n,r){Ve.resetTextureUnits();var i=Ge.get(n),o=X.state.lights;if(Ie&&(Re||e!==be)){var a=e===be&&n.id===ve;De.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,a)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===De.numPlanes&&i.numIntersection===De.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(y(n,t,r),n.needsUpdate=!1);var s=!1,u=!1,c=!1,l=i.program,h=l.getUniforms(),p=i.shader.uniforms;if(Be.useProgram(l.program)&&(s=!0,u=!0,c=!0),n.id!==ve&&(ve=n.id,u=!0),s||be!==e){if(h.setValue(K,"projectionMatrix",e.projectionMatrix),Fe.logarithmicDepthBuffer&&h.setValue(K,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),be!==e&&(be=e,u=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var f=h.map.cameraPosition;void 0!==f&&f.setValue(K,Le.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(K,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){h.setOptional(K,r,"bindMatrix"),h.setOptional(K,r,"bindMatrixInverse");var d=r.skeleton;if(d){var m=d.bones;if(Fe.floatVertexTextures){if(void 0===d.boneTexture){var g=Math.sqrt(4*m.length);g=kc.ceilPowerOfTwo(g),g=Math.max(g,4);var v=new Float32Array(g*g*4);v.set(d.boneMatrices);var b=new Z(v,g,g,lu,nu);b.needsUpdate=!0,d.boneMatrices=v,d.boneTexture=b,d.boneTextureSize=g}h.setValue(K,"boneTexture",d.boneTexture,Ve),h.setValue(K,"boneTextureSize",d.boneTextureSize)}else h.setOptional(K,d,"boneMatrices")}}return u&&(h.setValue(K,"toneMappingExposure",Q.toneMappingExposure),h.setValue(K,"toneMappingWhitePoint",Q.toneMappingWhitePoint),n.lights&&L(p,c),t&&n.fog&&S(p,t),n.isMeshBasicMaterial?_(p,n):n.isMeshLambertMaterial?(_(p,n),k(p,n)):n.isMeshPhongMaterial?(_(p,n),n.isMeshToonMaterial?M(p,n):C(p,n)):n.isMeshStandardMaterial?(_(p,n),n.isMeshPhysicalMaterial?O(p,n):A(p,n)):n.isMeshMatcapMaterial?(_(p,n),D(p,n)):n.isMeshDepthMaterial?(_(p,n),I(p,n)):n.isMeshDistanceMaterial?(_(p,n),R(p,n)):n.isMeshNormalMaterial?(_(p,n),P(p,n)):n.isLineBasicMaterial?(x(p,n),n.isLineDashedMaterial&&w(p,n)):n.isPointsMaterial?T(p,n):n.isSpriteMaterial?E(p,n):n.isShadowMaterial&&(p.color.value.copy(n.color),p.opacity.value=n.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=Wc.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=Wc.LTC_2),it.upload(K,i.uniformsList,p,Ve)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(it.upload(K,i.uniformsList,p,Ve),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&h.setValue(K,"center",r.center),h.setValue(K,"modelViewMatrix",r.modelViewMatrix),h.setValue(K,"normalMatrix",r.normalMatrix),h.setValue(K,"modelMatrix",r.matrixWorld),l}function _(e,t){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Ge.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function x(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function w(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function T(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*ke,e.scale.value=.5*Se,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function E(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function S(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function k(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function C(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ua&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ua&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function M(e,t){C(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function A(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ua&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ua&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function O(e,t){A(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}function D(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ua&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ua&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function I(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function R(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function P(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ua&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ua&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function L(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}console.log("THREE.WebGLRenderer",Ea),e=e||{};var N=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),U=void 0!==e.context?e.context:null,F=void 0!==e.alpha&&e.alpha,B=void 0===e.depth||e.depth,j=void 0===e.stencil||e.stencil,G=void 0!==e.antialias&&e.antialias,V=void 0===e.premultipliedAlpha||e.premultipliedAlpha,z=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,H=void 0!==e.powerPreference?e.powerPreference:"default",q=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,Y=null,X=null;this.domElement=N,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Es,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var K,Q=this,J=!1,$=null,re=0,ie=0,fe=null,ge=null,ve=-1,ye={geometry:null,program:null,wireframe:!1},be=null,_e=null,xe=new c,we=new c,Te=null,Ee=N.width,Se=N.height,ke=1,Ce=new c(0,0,Ee,Se),Me=new c(0,0,Ee,Se),Ae=!1,Oe=new ee,De=new ue,Ie=!1,Re=!1,Pe=new p,Le=new a;try{var Ne={alpha:F,depth:B,stencil:j,antialias:G,premultipliedAlpha:V,preserveDrawingBuffer:z,powerPreference:H,failIfMajorPerformanceCaveat:q,xrCompatible:!0};if(N.addEventListener("webglcontextlost",r,!1),N.addEventListener("webglcontextrestored",o,!1),null===(K=U||N.getContext("webgl",Ne)||N.getContext("experimental-webgl",Ne)))throw null!==N.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===K.getShaderPrecisionFormat&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}var Ue,Fe,Be,je,Ge,Ve,ze,He,We,qe,Ye,Xe,Ke,Qe,Je,Ze,$e;n();var et="undefined"!==typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Gt(Q,K):new jt(Q);this.vr=et;var tt=new Rt(Q,We,Fe.maxTextureSize);this.shadowMap=tt,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){var e=Ue.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Ue.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ke},this.setPixelRatio=function(e){void 0!==e&&(ke=e,this.setSize(Ee,Se,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new i),e.set(Ee,Se)},this.setSize=function(e,t,n){if(et.isPresenting())return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");Ee=e,Se=t,N.width=Math.floor(e*ke),N.height=Math.floor(t*ke),!1!==n&&(N.style.width=e+"px",N.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new i),e.set(Ee*ke,Se*ke).floor()},this.setDrawingBufferSize=function(e,t,n){Ee=e,Se=t,ke=n,N.width=Math.floor(e*n),N.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new c),e.copy(xe)},this.getViewport=function(e){return e.copy(Ce)},this.setViewport=function(e,t,n,r){e.isVector4?Ce.set(e.x,e.y,e.z,e.w):Ce.set(e,t,n,r),Be.viewport(xe.copy(Ce).multiplyScalar(ke).floor())},this.getScissor=function(e){return e.copy(Me)},this.setScissor=function(e,t,n,r){e.isVector4?Me.set(e.x,e.y,e.z,e.w):Me.set(e,t,n,r),Be.scissor(we.copy(Me).multiplyScalar(ke).floor())},this.getScissorTest=function(){return Ae},this.setScissorTest=function(e){Be.setScissorTest(Ae=e)},this.getClearColor=function(){return Ke.getClearColor()},this.setClearColor=function(){Ke.setClearColor.apply(Ke,arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha.apply(Ke,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),K.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){N.removeEventListener("webglcontextlost",r,!1),N.removeEventListener("webglcontextrestored",o,!1),Ye.dispose(),Xe.dispose(),Ge.dispose(),We.dispose(),et.dispose(),rt.stop()},this.renderBufferImmediate=function(e,t){Be.initAttributes();var n=Ge.get(e);e.hasPositions&&!n.position&&(n.position=K.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=K.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=K.createBuffer()),e.hasColors&&!n.color&&(n.color=K.createBuffer());var r=t.getAttributes();e.hasPositions&&(K.bindBuffer(34962,n.position),K.bufferData(34962,e.positionArray,35048),Be.enableAttribute(r.position),K.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(K.bindBuffer(34962,n.normal),K.bufferData(34962,e.normalArray,35048),Be.enableAttribute(r.normal),K.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(K.bindBuffer(34962,n.uv),K.bufferData(34962,e.uvArray,35048),Be.enableAttribute(r.uv),K.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(K.bindBuffer(34962,n.color),K.bufferData(34962,e.colorArray,35048),Be.enableAttribute(r.color),K.vertexAttribPointer(r.color,3,5126,!1,0,0)),Be.disableUnusedAttributes(),K.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,o,a){var s=o.isMesh&&o.matrixWorld.determinant()<0;Be.setMaterial(i,s);var u=b(e,n,i,o),c=!1;ye.geometry===r.id&&ye.program===u.id&&ye.wireframe===(!0===i.wireframe)||(ye.geometry=r.id,ye.program=u.id,ye.wireframe=!0===i.wireframe,c=!0),o.morphTargetInfluences&&(Qe.update(o,r,i,u),c=!0);var l=r.index,h=r.attributes.position,p=1;!0===i.wireframe&&(l=He.getWireframeAttribute(r),p=2);var d,m=Je;null!==l&&(d=ze.get(l),m=Ze,m.setIndex(d)),c&&(f(i,u,r),null!==l&&K.bindBuffer(34963,d.buffer));var g=1/0;null!==l?g=l.count:void 0!==h&&(g=h.count);var v=r.drawRange.start*p,y=r.drawRange.count*p,_=null!==a?a.start*p:0,x=null!==a?a.count*p:1/0,w=Math.max(v,_),T=Math.min(g,v+y,_+x)-1,E=Math.max(0,T-w+1);if(0!==E){if(o.isMesh)if(!0===i.wireframe)Be.setLineWidth(i.wireframeLinewidth*t()),m.setMode(1);else switch(o.drawMode){case Ku:m.setMode(4);break;case Qu:m.setMode(5);break;case Ju:m.setMode(6)}else if(o.isLine){var S=i.linewidth;void 0===S&&(S=1),Be.setLineWidth(S*t()),o.isLineSegments?m.setMode(1):o.isLineLoop?m.setMode(2):m.setMode(3)}else o.isPoints?m.setMode(0):o.isSprite&&m.setMode(4);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&m.renderInstances(r,w,E):m.render(w,E)}},this.compile=function(e,t){X=Xe.get(e,t),X.init(),e.traverse(function(e){e.isLight&&(X.pushLight(e),e.castShadow&&X.pushShadow(e))}),X.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)y(t.material[n],e.fog,t);else y(t.material,e.fog,t)})};var nt=null,rt=new te;rt.setAnimationLoop(d),"undefined"!==typeof window&&rt.setContext(window),this.setAnimationLoop=function(e){nt=e,et.setAnimationLoop(e),rt.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!J){ye.geometry=null,ye.program=null,ye.wireframe=!1,ve=-1,be=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),et.enabled&&(t=et.getCamera(t)),X=Xe.get(e,t),X.init(),e.onBeforeRender(Q,e,t,n||fe),Pe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Oe.setFromMatrix(Pe),Re=this.localClippingEnabled,Ie=De.init(this.clippingPlanes,Re,t),Y=Ye.get(e,t),Y.init(),m(e,t,0,Q.sortObjects),!0===Q.sortObjects&&Y.sort(),Ie&&De.beginShadows();var i=X.state.shadowsArray;tt.render(i,e,t),X.setupLights(t),Ie&&De.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),Ke.render(Y,e,t,r);var o=Y.opaque,a=Y.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&g(o,e,t,s),a.length&&g(a,e,t,s)}else o.length&&g(o,e,t),a.length&&g(a,e,t);e.onAfterRender(Q,e,t),null!==fe&&(Ve.updateRenderTargetMipmap(fe),Ve.updateMultisampleRenderTarget(fe)),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1),et.enabled&&et.submitFrame(),Y=null,X=null}},this.setFramebuffer=function(e){$!==e&&K.bindFramebuffer(36160,e),$=e},this.getActiveCubeFace=function(){return re},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return fe},this.setRenderTarget=function(e,t,n){fe=e,re=t,ie=n,e&&void 0===Ge.get(e).__webglFramebuffer&&Ve.setupRenderTarget(e);var r=$,i=!1;if(e){var o=Ge.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?Ge.get(e).__webglMultisampledFramebuffer:o,xe.copy(e.viewport),we.copy(e.scissor),Te=e.scissorTest}else xe.copy(Ce).multiplyScalar(ke).floor(),we.copy(Me).multiplyScalar(ke).floor(),Te=Ae;if(ge!==r&&(K.bindFramebuffer(36160,r),ge=r),Be.viewport(xe),Be.scissor(we),Be.setScissorTest(Te),i){var a=Ge.get(e.texture);K.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Ge.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==ge&&(K.bindFramebuffer(36160,s),u=!0);try{var c=e.texture,l=c.format,h=c.type;if(l!==lu&&$e.convert(l)!==K.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(h!==Qs&&$e.convert(h)!==K.getParameter(35738)&&(h!==nu||!(Fe.isWebGL2||Ue.get("OES_texture_float")||Ue.get("WEBGL_color_buffer_float")))&&(h!==ru||(Fe.isWebGL2?!Ue.get("EXT_color_buffer_float"):!Ue.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===K.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&K.readPixels(t,n,r,i,$e.convert(l),$e.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&K.bindFramebuffer(36160,ge)}}},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=$e.convert(t.format);Ve.setTexture2D(t,0),K.copyTexImage2D(3553,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=$e.convert(n.format),s=$e.convert(n.type);Ve.setTexture2D(n,0),t.isDataTexture?K.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):K.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image)},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function zt(e,t){this.name="",this.color=new x(e),this.density=void 0!==t?t:25e-5}function Ht(e,t,n){this.name="",this.color=new x(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Wt(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function qt(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Yt(e){k.call(this),this.type="SpriteMaterial",this.color=new x(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Xt(e){if(m.call(this),this.type="Sprite",void 0===sl){sl=new j;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Wt(t,5);sl.setIndex([0,1,2,0,2,3]),sl.addAttribute("position",new qt(n,3,0,!1)),sl.addAttribute("uv",new qt(n,2,3,!1))}this.geometry=sl,this.material=void 0!==e?e:new Yt,this.center=new i(.5,.5)}function Kt(){m.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Qt(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),G.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new p,this.bindMatrixInverse=new p}function Jt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new p)}}function Zt(){m.call(this),this.type="Bone"}function $t(e){k.call(this),this.type="LineBasicMaterial",this.color=new x(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function en(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),m.call(this),this.type="Line",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new $t({color:16777215*Math.random()})}function tn(e,t){en.call(this,e,t),this.type="LineSegments"}function nn(e,t){en.call(this,e,t),this.type="LineLoop"}function rn(e){k.call(this),this.type="PointsMaterial",this.color=new x(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function on(e,t){m.call(this),this.type="Points",this.geometry=void 0!==e?e:new j,this.material=void 0!==t?t:new rn({color:16777215*Math.random()}),this.updateMorphTargets()}function an(e,t,n,r,i,o,a,s,c){u.call(this,e,t,n,r,i,o,a,s,c),this.format=void 0!==a?a:cu,this.minFilter=void 0!==o?o:Ws,this.magFilter=void 0!==i?i:Ws,this.generateMipmaps=!1}function sn(e,t,n,r,i,o,a,s,c,l,h,p){u.call(this,null,o,a,s,c,l,r,i,h,p),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function un(e,t,n,r,i,o,a,s,c){u.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function cn(e,t,n,r,i,o,a,s,c,l){if((l=void 0!==l?l:du)!==du&&l!==mu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===du&&(n=$s),void 0===n&&l===mu&&(n=su),u.call(this,null,r,i,o,a,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:js,this.minFilter=void 0!==s?s:js,this.flipY=!1,this.generateMipmaps=!1}function ln(e){j.call(this),this.type="WireframeGeometry";var t,n,r,i,o,s,u,c,l,h,p=[],f=[0,0],d={},m=["a","b","c"];if(e&&e.isGeometry){var g=e.faces;for(t=0,r=g.length;t<r;t++){var v=g[t];for(n=0;n<3;n++)u=v[m[n]],c=v[m[(n+1)%3]],f[0]=Math.min(u,c),f[1]=Math.max(u,c),l=f[0]+","+f[1],void 0===d[l]&&(d[l]={index1:f[0],index2:f[1]})}for(l in d)s=d[l],h=e.vertices[s.index1],p.push(h.x,h.y,h.z),h=e.vertices[s.index2],p.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,b,_,x,w,T,E,S;if(h=new a,null!==e.index){for(y=e.attributes.position,b=e.index,_=e.groups,0===_.length&&(_=[{start:0,count:b.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(x=_[i],w=x.start,T=x.count,t=w,r=w+T;t<r;t+=3)for(n=0;n<3;n++)u=b.getX(t+n),c=b.getX(t+(n+1)%3),f[0]=Math.min(u,c),f[1]=Math.max(u,c),l=f[0]+","+f[1],void 0===d[l]&&(d[l]={index1:f[0],index2:f[1]});for(l in d)s=d[l],h.fromBufferAttribute(y,s.index1),p.push(h.x,h.y,h.z),h.fromBufferAttribute(y,s.index2),p.push(h.x,h.y,h.z)}else for(y=e.attributes.position,t=0,r=y.count/3;t<r;t++)for(n=0;n<3;n++)E=3*t+n,h.fromBufferAttribute(y,E),p.push(h.x,h.y,h.z),S=3*t+(n+1)%3,h.fromBufferAttribute(y,S),p.push(h.x,h.y,h.z)}this.addAttribute("position",new N(p,3))}function hn(e,t,n){V.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new pn(e,t,n)),this.mergeVertices()}function pn(e,t,n){j.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],s=[],u=[],c=[],l=new a,h=new a,p=new a,f=new a,d=new a;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,g,h),s.push(h.x,h.y,h.z),v-1e-5>=0?(e(v-1e-5,g,p),f.subVectors(h,p)):(e(v+1e-5,g,p),f.subVectors(p,h)),g-1e-5>=0?(e(v,g-1e-5,p),d.subVectors(h,p)):(e(v,g+1e-5,p),d.subVectors(p,h)),l.crossVectors(f,d).normalize(),u.push(l.x,l.y,l.z),c.push(v,g)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,_=(r+1)*m+i+1,x=(r+1)*m+i;o.push(y,b,x),o.push(b,_,x)}this.setIndex(o),this.addAttribute("position",new N(s,3)),this.addAttribute("normal",new N(u,3)),this.addAttribute("uv",new N(c,2))}function fn(e,t,n,r){V.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new dn(e,t,n,r)),this.mergeVertices()}function dn(e,t,n,r){function o(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?c:c.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var p=Math.floor(o/2);o%2===0?(u(s[i][p+1]),u(s[i+1][p]),u(s[i][p])):(u(s[i][p+1]),u(s[i+1][p+1]),u(s[i+1][p]))}}function s(){for(var e=0;e<m.length;e+=6){var t=m[e+0],n=m[e+2],r=m[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(m[e+0]+=1),n<.2&&(m[e+2]+=1),r<.2&&(m[e+4]+=1))}}function u(e){d.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(){for(var e=new a,t=new a,n=new a,r=new a,o=new i,s=new i,u=new i,c=0,l=0;c<d.length;c+=9,l+=6){e.set(d[c+0],d[c+1],d[c+2]),t.set(d[c+3],d[c+4],d[c+5]),n.set(d[c+6],d[c+7],d[c+8]),o.set(m[l+0],m[l+1]),s.set(m[l+2],m[l+3]),u.set(m[l+4],m[l+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=p(r);h(o,l+0,e,f),h(s,l+2,t,f),h(u,l+4,n,f)}}function h(e,t,n,r){r<0&&1===e.x&&(m[t]=e.x-1),0===n.x&&0===n.z&&(m[t]=r/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}j.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var d=[],m=[];!function(e){for(var n=new a,r=new a,i=new a,s=0;s<t.length;s+=3)c(t[s+0],n),c(t[s+1],r),c(t[s+2],i),o(n,r,i,e)}(r),function(e){for(var t=new a,n=0;n<d.length;n+=3)t.x=d[n+0],t.y=d[n+1],t.z=d[n+2],t.normalize().multiplyScalar(e),d[n+0]=t.x,d[n+1]=t.y,d[n+2]=t.z}(n),function(){for(var e=new a,t=0;t<d.length;t+=3){e.x=d[t+0],e.y=d[t+1],e.z=d[t+2];var n=p(e)/2/Math.PI+.5,r=f(e)/Math.PI+.5;m.push(n,1-r)}l(),s()}(),this.addAttribute("position",new N(d,3)),this.addAttribute("normal",new N(d.slice(),3)),this.addAttribute("uv",new N(m,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function mn(e,t){V.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new gn(e,t)),this.mergeVertices()}function gn(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];dn.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function vn(e,t){V.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new yn(e,t)),this.mergeVertices()}function yn(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];dn.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function bn(e,t){V.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new _n(e,t)),this.mergeVertices()}function _n(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];dn.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function xn(e,t){V.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new wn(e,t)),this.mergeVertices()}function wn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];dn.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Tn(e,t,n,r,i,o){V.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new En(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function En(e,t,n,r,o){function s(i){g=e.getPointAt(i/t,g);var o=l.normals[i],a=l.binormals[i];for(p=0;p<=r;p++){var s=p/r*Math.PI*2,u=Math.sin(s),c=-Math.cos(s);d.x=c*o.x+u*a.x,d.y=c*o.y+u*a.y,d.z=c*o.z+u*a.z,d.normalize(),y.push(d.x,d.y,d.z),f.x=g.x+n*d.x,f.y=g.y+n*d.y,f.z=g.z+n*d.z,v.push(f.x,f.y,f.z)}}function u(){for(p=1;p<=t;p++)for(h=1;h<=r;h++){var e=(r+1)*(p-1)+(h-1),n=(r+1)*p+(h-1),i=(r+1)*p+h,o=(r+1)*(p-1)+h;_.push(e,n,o),_.push(n,i,o)}}function c(){for(h=0;h<=t;h++)for(p=0;p<=r;p++)m.x=h/t,m.y=p/r,b.push(m.x,m.y)}j.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o},t=t||64,n=n||1,r=r||8,o=o||!1;var l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var h,p,f=new a,d=new a,m=new i,g=new a,v=[],y=[],b=[],_=[];!function(){for(h=0;h<t;h++)s(h);s(!1===o?t:0),c(),u()}(),this.setIndex(_),this.addAttribute("position",new N(v,3)),this.addAttribute("normal",new N(y,3)),this.addAttribute("uv",new N(b,2))}function Sn(e,t,n,r,i,o,a){V.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new kn(e,t,n,r,i,o)),this.mergeVertices()}function kn(e,t,n,r,i,o){function s(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}j.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var u,c,l=[],h=[],p=[],f=[],d=new a,m=new a,g=new a,v=new a,y=new a,b=new a,_=new a;for(u=0;u<=n;++u){var x=u/n*i*Math.PI*2;for(s(x,i,o,e,g),s(x+.01,i,o,e,v),b.subVectors(v,g),_.addVectors(v,g),y.crossVectors(b,_),_.crossVectors(y,b),y.normalize(),_.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,T=-t*Math.cos(w),E=t*Math.sin(w);d.x=g.x+(T*_.x+E*y.x),d.y=g.y+(T*_.y+E*y.y),d.z=g.z+(T*_.z+E*y.z),h.push(d.x,d.y,d.z),m.subVectors(d,g).normalize(),p.push(m.x,m.y,m.z),f.push(u/n),f.push(c/r)}}for(c=1;c<=n;c++)for(u=1;u<=r;u++){var S=(r+1)*(c-1)+(u-1),k=(r+1)*c+(u-1),C=(r+1)*c+u,M=(r+1)*(c-1)+u;l.push(S,k,M),l.push(k,C,M)}this.setIndex(l),this.addAttribute("position",new N(h,3)),this.addAttribute("normal",new N(p,3)),this.addAttribute("uv",new N(f,2))}function Cn(e,t,n,r,i){V.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Mn(e,t,n,r,i)),this.mergeVertices()}function Mn(e,t,n,r,i){j.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,s,u=[],c=[],l=[],h=[],p=new a,f=new a,d=new a;for(o=0;o<=n;o++)for(s=0;s<=r;s++){var m=s/r*i,g=o/n*Math.PI*2;f.x=(e+t*Math.cos(g))*Math.cos(m),f.y=(e+t*Math.cos(g))*Math.sin(m),f.z=t*Math.sin(g),c.push(f.x,f.y,f.z),p.x=e*Math.cos(m),p.y=e*Math.sin(m),d.subVectors(f,p).normalize(),l.push(d.x,d.y,d.z),h.push(s/r),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=r;s++){var v=(r+1)*o+s-1,y=(r+1)*(o-1)+s-1,b=(r+1)*(o-1)+s,_=(r+1)*o+s;u.push(v,y,_),u.push(y,b,_)}this.setIndex(u),this.addAttribute("position",new N(c,3)),this.addAttribute("normal",new N(l,3)),this.addAttribute("uv",new N(h,2))}function An(e,t,n,r,i){var o,a;if(i===nr(e,t,n,r)>0)for(o=t;o<n;o+=r)a=$n(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=$n(o,e[o],e[o+1],a);return a&&Yn(a,a.next)&&(er(a),a=a.next),a}function On(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Yn(r,r.next)&&0!==qn(r.prev,r,r.next))r=r.next;else{if(er(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Dn(e,t,n,r,i,o,a){if(e){!a&&o&&jn(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Rn(e,r,i,o):In(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),er(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?(e=Pn(e,t,n),Dn(e,t,n,r,i,o,2)):2===a&&Ln(e,t,n,r,i,o):Dn(On(e),t,n,r,i,o,1);break}}}function In(e){var t=e.prev,n=e,r=e.next;if(qn(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Hn(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Rn(e,t,n,r){var i=e.prev,o=e,a=e.next;if(qn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Vn(s,u,t,n,r),p=Vn(c,l,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==e.prev&&f!==e.next&&Hn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&qn(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&Hn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&qn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Hn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&qn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&Hn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&qn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Pn(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Yn(i,o)&&Xn(i,r,r.next,o)&&Qn(i,o)&&Qn(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),er(r),er(r.next),r=e=o),r=r.next}while(r!==e);return r}function Ln(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Wn(a,s)){var u=Zn(a,s);return a=On(a,a.next),u=On(u,u.next),Dn(a,t,n,r,i,o),void Dn(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Nn(e,t,n,r){var i,o,a,s,u,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,u=An(e,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(zn(u));for(c.sort(Un),i=0;i<c.length;i++)Fn(c[i],n),n=On(n,n.next);return n}function Un(e,t){return e.x-t.x}function Fn(e,t){if(t=Bn(e,t)){var n=Zn(t,e);On(n,n.next)}}function Bn(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,p=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Hn(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Qn(r,e)&&(n=r,p=u),r=r.next;return n}function jn(e,t,n,r){var i=e;do{null===i.z&&(i.z=Vn(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Gn(i)}function Gn(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return e}function Vn(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function zn(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Hn(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Wn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Kn(e,t)&&Qn(e,t)&&Qn(t,e)&&Jn(e,t)}function qn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Yn(e,t){return e.x===t.x&&e.y===t.y}function Xn(e,t,n,r){return!!(Yn(e,n)&&Yn(t,r)||Yn(e,r)&&Yn(n,t))||qn(e,t,n)>0!==qn(e,t,r)>0&&qn(n,r,e)>0!==qn(n,r,t)>0}function Kn(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Xn(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Qn(e,t){return qn(e.prev,e,e.next)<0?qn(e,t,e.next)>=0&&qn(e,e.prev,t)>=0:qn(e,t,e.prev)<0||qn(e,e.next,t)<0}function Jn(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function Zn(e,t){var n=new tr(e.i,e.x,e.y),r=new tr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function $n(e,t,n,r){var i=new tr(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function er(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function tr(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nr(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function rr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ir(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function or(e,t){V.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ar(e,t)),this.mergeVertices()}function ar(e,t){j.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],o=[],s=0,u=e.length;s<u;s++){var c=e[s];!function(e){function s(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function u(e,t,n){var r,o,a,s=e.x-t.x,u=e.y-t.y,c=n.x-e.x,l=n.y-e.y,h=s*s+u*u,p=s*l-u*c;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(h),d=Math.sqrt(c*c+l*l),m=t.x-u/f,g=t.y+s/f,v=n.x-l/d,y=n.y+c/d,b=((v-m)*l-(y-g)*c)/(s*l-u*c);r=m+s*b-e.x,o=g+u*b-e.y;var _=r*r+o*o;if(_<=2)return new i(r,o);a=Math.sqrt(_/2)}else{var x=!1;s>Number.EPSILON?c>Number.EPSILON&&(x=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(x=!0):Math.sign(u)===Math.sign(l)&&(x=!0),x?(r=-u,o=s,a=Math.sqrt(h)):(r=s,o=u,a=Math.sqrt(h/2))}return new i(r/a,o/a)}function c(e,t){var n,r;for(K=e.length;--K>=0;){n=K,(r=K-1)<0&&(r=e.length-1);var i=0,o=v+2*T;for(i=0;i<o;i++){var a=q*i,s=q*(i+1);p(t+n+a,t+r+a,t+r+s,t+n+s)}}}function l(e,t,n){m.push(e),m.push(t),m.push(n)}function h(e,t,i){f(e),f(t),f(i);var o=r.length/3,a=S.generateTopUV(n,r,o-3,o-2,o-1);d(a[0]),d(a[1]),d(a[2])}function p(e,t,i,o){f(e),f(t),f(o),f(t),f(i),f(o);var a=r.length/3,s=S.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);d(s[0]),d(s[1]),d(s[3]),d(s[1]),d(s[2]),d(s[3])}function f(e){r.push(m[3*e+0]),r.push(m[3*e+1]),r.push(m[3*e+2])}function d(e){o.push(e.x),o.push(e.y)}var m=[],g=void 0!==t.curveSegments?t.curveSegments:12,v=void 0!==t.steps?t.steps:1,y=void 0!==t.depth?t.depth:100,b=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.bevelThickness?t.bevelThickness:6,x=void 0!==t.bevelSize?t.bevelSize:_-2,w=void 0!==t.bevelOffset?t.bevelOffset:0,T=void 0!==t.bevelSegments?t.bevelSegments:3,E=t.extrudePath,S=void 0!==t.UVGenerator?t.UVGenerator:ll;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),y=t.amount);var k,C,M,A,O,D=!1;E&&(k=E.getSpacedPoints(v),D=!0,b=!1,C=E.computeFrenetFrames(v,!1),M=new a,A=new a,O=new a),b||(T=0,_=0,x=0,w=0);var I,R,P,L=e.extractPoints(g),N=L.shape,U=L.holes;if(!cl.isClockWise(N))for(N=N.reverse(),R=0,P=U.length;R<P;R++)I=U[R],cl.isClockWise(I)&&(U[R]=I.reverse());var F=cl.triangulateShape(N,U),B=N;for(R=0,P=U.length;R<P;R++)I=U[R],N=N.concat(I);for(var j,G,V,z,H,W,q=N.length,Y=F.length,X=[],K=0,Q=B.length,J=Q-1,Z=K+1;K<Q;K++,J++,Z++)J===Q&&(J=0),Z===Q&&(Z=0),X[K]=u(B[K],B[J],B[Z]);var $,ee=[],te=X.concat();for(R=0,P=U.length;R<P;R++){for(I=U[R],$=[],K=0,Q=I.length,J=Q-1,Z=K+1;K<Q;K++,J++,Z++)J===Q&&(J=0),Z===Q&&(Z=0),$[K]=u(I[K],I[J],I[Z]);ee.push($),te=te.concat($)}for(j=0;j<T;j++){for(V=j/T,z=_*Math.cos(V*Math.PI/2),G=x*Math.sin(V*Math.PI/2)+w,K=0,Q=B.length;K<Q;K++)H=s(B[K],X[K],G),l(H.x,H.y,-z);for(R=0,P=U.length;R<P;R++)for(I=U[R],$=ee[R],K=0,Q=I.length;K<Q;K++)H=s(I[K],$[K],G),l(H.x,H.y,-z)}for(G=x+w,K=0;K<q;K++)H=b?s(N[K],te[K],G):N[K],D?(A.copy(C.normals[0]).multiplyScalar(H.x),M.copy(C.binormals[0]).multiplyScalar(H.y),O.copy(k[0]).add(A).add(M),l(O.x,O.y,O.z)):l(H.x,H.y,0);var ne;for(ne=1;ne<=v;ne++)for(K=0;K<q;K++)H=b?s(N[K],te[K],G):N[K],D?(A.copy(C.normals[ne]).multiplyScalar(H.x),M.copy(C.binormals[ne]).multiplyScalar(H.y),O.copy(k[ne]).add(A).add(M),l(O.x,O.y,O.z)):l(H.x,H.y,y/v*ne);for(j=T-1;j>=0;j--){for(V=j/T,z=_*Math.cos(V*Math.PI/2),G=x*Math.sin(V*Math.PI/2)+w,K=0,Q=B.length;K<Q;K++)H=s(B[K],X[K],G),l(H.x,H.y,y+z);for(R=0,P=U.length;R<P;R++)for(I=U[R],$=ee[R],K=0,Q=I.length;K<Q;K++)H=s(I[K],$[K],G),D?l(H.x,H.y+k[v-1].y,k[v-1].x+z):l(H.x,H.y,y+z)}!function(){var e=r.length/3;if(b){var t=0,i=q*t;for(K=0;K<Y;K++)W=F[K],h(W[2]+i,W[1]+i,W[0]+i);for(t=v+2*T,i=q*t,K=0;K<Y;K++)W=F[K],h(W[0]+i,W[1]+i,W[2]+i)}else{for(K=0;K<Y;K++)W=F[K],h(W[2],W[1],W[0]);for(K=0;K<Y;K++)W=F[K],h(W[0]+q*v,W[1]+q*v,W[2]+q*v)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(c(B,t),t+=B.length,R=0,P=U.length;R<P;R++)I=U[R],c(I,t),t+=I.length;n.addGroup(e,r.length/3-e,1)}()}(c)}this.addAttribute("position",new N(r,3)),this.addAttribute("uv",new N(o,2)),this.computeVertexNormals()}function sr(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function ur(e,t){V.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new cr(e,t)),this.mergeVertices()}function cr(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new V;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ar.call(this,r,t),this.type="TextBufferGeometry"}function lr(e,t,n,r,i,o,a){V.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new hr(e,t,n,r,i,o,a)),this.mergeVertices()}function hr(e,t,n,r,i,o,s){j.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var u,c,l=Math.min(o+s,Math.PI),h=0,p=[],f=new a,d=new a,m=[],g=[],v=[],y=[];for(c=0;c<=n;c++){var b=[],_=c/n,x=0;for(0==c&&0==o?x=.5/t:c==n&&l==Math.PI&&(x=-.5/t),u=0;u<=t;u++){var w=u/t;f.x=-e*Math.cos(r+w*i)*Math.sin(o+_*s),f.y=e*Math.cos(o+_*s),f.z=e*Math.sin(r+w*i)*Math.sin(o+_*s),g.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),y.push(w+x,1-_),b.push(h++)}p.push(b)}for(c=0;c<n;c++)for(u=0;u<t;u++){var T=p[c][u+1],E=p[c][u],S=p[c+1][u],k=p[c+1][u+1];(0!==c||o>0)&&m.push(T,E,k),(c!==n-1||l<Math.PI)&&m.push(E,S,k)}this.setIndex(m),this.addAttribute("position",new N(g,3)),this.addAttribute("normal",new N(v,3)),this.addAttribute("uv",new N(y,2))}function pr(e,t,n,r,i,o){V.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new fr(e,t,n,r,i,o)),this.mergeVertices()}function fr(e,t,n,r,o,s){j.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:s},e=e||.5,t=t||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var u,c,l,h=[],p=[],f=[],d=[],m=e,g=(t-e)/r,v=new a,y=new i;for(c=0;c<=r;c++){for(l=0;l<=n;l++)u=o+l/n*s,v.x=m*Math.cos(u),v.y=m*Math.sin(u),p.push(v.x,v.y,v.z),f.push(0,0,1),y.x=(v.x/t+1)/2,y.y=(v.y/t+1)/2,d.push(y.x,y.y);m+=g}for(c=0;c<r;c++){var b=c*(n+1);for(l=0;l<n;l++){u=l+b;var _=u,x=u+n+1,w=u+n+2,T=u+1;h.push(_,x,T),h.push(x,w,T)}}this.setIndex(h),this.addAttribute("position",new N(p,3)),this.addAttribute("normal",new N(f,3)),this.addAttribute("uv",new N(d,2))}function dr(e,t,n,r){V.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new mr(e,t,n,r)),this.mergeVertices()}function mr(e,t,n,r){j.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=kc.clamp(r,0,2*Math.PI);var o,s,u,c=[],l=[],h=[],p=1/t,f=new a,d=new i;for(s=0;s<=t;s++){var m=n+s*p*r,g=Math.sin(m),v=Math.cos(m);for(u=0;u<=e.length-1;u++)f.x=e[u].x*g,f.y=e[u].y,f.z=e[u].x*v,l.push(f.x,f.y,f.z),d.x=s/t,d.y=u/(e.length-1),h.push(d.x,d.y)}for(s=0;s<t;s++)for(u=0;u<e.length-1;u++){o=u+s*e.length;var y=o,b=o+e.length,_=o+e.length+1,x=o+1;c.push(y,b,x),c.push(b,_,x)}if(this.setIndex(c),this.addAttribute("position",new N(l,3)),this.addAttribute("uv",new N(h,2)),this.computeVertexNormals(),r===2*Math.PI){var w=this.attributes.normal.array,T=new a,E=new a,S=new a;for(o=t*e.length*3,s=0,u=0;s<e.length;s++,u+=3)T.x=w[u+0],T.y=w[u+1],T.z=w[u+2],E.x=w[o+u+0],E.y=w[o+u+1],E.z=w[o+u+2],S.addVectors(T,E).normalize(),w[u+0]=w[o+u+0]=S.x,w[u+1]=w[o+u+1]=S.y,w[u+2]=w[o+u+2]=S.z}}function gr(e,t){V.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new vr(e,t)),this.mergeVertices()}function vr(e,t){function n(e){var n,s,c,l=i.length/3,h=e.extractPoints(t),p=h.shape,f=h.holes;for(!1===cl.isClockWise(p)&&(p=p.reverse()),n=0,s=f.length;n<s;n++)c=f[n],!0===cl.isClockWise(c)&&(f[n]=c.reverse());var d=cl.triangulateShape(p,f);for(n=0,s=f.length;n<s;n++)c=f[n],p=p.concat(c);for(n=0,s=p.length;n<s;n++){var m=p[n];i.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=d.length;n<s;n++){var g=d[n],v=g[0]+l,y=g[1]+l,b=g[2]+l;r.push(v,y,b),u+=3}}j.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],o=[],a=[],s=0,u=0;if(!1===Array.isArray(e))n(e);else for(var c=0;c<e.length;c++)n(e[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new N(i,3)),this.addAttribute("normal",new N(o,3)),this.addAttribute("uv",new N(a,2))}function yr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function br(e,t){j.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(kc.DEG2RAD*t),u=[0,0],c={},l=["a","b","c"];e.isBufferGeometry?(o=new V,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,p=o.faces,f=0,d=p.length;f<d;f++)for(var m=p[f],g=0;g<3;g++)n=m[l[g]],r=m[l[(g+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),i=u[0]+","+u[1],void 0===c[i]?c[i]={index1:u[0],index2:u[1],face1:f,face2:void 0}:c[i].face2=f;for(i in c){var v=c[i];if(void 0===v.face2||p[v.face1].normal.dot(p[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new N(a,3))}function _r(e,t,n,r,i,o,a,s){V.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new xr(e,t,n,r,i,o,a,s)),this.mergeVertices()}function xr(e,t,n,r,o,s,u,c){function l(n){var o,s,l,v=new i,_=new a,x=0,w=!0===n?e:t,T=!0===n?1:-1;for(s=g,o=1;o<=r;o++)f.push(0,y*T,0),d.push(0,T,0),m.push(.5,.5),g++;for(l=g,o=0;o<=r;o++){var E=o/r,S=E*c+u,k=Math.cos(S),C=Math.sin(S);_.x=w*C,_.y=y*T,_.z=w*k,f.push(_.x,_.y,_.z),d.push(0,T,0),v.x=.5*k+.5,v.y=.5*C*T+.5,m.push(v.x,v.y),g++}for(o=0;o<r;o++){var M=s+o,A=l+o;!0===n?p.push(A,A+1,M):p.push(A+1,A,M),x+=3}h.addGroup(b,x,!0===n?1:2),b+=x}j.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:c};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,o=Math.floor(o)||1,s=void 0!==s&&s,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var p=[],f=[],d=[],m=[],g=0,v=[],y=n/2,b=0;!function(){var i,s,l=new a,_=new a,x=0,w=(t-e)/n;for(s=0;s<=o;s++){var T=[],E=s/o,S=E*(t-e)+e;for(i=0;i<=r;i++){var k=i/r,C=k*c+u,M=Math.sin(C),A=Math.cos(C);_.x=S*M,_.y=-E*n+y,_.z=S*A,f.push(_.x,_.y,_.z),l.set(M,w,A).normalize(),d.push(l.x,l.y,l.z),m.push(k,1-E),T.push(g++)}v.push(T)}for(i=0;i<r;i++)for(s=0;s<o;s++){var O=v[s][i],D=v[s+1][i],I=v[s+1][i+1],R=v[s][i+1];p.push(O,D,R),p.push(D,I,R),x+=6}h.addGroup(b,x,0),b+=x}(),!1===s&&(e>0&&l(!0),t>0&&l(!1)),this.setIndex(p),this.addAttribute("position",new N(f,3)),this.addAttribute("normal",new N(d,3)),this.addAttribute("uv",new N(m,2))}function wr(e,t,n,r,i,o,a){_r.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Tr(e,t,n,r,i,o,a){xr.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Er(e,t,n,r){V.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Sr(e,t,n,r)),this.mergeVertices()}function Sr(e,t,n,r){j.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,s,u=[],c=[],l=[],h=[],p=new a,f=new i;for(c.push(0,0,0),l.push(0,0,1),h.push(.5,.5),s=0,o=3;s<=t;s++,o+=3){var d=n+s/t*r;p.x=e*Math.cos(d),p.y=e*Math.sin(d),c.push(p.x,p.y,p.z),l.push(0,0,1),f.x=(c[o]/e+1)/2,f.y=(c[o+1]/e+1)/2,h.push(f.x,f.y)}for(o=1;o<=t;o++)u.push(o,o+1,0);this.setIndex(u),this.addAttribute("position",new N(c,3)),this.addAttribute("normal",new N(l,3)),this.addAttribute("uv",new N(h,2))}function kr(e){k.call(this),this.type="ShadowMaterial",this.color=new x(0),this.transparent=!0,this.setValues(e)}function Cr(e){Y.call(this,e),this.type="RawShaderMaterial"}function Mr(e){k.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new x(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ar(e){Mr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Or(e){k.call(this),this.type="MeshPhongMaterial",this.color=new x(16777215),this.specular=new x(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_s,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Dr(e){Or.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ir(e){k.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Rr(e){k.call(this),this.type="MeshLambertMaterial",this.color=new x(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_s,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Pr(e){k.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new x(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function Lr(e){$t.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Nr(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ur(e,t,n,r){Nr.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Fr(e,t,n,r){Nr.call(this,e,t,n,r)}function Br(e,t,n,r){Nr.call(this,e,t,n,r)}function jr(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fl.convertArray(t,this.TimeBufferType),this.values=fl.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Gr(e,t,n){jr.call(this,e,t,n)}function Vr(e,t,n,r){jr.call(this,e,t,n,r)}function zr(e,t,n,r){jr.call(this,e,t,n,r)}function Hr(e,t,n,r){Nr.call(this,e,t,n,r)}function Wr(e,t,n,r){jr.call(this,e,t,n,r)}function qr(e,t,n,r){jr.call(this,e,t,n,r)}function Yr(e,t,n,r){jr.call(this,e,t,n,r)}function Xr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=kc.generateUUID(),this.duration<0&&this.resetDuration()}function Kr(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zr;case"vector":case"vector2":case"vector3":case"vector4":return Yr;case"color":return Vr;case"quaternion":return Wr;case"bool":case"boolean":return Gr;case"string":return qr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Qr(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Kr(e.type);if(void 0===e.times){var n=[],r=[];fl.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Jr(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function Zr(e){this.manager=void 0!==e?e:ml}function $r(e){this.manager=void 0!==e?e:ml}function ei(e){this.manager=void 0!==e?e:ml,this._parser=null}function ti(e){this.manager=void 0!==e?e:ml,this._parser=null}function ni(e){this.manager=void 0!==e?e:ml}function ri(e){this.manager=void 0!==e?e:ml}function ii(e){this.manager=void 0!==e?e:ml}function oi(){this.type="Curve",this.arcLengthDivisions=200}function ai(e,t,n,r,i,o,a,s){oi.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function si(e,t,n,r,i,o){ai.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function ui(){function e(e,o,a,s){t=e,n=a,r=-3*e+3*o-2*a-s,i=2*e-2*o+a+s}var t=0,n=0,r=0,i=0;return{initCatmullRom:function(t,n,r,i,o){e(n,r,o*(r-t),o*(i-n))},initNonuniformCatmullRom:function(t,n,r,i,o,a,s){var u=(n-t)/o-(r-t)/(o+a)+(r-n)/a,c=(r-n)/a-(i-n)/(a+s)+(i-r)/s;u*=a,c*=a,e(n,r,u,c)},calc:function(e){var o=e*e;return t+n*e+r*o+i*(o*e)}}}function ci(e,t,n,r){oi.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function li(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function hi(e,t){var n=1-e;return n*n*t}function pi(e,t){return 2*(1-e)*e*t}function fi(e,t){return e*e*t}function di(e,t,n,r){return hi(e,t)+pi(e,n)+fi(e,r)}function mi(e,t){var n=1-e;return n*n*n*t}function gi(e,t){var n=1-e;return 3*n*n*e*t}function vi(e,t){return 3*(1-e)*e*e*t}function yi(e,t){return e*e*e*t}function bi(e,t,n,r,i){return mi(e,t)+gi(e,n)+vi(e,r)+yi(e,i)}function _i(e,t,n,r){oi.call(this),this.type="CubicBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i,this.v3=r||new i}function xi(e,t,n,r){oi.call(this),this.type="CubicBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a,this.v3=r||new a}function wi(e,t){oi.call(this),this.type="LineCurve",this.v1=e||new i,this.v2=t||new i}function Ti(e,t){oi.call(this),this.type="LineCurve3",this.v1=e||new a,this.v2=t||new a}function Ei(e,t,n){oi.call(this),this.type="QuadraticBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i}function Si(e,t,n){oi.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a}function ki(e){oi.call(this),this.type="SplineCurve",this.points=e||[]}function Ci(){oi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Mi(e){Ci.call(this),this.type="Path",this.currentPoint=new i,e&&this.setFromPoints(e)}function Ai(e){Mi.call(this,e),this.uuid=kc.generateUUID(),this.type="Shape",this.holes=[]}function Oi(e,t){m.call(this),this.type="Light",this.color=new x(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Di(e,t,n){Oi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(m.DefaultUp),this.updateMatrix(),this.groundColor=new x(t)}function Ii(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new p}function Ri(){Ii.call(this,new K(50,1,.5,500))}function Pi(e,t,n,r,i,o){Oi.call(this,e,t),this.type="SpotLight",this.position.copy(m.DefaultUp),this.updateMatrix(),this.target=new m,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ri}function Li(e,t,n,r){Oi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Ii(new K(90,1,.5,500))}function Ni(e,t,n,r,i,o){X.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ui(){Ii.call(this,new Ni(-5,5,5,-5,.5,500))}function Fi(e,t){Oi.call(this,e,t),this.type="DirectionalLight",this.position.copy(m.DefaultUp),this.updateMatrix(),this.target=new m,this.shadow=new Ui}function Bi(e,t){Oi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ji(e,t,n,r){Oi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Gi(e){this.manager=void 0!==e?e:ml,this.textures={}}function Vi(){j.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function zi(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),M.call(this,e,t,n),this.meshPerAttribute=r||1}function Hi(e){this.manager=void 0!==e?e:ml}function Wi(e){this.manager=void 0!==e?e:ml,this.resourcePath=""}function qi(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ml,this.options=void 0}function Yi(){this.type="ShapePath",this.color=new x,this.subPaths=[],this.currentPath=null}function Xi(e){this.type="Font",this.data=e}function Ki(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var h=Qi(l,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}function Qi(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");var a,s,u,c,l,h,p,f,d=new Yi;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){var y=m[g++];switch(y){case"m":a=m[g++]*t+n,s=m[g++]*t+r,d.moveTo(a,s);break;case"l":a=m[g++]*t+n,s=m[g++]*t+r,d.lineTo(a,s);break;case"q":u=m[g++]*t+n,c=m[g++]*t+r,l=m[g++]*t+n,h=m[g++]*t+r,d.quadraticCurveTo(l,h,u,c);break;case"b":u=m[g++]*t+n,c=m[g++]*t+r,l=m[g++]*t+n,h=m[g++]*t+r,p=m[g++]*t+n,f=m[g++]*t+r,d.bezierCurveTo(l,h,p,f,u,c)}}return{offsetX:o.ha*t,path:d}}function Ji(e){this.manager=void 0!==e?e:ml}function Zi(){}function $i(e){this.manager=void 0!==e?e:ml}function eo(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new a)}function to(e,t){Oi.call(this,void 0,t),this.sh=void 0!==e?e:new eo}function no(e,t,n){to.call(this,void 0,n);var r=(new x).set(e),i=(new x).set(t),o=new a(r.r,r.g,r.b),s=new a(i.r,i.g,i.b),u=Math.sqrt(Math.PI),c=u*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(u),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(c)}function ro(e,t){to.call(this,void 0,t);var n=(new x).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function io(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new K,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new K,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function oo(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ao(){m.call(this),this.type="AudioListener",this.context=Ml.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function so(e){m.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function uo(e){so.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function co(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function lo(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ho(e,t,n){var r=n||po.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function po(e,t,n){this.path=t,this.parsedPath=n||po.parseTrackName(t),this.node=po.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function fo(){this.uuid=kc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function mo(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:qu,endingEnd:qu},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Gu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function go(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function vo(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function yo(e,t,n){Wt.call(this,e,t),this.meshPerAttribute=n||1}function bo(e,t,n,r){this.ray=new b(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function _o(e,t){return e.distance-t.distance}function xo(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)xo(i[o],t,n,!0)}function wo(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function To(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Eo(e,t){this.min=void 0!==e?e:new i(1/0,1/0),this.max=void 0!==t?t:new i(-1/0,-1/0)}function So(e,t){this.start=void 0!==e?e:new a,this.end=void 0!==t?t:new a}function ko(e){m.call(this),this.material=e,this.render=function(){}}function Co(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new j,c=new N(2*a*3,3);u.addAttribute("position",c),tn.call(this,u,new $t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Mo(e,t){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new j,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new N(r,3));var u=new $t({fog:!1});this.cone=new tn(n,u),this.add(this.cone),this.update()}function Ao(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Ao(e.children[n]));return t}function Oo(e){for(var t=Ao(e),n=new j,r=[],i=[],o=new x(0,0,1),a=new x(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new N(r,3)),n.addAttribute("color",new N(i,3));var c=new $t({vertexColors:za,depthTest:!1,depthWrite:!1,transparent:!0});tn.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Do(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new hr(t,4,2),i=new C({wireframe:!0,fog:!1});G.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Io(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new j;r.addAttribute("position",new N(n,3)),r.computeBoundingSphere();var i=new $t({fog:!1});en.call(this,r,i);var o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new j;a.addAttribute("position",new N(o,3)),a.computeBoundingSphere(),this.add(new G(a,new C({side:Ua,fog:!1}))),this.update()}function Ro(e,t,n){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new yn(t);r.rotateY(.5*Math.PI),this.material=new C({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=za);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new M(o,3)),this.add(new G(r,this.material)),this.update()}function Po(e,t){this.lightProbe=e,this.size=t;var n={};n.GAMMA_OUTPUT="";var r=new Y({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new hr(1,32,16);G.call(this,i,r),this.onBeforeRender()}function Lo(e,t,n,r){e=e||10,t=t||10,n=new x(void 0!==n?n:4473924),r=new x(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],c=0,l=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var p=c===i?n:r;p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3}var f=new j;f.addAttribute("position",new N(s,3)),f.addAttribute("color",new N(u,3));var d=new $t({vertexColors:za});tn.call(this,f,d)}function No(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new x(void 0!==i?i:4473924),o=new x(void 0!==o?o:8947848);var a,s,u,c,l,h,p,f=[],d=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,f.push(0,0,0),f.push(a,0,s),p=1&c?i:o,d.push(p.r,p.g,p.b),d.push(p.r,p.g,p.b);for(c=0;c<=n;c++)for(p=1&c?i:o,h=e-e/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,f.push(a,0,s),d.push(p.r,p.g,p.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,f.push(a,0,s),d.push(p.r,p.g,p.b);var m=new j;m.addAttribute("position",new N(f,3)),m.addAttribute("color",new N(d,3));var g=new $t({vertexColors:za});tn.call(this,m,g)}function Uo(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new j,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.addAttribute("position",new M(a,3));var s=new $t({color:65280}),u=new $t({color:16776960});en.call(this,i,[u,s]),this.update()}function Fo(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new j,c=new N(2*a*3,3);u.addAttribute("position",c),tn.call(this,u,new $t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Bo(e,t,n){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new j;r.addAttribute("position",new N([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new $t({fog:!1});this.lightPlane=new en(r,i),this.add(this.lightPlane),r=new j,r.addAttribute("position",new N([0,0,0,0,0,1],3)),this.targetLine=new en(r,i),this.add(this.targetLine),this.update()}function jo(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var r=new j,i=new $t({color:16777215,vertexColors:Va}),o=[],a=[],s={},u=new x(16755200),c=new x(16711680),l=new x(43775),h=new x(16777215),p=new x(3355443);t("n1","n2",u),t("n2","n4",u),t("n4","n3",u),t("n3","n1",u),t("f1","f2",u),t("f2","f4",u),t("f4","f3",u),t("f3","f1",u),t("n1","f1",u),t("n2","f2",u),t("n3","f3",u),t("n4","f4",u),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",h),t("p","c",p),t("cn1","cn2",p),t("cn3","cn4",p),t("cf1","cf2",p),t("cf3","cf4",p),r.addAttribute("position",new N(o,3)),r.addAttribute("color",new N(a,3)),tn.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Go(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new j;i.setIndex(new M(n,1)),i.addAttribute("position",new M(r,3)),tn.call(this,i,new $t({color:t})),this.matrixAutoUpdate=!1,this.update()}function Vo(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new j;i.setIndex(new M(n,1)),i.addAttribute("position",new N(r,3)),tn.call(this,i,new $t({color:t})),this.geometry.computeBoundingSphere()}function zo(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new j;o.addAttribute("position",new N(i,3)),o.computeBoundingSphere(),en.call(this,o,new $t({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new j;s.addAttribute("position",new N(a,3)),s.computeBoundingSphere(),this.add(new G(s,new C({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function Ho(e,t,n,r,i,o){m.call(this),void 0===e&&(e=new a(0,0,1)),void 0===t&&(t=new a(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Il&&(Il=new j,Il.addAttribute("position",new N([0,0,0,0,1,0],3)),Rl=new xr(0,.5,1,5,1),Rl.translate(0,-.5,0)),this.position.copy(t),this.line=new en(Il,new $t({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new G(Rl,new C({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Wo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new j;r.addAttribute("position",new N(t,3)),r.addAttribute("color",new N(n,3));var i=new $t({vertexColors:za});tn.call(this,r,i)}function qo(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new S(e,t,n,i,o,a)}function Yo(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Xo(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ko(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new on(e,t)}function Qo(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Xt(e)}function Jo(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new on(e,t)}function Zo(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new rn(e)}function $o(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new rn(e)}function ea(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new rn(e)}function ta(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(e,t,n)}function na(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new M(e,t).setDynamic(!0)}function ra(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new A(e,t)}function ia(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new O(e,t)}function oa(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new D(e,t)}function aa(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new I(e,t)}function sa(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new R(e,t)}function ua(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new P(e,t)}function ca(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new L(e,t)}function la(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new N(e,t)}function ha(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new U(e,t)}function pa(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ci.call(this,e),this.type="catmullrom",this.closed=!0}function fa(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ci.call(this,e),this.type="catmullrom"}function da(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ci.call(this,e),this.type="catmullrom"}function ma(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Wo(e)}function ga(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Go(e,t)}function va(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new tn(new br(e.geometry),new $t({color:void 0!==t?t:16777215}))}function ya(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new tn(new ln(e.geometry),new $t({color:void 0!==t?t:16777215}))}function ba(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Zr(e)}function _a(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ti(e)}function xa(){console.error("THREE.CanvasRenderer has been removed")}function wa(){console.error("THREE.JSONLoader has been removed.")}function Ta(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ACESFilmicToneMapping",function(){return Ms}),n.d(t,"AddEquation",function(){return Qa}),n.d(t,"AddOperation",function(){return ws}),n.d(t,"AdditiveBlending",function(){return qa}),n.d(t,"AlphaFormat",function(){return uu}),n.d(t,"AlwaysDepth",function(){return fs}),n.d(t,"AlwaysStencilFunc",function(){return Sc}),n.d(t,"AmbientLight",function(){return Bi}),n.d(t,"AmbientLightProbe",function(){return ro}),n.d(t,"AnimationClip",function(){return Xr}),n.d(t,"AnimationLoader",function(){return $r}),n.d(t,"AnimationMixer",function(){return go}),n.d(t,"AnimationObjectGroup",function(){return fo}),n.d(t,"AnimationUtils",function(){return fl}),n.d(t,"ArcCurve",function(){return si}),n.d(t,"ArrayCamera",function(){return Ft}),n.d(t,"ArrowHelper",function(){return Ho}),n.d(t,"Audio",function(){return so}),n.d(t,"AudioAnalyser",function(){return co}),n.d(t,"AudioContext",function(){return Ml}),n.d(t,"AudioListener",function(){return ao}),n.d(t,"AudioLoader",function(){return $i}),n.d(t,"AxesHelper",function(){return Wo}),n.d(t,"AxisHelper",function(){return ma}),n.d(t,"BackSide",function(){return Ua}),n.d(t,"BasicDepthPacking",function(){return ac}),n.d(t,"BasicShadowMap",function(){return Ra}),n.d(t,"BinaryTextureLoader",function(){return _a}),n.d(t,"Bone",function(){return Zt}),n.d(t,"BooleanKeyframeTrack",function(){return Gr}),n.d(t,"BoundingBoxHelper",function(){return ga}),n.d(t,"Box2",function(){return Eo}),n.d(t,"Box3",function(){return v}),n.d(t,"Box3Helper",function(){return Vo}),n.d(t,"BoxBufferGeometry",function(){return H}),n.d(t,"BoxGeometry",function(){return z}),n.d(t,"BoxHelper",function(){return Go}),n.d(t,"BufferAttribute",function(){return M}),n.d(t,"BufferGeometry",function(){return j}),n.d(t,"BufferGeometryLoader",function(){return Hi}),n.d(t,"ByteType",function(){return Js}),n.d(t,"Cache",function(){return dl}),n.d(t,"Camera",function(){return X}),n.d(t,"CameraHelper",function(){return jo}),n.d(t,"CanvasRenderer",function(){return xa}),n.d(t,"CanvasTexture",function(){return un}),n.d(t,"CatmullRomCurve3",function(){return ci}),n.d(t,"CineonToneMapping",function(){return Cs}),n.d(t,"CircleBufferGeometry",function(){return Sr}),n.d(t,"CircleGeometry",function(){return Er}),n.d(t,"ClampToEdgeWrapping",function(){return Fs}),n.d(t,"Clock",function(){return oo}),n.d(t,"ClosedSplineCurve3",function(){return pa}),n.d(t,"Color",function(){return x}),n.d(t,"ColorKeyframeTrack",function(){return Vr}),n.d(t,"CompressedTexture",function(){return sn}),n.d(t,"CompressedTextureLoader",function(){return ei}),n.d(t,"ConeBufferGeometry",function(){return Tr}),n.d(t,"ConeGeometry",function(){return wr}),n.d(t,"CubeCamera",function(){return Q}),n.d(t,"CubeGeometry",function(){return z}),n.d(t,"CubeReflectionMapping",function(){return Os}),n.d(t,"CubeRefractionMapping",function(){return Ds}),n.d(t,"CubeTexture",function(){return ge}),n.d(t,"CubeTextureLoader",function(){return ri}),n.d(t,"CubeUVReflectionMapping",function(){return Ls}),n.d(t,"CubeUVRefractionMapping",function(){return Ns}),n.d(t,"CubicBezierCurve",function(){return _i}),n.d(t,"CubicBezierCurve3",function(){return xi}),n.d(t,"CubicInterpolant",function(){return Ur}),n.d(t,"CullFaceBack",function(){return Ma}),n.d(t,"CullFaceFront",function(){return Aa}),n.d(t,"CullFaceFrontBack",function(){return Oa}),n.d(t,"CullFaceNone",function(){return Ca}),n.d(t,"Curve",function(){return oi}),n.d(t,"CurvePath",function(){return Ci}),n.d(t,"CustomBlending",function(){return Ka}),n.d(t,"CylinderBufferGeometry",function(){return xr}),n.d(t,"CylinderGeometry",function(){return _r}),n.d(t,"Cylindrical",function(){return To}),n.d(t,"DataTexture",function(){return Z}),n.d(t,"DataTexture2DArray",function(){return ve}),n.d(t,"DataTexture3D",function(){return ye}),n.d(t,"DataTextureLoader",function(){return ti}),n.d(t,"DecrementStencilOp",function(){return dc}),n.d(t,"DecrementWrapStencilOp",function(){return gc}),n.d(t,"DefaultLoadingManager",function(){return ml}),n.d(t,"DepthFormat",function(){return du}),n.d(t,"DepthStencilFormat",function(){return mu}),n.d(t,"DepthTexture",function(){return cn}),n.d(t,"DirectionalLight",function(){return Fi}),n.d(t,"DirectionalLightHelper",function(){return Bo}),n.d(t,"DirectionalLightShadow",function(){return Ui}),n.d(t,"DiscreteInterpolant",function(){return Br}),n.d(t,"DodecahedronBufferGeometry",function(){return wn}),n.d(t,"DodecahedronGeometry",function(){return xn}),n.d(t,"DoubleSide",function(){return Fa}),n.d(t,"DstAlphaFactor",function(){return ss}),n.d(t,"DstColorFactor",function(){return cs}),n.d(t,"DynamicBufferAttribute",function(){return na}),n.d(t,"EdgesGeometry",function(){return br}),n.d(t,"EdgesHelper",function(){return va}),n.d(t,"EllipseCurve",function(){return ai}),n.d(t,"EqualDepth",function(){return gs}),n.d(t,"EqualStencilFunc",function(){return _c}),n.d(t,"EquirectangularReflectionMapping",function(){return Is}),n.d(t,"EquirectangularRefractionMapping",function(){return Rs}),n.d(t,"Euler",function(){return f}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"ExtrudeBufferGeometry",function(){return ar}),n.d(t,"ExtrudeGeometry",function(){return or}),n.d(t,"Face3",function(){return S}),n.d(t,"Face4",function(){return qo}),n.d(t,"FaceColors",function(){return Va}),n.d(t,"FaceNormalsHelper",function(){return Fo}),n.d(t,"FileLoader",function(){return Zr}),n.d(t,"FlatShading",function(){return Ba}),n.d(t,"Float32Attribute",function(){return la}),n.d(t,"Float32BufferAttribute",function(){return N}),n.d(t,"Float64Attribute",function(){return ha}),n.d(t,"Float64BufferAttribute",function(){return U}),n.d(t,"FloatType",function(){return nu}),n.d(t,"Fog",function(){return Ht}),n.d(t,"FogExp2",function(){return zt}),n.d(t,"Font",function(){return Xi}),n.d(t,"FontLoader",function(){return Ji}),n.d(t,"FrontFaceDirectionCCW",function(){return Ia}),n.d(t,"FrontFaceDirectionCW",function(){return Da}),n.d(t,"FrontSide",function(){return Na}),n.d(t,"Frustum",function(){return ee}),n.d(t,"GammaEncoding",function(){return ec}),n.d(t,"Geometry",function(){return V}),n.d(t,"GeometryUtils",function(){return Nl}),n.d(t,"GreaterDepth",function(){return ys}),n.d(t,"GreaterEqualDepth",function(){return vs}),n.d(t,"GreaterEqualStencilFunc",function(){return Ec}),n.d(t,"GreaterStencilFunc",function(){return wc}),n.d(t,"GridHelper",function(){return Lo}),n.d(t,"Group",function(){return Ut}),n.d(t,"HalfFloatType",function(){return ru}),n.d(t,"HemisphereLight",function(){return Di}),n.d(t,"HemisphereLightHelper",function(){return Ro}),n.d(t,"HemisphereLightProbe",function(){return no}),n.d(t,"IcosahedronBufferGeometry",function(){return _n}),n.d(t,"IcosahedronGeometry",function(){return bn}),n.d(t,"ImageBitmapLoader",function(){return qi}),n.d(t,"ImageLoader",function(){return ni}),n.d(t,"ImageUtils",function(){return Ac}),n.d(t,"ImmediateRenderObject",function(){return ko}),n.d(t,"IncrementStencilOp",function(){return fc}),n.d(t,"IncrementWrapStencilOp",function(){return mc}),n.d(t,"InstancedBufferAttribute",function(){return zi}),n.d(t,"InstancedBufferGeometry",function(){return Vi}),n.d(t,"InstancedInterleavedBuffer",function(){return yo}),n.d(t,"Int16Attribute",function(){return aa}),n.d(t,"Int16BufferAttribute",function(){return I}),n.d(t,"Int32Attribute",function(){return ua}),n.d(t,"Int32BufferAttribute",function(){return P}),n.d(t,"Int8Attribute",function(){return ra}),n.d(t,"Int8BufferAttribute",function(){return A}),n.d(t,"IntType",function(){return eu}),n.d(t,"InterleavedBuffer",function(){return Wt}),n.d(t,"InterleavedBufferAttribute",function(){return qt}),n.d(t,"Interpolant",function(){return Nr}),n.d(t,"InterpolateDiscrete",function(){return zu}),n.d(t,"InterpolateLinear",function(){return Hu}),n.d(t,"InterpolateSmooth",function(){return Wu}),n.d(t,"InvertStencilOp",function(){return vc}),n.d(t,"JSONLoader",function(){return wa}),n.d(t,"KeepStencilOp",function(){return hc}),n.d(t,"KeyframeTrack",function(){return jr}),n.d(t,"LOD",function(){return Kt}),n.d(t,"LatheBufferGeometry",function(){return mr}),n.d(t,"LatheGeometry",function(){return dr}),n.d(t,"Layers",function(){return d}),n.d(t,"LensFlare",function(){return Ta}),n.d(t,"LessDepth",function(){return ds}),n.d(t,"LessEqualDepth",function(){return ms}),n.d(t,"LessEqualStencilFunc",function(){return xc}),n.d(t,"LessStencilFunc",function(){return bc}),n.d(t,"Light",function(){return Oi}),n.d(t,"LightProbe",function(){return to}),n.d(t,"LightProbeHelper",function(){return Po}),n.d(t,"LightShadow",function(){return Ii}),n.d(t,"Line",function(){return en}),n.d(t,"Line3",function(){return So}),n.d(t,"LineBasicMaterial",function(){return $t}),n.d(t,"LineCurve",function(){return wi}),n.d(t,"LineCurve3",function(){return Ti}),n.d(t,"LineDashedMaterial",function(){return Lr}),n.d(t,"LineLoop",function(){return nn}),n.d(t,"LinePieces",function(){return Ll}),n.d(t,"LineSegments",function(){return tn}),n.d(t,"LineStrip",function(){return Pl}),n.d(t,"LinearEncoding",function(){return Zu}),n.d(t,"LinearFilter",function(){return Ws}),n.d(t,"LinearInterpolant",function(){return Fr}),n.d(t,"LinearMipMapLinearFilter",function(){return Ks}),n.d(t,"LinearMipMapNearestFilter",function(){return Ys});n.d(t,"LinearMipmapLinearFilter",function(){return Xs}),n.d(t,"LinearMipmapNearestFilter",function(){return qs}),n.d(t,"LinearToneMapping",function(){return Es}),n.d(t,"Loader",function(){return Zi}),n.d(t,"LoaderUtils",function(){return wl}),n.d(t,"LoadingManager",function(){return Jr}),n.d(t,"LogLuvEncoding",function(){return nc}),n.d(t,"LoopOnce",function(){return ju}),n.d(t,"LoopPingPong",function(){return Vu}),n.d(t,"LoopRepeat",function(){return Gu}),n.d(t,"LuminanceAlphaFormat",function(){return pu}),n.d(t,"LuminanceFormat",function(){return hu}),n.d(t,"MOUSE",function(){return Sa}),n.d(t,"Material",function(){return k}),n.d(t,"MaterialLoader",function(){return Gi}),n.d(t,"Math",function(){return kc}),n.d(t,"Matrix3",function(){return s}),n.d(t,"Matrix4",function(){return p}),n.d(t,"MaxEquation",function(){return es}),n.d(t,"Mesh",function(){return G}),n.d(t,"MeshBasicMaterial",function(){return C}),n.d(t,"MeshDepthMaterial",function(){return Dt}),n.d(t,"MeshDistanceMaterial",function(){return It}),n.d(t,"MeshFaceMaterial",function(){return Yo}),n.d(t,"MeshLambertMaterial",function(){return Rr}),n.d(t,"MeshMatcapMaterial",function(){return Pr}),n.d(t,"MeshNormalMaterial",function(){return Ir}),n.d(t,"MeshPhongMaterial",function(){return Or}),n.d(t,"MeshPhysicalMaterial",function(){return Ar}),n.d(t,"MeshStandardMaterial",function(){return Mr}),n.d(t,"MeshToonMaterial",function(){return Dr}),n.d(t,"MinEquation",function(){return $a}),n.d(t,"MirroredRepeatWrapping",function(){return Bs}),n.d(t,"MixOperation",function(){return xs}),n.d(t,"MultiMaterial",function(){return Xo}),n.d(t,"MultiplyBlending",function(){return Xa}),n.d(t,"MultiplyOperation",function(){return _s}),n.d(t,"NearestFilter",function(){return js}),n.d(t,"NearestMipMapLinearFilter",function(){return Hs}),n.d(t,"NearestMipMapNearestFilter",function(){return Vs}),n.d(t,"NearestMipmapLinearFilter",function(){return zs}),n.d(t,"NearestMipmapNearestFilter",function(){return Gs}),n.d(t,"NeverDepth",function(){return ps}),n.d(t,"NeverStencilFunc",function(){return yc}),n.d(t,"NoBlending",function(){return Ha}),n.d(t,"NoColors",function(){return Ga}),n.d(t,"NoToneMapping",function(){return Ts}),n.d(t,"NormalBlending",function(){return Wa}),n.d(t,"NotEqualDepth",function(){return bs}),n.d(t,"NotEqualStencilFunc",function(){return Tc}),n.d(t,"NumberKeyframeTrack",function(){return zr}),n.d(t,"Object3D",function(){return m}),n.d(t,"ObjectLoader",function(){return Wi}),n.d(t,"ObjectSpaceNormalMap",function(){return cc}),n.d(t,"OctahedronBufferGeometry",function(){return yn}),n.d(t,"OctahedronGeometry",function(){return vn}),n.d(t,"OneFactor",function(){return ns}),n.d(t,"OneMinusDstAlphaFactor",function(){return us}),n.d(t,"OneMinusDstColorFactor",function(){return ls}),n.d(t,"OneMinusSrcAlphaFactor",function(){return as}),n.d(t,"OneMinusSrcColorFactor",function(){return is}),n.d(t,"OrthographicCamera",function(){return Ni}),n.d(t,"PCFShadowMap",function(){return Pa}),n.d(t,"PCFSoftShadowMap",function(){return La}),n.d(t,"ParametricBufferGeometry",function(){return pn}),n.d(t,"ParametricGeometry",function(){return hn}),n.d(t,"Particle",function(){return Qo}),n.d(t,"ParticleBasicMaterial",function(){return $o}),n.d(t,"ParticleSystem",function(){return Jo}),n.d(t,"ParticleSystemMaterial",function(){return ea}),n.d(t,"Path",function(){return Mi}),n.d(t,"PerspectiveCamera",function(){return K}),n.d(t,"Plane",function(){return $}),n.d(t,"PlaneBufferGeometry",function(){return ie}),n.d(t,"PlaneGeometry",function(){return re}),n.d(t,"PlaneHelper",function(){return zo}),n.d(t,"PointCloud",function(){return Ko}),n.d(t,"PointCloudMaterial",function(){return Zo}),n.d(t,"PointLight",function(){return Li}),n.d(t,"PointLightHelper",function(){return Do}),n.d(t,"Points",function(){return on}),n.d(t,"PointsMaterial",function(){return rn}),n.d(t,"PolarGridHelper",function(){return No}),n.d(t,"PolyhedronBufferGeometry",function(){return dn}),n.d(t,"PolyhedronGeometry",function(){return fn}),n.d(t,"PositionalAudio",function(){return uo}),n.d(t,"PositionalAudioHelper",function(){return Uo}),n.d(t,"PropertyBinding",function(){return po}),n.d(t,"PropertyMixer",function(){return lo}),n.d(t,"QuadraticBezierCurve",function(){return Ei}),n.d(t,"QuadraticBezierCurve3",function(){return Si}),n.d(t,"Quaternion",function(){return o}),n.d(t,"QuaternionKeyframeTrack",function(){return Wr}),n.d(t,"QuaternionLinearInterpolant",function(){return Hr}),n.d(t,"REVISION",function(){return Ea}),n.d(t,"RGBADepthPacking",function(){return sc}),n.d(t,"RGBAFormat",function(){return lu}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return Uu}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return Pu}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return Lu}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return Nu}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return Fu}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return Bu}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return ku}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return Cu}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return Mu}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return Au}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return Ou}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return Du}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return Iu}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return Ru}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Eu}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Tu}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return yu}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return bu}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return _u}),n.d(t,"RGBDEncoding",function(){return oc}),n.d(t,"RGBEEncoding",function(){return tc}),n.d(t,"RGBEFormat",function(){return fu}),n.d(t,"RGBFormat",function(){return cu}),n.d(t,"RGBM16Encoding",function(){return ic}),n.d(t,"RGBM7Encoding",function(){return rc}),n.d(t,"RGB_ETC1_Format",function(){return Su}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return wu}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return xu}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return vu}),n.d(t,"RawShaderMaterial",function(){return Cr}),n.d(t,"Ray",function(){return b}),n.d(t,"Raycaster",function(){return bo}),n.d(t,"RectAreaLight",function(){return ji}),n.d(t,"RectAreaLightHelper",function(){return Io}),n.d(t,"RedFormat",function(){return gu}),n.d(t,"ReinhardToneMapping",function(){return Ss}),n.d(t,"RepeatWrapping",function(){return Us}),n.d(t,"ReplaceStencilOp",function(){return pc}),n.d(t,"ReverseSubtractEquation",function(){return Za}),n.d(t,"RingBufferGeometry",function(){return fr}),n.d(t,"RingGeometry",function(){return pr}),n.d(t,"Scene",function(){return g}),n.d(t,"SceneUtils",function(){return Ul}),n.d(t,"ShaderChunk",function(){return Hc}),n.d(t,"ShaderLib",function(){return qc}),n.d(t,"ShaderMaterial",function(){return Y}),n.d(t,"ShadowMaterial",function(){return kr}),n.d(t,"Shape",function(){return Ai}),n.d(t,"ShapeBufferGeometry",function(){return vr}),n.d(t,"ShapeGeometry",function(){return gr}),n.d(t,"ShapePath",function(){return Yi}),n.d(t,"ShapeUtils",function(){return cl}),n.d(t,"ShortType",function(){return Zs}),n.d(t,"Skeleton",function(){return Jt}),n.d(t,"SkeletonHelper",function(){return Oo}),n.d(t,"SkinnedMesh",function(){return Qt}),n.d(t,"SmoothShading",function(){return ja}),n.d(t,"Sphere",function(){return y}),n.d(t,"SphereBufferGeometry",function(){return hr}),n.d(t,"SphereGeometry",function(){return lr}),n.d(t,"Spherical",function(){return wo}),n.d(t,"SphericalHarmonics3",function(){return eo}),n.d(t,"SphericalReflectionMapping",function(){return Ps}),n.d(t,"Spline",function(){return da}),n.d(t,"SplineCurve",function(){return ki}),n.d(t,"SplineCurve3",function(){return fa}),n.d(t,"SpotLight",function(){return Pi}),n.d(t,"SpotLightHelper",function(){return Mo}),n.d(t,"SpotLightShadow",function(){return Ri}),n.d(t,"Sprite",function(){return Xt}),n.d(t,"SpriteMaterial",function(){return Yt}),n.d(t,"SrcAlphaFactor",function(){return os}),n.d(t,"SrcAlphaSaturateFactor",function(){return hs}),n.d(t,"SrcColorFactor",function(){return rs}),n.d(t,"StereoCamera",function(){return io}),n.d(t,"StringKeyframeTrack",function(){return qr}),n.d(t,"SubtractEquation",function(){return Ja}),n.d(t,"SubtractiveBlending",function(){return Ya}),n.d(t,"TOUCH",function(){return ka}),n.d(t,"TangentSpaceNormalMap",function(){return uc}),n.d(t,"TetrahedronBufferGeometry",function(){return gn}),n.d(t,"TetrahedronGeometry",function(){return mn}),n.d(t,"TextBufferGeometry",function(){return cr}),n.d(t,"TextGeometry",function(){return ur}),n.d(t,"Texture",function(){return u}),n.d(t,"TextureLoader",function(){return ii}),n.d(t,"TorusBufferGeometry",function(){return Mn}),n.d(t,"TorusGeometry",function(){return Cn}),n.d(t,"TorusKnotBufferGeometry",function(){return kn}),n.d(t,"TorusKnotGeometry",function(){return Sn}),n.d(t,"Triangle",function(){return _}),n.d(t,"TriangleFanDrawMode",function(){return Ju}),n.d(t,"TriangleStripDrawMode",function(){return Qu}),n.d(t,"TrianglesDrawMode",function(){return Ku}),n.d(t,"TubeBufferGeometry",function(){return En}),n.d(t,"TubeGeometry",function(){return Tn}),n.d(t,"UVMapping",function(){return As}),n.d(t,"Uint16Attribute",function(){return sa}),n.d(t,"Uint16BufferAttribute",function(){return R}),n.d(t,"Uint32Attribute",function(){return ca}),n.d(t,"Uint32BufferAttribute",function(){return L}),n.d(t,"Uint8Attribute",function(){return ia}),n.d(t,"Uint8BufferAttribute",function(){return O});n.d(t,"Uint8ClampedAttribute",function(){return oa}),n.d(t,"Uint8ClampedBufferAttribute",function(){return D}),n.d(t,"Uncharted2ToneMapping",function(){return ks}),n.d(t,"Uniform",function(){return vo}),n.d(t,"UniformsLib",function(){return Wc}),n.d(t,"UniformsUtils",function(){return Bc}),n.d(t,"UnsignedByteType",function(){return Qs}),n.d(t,"UnsignedInt248Type",function(){return su}),n.d(t,"UnsignedIntType",function(){return tu}),n.d(t,"UnsignedShort4444Type",function(){return iu}),n.d(t,"UnsignedShort5551Type",function(){return ou}),n.d(t,"UnsignedShort565Type",function(){return au}),n.d(t,"UnsignedShortType",function(){return $s}),n.d(t,"Vector2",function(){return i}),n.d(t,"Vector3",function(){return a}),n.d(t,"Vector4",function(){return c}),n.d(t,"VectorKeyframeTrack",function(){return Yr}),n.d(t,"Vertex",function(){return ta}),n.d(t,"VertexColors",function(){return za}),n.d(t,"VertexNormalsHelper",function(){return Co}),n.d(t,"VideoTexture",function(){return an}),n.d(t,"WebGLMultisampleRenderTarget",function(){return h}),n.d(t,"WebGLRenderTarget",function(){return l}),n.d(t,"WebGLRenderTargetCube",function(){return J}),n.d(t,"WebGLRenderer",function(){return Vt}),n.d(t,"WebGLUtils",function(){return Nt}),n.d(t,"WireframeGeometry",function(){return ln}),n.d(t,"WireframeHelper",function(){return ya}),n.d(t,"WrapAroundEnding",function(){return Xu}),n.d(t,"XHRLoader",function(){return ba}),n.d(t,"ZeroCurvatureEnding",function(){return qu}),n.d(t,"ZeroFactor",function(){return ts}),n.d(t,"ZeroSlopeEnding",function(){return Yu}),n.d(t,"ZeroStencilOp",function(){return lc}),n.d(t,"sRGBEncoding",function(){return $u}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}});var Ea="107",Sa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ka={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ca=0,Ma=1,Aa=2,Oa=3,Da=0,Ia=1,Ra=0,Pa=1,La=2,Na=0,Ua=1,Fa=2,Ba=1,ja=2,Ga=0,Va=1,za=2,Ha=0,Wa=1,qa=2,Ya=3,Xa=4,Ka=5,Qa=100,Ja=101,Za=102,$a=103,es=104,ts=200,ns=201,rs=202,is=203,os=204,as=205,ss=206,us=207,cs=208,ls=209,hs=210,ps=0,fs=1,ds=2,ms=3,gs=4,vs=5,ys=6,bs=7,_s=0,xs=1,ws=2,Ts=0,Es=1,Ss=2,ks=3,Cs=4,Ms=5,As=300,Os=301,Ds=302,Is=303,Rs=304,Ps=305,Ls=306,Ns=307,Us=1e3,Fs=1001,Bs=1002,js=1003,Gs=1004,Vs=1004,zs=1005,Hs=1005,Ws=1006,qs=1007,Ys=1007,Xs=1008,Ks=1008,Qs=1009,Js=1010,Zs=1011,$s=1012,eu=1013,tu=1014,nu=1015,ru=1016,iu=1017,ou=1018,au=1019,su=1020,uu=1021,cu=1022,lu=1023,hu=1024,pu=1025,fu=lu,du=1026,mu=1027,gu=1028,vu=33776,yu=33777,bu=33778,_u=33779,xu=35840,wu=35841,Tu=35842,Eu=35843,Su=36196,ku=37808,Cu=37809,Mu=37810,Au=37811,Ou=37812,Du=37813,Iu=37814,Ru=37815,Pu=37816,Lu=37817,Nu=37818,Uu=37819,Fu=37820,Bu=37821,ju=2200,Gu=2201,Vu=2202,zu=2300,Hu=2301,Wu=2302,qu=2400,Yu=2401,Xu=2402,Ku=0,Qu=1,Ju=2,Zu=3e3,$u=3001,ec=3007,tc=3002,nc=3003,rc=3004,ic=3005,oc=3006,ac=3200,sc=3201,uc=0,cc=1,lc=0,hc=7680,pc=7681,fc=7682,dc=7683,mc=34055,gc=34056,vc=5386,yc=512,bc=513,_c=514,xc=515,wc=516,Tc=517,Ec=518,Sc=519,kc={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*kc.DEG2RAD},radToDeg:function(e){return e*kc.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(i.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(o,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],p=i[o+1],f=i[o+2],d=i[o+3];if(l!==d||s!==h||u!==p||c!==f){var m=1-a,g=s*h+u*p+c*f+l*d,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,g*v);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var x=a*v;if(s=s*m+h*x,u=u*m+p*x,c=c*m+f*x,l=l*m+d*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(o.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),p=s(r/2),f=s(i/2);return"XYZ"===o?(this._x=h*c*l+u*p*f,this._y=u*p*l-h*c*f,this._z=u*c*f+h*p*l,this._w=u*c*l-h*p*f):"YXZ"===o?(this._x=h*c*l+u*p*f,this._y=u*p*l-h*c*f,this._z=u*c*f-h*p*l,this._w=u*c*l+h*p*f):"ZXY"===o?(this._x=h*c*l-u*p*f,this._y=u*p*l+h*c*f,this._z=u*c*f+h*p*l,this._w=u*c*l-h*p*f):"ZYX"===o?(this._x=h*c*l-u*p*f,this._y=u*p*l+h*c*f,this._z=u*c*f-h*p*l,this._w=u*c*l+h*p*f):"YZX"===o?(this._x=h*c*l+u*p*f,this._y=u*p*l+h*c*f,this._z=u*c*f-h*p*l,this._w=u*c*l-h*p*f):"XZY"===o&&(this._x=h*c*l-u*p*f,this._y=u*p*l-h*c*f,this._z=u*c*f+h*p*l,this._w=u*c*l+h*p*f),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(l-u)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(u+l)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(kc.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),h=Math.sin((1-t)*l)/c,p=Math.sin(t*l)/c;return this._w=o*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=i*h+this._z*p,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new o;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new o;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new a;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new a;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(kc.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Cc;Object.assign(s.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){void 0===Cc&&(Cc=new a);for(var t=0,n=e.count;t<n;t++)Cc.x=e.getX(t),Cc.y=e.getY(t),Cc.z=e.getZ(t),Cc.applyMatrix3(this),e.setXYZ(t,Cc.x,Cc.y,Cc.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],p=n[5],f=n[8],d=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*d+a*v+s*_,i[3]=o*m+a*y+s*x,i[6]=o*g+a*b+s*w,i[1]=u*d+c*v+l*_,i[4]=u*m+c*y+l*x,i[7]=u*g+c*b+l*w,i[2]=h*d+p*v+f*_,i[5]=h*m+p*y+f*x,i[8]=h*g+p*b+f*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],p=n[8],f=p*u-c*h,d=c*l-p*s,m=h*s-u*l,g=i*f+o*d+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=f*y,r[1]=(a*h-p*o)*y,r[2]=(c*o-a*u)*y,r[3]=d*y,r[4]=(p*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Mc,Ac={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Mc&&(Mc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Mc.width=e.width,Mc.height=e.height;var n=Mc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Mc}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Oc=0;u.DEFAULT_IMAGE=void 0,u.DEFAULT_MAPPING=As,u.prototype=Object.assign(Object.create(r.prototype),{constructor:u,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=kc.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Ac.getDataURL(r[o]))}else i=Ac.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==As)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Us:e.x=e.x-Math.floor(e.x);break;case Fs:e.x=e.x<0?0:1;break;case Bs:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Us:e.y=e.y-Math.floor(e.y);break;case Fs:e.y=e.y<0?0:1;break;case Bs:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(u.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(c.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(c.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],h=o[9],p=o[2],f=o[6],d=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-p)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+p)<.1&&Math.abs(h+f)<.1&&Math.abs(a+l+d-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(l+1)/2,v=(d+1)/2,y=(s+c)/4,b=(u+p)/4,_=(h+f)/4;return m>g&&m>v?m<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=y/n,i=b/n):g>v?g<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(g),n=y/r,i=_/r):v<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}var x=Math.sqrt((f-h)*(f-h)+(u-p)*(u-p)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(f-h)/x,this.y=(u-p)/x,this.z=(c-s)/x,this.w=Math.acos((a+l+d-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),l.prototype=Object.assign(Object.create(r.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),h.prototype=Object.assign(Object.create(l.prototype),{constructor:h,isWebGLMultisampleRenderTarget:!0,copy:function(e){return l.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(p.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,c,l,h,p,f,d,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new p).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new a;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*c,p=o*l,f=a*c,d=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=p+f*u,t[5]=h-d*u,t[9]=-a*s,t[2]=d-h*u,t[6]=f+p*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*l,v=u*c,y=u*l;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*c,g=s*l,v=u*c,y=u*l;t[0]=m-y*a,t[4]=-o*l,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*c,p=o*l,f=a*c,d=a*l;t[0]=s*c,t[4]=f*u-p,t[8]=h*u+d,t[1]=s*l,t[5]=d*u+h,t[9]=p*u-f,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,_=o*u,x=a*s,w=a*u;t[0]=s*c,t[4]=w-b*l,t[8]=x*l+_,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=_*l+x,t[10]=b-w*l}else if("XZY"===e.order){var b=o*s,_=o*u,x=a*s,w=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=b*l+w,t[5]=o*c,t[9]=_*l-x,t[2]=x*l-_,t[6]=a*c,t[10]=w*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new a(0,0,0),t=new a(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new a,t=new a,n=new a;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],p=n[13],f=n[2],d=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],T=r[8],E=r[12],S=r[1],k=r[5],C=r[9],M=r[13],A=r[2],O=r[6],D=r[10],I=r[14],R=r[3],P=r[7],L=r[11],N=r[15];return i[0]=o*x+a*S+s*A+u*R,i[4]=o*w+a*k+s*O+u*P,i[8]=o*T+a*C+s*D+u*L,i[12]=o*E+a*M+s*I+u*N,i[1]=c*x+l*S+h*A+p*R,i[5]=c*w+l*k+h*O+p*P,i[9]=c*T+l*C+h*D+p*L,i[13]=c*E+l*M+h*I+p*N,i[2]=f*x+d*S+m*A+g*R,i[6]=f*w+d*k+m*O+g*P,i[10]=f*T+d*C+m*D+g*L,i[14]=f*E+d*M+m*I+g*N,i[3]=v*x+y*S+b*A+_*R,i[7]=v*w+y*k+b*O+_*P,i[11]=v*T+y*C+b*D+_*L,i[15]=v*E+y*M+b*I+_*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],p=e[14];return e[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*p-n*s*p)+e[7]*(+t*s*p-t*u*h+i*o*h-r*o*p+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*p-i*o*l+n*o*p+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],p=r[8],f=r[9],d=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],_=f*y*h-v*d*h+v*l*m-c*y*m-f*l*b+c*d*b,x=g*d*h-p*y*h-g*l*m+u*y*m+p*l*b-u*d*b,w=p*v*h-g*f*h+g*c*m-u*v*m-p*c*b+u*f*b,T=g*f*l-p*v*l-g*c*d+u*v*d+p*c*y-u*f*y,E=i*_+o*x+a*w+s*T;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var k=1/E;return n[0]=_*k,n[1]=(v*d*s-f*y*s-v*a*m+o*y*m+f*a*b-o*d*b)*k,n[2]=(c*y*s-v*l*s+v*a*h-o*y*h-c*a*b+o*l*b)*k,n[3]=(f*l*s-c*d*s-f*a*h+o*d*h+c*a*m-o*l*m)*k,n[4]=x*k,n[5]=(p*y*s-g*d*s+g*a*m-i*y*m-p*a*b+i*d*b)*k,n[6]=(g*l*s-u*y*s-g*a*h+i*y*h+u*a*b-i*l*b)*k,n[7]=(u*d*s-p*l*s+p*a*h-i*d*h-u*a*m+i*l*m)*k,n[8]=w*k,n[9]=(g*f*s-p*v*s-g*o*m+i*v*m+p*o*b-i*f*b)*k,n[10]=(u*v*s-g*c*s+g*o*h-i*v*h-u*o*b+i*c*b)*k,n[11]=(p*c*s-u*f*s-p*o*h+i*f*h+u*o*m-i*c*m)*k,n[12]=T*k,n[13]=(p*v*a-g*f*a+g*o*d-i*v*d-p*o*y+i*f*y)*k,n[14]=(g*c*a-u*v*a-g*o*l+i*v*l+u*o*y-i*c*y)*k,n[15]=(u*f*a-p*c*a+p*o*l-i*f*l-u*o*d+i*c*d)*k,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,h=i*u,p=i*c,f=i*l,d=o*c,m=o*l,g=a*l,v=s*u,y=s*c,b=s*l,_=n.x,x=n.y,w=n.z;return r[0]=(1-(d+g))*_,r[1]=(p+b)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(p-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+d))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new a,t=new p;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/a,l=1/s,h=1/u;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=l,t.elements[5]*=l,t.elements[6]*=l,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,h=(n+r)*u,p=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Dc,Ic;f.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],f.DefaultOrder="XYZ",Object.defineProperties(f.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(f.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=kc.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],h=i[2],p=i[6],f=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return void 0===Dc&&(Dc=new p),Dc.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Dc,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return void 0===Ic&&(Ic=new o),Ic.setFromEuler(this),this.setFromQuaternion(Ic,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(d.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Rc=0;m.DefaultUp=new a(0,1,0),m.DefaultMatrixAutoUpdate=!0,m.prototype=Object.assign(Object.create(r.prototype),{constructor:m,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new o;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new o;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new a(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new a(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new a(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new a;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new a(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new a(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new a(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new p;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o,t=new p,n=new a,r=new a;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent({type:"removed"})),this},attach:function(){var e=new p;return function(t){return this.updateWorldMatrix(!0,!1),e.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),e.multiply(t.parent.matrixWorld)),t.applyMatrix(e),t.updateWorldMatrix(!1,!1),this.add(t),this}}(),getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new a),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new a,t=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new a,t=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var r=void 0===e||"string"===typeof e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ku&&(o.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];t(e.shapes,l)}else t(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],u=0,c=this.material.length;u<c;u++)h.push(t(e.materials,this.material[u]));o.material=h}else o.material=t(e.materials,this.material);if(this.children.length>0){o.children=[];for(var u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(e).object)}if(r){var p=n(e.geometries),f=n(e.materials),d=n(e.textures),m=n(e.images),s=n(e.shapes);p.length>0&&(i.geometries=p),f.length>0&&(i.materials=f),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),s.length>0&&(i.shapes=s)}return i.object=o,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),g.prototype=Object.assign(Object.create(m.prototype),{constructor:g,isScene:!0,copy:function(e,t){return m.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=m.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(v.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,r=a.length;n<r;n++)i.copy(a[n]),i.applyMatrix4(e.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)i.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),t.expandByPoint(i)}}var t,n,r,i=new a;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new a),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new a;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){function e(e){var i,o;for(i=0,o=e.length-3;i<=o;i+=3){u.fromArray(e,i);var a=l.x*Math.abs(u.x)+l.y*Math.abs(u.y)+l.z*Math.abs(u.z),s=t.dot(u),c=n.dot(u),h=r.dot(u);if(Math.max(-Math.max(s,c,h),Math.min(s,c,h))>a)return!1}return!0}var t=new a,n=new a,r=new a,i=new a,o=new a,s=new a,u=new a,c=new a,l=new a,h=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(c),l.subVectors(this.max,c),t.subVectors(a.a,c),n.subVectors(a.b,c),r.subVectors(a.c,c),i.subVectors(n,t),o.subVectors(r,n),s.subVectors(t,r);var u=[0,-i.z,i.y,0,-o.z,o.y,0,-s.z,s.y,i.z,0,-i.x,o.z,0,-o.x,s.z,0,-s.x,-i.y,i.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!e(u)&&(u=[1,0,0,0,1,0,0,0,1],!!e(u)&&(h.crossVectors(i,o),u=[h.x,h.y,h.z],e(u)))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new a),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new a;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new a,new a,new a,new a,new a,new a,new a,new a];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Pc;Object.assign(y.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){void 0===Pc&&(Pc=new v);var n=this.center;void 0!==t?n.copy(t):Pc.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new a),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new v),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(b.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new a),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new a;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new a),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new a;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new a,t=new a,n=new a;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,u,c,l,h=.5*r.distanceTo(i),p=-this.direction.dot(t),f=n.dot(this.direction),d=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-p*p);if(g>0)if(s=p*d-f,u=p*f-d,l=h*g,s>=0)if(u>=-l)if(u<=l){var v=1/g;s*=v,u*=v,c=s*(s+p*u+2*f)+u*(p*s+u+2*d)+m}else u=h,s=Math.max(0,-(p*u+f)),c=-s*s+u*(u+2*d)+m;else u=-h,s=Math.max(0,-(p*u+f)),c=-s*s+u*(u+2*d)+m;else u<=-l?(s=Math.max(0,-(-p*h+f)),u=s>0?-h:Math.min(Math.max(-h,-d),h),c=-s*s+u*(u+2*d)+m):u<=l?(s=0,u=Math.min(Math.max(-h,-d),h),c=u*(u+2*d)+m):(s=Math.max(0,-(p*h+f)),u=s>0?h:Math.min(Math.max(-h,-d),h),c=-s*s+u*(u+2*d)+m);else u=p>0?-h:h,s=Math.max(0,-(p*u+f)),c=-s*s+u*(u+2*d)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),c}}(),intersectSphere:function(){var e=new a;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new a;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new a,t=new a,n=new a,r=new a;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var c,l=this.direction.dot(r);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}e.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=c*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>l)return null;var f=-c*e.dot(r);return f<0?null:this.at(f/l,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(_,{getNormal:function(){var e=new a;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new a),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new a,t=new a,n=new a;return function(r,i,o,s,u){e.subVectors(s,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),l=e.dot(t),h=e.dot(n),p=t.dot(t),f=t.dot(n),d=c*p-l*l;if(void 0===u&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),u=new a),0===d)return u.set(-2,-1,-1);var m=1/d,g=(p*h-l*f)*m,v=(c*f-l*h)*m;return u.set(1-g-v,v,g)}}(),containsPoint:function(){var e=new a;return function(t,n,r,i){return _.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new a;return function(t,n,r,i,o,a,s,u){return this.getBarycoord(t,n,r,i,e),u.set(0,0),u.addScaledVector(o,e.x),u.addScaledVector(a,e.y),u.addScaledVector(s,e.z),u}}(),isFrontFacing:function(){var e=new a,t=new a;return function(n,r,i,o){return e.subVectors(i,r),t.subVectors(n,r),e.cross(t).dot(o)<0}}()}),Object.assign(_.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new a,t=new a;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new a),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return _.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new a),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return _.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return _.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return _.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return _.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new a,t=new a,n=new a,r=new a,i=new a,o=new a;return function(s,u){void 0===u&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),u=new a);var c,l,h=this.a,p=this.b,f=this.c;e.subVectors(p,h),t.subVectors(f,h),r.subVectors(s,h);var d=e.dot(r),m=t.dot(r);if(d<=0&&m<=0)return u.copy(h);i.subVectors(s,p);var g=e.dot(i),v=t.dot(i);if(g>=0&&v<=g)return u.copy(p);var y=d*v-g*m;if(y<=0&&d>=0&&g<=0)return c=d/(d-g),u.copy(h).addScaledVector(e,c);o.subVectors(s,f);var b=e.dot(o),_=t.dot(o);if(_>=0&&b<=_)return u.copy(f);var x=b*m-d*_;if(x<=0&&m>=0&&_<=0)return l=m/(m-_),u.copy(h).addScaledVector(t,l);var w=g*_-b*v;if(w<=0&&v-g>=0&&b-_>=0)return n.subVectors(f,p),l=(v-g)/(v-g+(b-_)),u.copy(p).addScaledVector(n,l);var T=1/(w+x+y);return c=x*T,l=y*T,u.copy(h).addScaledVector(e,c).addScaledVector(t,l)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Lc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(x.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=kc.euclideanModulo(e,1),t=kc.clamp(t,0,1),n=kc.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=w(i,r,e+1/3),this.g=w(i,r,e),this.b=w(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(e&&e.length>0){var c=Lc[e];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=T(e.r),this.g=T(e.g),this.b=T(e.b),this},copyLinearToSRGB:function(e){return this.r=E(e.r),this.g=E(e.g),this.b=E(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t);var i=kc.lerp(e.h,t.h,r),o=kc.lerp(e.s,t.s,r),a=kc.lerp(e.l,t.l,r);return this.setHSL(i,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(S.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Nc=0;k.prototype=Object.assign(Object.create(r.prototype),{constructor:k,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Ba;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Wa&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==Na&&(r.side=this.side),this.vertexColors!==Ga&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilMask=this.stencilMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var i=t(e.textures),o=t(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilMask=e.stencilMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),C.prototype=Object.create(k.prototype),C.prototype.constructor=C,C.prototype.isMeshBasicMaterial=!0,C.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(M.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(M.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new x),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new c),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),A.prototype=Object.create(M.prototype),A.prototype.constructor=A,O.prototype=Object.create(M.prototype),O.prototype.constructor=O,D.prototype=Object.create(M.prototype),D.prototype.constructor=D,I.prototype=Object.create(M.prototype),I.prototype.constructor=I,R.prototype=Object.create(M.prototype),R.prototype.constructor=R,P.prototype=Object.create(M.prototype),P.prototype.constructor=P,L.prototype=Object.create(M.prototype),L.prototype.constructor=L,N.prototype=Object.create(M.prototype),N.prototype.constructor=N,U.prototype=Object.create(M.prototype),U.prototype.constructor=U,Object.assign(F.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,u=e.morphTargets,c=u.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:u[l].name,data:[]};this.morphTargets.position=t}var h,p=e.morphNormals,f=p.length;if(f>0){h=[];for(var l=0;l<f;l++)h[l]={name:p[l].name,data:[]};this.morphTargets.normal=h}var d=e.skinIndices,m=e.skinWeights,g=d.length===r.length,v=m.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var l=0;l<n.length;l++){var y=n[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w)}if(!0===a){var T=o[0][l];void 0!==T?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new i,new i,new i))}if(!0===s){var T=o[1][l];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new i,new i,new i))}for(var E=0;E<c;E++){var S=u[E].vertices;t[E].data.push(S[y.a],S[y.b],S[y.c])}for(var E=0;E<f;E++){var k=p[E].vertexNormals[l];h[E].data.push(k.a,k.b,k.c)}g&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Uc=1;j.prototype=Object.assign(Object.create(r.prototype),{constructor:j,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(B(e)>65535?L:R)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new M(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new s).getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}var i=this.attributes.tangent;if(void 0!==i){var r=(new s).getNormalMatrix(e);r.applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new p;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new p;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new p;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new p;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new p;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new m;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new N(3*t.vertices.length,3),r=new N(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new N(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new N(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new F).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new M(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new M(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new M(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new M(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new M(o,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var a in e.morphTargets){for(var s=[],u=e.morphTargets[a],c=0,l=u.length;c<l;c++){var h=u[c],p=new N(3*h.data.length,3);p.name=h.name,s.push(p.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var f=new N(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new N(4*e.skinWeights.length,4);this.addAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new v;return function(){null===this.boundingBox&&(this.boundingBox=new v);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var r=0,i=n.length;r<i;r++){var o=n[r];e.setFromBufferAttribute(o),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new v,t=new v,n=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new y);var r=this.attributes.position,i=this.morphAttributes.position;if(r){var o=this.boundingSphere.center;if(e.setFromBufferAttribute(r),i)for(var a=0,s=i.length;a<s;a++){var u=i[a];t.setFromBufferAttribute(u),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(o);for(var c=0,a=0,s=r.count;a<s;a++)n.fromBufferAttribute(r,a),c=Math.max(c,o.distanceToSquared(n));if(i)for(var a=0,s=i.length;a<s;a++)for(var u=i[a],l=0,h=u.count;l<h;l++)n.fromBufferAttribute(u,l),c=Math.max(c,o.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new M(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var s,u,c,l=t.normal.array,h=new a,p=new a,f=new a,d=new a,m=new a;if(e)for(var g=e.array,i=0,o=e.count;i<o;i+=3)s=3*g[i+0],u=3*g[i+1],c=3*g[i+2],h.fromArray(n,s),p.fromArray(n,u),f.fromArray(n,c),d.subVectors(f,p),m.subVectors(h,p),d.cross(m),l[s]+=d.x,l[s+1]+=d.y,l[s+2]+=d.z,l[u]+=d.x,l[u+1]+=d.y,l[u+2]+=d.z,l[c]+=d.x,l[c+1]+=d.y,l[c+2]+=d.z;else for(var i=0,o=n.length;i<o;i+=9)h.fromArray(n,i),p.fromArray(n,i+3),f.fromArray(n,i+6),d.subVectors(f,p),m.subVectors(h,p),d.cross(m),l[i]=d.x,l[i+1]=d.y,l[i+2]=d.z,l[i+3]=d.x,l[i+4]=d.y,l[i+5]=d.z,l[i+6]=d.x,l[i+7]=d.y,l[i+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],o=i.array,a=e.attributes[r],s=a.array,u=a.itemSize*t,c=Math.min(s.length,o.length-u),l=0,h=u;l<c;l++,h++)o[h]=s[l];return this},normalizeNormals:function(){var e=new a;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,u=t.length;s<u;s++){o=t[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new M(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new j,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],a=e(o,n);t.addAttribute(i,a)}var s=this.morphAttributes;for(i in s){for(var u=[],c=s[i],l=0,h=c.length;l<h;l++){var o=c[l],a=e(o,n);u.push(a)}t.morphAttributes[i]=u}for(var p=this.groups,l=0,f=p.length;l<f;l++){var d=p[l];t.addGroup(d.start,d.count,d.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=i[n],a=o.toJSON();""!==o.name&&(a.name=o.name),e.data.attributes[n]=a}var s={},u=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],l=[],h=0,p=c.length;h<p;h++){var o=c[h],a=o.toJSON();""!==o.name&&(a.name=o.name),l.push(a)}l.length>0&&(s[n]=l,u=!0)}u&&(e.data.morphAttributes=s);var f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));var d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e},clone:function(){return(new j).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],c=s[t];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[t]=u}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),G.prototype=Object.assign(Object.create(m.prototype),{constructor:G,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return m.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){function e(e,t,n,r,i,o,a,s){if(null===(t.side===Ua?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==Fa,s)))return null;E.copy(s),E.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(E);return u<n.near||u>n.far?null:{distance:u,point:E.clone(),object:e}}function t(t,n,r,o,a,p,y,b,E,k,C){s.fromBufferAttribute(a,E),u.fromBufferAttribute(a,k),c.fromBufferAttribute(a,C);var M=t.morphTargetInfluences;if(n.morphTargets&&p&&M){d.set(0,0,0),m.set(0,0,0),g.set(0,0,0);for(var A=0,O=p.length;A<O;A++){var D=M[A],I=p[A];0!==D&&(l.fromBufferAttribute(I,E),h.fromBufferAttribute(I,k),f.fromBufferAttribute(I,C),d.addScaledVector(l.sub(s),D),m.addScaledVector(h.sub(u),D),g.addScaledVector(f.sub(c),D))}s.add(d),u.add(m),c.add(g)}var R=e(t,n,r,o,s,u,c,T);if(R){y&&(v.fromBufferAttribute(y,E),x.fromBufferAttribute(y,k),w.fromBufferAttribute(y,C),R.uv=_.getUV(T,s,u,c,v,x,w,new i)),b&&(v.fromBufferAttribute(b,E),x.fromBufferAttribute(b,k),w.fromBufferAttribute(b,C),R.uv2=_.getUV(T,s,u,c,v,x,w,new i));var P=new S(E,k,C);_.getNormal(s,u,c,P.normal),R.face=P}return R}var n=new p,r=new b,o=new y,s=new a,u=new a,c=new a,l=new a,h=new a,f=new a,d=new a,m=new a,g=new a,v=new i,x=new i,w=new i,T=new a,E=new a;return function(a,s){var u=this.geometry,c=this.material,l=this.matrixWorld;if(void 0!==c&&(null===u.boundingSphere&&u.computeBoundingSphere(),o.copy(u.boundingSphere),o.applyMatrix4(l),!1!==a.ray.intersectsSphere(o)&&(n.getInverse(l),r.copy(a.ray).applyMatrix4(n),null===u.boundingBox||!1!==r.intersectsBox(u.boundingBox)))){var h;if(u.isBufferGeometry){var p,f,d,m,g,y,b,E,S,k,C,M=u.index,A=u.attributes.position,O=u.morphAttributes.position,D=u.attributes.uv,I=u.attributes.uv2,R=u.groups,P=u.drawRange;if(null!==M)if(Array.isArray(c))for(m=0,y=R.length;m<y;m++)for(E=R[m],S=c[E.materialIndex],k=Math.max(E.start,P.start),C=Math.min(E.start+E.count,P.start+P.count),g=k,b=C;g<b;g+=3)p=M.getX(g),f=M.getX(g+1),d=M.getX(g+2),(h=t(this,S,a,r,A,O,D,I,p,f,d))&&(h.faceIndex=Math.floor(g/3),h.face.materialIndex=E.materialIndex,s.push(h));else for(k=Math.max(0,P.start),C=Math.min(M.count,P.start+P.count),m=k,y=C;m<y;m+=3)p=M.getX(m),f=M.getX(m+1),d=M.getX(m+2),(h=t(this,c,a,r,A,O,D,I,p,f,d))&&(h.faceIndex=Math.floor(m/3),s.push(h));else if(void 0!==A)if(Array.isArray(c))for(m=0,y=R.length;m<y;m++)for(E=R[m],S=c[E.materialIndex],k=Math.max(E.start,P.start),C=Math.min(E.start+E.count,P.start+P.count),g=k,b=C;g<b;g+=3)p=g,f=g+1,d=g+2,(h=t(this,S,a,r,A,O,D,I,p,f,d))&&(h.faceIndex=Math.floor(g/3),h.face.materialIndex=E.materialIndex,s.push(h));else for(k=Math.max(0,P.start),C=Math.min(A.count,P.start+P.count),m=k,y=C;m<y;m+=3)p=m,f=m+1,d=m+2,(h=t(this,c,a,r,A,O,D,I,p,f,d))&&(h.faceIndex=Math.floor(m/3),s.push(h))}else if(u.isGeometry){var L,N,U,F,B=Array.isArray(c),j=u.vertices,G=u.faces,V=u.faceVertexUvs[0];V.length>0&&(F=V);for(var z=0,H=G.length;z<H;z++){var W=G[z],q=B?c[W.materialIndex]:c;if(void 0!==q&&(L=j[W.a],N=j[W.b],U=j[W.c],h=e(this,q,a,r,L,N,U,T))){if(F&&F[z]){var Y=F[z];v.copy(Y[0]),x.copy(Y[1]),w.copy(Y[2]),h.uv=_.getUV(T,L,N,U,v,x,w,new i)}h.face=W,h.faceIndex=z,s.push(h)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Fc=0;V.prototype=Object.assign(Object.create(r.prototype),{constructor:V,isGeometry:!0,applyMatrix:function(e){for(var t=(new s).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new p;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new p;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new p;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new p;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new p;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new m;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,o){var s=void 0===c?[]:[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()],p=void 0===u?[]:[(new a).fromArray(u,3*e),(new a).fromArray(u,3*t),(new a).fromArray(u,3*r)],f=new S(e,t,r,p,s,o);n.faces.push(f),void 0!==l&&n.faceVertexUvs[0].push([(new i).fromArray(l,2*e),(new i).fromArray(l,2*t),(new i).fromArray(l,2*r)]),void 0!==h&&n.faceVertexUvs[1].push([(new i).fromArray(h,2*e),(new i).fromArray(h,2*t),(new i).fromArray(h,2*r)])}var n=this,r=null!==e.index?e.index.array:void 0,o=e.attributes,s=o.position.array,u=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=0;p<s.length;p+=3)n.vertices.push((new a).fromArray(s,p)),void 0!==c&&n.colors.push((new x).fromArray(c,p));var f=e.groups;if(f.length>0)for(var p=0;p<f.length;p++)for(var d=f[p],m=d.start,g=d.count,v=m,y=m+g;v<y;v+=3)void 0!==r?t(r[v],r[v+1],r[v+2],d.materialIndex):t(v,v+1,v+2,d.materialIndex);else if(void 0!==r)for(var p=0;p<r.length;p+=3)t(r[p],r[p+1],r[p+2]);else for(var p=0;p<s.length/3;p+=3)t(p,p+1,p+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new p;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new a,t=new a,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],s=this.vertices[i.b],u=this.vertices[i.c];e.subVectors(u,s),t.subVectors(o,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,i,o,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new a;if(e){var u,c,l,h=new a,p=new a;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],u=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,c),p.subVectors(u,c),h.cross(p),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(s[o.a]),f[1].copy(s[o.b]),f[2].copy(s[o.c])):(f[0]=s[o.a].clone(),f[1]=s[o.b].clone(),f[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new V;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,u,c=this.morphNormals[e].faceNormals,l=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new a,u={a:new a,b:new a,c:new a},c.push(s),l.push(u)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=h.faceNormals[n],u=h.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new v),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new y),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,i=this.vertices.length,o=this.vertices,a=e.vertices,u=this.faces,c=e.faces,l=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new s).getNormalMatrix(t));for(var p=0,f=a.length;p<f;p++){var d=a[p],m=d.clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(var p=0,f=h.length;p<f;p++)l.push(h[p].clone());for(p=0,f=c.length;p<f;p++){var g,v,y,b=c[p],_=b.vertexNormals,x=b.vertexColors;g=new S(b.a+i,b.b+i,b.c+i),g.normal.copy(b.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var w=0,T=_.length;w<T;w++)v=_[w].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(b.color);for(var w=0,T=x.length;w<T;w++)y=x[w],g.vertexColors.push(y.clone());g.materialIndex=b.materialIndex+n,u.push(g)}for(var p=0,f=e.faceVertexUvs.length;p<f;p++){var E=e.faceVertexUvs[p];void 0===this.faceVertexUvs[p]&&(this.faceVertexUvs[p]=[]);for(var w=0,T=E.length;w<T;w++){for(var k=E[w],C=[],M=0,A=k.length;M<A;M++)C.push(k[M].clone());this.faceVertexUvs[p].push(C)}}},mergeMesh:function(e){if(!e||!e.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},c=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===u[t]?(u[t]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var d=p[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new a(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var u=t[r]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/3,h.push(e.x,e.y,e.z),p[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[t]?d[t]:(d[t]=f.length,f.push(e.getHex()),d[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==g[t]?g[t]:(g[t]=m.length/2,m.push(e.x,e.y),g[t])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],h=[],p={},f=[],d={},m=[],g={},u=0;u<this.faces.length;u++){var v=this.faces[u],y=void 0!==this.faceVertexUvs[0][u],b=v.normal.length()>0,_=v.vertexNormals.length>0,x=1!==v.color.r||1!==v.color.g||1!==v.color.b,w=v.vertexColors.length>0,T=0;if(T=e(T,0,0),T=e(T,1,!0),T=e(T,2,!1),T=e(T,3,y),T=e(T,4,b),T=e(T,5,_),T=e(T,6,x),T=e(T,7,w),l.push(T),l.push(v.a,v.b,v.c),l.push(v.materialIndex),y){var E=this.faceVertexUvs[0][u];l.push(r(E[0]),r(E[1]),r(E[2]))}if(b&&l.push(t(v.normal)),_){var S=v.vertexNormals;l.push(t(S[0]),t(S[1]),t(S[2]))}if(x&&l.push(n(v.color)),w){var k=v.vertexColors;l.push(n(k[0]),n(k[1]),n(k[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,f.length>0&&(i.data.colors=f),m.length>0&&(i.data.uvs=[m]),i.data.faces=l,i},clone:function(){return(new V).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],p=[];for(o=0,a=h.length;o<a;o++){var f=h[o];p.push(f.clone())}this.faceVertexUvs[t].push(p)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var m={};if(m.name=d[t].name,void 0!==d[t].vertices)for(m.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)m.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(m.normals=[],r=0,i=d[t].normals.length;r<i;r++)m.normals.push(d[t].normals[r].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],r=0,i=g[t].vertexNormals.length;r<i;r++){var y=g[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],r=0,i=g[t].faceNormals.length;r<i;r++)v.faceNormals.push(g[t].faceNormals[r].clone());this.morphNormals.push(v)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),z.prototype=Object.create(V.prototype),z.prototype.constructor=z,H.prototype=Object.create(j.prototype),H.prototype.constructor=H;var Bc={clone:W,merge:q},jc="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Gc="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";Y.prototype=Object.create(k.prototype),Y.prototype.constructor=Y,Y.prototype.isShaderMaterial=!0,Y.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=W(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Y.prototype.toJSON=function(e){var t=k.prototype.toJSON.call(this,e);t.uniforms={};for(var n in this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(t.extensions=o),t},X.prototype=Object.assign(Object.create(m.prototype),{constructor:X,isCamera:!0,copy:function(e,t){return m.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){m.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),K.prototype=Object.assign(Object.create(X.prototype),{constructor:K,isPerspectiveCamera:!0,copy:function(e,t){return X.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*kc.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*kc.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*kc.RAD2DEG*Math.atan(Math.tan(.5*kc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*kc.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=m.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Vc=90,zc=1;Q.prototype=Object.create(m.prototype),Q.prototype.constructor=Q,J.prototype=Object.create(l.prototype),J.prototype.constructor=J,J.prototype.isWebGLRenderTargetCube=!0,J.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new g,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new Y({type:"CubemapFromEquirect",uniforms:W(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ua,blending:Ha});i.uniforms.tEquirect.value=t;var o=new G(new H(5,5,5),i);n.add(o);var a=new Q(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},Z.prototype=Object.create(u.prototype),Z.prototype.constructor=Z,Z.prototype.isDataTexture=!0,Object.assign($.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a,t=new a;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new a;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new a);var r=t.delta(e),i=this.normal.dot(r);if(0!==i){var o=-(t.start.dot(this.normal)+this.constant)/i;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new a,t=new s;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ee.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],p=n[9],f=n[10],d=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,l-s,d-h,y-m).normalize(),t[1].setComponents(a+r,l+s,d+h,y+m).normalize(),t[2].setComponents(a+i,l+u,d+p,y+g).normalize(),t[3].setComponents(a-i,l-u,d-p,y-g).normalize(),t[4].setComponents(a-o,l-c,d-f,y-v).normalize(),t[5].setComponents(a+o,l+c,d+f,y+v).normalize(),this},intersectsObject:function(){var e=new y;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new y;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new a;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Hc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Wc={common:{diffuse:{value:new x(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new x(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new x(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}},sprite:{diffuse:{value:new x(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new s}}},qc={basic:{uniforms:q([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.fog]),vertexShader:Hc.meshbasic_vert,fragmentShader:Hc.meshbasic_frag},lambert:{uniforms:q([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.fog,Wc.lights,{emissive:{value:new x(0)}}]),vertexShader:Hc.meshlambert_vert,fragmentShader:Hc.meshlambert_frag},phong:{uniforms:q([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.gradientmap,Wc.fog,Wc.lights,{emissive:{value:new x(0)},specular:{value:new x(1118481)},shininess:{value:30}}]),vertexShader:Hc.meshphong_vert,fragmentShader:Hc.meshphong_frag},standard:{uniforms:q([Wc.common,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.roughnessmap,Wc.metalnessmap,Wc.fog,Wc.lights,{emissive:{value:new x(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Hc.meshphysical_vert,fragmentShader:Hc.meshphysical_frag},matcap:{uniforms:q([Wc.common,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.fog,{matcap:{value:null}}]),vertexShader:Hc.meshmatcap_vert,fragmentShader:Hc.meshmatcap_frag},points:{uniforms:q([Wc.points,Wc.fog]),vertexShader:Hc.points_vert,fragmentShader:Hc.points_frag},dashed:{uniforms:q([Wc.common,Wc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hc.linedashed_vert,fragmentShader:Hc.linedashed_frag},depth:{uniforms:q([Wc.common,Wc.displacementmap]),vertexShader:Hc.depth_vert,fragmentShader:Hc.depth_frag},normal:{uniforms:q([Wc.common,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,{opacity:{value:1}}]),vertexShader:Hc.normal_vert,fragmentShader:Hc.normal_frag},sprite:{uniforms:q([Wc.sprite,Wc.fog]),vertexShader:Hc.sprite_vert,fragmentShader:Hc.sprite_frag},background:{uniforms:{uvTransform:{value:new s},t2D:{value:null}},vertexShader:Hc.background_vert,fragmentShader:Hc.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hc.cube_vert,fragmentShader:Hc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hc.equirect_vert,fragmentShader:Hc.equirect_frag},distanceRGBA:{uniforms:q([Wc.common,Wc.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hc.distanceRGBA_vert,fragmentShader:Hc.distanceRGBA_frag},shadow:{uniforms:q([Wc.lights,Wc.fog,{color:{value:new x(0)},opacity:{value:1}}]),vertexShader:Hc.shadow_vert,fragmentShader:Hc.shadow_frag}};qc.physical={uniforms:q([qc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Hc.meshphysical_vert,fragmentShader:Hc.meshphysical_frag},re.prototype=Object.create(V.prototype),re.prototype.constructor=re,ie.prototype=Object.create(j.prototype),ie.prototype.constructor=ie,ge.prototype=Object.create(u.prototype),ge.prototype.constructor=ge,ge.prototype.isCubeTexture=!0,Object.defineProperty(ge.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),ve.prototype=Object.create(u.prototype),ve.prototype.constructor=ve,ve.prototype.isDataTexture2DArray=!0,ye.prototype=Object.create(u.prototype),ye.prototype.constructor=ye,ye.prototype.isDataTexture3D=!0;var Yc=new u,Xc=new ve,Kc=new ye,Qc=new ge,Jc=[],Zc=[],$c=new Float32Array(16),el=new Float32Array(9),tl=new Float32Array(4);et.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),xe(t,e)},tt.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var nl=/([\w\d_]+)(\])?(\[|\.)?/g;it.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},it.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},it.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},it.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var rl=0,il=0;Dt.prototype=Object.create(k.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isMeshDepthMaterial=!0,Dt.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},It.prototype=Object.create(k.prototype),It.prototype.constructor=It,It.prototype.isMeshDistanceMaterial=!0,It.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ut.prototype=Object.assign(Object.create(m.prototype),{constructor:Ut,isGroup:!0}),Ft.prototype=Object.assign(Object.create(K.prototype),{constructor:Ft,isArrayCamera:!0});var ol=new a,al=new a;Object.assign(jt.prototype,r.prototype),Object.assign(Gt.prototype,r.prototype),Object.assign(zt.prototype,{isFogExp2:!0,clone:function(){return new zt(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ht.prototype,{isFog:!0,clone:function(){return new Ht(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Wt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Wt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(qt.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(qt.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Yt.prototype=Object.create(k.prototype),Yt.prototype.constructor=Yt,Yt.prototype.isSpriteMaterial=!0,Yt.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var sl;Xt.prototype=Object.assign(Object.create(m.prototype),{constructor:Xt,isSprite:!0,raycast:function(){function e(e,t,n,r,i,a){o.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(s.x=a*o.x-i*o.y,s.y=i*o.x+a*o.y):s.copy(o),e.copy(t),e.x+=s.x,e.y+=s.y,e.applyMatrix4(u)}var t=new a,n=new a,r=new a,o=new i,s=new i,u=new p,c=new a,l=new a,h=new a,f=new i,d=new i,m=new i;return function(o,a){n.setFromMatrixScale(this.matrixWorld),u.copy(o._camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(o._camera.matrixWorldInverse,this.matrixWorld),r.setFromMatrixPosition(this.modelViewMatrix),o._camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&n.multiplyScalar(-r.z);var s,p,g=this.material.rotation;0!==g&&(p=Math.cos(g),s=Math.sin(g));var v=this.center;e(c.set(-.5,-.5,0),r,v,n,s,p),e(l.set(.5,-.5,0),r,v,n,s,p),e(h.set(.5,.5,0),r,v,n,s,p),f.set(0,0),d.set(1,0),m.set(1,1);var y=o.ray.intersectTriangle(c,l,h,!1,t);if(null!==y||(e(l.set(-.5,.5,0),r,v,n,s,p),d.set(0,1),null!==(y=o.ray.intersectTriangle(c,h,l,!1,t)))){var b=o.ray.origin.distanceTo(t);b<o.near||b>o.far||a.push({distance:b,point:t.clone(),uv:_.getUV(t,c,l,h,f,d,m,new i),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return m.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Kt.prototype=Object.assign(Object.create(m.prototype),{constructor:Kt,isLOD:!0,copy:function(e){m.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new a;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new a,t=new a;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=m.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Qt.prototype=Object.assign(Object.create(G.prototype),{constructor:Qt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new c,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){G.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Jt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new p;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new p,t=new p;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(u,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Jt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Zt.prototype=Object.assign(Object.create(m.prototype),{constructor:Zt,isBone:!0}),$t.prototype=Object.create(k.prototype),$t.prototype.constructor=$t,$t.prototype.isLineBasicMaterial=!0,$t.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},en.prototype=Object.assign(Object.create(m.prototype),{constructor:en,isLine:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new N(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices,i=n.lineDistances;i[0]=0;for(var o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new p,t=new b,n=new y;return function(r,i){var o=r.linePrecision,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,h=new a,p=new a,f=new a,d=new a,m=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var g=s.index,v=s.attributes,y=v.position.array;if(null!==g)for(var b=g.array,_=0,x=b.length-1;_<x;_+=m){var w=b[_],T=b[_+1];h.fromArray(y,3*w),p.fromArray(y,3*T);var E=t.distanceSqToSegment(h,p,d,f);if(!(E>l)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||i.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,x=y.length/3-1;_<x;_+=m){h.fromArray(y,3*_),p.fromArray(y,3*_+3);var E=t.distanceSqToSegment(h,p,d,f);if(!(E>l)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||i.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var k=s.vertices,C=k.length,_=0;_<C-1;_+=m){var E=t.distanceSqToSegment(k[_],k[_+1],d,f);if(!(E>l)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||i.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tn.prototype=Object.assign(Object.create(en.prototype),{constructor:tn,isLineSegments:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new N(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var s=n.vertices,i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);return this}}()}),nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,isLineLoop:!0}),rn.prototype=Object.create(k.prototype),rn.prototype.constructor=rn,rn.prototype.isPointsMaterial=!0,rn.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},on.prototype=Object.assign(Object.create(m.prototype),{constructor:on,isPoints:!0,raycast:function(){var e=new p,t=new b,n=new y;return function(r,i){function o(e,n){var o=t.distanceSqToPoint(e);if(o<p){t.closestPointToPoint(e,d),d.applyMatrix4(c);var a=r.ray.origin.distanceTo(d);if(a<r.near||a>r.far)return;i.push({distance:a,distanceToRay:Math.sqrt(o),point:d.clone(),index:n,face:null,object:s})}}var s=this,u=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),n.radius+=l,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var h=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,f=new a,d=new a;if(u.isBufferGeometry){var m=u.index,g=u.attributes,v=g.position.array;if(null!==m)for(var y=m.array,b=0,_=y.length;b<_;b++){var x=y[b];f.fromArray(v,3*x),o(f,x)}else for(var b=0,w=v.length/3;b<w;b++)f.fromArray(v,3*b),o(f,b)}else for(var T=u.vertices,b=0,w=T.length;b<w;b++)o(T[b],b)}}}(),updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),an.prototype=Object.assign(Object.create(u.prototype),{constructor:an,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),sn.prototype=Object.create(u.prototype),sn.prototype.constructor=sn,sn.prototype.isCompressedTexture=!0,un.prototype=Object.create(u.prototype),un.prototype.constructor=un,un.prototype.isCanvasTexture=!0,cn.prototype=Object.create(u.prototype),cn.prototype.constructor=cn,cn.prototype.isDepthTexture=!0,ln.prototype=Object.create(j.prototype),ln.prototype.constructor=ln,hn.prototype=Object.create(V.prototype),hn.prototype.constructor=hn,pn.prototype=Object.create(j.prototype),pn.prototype.constructor=pn,fn.prototype=Object.create(V.prototype),fn.prototype.constructor=fn,dn.prototype=Object.create(j.prototype),dn.prototype.constructor=dn,mn.prototype=Object.create(V.prototype),mn.prototype.constructor=mn,gn.prototype=Object.create(dn.prototype),gn.prototype.constructor=gn,vn.prototype=Object.create(V.prototype),vn.prototype.constructor=vn,yn.prototype=Object.create(dn.prototype),yn.prototype.constructor=yn,bn.prototype=Object.create(V.prototype),bn.prototype.constructor=bn,_n.prototype=Object.create(dn.prototype),_n.prototype.constructor=_n,xn.prototype=Object.create(V.prototype),xn.prototype.constructor=xn,wn.prototype=Object.create(dn.prototype),wn.prototype.constructor=wn,Tn.prototype=Object.create(V.prototype),Tn.prototype.constructor=Tn,En.prototype=Object.create(j.prototype),En.prototype.constructor=En,En.prototype.toJSON=function(){var e=j.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Sn.prototype=Object.create(V.prototype),Sn.prototype.constructor=Sn,kn.prototype=Object.create(j.prototype),kn.prototype.constructor=kn,Cn.prototype=Object.create(V.prototype),Cn.prototype.constructor=Cn,Mn.prototype=Object.create(j.prototype),Mn.prototype.constructor=Mn;var ul={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,o=An(e,0,i,n,!0),a=[];if(!o||o.next===o.prev)return a;var s,u,c,l,h,p,f;if(r&&(o=Nn(e,t,o,n)),e.length>80*n){s=c=e[0],u=l=e[1];for(var d=n;d<i;d+=n)h=e[d],p=e[d+1],h<s&&(s=h),p<u&&(u=p),h>c&&(c=h),p>l&&(l=p);f=Math.max(c-s,l-u),f=0!==f?1/f:0}return Dn(o,a,n,s,u,f),a}},cl={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return cl.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];rr(e),ir(n,e);var o=e.length;t.forEach(rr);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,ir(n,t[a]);for(var s=ul.triangulate(n,r),a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};or.prototype=Object.create(V.prototype),or.prototype.constructor=or,or.prototype.toJSON=function(){var e=V.prototype.toJSON.call(this);return sr(this.parameters.shapes,this.parameters.options,e)},ar.prototype=Object.create(j.prototype),ar.prototype.constructor=ar,ar.prototype.toJSON=function(){var e=j.prototype.toJSON.call(this);return sr(this.parameters.shapes,this.parameters.options,e)};var ll={generateTopUV:function(e,t,n,r,o){var a=t[3*n],s=t[3*n+1],u=t[3*r],c=t[3*r+1],l=t[3*o],h=t[3*o+1];return[new i(a,s),new i(u,c),new i(l,h)]},generateSideWallUV:function(e,t,n,r,o,a){var s=t[3*n],u=t[3*n+1],c=t[3*n+2],l=t[3*r],h=t[3*r+1],p=t[3*r+2],f=t[3*o],d=t[3*o+1],m=t[3*o+2],g=t[3*a],v=t[3*a+1],y=t[3*a+2];return Math.abs(u-h)<.01?[new i(s,1-c),new i(l,1-p),new i(f,1-m),new i(g,1-y)]:[new i(u,1-c),new i(h,1-p),new i(d,1-m),new i(v,1-y)]}};ur.prototype=Object.create(V.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(ar.prototype),cr.prototype.constructor=cr,lr.prototype=Object.create(V.prototype),lr.prototype.constructor=lr,hr.prototype=Object.create(j.prototype),hr.prototype.constructor=hr,pr.prototype=Object.create(V.prototype),pr.prototype.constructor=pr,fr.prototype=Object.create(j.prototype),fr.prototype.constructor=fr,dr.prototype=Object.create(V.prototype),dr.prototype.constructor=dr,mr.prototype=Object.create(j.prototype),mr.prototype.constructor=mr,gr.prototype=Object.create(V.prototype),gr.prototype.constructor=gr,gr.prototype.toJSON=function(){var e=V.prototype.toJSON.call(this);return yr(this.parameters.shapes,e)},vr.prototype=Object.create(j.prototype),vr.prototype.constructor=vr,vr.prototype.toJSON=function(){var e=j.prototype.toJSON.call(this);return yr(this.parameters.shapes,e)},br.prototype=Object.create(j.prototype),br.prototype.constructor=br,_r.prototype=Object.create(V.prototype),_r.prototype.constructor=_r,xr.prototype=Object.create(j.prototype),xr.prototype.constructor=xr,wr.prototype=Object.create(_r.prototype),wr.prototype.constructor=wr,Tr.prototype=Object.create(xr.prototype),Tr.prototype.constructor=Tr,Er.prototype=Object.create(V.prototype),Er.prototype.constructor=Er,Sr.prototype=Object.create(j.prototype),Sr.prototype.constructor=Sr;var hl=Object.freeze({WireframeGeometry:ln,ParametricGeometry:hn,ParametricBufferGeometry:pn,TetrahedronGeometry:mn,TetrahedronBufferGeometry:gn,OctahedronGeometry:vn,OctahedronBufferGeometry:yn,IcosahedronGeometry:bn,IcosahedronBufferGeometry:_n,DodecahedronGeometry:xn,DodecahedronBufferGeometry:wn,PolyhedronGeometry:fn,PolyhedronBufferGeometry:dn,TubeGeometry:Tn,TubeBufferGeometry:En,TorusKnotGeometry:Sn,TorusKnotBufferGeometry:kn,TorusGeometry:Cn,TorusBufferGeometry:Mn,TextGeometry:ur,TextBufferGeometry:cr,SphereGeometry:lr,SphereBufferGeometry:hr,RingGeometry:pr,RingBufferGeometry:fr,PlaneGeometry:re,PlaneBufferGeometry:ie,LatheGeometry:dr,LatheBufferGeometry:mr,ShapeGeometry:gr,ShapeBufferGeometry:vr,ExtrudeGeometry:or,ExtrudeBufferGeometry:ar,EdgesGeometry:br,ConeGeometry:wr,ConeBufferGeometry:Tr,CylinderGeometry:_r,CylinderBufferGeometry:xr,CircleGeometry:Er,CircleBufferGeometry:Sr,BoxGeometry:z,BoxBufferGeometry:H});kr.prototype=Object.create(k.prototype),kr.prototype.constructor=kr,kr.prototype.isShadowMaterial=!0,kr.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this},Cr.prototype=Object.create(Y.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isRawShaderMaterial=!0,Mr.prototype=Object.create(k.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isMeshStandardMaterial=!0,Mr.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ar.prototype=Object.create(Mr.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isMeshPhysicalMaterial=!0,Ar.prototype.copy=function(e){return Mr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Or.prototype=Object.create(k.prototype),Or.prototype.constructor=Or,Or.prototype.isMeshPhongMaterial=!0,Or.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Dr.prototype=Object.create(Or.prototype),Dr.prototype.constructor=Dr,Dr.prototype.isMeshToonMaterial=!0,Dr.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ir.prototype=Object.create(k.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isMeshNormalMaterial=!0,Ir.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Rr.prototype=Object.create(k.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isMeshLambertMaterial=!0,Rr.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pr.prototype=Object.create(k.prototype),Pr.prototype.constructor=Pr,Pr.prototype.isMeshMatcapMaterial=!0,Pr.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lr.prototype=Object.create($t.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isLineDashedMaterial=!0,Lr.prototype.copy=function(e){return $t.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var pl=Object.freeze({ShadowMaterial:kr,SpriteMaterial:Yt,RawShaderMaterial:Cr,ShaderMaterial:Y,PointsMaterial:rn,MeshPhysicalMaterial:Ar,MeshStandardMaterial:Mr,MeshPhongMaterial:Or,MeshToonMaterial:Dr,MeshNormalMaterial:Ir,MeshLambertMaterial:Rr,MeshDepthMaterial:Dt,MeshDistanceMaterial:It,MeshBasicMaterial:C,MeshMatcapMaterial:Pr,LineDashedMaterial:Lr,LineBasicMaterial:$t,Material:k}),fl={arraySlice:function(e,t,n){return fl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};Object.assign(Nr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Nr.prototype,{beforeStart_:Nr.prototype.copySampleValue_,afterEnd_:Nr.prototype.copySampleValue_}),Ur.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Ur,DefaultSettings_:{endingStart:qu,endingEnd:qu},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Yu:i=e,a=2*t-n;break;case Xu:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Yu:o=e,s=2*n-t;break;case Xu:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-t)/(r-t),d=f*f,m=d*f,g=-h*m+2*h*d-h*f,v=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*f+1,y=(-1-p)*m+(1.5+p)*d+.5*f,b=p*m-p*d,_=0;_!==a;++_)i[_]=g*o[c+_]+v*o[u+_]+y*o[s+_]+b*o[l+_];return i}}),Fr.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Fr,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c,h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}),Br.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Br,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(jr,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:fl.convertArray(e.times,Array),values:fl.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(jr.prototype,{constructor:jr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Hu,InterpolantFactoryMethodDiscrete:function(e){return new Br(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Fr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ur(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case zu:t=this.InterpolantFactoryMethodDiscrete;break;case Hu:t=this.InterpolantFactoryMethodLinear;break;case Wu:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zu;case this.InterpolantFactoryMethodLinear:return Hu;case this.InterpolantFactoryMethodSmooth:return Wu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=fl.arraySlice(n,i,o),this.values=fl.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&fl.isTypedArray(r))for(var a=0,u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Wu,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,l=c-n,h=c+n,p=0;p!==n;++p){var f=t[c+p];if(f!==t[l+p]||f!==t[h+p]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];for(var d=a*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[d+p]}++i}}if(o>0){e[i]=e[o];for(var d=o*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[d+p];++i}return i!==e.length&&(this.times=fl.arraySlice(e,0,i),this.values=fl.arraySlice(t,0,i*n)),this},clone:function(){var e=fl.arraySlice(this.times,0),t=fl.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),Gr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Gr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:zu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Vr,ValueTypeName:"color"}),zr.prototype=Object.assign(Object.create(jr.prototype),{constructor:zr,ValueTypeName:"number"}),Hr.prototype=Object.assign(Object.create(Nr.prototype),{constructor:Hr,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=e*s,c=(n-t)/(r-t),l=u+s;u!==l;u+=4)o.slerpFlat(i,0,a,u-s,a,u,c);return i}}),Wr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Wr,ValueTypeName:"quaternion",DefaultInterpolation:Hu,InterpolantFactoryMethodLinear:function(e){return new Hr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),qr.prototype=Object.assign(Object.create(jr.prototype),{constructor:qr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:zu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Yr,ValueTypeName:"vector"}),Object.assign(Xr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Qr(n[i]).scale(r));return new Xr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(jr.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=fl.getKeyframeOrder(s);s=fl.sortedArray(s,1,c),u=fl.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new zr(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new Xr(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var c in r)h.push(Xr.CreateFromMorphTargetSequence(c,r[c],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];fl.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var p=0;p<c[h].morphTargets.length;p++)l[c[h].morphTargets[p]]=-1;for(var f in l){for(var d=[],m=[],p=0;p!==c[h].morphTargets.length;++p){var g=c[h];d.push(g.time),m.push(g.morphTarget===f?1:0)}r.push(new zr(".morphTargetInfluence["+f+"]",d,m))}o=l.length*(a||1)}else{var v=".bones["+t[u].name+"]";n(Yr,v+".position",c,"pos",r),n(Wr,v+".quaternion",c,"rot",r),n(Yr,v+".scale",c,"scl",r)}}return 0===r.length?null:new Xr(i,o,r)}}),Object.assign(Xr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Xr(this.name,this.duration,e)}});var dl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},ml=new Jr,gl={};Object.assign(Zr.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=dl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0!==gl[e])return void gl[e].push({onLoad:t,onProgress:n,onError:r});var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var u=s[1],c=!!s[2],l=s[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);h="blob"===p?new Blob([f.buffer],{type:u}):f.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{gl[e]=[],gl[e].push({onLoad:t,onProgress:n,onError:r});var g=new XMLHttpRequest;g.open("GET",e,!0),g.addEventListener("load",function(t){var n=this.response;dl.add(e,n);var r=gl[e];if(delete gl[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),g.addEventListener("progress",function(t){for(var n=gl[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),g.addEventListener("error",function(t){var n=gl[e];delete gl[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),g.addEventListener("abort",function(t){var n=gl[e];delete gl[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)g.setRequestHeader(v,this.requestHeader[v]);g.send(null)}return i.manager.itemStart(e),g},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign($r.prototype,{load:function(e,t,n,r){var i=this,o=new Zr(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=Xr.parse(e[n]);t.push(r)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(ei.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new sn;a.image=o;var s=new Zr(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,l=e.length;c<l;++c)!function(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Ws),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}(c);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ws),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(ti.prototype,{load:function(e,t,n,r){var i=this,o=new Z,a=new Zr(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Fs,o.wrapT=void 0!==n.wrapT?n.wrapT:Fs,o.magFilter=void 0!==n.magFilter?n.magFilter:Ws,o.minFilter=void 0!==n.minFilter?n.minFilter:Xs,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Ws),o.needsUpdate=!0,t&&t(o,n))},n,r),o},setPath:function(e){return this.path=e,this}}),Object.assign(ni.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){function i(){u.removeEventListener("load",i,!1),u.removeEventListener("error",o,!1),dl.add(e,this),t&&t(this),a.manager.itemEnd(e)}function o(t){u.removeEventListener("load",i,!1),u.removeEventListener("error",o,!1),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=dl.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",i,!1),u.addEventListener("error",o,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),a.manager.itemStart(e),u.src=e,u},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ri.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new ge,o=new ni(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<e.length;++s)!function(n){o.load(e[n],function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(s);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ii.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new u,o=new ni(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?cu:lu,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(oi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if(i=Math.floor(s+(u-s)/2),(a=r[i]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new a,s=[],u=[],c=[],l=new a,h=new p;for(n=0;n<=e;n++)r=n/e,s[n]=this.getTangentAt(r),s[n].normalize();u[0]=new a,c[0]=new a;var f=Number.MAX_VALUE,d=Math.abs(s[0].x),m=Math.abs(s[0].y),g=Math.abs(s[0].z);for(d<=f&&(f=d,o.set(1,0,0)),m<=f&&(f=m,o.set(0,1,0)),g<=f&&o.set(0,0,1),l.crossVectors(s[0],o).normalize(),u[0].crossVectors(s[0],l),c[0].crossVectors(s[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(s[n-1],s[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(kc.clamp(s[n-1].dot(s[n]),-1,1)),u[n].applyMatrix4(h.makeRotationAxis(l,i))),c[n].crossVectors(s[n],u[n]);if(!0===t)for(i=Math.acos(kc.clamp(u[0].dot(u[e]),-1,1)),i/=e,s[0].dot(l.crossVectors(u[0],u[e]))>0&&(i=-i),n=1;n<=e;n++)u[n].applyMatrix4(h.makeRotationAxis(s[n],i*n)),c[n].crossVectors(s[n],u[n]);return{tangents:s,normals:u,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ai.prototype=Object.create(oi.prototype),ai.prototype.constructor=ai,ai.prototype.isEllipseCurve=!0,ai.prototype.getPoint=function(e,t){for(var n=t||new i,r=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=a?0:r),!0!==this.aClockwise||a||(o===r?o=-r:o-=r);var s=this.aStartAngle+e*o,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=u-this.aX,f=c-this.aY;u=p*l-f*h+this.aX,c=p*h+f*l+this.aY}return n.set(u,c)},ai.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ai.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ai.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},si.prototype=Object.create(ai.prototype),si.prototype.constructor=si,si.prototype.isArcCurve=!0;var vl=new a,yl=new ui,bl=new ui,_l=new ui;ci.prototype=Object.create(oi.prototype),ci.prototype.constructor=ci,ci.prototype.isCatmullRomCurve3=!0,ci.prototype.getPoint=function(e,t){var n=t||new a,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e,s=Math.floor(o),u=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===u&&s===i-1&&(s=i-2,u=1);var c,l,h,p;if(this.closed||s>0?c=r[(s-1)%i]:(vl.subVectors(r[0],r[1]).add(r[0]),c=vl),l=r[s%i],h=r[(s+1)%i],this.closed||s+2<i?p=r[(s+2)%i]:(vl.subVectors(r[i-1],r[i-2]).add(r[i-1]),p=vl),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(c.distanceToSquared(l),f),m=Math.pow(l.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(p),f);m<1e-4&&(m=1),d<1e-4&&(d=m),g<1e-4&&(g=m),yl.initNonuniformCatmullRom(c.x,l.x,h.x,p.x,d,m,g),bl.initNonuniformCatmullRom(c.y,l.y,h.y,p.y,d,m,g),_l.initNonuniformCatmullRom(c.z,l.z,h.z,p.z,d,m,g)}else"catmullrom"===this.curveType&&(yl.initCatmullRom(c.x,l.x,h.x,p.x,this.tension),bl.initCatmullRom(c.y,l.y,h.y,p.y,this.tension),_l.initCatmullRom(c.z,l.z,h.z,p.z,this.tension));return n.set(yl.calc(u),bl.calc(u),_l.calc(u)),n},ci.prototype.copy=function(e){oi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ci.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ci.prototype.fromJSON=function(e){oi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new a).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},_i.prototype=Object.create(oi.prototype),_i.prototype.constructor=_i,_i.prototype.isCubicBezierCurve=!0,_i.prototype.getPoint=function(e,t){var n=t||new i,r=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(bi(e,r.x,o.x,a.x,s.x),bi(e,r.y,o.y,a.y,s.y)),n},_i.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},_i.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},_i.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},xi.prototype=Object.create(oi.prototype),xi.prototype.constructor=xi,xi.prototype.isCubicBezierCurve3=!0,xi.prototype.getPoint=function(e,t){var n=t||new a,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(bi(e,r.x,i.x,o.x,s.x),bi(e,r.y,i.y,o.y,s.y),bi(e,r.z,i.z,o.z,s.z)),n},xi.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},xi.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},xi.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},wi.prototype=Object.create(oi.prototype),wi.prototype.constructor=wi,wi.prototype.isLineCurve=!0,wi.prototype.getPoint=function(e,t){var n=t||new i;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},wi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},wi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},wi.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},wi.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},wi.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ti.prototype=Object.create(oi.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isLineCurve3=!0,Ti.prototype.getPoint=function(e,t){var n=t||new a;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ti.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ti.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ti.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ti.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ei.prototype=Object.create(oi.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isQuadraticBezierCurve=!0,Ei.prototype.getPoint=function(e,t){var n=t||new i,r=this.v0,o=this.v1,a=this.v2;return n.set(di(e,r.x,o.x,a.x),di(e,r.y,o.y,a.y)),n},Ei.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ei.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ei.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Si.prototype=Object.create(oi.prototype),Si.prototype.constructor=Si,Si.prototype.isQuadraticBezierCurve3=!0,Si.prototype.getPoint=function(e,t){var n=t||new a,r=this.v0,i=this.v1,o=this.v2;return n.set(di(e,r.x,i.x,o.x),di(e,r.y,i.y,o.y),di(e,r.z,i.z,o.z)),n},Si.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Si.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Si.prototype.fromJSON=function(e){return oi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ki.prototype=Object.create(oi.prototype),ki.prototype.constructor=ki,ki.prototype.isSplineCurve=!0,ki.prototype.getPoint=function(e,t){var n=t||new i,r=this.points,o=(r.length-1)*e,a=Math.floor(o),s=o-a,u=r[0===a?a:a-1],c=r[a],l=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(li(s,u.x,c.x,l.x,h.x),li(s,u.y,c.y,l.y,h.y)),n},ki.prototype.copy=function(e){oi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},ki.prototype.toJSON=function(){var e=oi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},ki.prototype.fromJSON=function(e){oi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new i).fromArray(r))}return this};var xl=Object.freeze({ArcCurve:si,CatmullRomCurve3:ci,CubicBezierCurve:_i,CubicBezierCurve3:xi,EllipseCurve:ai,LineCurve:wi,LineCurve3:Ti,QuadraticBezierCurve:Ei,QuadraticBezierCurve3:Si,SplineCurve:ki});Ci.prototype=Object.assign(Object.create(oi.prototype),{constructor:Ci,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wi(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){oi.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=oi.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){oi.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new xl[r.type]).fromJSON(r))}return this}}),Mi.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Mi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new wi(this.currentPoint.clone(),new i(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var o=new Ei(this.currentPoint.clone(),new i(e,t),new i(n,r));this.curves.push(o),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,o,a){var s=new _i(this.currentPoint.clone(),new i(e,t),new i(n,r),new i(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new ki(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+u,t+c,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new ai(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return Ci.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ci.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ci.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ai.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Ai,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Mi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Mi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Mi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Mi).fromJSON(r))}return this}}),Oi.prototype=Object.assign(Object.create(m.prototype),{constructor:Oi,isLight:!0,copy:function(e){return m.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=m.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Di.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Di,isHemisphereLight:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ii.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ri.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ri,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*kc.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),Pi.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Pi,isSpotLight:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Li.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Li,isPointLight:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ni.prototype=Object.assign(Object.create(X.prototype),{constructor:Ni,isOrthographicCamera:!0,copy:function(e,t){return X.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=m.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ui.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ui}),Fi.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Fi,isDirectionalLight:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Bi.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Bi,isAmbientLight:!0}),ji.prototype=Object.assign(Object.create(Oi.prototype),{constructor:ji,isRectAreaLight:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Oi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Gi.prototype,{load:function(e,t,n,r){var i=this,o=new Zr(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,r=new pl[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var o in e.uniforms){var u=e.uniforms[o];switch(r.uniforms[o]={},u.type){case"t":r.uniforms[o].value=t(u.value);break;case"c":r.uniforms[o].value=(new x).setHex(u.value);break;case"v2":r.uniforms[o].value=(new i).fromArray(u.value);break;case"v3":r.uniforms[o].value=(new a).fromArray(u.value);break;case"v4":r.uniforms[o].value=(new c).fromArray(u.value);break;case"m3":r.uniforms[o].value=(new s).fromArray(u.value);case"m4":r.uniforms[o].value=(new p).fromArray(u.value);break;default:r.uniforms[o].value=u.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var l in e.extensions)r.extensions[l]=e.extensions[l];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=t(e.map)),void 0!==e.matcap&&(r.matcap=t(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var h=e.normalScale;!1===Array.isArray(h)&&(h=[h,h]),r.normalScale=(new i).fromArray(h)}return void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=t(e.specularMap)),void 0!==e.envMap&&(r.envMap=t(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap)),r},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var wl={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Vi.prototype=Object.assign(Object.create(j.prototype),{constructor:Vi,isInstancedBufferGeometry:!0,copy:function(e){return j.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=j.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),zi.prototype=Object.assign(Object.create(M.prototype),{constructor:zi,isInstancedBufferAttribute:!0,copy:function(e){return M.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=M.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Object.assign(Hi.prototype,{load:function(e,t,n,r){var i=this,o=new Zr(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new Vi:new j,n=e.data.index;if(void 0!==n){var r=new Tl[n.type](n.array);t.setIndex(new M(r,1))}var i=e.data.attributes;for(var o in i){var s=i[o],r=new Tl[s.type](s.array),u=s.isInstancedBufferAttribute?zi:M,c=new u(r,s.itemSize,s.normalized);void 0!==s.name&&(c.name=s.name),t.addAttribute(o,c)}var l=e.data.morphAttributes;if(l)for(var o in l){for(var h=l[o],p=[],f=0,d=h.length;f<d;f++){var s=h[f],r=new Tl[s.type](s.array),c=new M(r,s.itemSize,s.normalized);void 0!==s.name&&(c.name=s.name),p.push(c)}t.morphAttributes[o]=p}var m=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==m)for(var f=0,g=m.length;f!==g;++f){var v=m[f];t.addGroup(v.start,v.count,v.materialIndex)}var b=e.data.boundingSphere;if(void 0!==b){var _=new a;void 0!==b.center&&_.fromArray(b.center),t.boundingSphere=new y(_,b.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Tl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(Wi.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===this.path?wl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Zr(i.manager);a.setPath(this.path),a.load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(o,t)},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Ai).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Hi,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new hl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new hl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new hl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new hl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new hl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new hl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new hl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new hl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new hl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new hl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new hl[s.type]((new xl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new hl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new hl[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,l=s.shapes.length;c<l;c++){var h=t[s.shapes[c]];u.push(h)}a=new hl[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var u=[],c=0,l=s.shapes.length;c<l;c++){var h=t[s.shapes[c]];u.push(h)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new xl[p.type]).fromJSON(p)),a=new hl[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var f=new THREE.LegacyJSONLoader;a=f.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Gi;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Xr.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}var r=this,i={};if(void 0!==e&&e.length>0){var o=new Jr(t),a=new ni(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var c=e[s],l=c.url;if(Array.isArray(l)){i[c.uuid]=[];for(var h=0,p=l.length;h<p;h++){var f=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;i[c.uuid].push(n(d))}}else{var d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;i[c.uuid]=n(d)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s;s=Array.isArray(t[a.image])?new ge(t[a.image]):new u(t[a.image]),s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,El)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],Sl),s.wrapT=n(a.wrap[1],Sl)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,kl)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,kl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),r[a.uuid]=s}return r},parseObject:function(e,t,n){function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}var o;switch(e.type){case"Scene":o=new g,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new x(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Ht(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new zt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new K(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ni(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Bi(e.color,e.intensity);break;case"DirectionalLight":o=new Fi(e.color,e.intensity);break;case"PointLight":o=new Li(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ji(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Pi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Di(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=i(e.material);o=a.bones&&a.bones.length>0?new Qt(a,s):new G(a,s),void 0!==e.drawMode&&o.setDrawMode(e.drawMode);break;case"LOD":o=new Kt;break;case"Line":o=new en(r(e.geometry),i(e.material),e.mode);break;case"LineLoop":o=new nn(r(e.geometry),i(e.material));break;case"LineSegments":o=new tn(r(e.geometry),i(e.material));break;case"PointCloud":case"Points":o=new on(r(e.geometry),i(e.material));break;case"Sprite":o=new Xt(i(e.material));break;case"Group":o=new Ut;break;default:o=new m}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,c=0;c<u.length;c++)o.add(this.parseObject(u[c],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var p=l[h],f=o.getObjectByProperty("uuid",p.object);void 0!==f&&o.addLevel(f,p.distance)}return o}});var El={UVMapping:As,CubeReflectionMapping:Os,CubeRefractionMapping:Ds,EquirectangularReflectionMapping:Is,EquirectangularRefractionMapping:Rs,SphericalReflectionMapping:Ps,CubeUVReflectionMapping:Ls,CubeUVRefractionMapping:Ns},Sl={RepeatWrapping:Us,ClampToEdgeWrapping:Fs,MirroredRepeatWrapping:Bs},kl={NearestFilter:js,NearestMipmapNearestFilter:Gs,NearestMipmapLinearFilter:zs,LinearFilter:Ws,LinearMipmapNearestFilter:qs,LinearMipmapLinearFilter:Xs};qi.prototype={constructor:qi,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=dl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)}).then(function(n){dl.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Yi.prototype,{moveTo:function(e,t){this.currentPath=new Mi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Ai;o.curves=i.curves,t.push(o)}return t}var r=cl.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return n(i);var o,a,s,u=[];if(1===i.length)return a=i[0],s=new Ai,s.curves=a.curves,u.push(s),u;var c=!r(i[0].getPoints());c=e?!c:c;var l,h=[],p=[],f=[],d=0;p[d]=void 0,f[d]=[];for(var m=0,g=i.length;m<g;m++)a=i[m],l=a.getPoints(),o=r(l),o=e?!o:o,o?(!c&&p[d]&&d++,p[d]={s:new Ai,p:l},p[d].s.curves=a.curves,c&&d++,f[d]=[]):f[d].push({h:a,p:l[0]});if(!p[0])return n(i);if(p.length>1){for(var v=!1,y=[],b=0,_=p.length;b<_;b++)h[b]=[];for(var b=0,_=p.length;b<_;b++)for(var x=f[b],w=0;w<x.length;w++){for(var T=x[w],E=!0,S=0;S<p.length;S++)(function(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],u=-u,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=c*(e.x-a.x)-u*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r})(T.p,p[S].p)&&(b!==S&&y.push({froms:b,tos:S,hole:w}),E?(E=!1,h[S].push(T)):v=!0);E&&h[b].push(T)}y.length>0&&(v||(f=h))}for(var k,m=0,C=p.length;m<C;m++){s=p[m].s,u.push(s),k=f[m];for(var M=0,A=k.length;M<A;M++)s.holes.push(k[M].h)}return u}}),Object.assign(Xi.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=Ki(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(Ji.prototype,{load:function(e,t,n,r){var i=this,o=new Zr(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Xi(e)},setPath:function(e){return this.path=e,this}}),Zi.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(Zi.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:Ha,NormalBlending:Wa,AdditiveBlending:qa,SubtractiveBlending:Ya,MultiplyBlending:Xa,CustomBlending:Ka},t=new x,n=new ii,r=new Gi;return function(i,o,a){function s(e,t,r,i,s){var c,l=o+e,h=Zi.Handlers.get(l);null!==h?c=h.load(l):(n.setCrossOrigin(a),c=n.load(l)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=Us),1!==t[1]&&(c.wrapT=Us)),void 0!==r&&c.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(c.wrapS=Us),"mirror"===i[0]&&(c.wrapS=Bs),"repeat"===i[1]&&(c.wrapT=Us),"mirror"===i[1]&&(c.wrapT=Bs)),void 0!==s&&(c.anisotropy=s);var p=kc.generateUUID();return u[p]=c,p}var u={},c={uuid:kc.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=Ua;break;case"doubleSided":c.side=Fa;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":!0===h&&(c.vertexColors=za),"face"===h&&(c.vertexColors=Va);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(u),r.parse(c)}}()});var Cl,Ml={getContext:function(){return void 0===Cl&&(Cl=new(window.AudioContext||window.webkitAudioContext)),Cl},setContext:function(e){Cl=e}};Object.assign($i.prototype,{load:function(e,t,n,r){var i=new Zr(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var n=e.slice(0);Ml.getContext().decodeAudioData(n,function(e){t(e)})},n,r)},setPath:function(e){return this.path=e,this}}),Object.assign(eo.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e){for(var t=this.coefficients,n=0;n<9;n++)t[n].fromArray(e,3*n);return this},toArray:function(){for(var e=[],t=this.coefficients,n=0;n<9;n++)t[n].toArray(e,3*n);return e}}),Object.assign(eo,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),to.prototype=Object.assign(Object.create(Oi.prototype),{constructor:to,isLightProbe:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Oi.prototype.toJSON.call(this,e)}}),no.prototype=Object.assign(Object.create(to.prototype),{constructor:no,isHemisphereLightProbe:!0,copy:function(e){return to.prototype.copy.call(this,e),this},toJSON:function(e){return to.prototype.toJSON.call(this,e)}}),ro.prototype=Object.assign(Object.create(to.prototype),{constructor:ro,isAmbientLightProbe:!0,copy:function(e){return to.prototype.copy.call(this,e),this},toJSON:function(e){return to.prototype.toJSON.call(this,e)}}),Object.assign(io.prototype,{update:function(){var e,t,n,r,i,o,a,s,u=new p,c=new p;return function(l){if(e!==this||t!==l.focus||n!==l.fov||r!==l.aspect*this.aspect||i!==l.near||o!==l.far||a!==l.zoom||s!==this.eyeSep){e=this,t=l.focus,n=l.fov,r=l.aspect*this.aspect,i=l.near,o=l.far,a=l.zoom;var h=l.projectionMatrix.clone();s=this.eyeSep/2;var p,f,d=s*i/t,m=i*Math.tan(kc.DEG2RAD*n*.5)/a;c.elements[12]=-s,u.elements[12]=s,p=-m*r+d,f=m*r+d,h.elements[0]=2*i/(f-p),h.elements[8]=(f+p)/(f-p),this.cameraL.projectionMatrix.copy(h),p=-m*r-d,f=m*r-d,h.elements[0]=2*i/(f-p),h.elements[8]=(f+p)/(f-p),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(u)}}()}),Object.assign(oo.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),ao.prototype=Object.assign(Object.create(m.prototype),{constructor:ao,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new a,t=new o,n=new a,r=new a,i=new oo;return function(o){m.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),a.positionX){var u=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,u),a.positionY.linearRampToValueAtTime(e.y,u),a.positionZ.linearRampToValueAtTime(e.z,u),a.forwardX.linearRampToValueAtTime(r.x,u),a.forwardY.linearRampToValueAtTime(r.y,u),a.forwardZ.linearRampToValueAtTime(r.z,u),a.upX.linearRampToValueAtTime(s.x,u),a.upY.linearRampToValueAtTime(s.y,u),a.upZ.linearRampToValueAtTime(s.z,u)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),so.prototype=Object.assign(Object.create(m.prototype),{constructor:so,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),uo.prototype=Object.assign(Object.create(so.prototype),{constructor:uo,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new a,t=new o,n=new a,r=new a;return function(i){if(m.prototype.updateMatrixWorld.call(this,i),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(r.x,a),o.orientationY.linearRampToValueAtTime(r.y,a),o.orientationZ.linearRampToValueAtTime(r.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}}()}),Object.assign(co.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(lo.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){o.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Al="\\[\\]\\.:\\/";Object.assign(ho.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(po,{Composite:ho,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new po.Composite(e,t,n):new po(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+Al+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Al+"]",t="[^"+Al.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(po.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=po.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0===s){var u=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(po.prototype,{_getValue_unbound:po.prototype.getValue,_setValue_unbound:po.prototype.setValue}),Object.assign(fo.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],p=h.uuid,f=r[p];if(void 0===f){f=t++,r[p]=f,e.push(h);for(var d=0,m=s;d!==m;++d)a[d].push(new po(h,i[d],o[d]))}else if(f<n){u=e[f];var g=--n,v=e[g];r[v.uuid]=f,e[f]=v,r[p]=g,e[g]=h;for(var d=0,m=s;d!==m;++d){var y=a[d],b=y[g],_=y[f];y[f]=b,void 0===_&&(_=new po(h,i[d],o[d])),y[g]=_}}else e[f]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=t){var l=t++,h=e[l];n[h.uuid]=c,e[c]=h,n[u]=l,e[l]=s;for(var p=0,f=i;p!==f;++p){var d=r[p],m=d[l],g=d[c];d[c]=m,d[l]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var h=--n,p=e[h],f=--t,d=e[f];r[p.uuid]=l,e[l]=p,r[d.uuid]=h,e[h]=d,e.pop();for(var m=0,g=o;m!==g;++m){var v=i[m],y=v[h],b=v[f];v[l]=y,v[h]=b,v.pop()}}else{var f=--t,d=e[f];r[d.uuid]=l,e[l]=d,e.pop();for(var m=0,g=o;m!==g;++m){var v=i[m];v[l]=v[f],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=c,p=s.length;h!==p;++h){var f=s[h];l[h]=new po(f,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(mo.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(a),c[l].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Vu;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(r===ju){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1===(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Yu,r.endingEnd=Yu):(r.endingStart=e?this.zeroSlopeAtStart?Yu:qu:Xu,r.endingEnd=t?this.zeroSlopeAtEnd?Yu:qu:Xu)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),go.prototype=Object.assign(Object.create(r.prototype),{constructor:go,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],p=h.name,f=c[p];if(void 0!==f)o[l]=f;else{if(void 0!==(f=o[l])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,p));continue}var d=t&&t._propertyBindings[l].binding.parsedPath;f=new lo(po.create(n,p,d),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,p),o[l]=f}a[l].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new Fr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Xr.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new mo(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Xr.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}for(var s=this._bindings,u=this._nActiveBindings,a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),vo.prototype.clone=function(){return new vo(void 0===this.value.clone?this.value:this.value.clone())},yo.prototype=Object.assign(Object.create(Wt.prototype),{constructor:yo,isInstancedInterleavedBuffer:!0,copy:function(e){return Wt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(bo.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this._camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this._camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return xo(e,this,r,t),r.sort(_o),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)xo(e[i],this,r,t);return r.sort(_o),r}}),Object.assign(wo.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(kc.clamp(t/this.radius,-1,1))),this}}),Object.assign(To.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Eo.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new i),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new i),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Ol,Dl;Object.assign(So.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new a),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new a),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new a),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){void 0===Ol&&(Ol=new a,Dl=new a),Ol.subVectors(e,this.start),Dl.subVectors(this.end,this.start);var n=Dl.dot(Dl),r=Dl.dot(Ol),i=r/n;return t&&(i=kc.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new a),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),ko.prototype=Object.create(m.prototype),ko.prototype.constructor=ko,ko.prototype.isImmediateRenderObject=!0,Co.prototype=Object.create(tn.prototype),Co.prototype.constructor=Co,Co.prototype.update=function(){var e=new a,t=new a,n=new s;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,c=0,l=0,h=u.length;l<h;l++)for(var p=u[l],f=0,d=p.vertexNormals.length;f<d;f++){var m=s[p[r[f]]],g=p.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry)for(var v=a.attributes.position,y=a.attributes.normal,c=0,f=0,d=v.count;f<d;f++)e.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1;o.needsUpdate=!0}}(),Mo.prototype=Object.create(m.prototype),Mo.prototype.constructor=Mo,Mo.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Mo.prototype.update=function(){var e=new a;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Oo.prototype=Object.create(tn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.updateMatrixWorld=function(){var e=new a,t=new p,n=new p;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u+1,e.x,e.y,e.z),u+=2)}o.getAttribute("position").needsUpdate=!0,m.prototype.updateMatrixWorld.call(this,r)}}(),Do.prototype=Object.create(G.prototype),Do.prototype.constructor=Do,Do.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Do.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Io.prototype=Object.create(en.prototype),Io.prototype.constructor=Io,Io.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Io.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ro.prototype=Object.create(m.prototype),Ro.prototype.constructor=Ro,Ro.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ro.prototype.update=function(){var e=new a,t=new x,n=new x;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Po.prototype=Object.create(G.prototype),Po.prototype.constructor=Po,Po.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Po.prototype.onBeforeRender=function(){return function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity}}(),Lo.prototype=Object.assign(Object.create(tn.prototype),{constructor:Lo,copy:function(e){return tn.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),No.prototype=Object.create(tn.prototype),No.prototype.constructor=No,Uo.prototype=Object.create(en.prototype),Uo.prototype.constructor=Uo,Uo.prototype.update=function(){function e(e,r,o,a){var s=(r-e)/o;for(d.setXYZ(h,0,0,0),p++,t=e;t<r;t+=s)n=h+p,d.setXYZ(n,Math.sin(t)*i,0,Math.cos(t)*i),d.setXYZ(n+1,Math.sin(Math.min(t+s,r))*i,0,Math.cos(Math.min(t+s,r))*i),d.setXYZ(n+2,0,0,0),p+=3;f.addGroup(h,p,a),h+=p,p=0}var t,n,r=this.audio,i=this.range,o=this.divisionsInnerAngle,a=this.divisionsOuterAngle,s=kc.degToRad(r.panner.coneInnerAngle),u=kc.degToRad(r.panner.coneOuterAngle),c=s/2,l=u/2,h=0,p=0,f=this.geometry,d=f.attributes.position;f.clearGroups(),e(-l,-c,a,0),e(-c,c,o,1),e(c,l,a,0),d.needsUpdate=!0,s===u&&(this.material[0].visible=!1)},Uo.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},Fo.prototype=Object.create(tn.prototype),Fo.prototype.constructor=Fo,Fo.prototype.update=function(){var e=new a,t=new a,n=new s;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,c=0,l=s.length;c<l;c++){var h=s[c],p=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),u+=1,i.setXYZ(u,t.x,t.y,t.z),u+=1}i.needsUpdate=!0}}(),Bo.prototype=Object.create(m.prototype),Bo.prototype.constructor=Bo,Bo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Bo.prototype.update=function(){var e=new a,t=new a,n=new a;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),jo.prototype=Object.create(tn.prototype),jo.prototype.constructor=jo,jo.prototype.update=function(){function e(e,o,a,s){r.set(o,a,s).unproject(i);var u=n[e];if(void 0!==u)for(var c=t.getAttribute("position"),l=0,h=u.length;l<h;l++)c.setXYZ(u[l],r.x,r.y,r.z)}var t,n,r=new a,i=new X;return function(){t=this.geometry,n=this.pointMap;i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Go.prototype=Object.create(tn.prototype),Go.prototype.constructor=Go,Go.prototype.update=function(){var e=new v;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Go.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Go.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.object=e.object,this},Go.prototype.clone=function(){return(new this.constructor).copy(this)},Vo.prototype=Object.create(tn.prototype),Vo.prototype.constructor=Vo,Vo.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),m.prototype.updateMatrixWorld.call(this,e))},zo.prototype=Object.create(en.prototype),zo.prototype.constructor=zo,zo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Ua:Na,this.lookAt(this.plane.normal),m.prototype.updateMatrixWorld.call(this,e)};var Il,Rl;Ho.prototype=Object.create(m.prototype),Ho.prototype.constructor=Ho,Ho.prototype.setDirection=function(){var e,t=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Ho.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Ho.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Ho.prototype.copy=function(e){return m.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Ho.prototype.clone=function(){return(new this.constructor).copy(this)},Wo.prototype=Object.create(tn.prototype),Wo.prototype.constructor=Wo;var Pl=0,Ll=1;oi.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(oi.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ci.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new V,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new a(i.x,i.y,i.z||0))}return t}}),Object.assign(Mi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),pa.prototype=Object.create(ci.prototype),fa.prototype=Object.create(ci.prototype),da.prototype=Object.create(ci.prototype),Object.assign(da.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Lo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Oo.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Zi.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),wl.extractUrlBase(e)}}),Object.assign(Wi.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Eo.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(v.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),So.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(kc,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),kc.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),kc.ceilPowerOfTwo(e)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(p.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),$.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},o.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(b.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(_.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(_,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),_.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),_.getNormal(e,t,n,r)}}),Object.assign(Ai.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new or(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gr(this,e)}}),Object.assign(i.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(c.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(V.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(m.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(m.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Kt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Jt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Qt.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(oi.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),K.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Oi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(M.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(j.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(j.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(ar.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(vo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(k.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new x}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Ba}}}),Object.defineProperties(Or.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Y.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Vt.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Vt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Rt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(J.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(jt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),so.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new $i).load(e,function(e){t.setBuffer(e)}),this},co.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Q.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Nl={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Ac.crossOrigin=void 0,Ac.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ii;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Ac.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ri;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Ac.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ac.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Ul={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}}},function(e,t,n){e.exports=n(103)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(46),c=n(16),l=n(9),h=/function ([^(]*)/,p=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,f=/([^\s,]+)/g,d=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")}(),m=null,g=null,v=function(){try{return new Function("let i = 1; const j = 1;")(),!0}catch(e){return!1}}(),y=null,b=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"systemEndianness",value:function(){return d}},{key:"isFunction",value:function(e){return"function"===typeof e}},{key:"isFunctionString",value:function(e){return null!==e&&"function"===e.toString().slice(0,"function".length).toLowerCase()}},{key:"getFunctionNameFromString",value:function(e){return h.exec(e)[1]}},{key:"getFunctionBodyFromString",value:function(e){return e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))}},{key:"getParamNamesFromString",value:function(e){var t=e.toString().replace(p,""),n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(f);return null===n&&(n=[]),n}},{key:"clone",value:function(e){if(null===e||"object"!==("undefined"===typeof e?"undefined":a(e))||e.hasOwnProperty("isActiveClone"))return e;var n=e.constructor();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e.isActiveClone=null,n[r]=t.clone(e[r]),delete e.isActiveClone);return n}},{key:"newPromise",value:function(e){var t=Promise||small_promise;if(null===t)throw TypeError("Browser is missing Promise implementation. Consider adding small_promise.js polyfill");return new t(e)}},{key:"functionBinder",value:function(e,t){return e.bind?e.bind(t):function(){var n=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return e.apply(t,n)}}},{key:"isArray",value:function(e){return!isNaN(e.length)}},{key:"getArgumentType",value:function(e){return t.isArray(e)?"IMG"===e[0].nodeName?"HTMLImageArray":"Array":"number"===typeof e?Number.isInteger(e)?"Integer":"Float":e instanceof l?e.type:e instanceof c?"Input":"IMG"===e.nodeName?"HTMLImage":"Unknown"}},{key:"isFloatReadPixelsSupported",value:function(){if(null!==m)return m;var e=n(15),t=new e({mode:"webgl-validator"}),r=t.createKernel(function(){return 1},{output:[2],floatTextures:!0,floatOutput:!0,floatOutputForce:!0})();return m=1===r[0],t.destroy(),m}},{key:"isFloatReadPixelsSupportedWebGL2",value:function(){if(null!==g)return g;var e=n(15),t=new e({mode:"webgl2-validator"}),r=t.createKernel(function(){return 1},{output:[2],floatTextures:!0,floatOutput:!0,floatOutputForce:!0})();return g=1===r[0],t.destroy(),g}},{key:"hasIntegerDivisionAccuracyBug",value:function(){if(null!==y)return y;var e=n(15),t=new e({mode:"webgl-validator"}),r=t.createKernel(function(e,t){return e[this.thread.x]/t[this.thread.x]},{output:[1]})([6,6030401],[3,3991]);return y=2!==r[0]||1511!==r[1],t.destroy(),y}},{key:"isMixedIdentifiersSupported",value:function(){return v}},{key:"dimToTexSize",value:function(e,t,n){for(var r=t[0],i=t[0],o=t[1],a=1;a<t.length;a++)r*=t[a];if(!e.floatTextures||n&&!e.floatOutput||(i=r=Math.ceil(r/4)),o>1&&i*o===r)return[i,o];for(var s=Math.sqrt(r),u=Math.ceil(s),c=Math.floor(s);u*c>r;)u--,c=Math.ceil(r/u);return i=c,o=Math.ceil(r/i),[i,o]}},{key:"getDimensions",value:function(e,n){var r=void 0;if(t.isArray(e)){for(var i=[],o=e;t.isArray(o);)i.push(o.length),o=o[0];r=i.reverse()}else if(e instanceof l)r=e.output;else{if(!(e instanceof c))throw"Unknown dimensions of "+e;r=e.size}if(n)for(r=t.clone(r);r.length<3;)r.push(1);return new Int32Array(r)}},{key:"pad",value:function(e,t){function n(e){return Array.apply(null,new Array(e)).map(Number.prototype.valueOf,0)}for(var r=e.length+2*t,i=e.map(function(e){return[].concat(n(t),e,n(t))}),o=0;o<t;o++)i=[].concat([n(r)],i,[n(r)]);return i}},{key:"flatten2dArrayTo",value:function(e,t){for(var n=0,r=0;r<e.length;r++)t.set(e[r],n),n+=e[r].length}},{key:"flatten3dArrayTo",value:function(e,t){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)t.set(e[r][i],n),n+=e[r][i].length}},{key:"flattenTo",value:function(e,n){t.isArray(e[0])?t.isArray(e[0][0])?t.flatten3dArrayTo(e,n):t.flatten2dArrayTo(e,n):n.set(e)}},{key:"splitArray",value:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(new e.constructor(e.buffer,4*r+e.byteOffset,t));return n}},{key:"getAstString",value:function(e,t){var n=Array.isArray(e)?e:e.split(/\r?\n/g),r=t.loc.start,i=t.loc.end,o=[];o.push(n[r.line-1].slice(r.column));for(var a=r.line;a<i.line-1;a++)o.push(n[a]);return o.push(n[i.line-1].slice(0,i.column)),o.join("\n")}},{key:"allPropertiesOf",value:function(e){var t=[];do{t.push.apply(t,Object.getOwnPropertyNames(e))}while(e=Object.getPrototypeOf(e));return t}}]),t}(u);Object.assign(b,u),e.exports=b},function(e,t,n){"use strict";e.exports=n(105)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=n(20),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.config=t.config,this.planeSize=t.planeSize,this.planeOffsetMultiplier=t.planeOffsetMultiplier,this.planeMargin=t.planeMargin,this.index=0,this.uTime=0,this.cubeMap=(new i.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa2/").load(["0004.png","0002.png","0006.png","0005.png","0001.png","0003.png"]),this.bumpMap=(new i.TextureLoader).load("assets/images/textures/bumpMap.jpg"),this.roughnessMap=(new i.TextureLoader).load("assets/images/textures/roughnessMap.jpg"),this.roughnessMap.wrapS=i.RepeatWrapping,this.roughnessMap.wrapT=i.RepeatWrapping,this.alphaMap=(new i.TextureLoader).load("assets/images/textures/alphaMap.jpg"),this.alphaMap.wrapS=this.alphaMap.wrapT=i.MirroredRepeatWrapping}return a(e,[{key:"updateOriginOffset",value:function(e){this.material.uniforms.uOriginOffset.value=e}},{key:"setTxAttributes",value:function(e,t,n,r,a,s,u,c,l){var h=t.blockData.pos;this.txIndexOffsets[t.blockData.height]=this.txCount;for(var p=t.blockData.n_tx,f=0;f<p;f++){var d=this.txCount+f;l&&(l[2*d+0]=t.offsets[2*f+0],l[2*d+1]=t.offsets[2*f+1]);var m=t.offsets[2*f+0],g=t.offsets[2*f+1],v=new i.Vector3(m,0,g);v.applyQuaternion(e.quaternion),v.x+=h.x,v.z+=h.z,n.array[3*d+0]=v.x,n.array[3*d+1]=v.y,n.array[3*d+2]=v.z,r.array[4*d+0]=e.quaternion.x,r.array[4*d+1]=e.quaternion.y,r.array[4*d+2]=e.quaternion.z,r.array[4*d+3]=e.quaternion.w,r.needsUpdate=!0;var y=t.scales[f];y>20&&(y=20),a.setX(d,y),a.needsUpdate=!0,s&&(s[d]=t.blockData.txValues[f]);var b=1e-8*t.blockData.txValues[f];if(b>2e3&&(b=2e3),b<.5&&(b=.5),n.setY(d,b),n.needsUpdate=!0,c){var _=Object(o.a)(f,0,p,0,this.config.audio.soundDuration-9);c.setX(d,_),c.needsUpdate=!0}if(u){var x=t.blockData.txSpentRatios[f];u.setX(d,x),u.needsUpdate=!0}}}}]),e}();t.a=s},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.exports=function(){function e(t,n,i,o,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NumberTexture";r(this,e),this.texture=t,this.size=n,this.dimensions=i,this.output=o,this.webGl=a,this.kernel=null,this.type=s}return i(e,[{key:"toArray",value:function(e){if(!e)throw new Error("You need to pass the GPU object for toArray to work.");return this.kernel?this.kernel(this):(this.kernel=e.createKernel(function(e){return e[this.thread.z][this.thread.y][this.thread.x]}).setOutput(this.output),this.kernel(this))}},{key:"delete",value:function(){return this.webGl.deleteTexture(this.texture)}}]),e}()},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new i,n.append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";function r(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();t.setSeconds(0,0);var r=t.getTime()%i;return n*i+r}t.a=r;var i=6e4},function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,r||e,o),s=c?c+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)u.call(e,t)&&n.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=c?c+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(e){var t=c?c+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,i,o){var a=c?c+e:e;if(!this._events[a])return!1;var s,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!s)for(p=1,s=new Array(h-1);p<h;p++)s[p-1]=arguments[p];l[u].fn.apply(l[u].context,s)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var i=c?c+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||a(this,i);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,e.exports=s},function(e,t,n){"use strict";function r(e){function t(e){a(c[e],"delete"),delete c[e]}function n(e){if(e=e||h,!s.contains(c,e))throw l.create("no-app",{appName:e});return c[e]}function r(t,n){if(void 0===n&&(n={}),"object"!==typeof n||null===n){n={name:n}}var r=n;void 0===r.name&&(r.name=h);var i=r.name;if("string"!==typeof i||!i)throw l.create("bad-app-name",{appName:String(i)});if(s.contains(c,i))throw l.create("duplicate-app",{appName:i});var o=new e(t,r,m);return c[i]=o,a(o,"create"),o}function i(){return Object.keys(c).map(function(e){return c[e]})}function o(t,r,o,a,u){function c(e){if(void 0===e&&(e=n()),"function"!==typeof e[t])throw l.create("invalid-app-argument",{appName:t});return e[t]()}if(void 0===u&&(u=!1),p[t])throw l.create("duplicate-service",{appName:t});return p[t]=r,a&&(f[t]=a,i().forEach(function(e){a("create",e)})),void 0!==o&&s.deepExtend(c,o),m[t]=c,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,u?e:[])},c}function a(e,t){for(var n=0,r=Object.keys(p);n<r.length;n++){var i=r[n],o=u(e,i);if(null===o)return;f[o]&&f[o](t,e)}}function u(e,t){return"serverAuth"===t?null:t}var c={},p={},f={},m={__esModule:!0,initializeApp:r,app:n,apps:null,SDK_VERSION:d,INTERNAL:{registerService:o,removeApp:t,factories:p,useAsService:u}};return m.default=m,Object.defineProperty(m,"apps",{get:i}),n.App=e,m}function i(){function e(e){s.deepExtend(t,e)}var t=r(f);return t.INTERNAL=a.__assign({},t.INTERNAL,{createFirebaseNamespace:i,extendNamespace:e,createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(14),s=n(43),u=n(44),c=(o={},o["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",o["bad-app-name"]="Illegal App name: '{$appName}",o["duplicate-app"]="Firebase App named '{$appName}' already exists",o["app-deleted"]="Firebase App named '{$appName}' already deleted",o["duplicate-service"]="Firebase service named '{$appName}' already registered",o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",o),l=new s.ErrorFactory("app","Firebase",c),h="[DEFAULT]",p=[],f=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){p.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){p=p.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=h),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==h?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;s.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(p.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),p=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var d="6.3.2",m=new u.Logger("@firebase/app");if(s.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=i(),y=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var b=v;t.default=b,t.firebase=b},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function d(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function g(e,t,n){function r(e){l[e]&&(c[e]=function(t){return new Promise(function(n,r){h.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(l[e](t))}catch(e){u(h[0][3],e)}}function o(e){e.value instanceof m?Promise.resolve(e.value.v).then(a,s):u(h[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(e,t||[]),h=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c}function v(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:m(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof h?h(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=r,n.d(t,"__assign",function(){return T}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=h,t.__read=p,t.__spread=f,t.__spreadArrays=d,t.__await=m,t.__asyncGenerator=g,t.__asyncDelegator=v,t.__asyncValues=y,t.__makeTemplateObject=b,t.__importStar=_,t.__importDefault=x;var w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T.apply(this,arguments)}},function(e,t,n){"use strict";var r=n(129),i=n(140),o=n(4),a=n(16),s=n(9),u=n(56),c=n(57),l=n(55),h=n(54),p=n(49),f=n(24),d=n(17),m=n(47),g=n(52),v=n(53),y=n(25),b=n(51);r.alias=i,r.utils=o,r.Texture=s,r.Input=a,r.input=function(e,t){return new a(e,t)},r.CPUFunctionBuilder=u,r.CPUFunctionNode=c,r.CPUKernel=l,r.CPURunner=h,r.WebGLFunctionBuilder=p,r.WebGLFunctionNode=f,r.WebGLKernel=d,r.WebGLRunner=m,r.WebGL2FunctionBuilder=g,r.WebGL2FunctionNode=v,r.WebGL2Kernel=y,r.WebGL2Runner=b,e.exports=r,"undefined"!==typeof window&&(window.GPU=r),"undefined"!==typeof self&&(self.GPU=r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=function e(t,n){if(r(this,e),this.value=t,Array.isArray(n)){this.size=[];for(var i=0;i<n.length;i++)this.size[i]=n[i];for(;this.size.length<3;)this.size.push(1)}else n.z?this.size=[n.x,n.y,n.z]:n.y?this.size=[n.x,n.y,1]:this.size=[n.x,1,1]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(48),c=n(4),l=n(9),h=n(130),p=n(131),f=n(132),d=[],m={};e.exports=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.textureCache={},o.threadDim={},o.programUniformLocationCache={},o.framebuffer=null,o.buffer=null,o.program=null,o.outputToTexture=n.outputToTexture,o.endianness=c.systemEndianness(),o.subKernelOutputTextures=null,o.subKernelOutputVariableNames=null,o.argumentsLength=0,o.constantsLength=0,o.compiledFragShaderString=null,o.compiledVertShaderString=null,o.fragShader=null,o.vertShader=null,o.drawBuffersMap=null,o.outputTexture=null,o.maxTexSize=null,o.uniform1fCache={},o.uniform1iCache={},o.uniform2fCache={},o.uniform2fvCache={},o.uniform2ivCache={},o.uniform3fvCache={},o.uniform3ivCache={},o._webGl||(o._webGl=o.initWebGl()),o}return o(t,e),s(t,null,[{key:"fragShaderString",get:function(){return h}},{key:"vertShaderString",get:function(){return p}}]),s(t,[{key:"initWebGl",value:function(){return c.initWebGl(this.getCanvas())}},{key:"validateOptions",value:function(){var e=c.isFloatReadPixelsSupported();if(!0===this.floatTextures&&!c.OES_texture_float)throw new Error("Float textures are not supported on this browser");if(!0===this.floatOutput&&!0!==this.floatOutputForce&&!e)throw new Error("Float texture outputs are not supported on this browser");void 0===this.floatTextures&&c.OES_texture_float&&(this.floatTextures=!0,this.floatOutput=e);var t=c.hasIntegerDivisionAccuracyBug();if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=t:this.fixIntegerDivisionAccuracy&&!t&&(this.fixIntegerDivisionAccuracy=!1),c.checkOutput(this.output),!this.output||0===this.output.length){if(1!==arguments.length)throw new Error("Auto output only supported for kernels with only one input");var n=c.getArgumentType(arguments[0]);if("Array"===n)this.output=c.getDimensions(n);else{if("NumberTexture"!==n&&"ArrayTexture(4)"!==n)throw new Error("Auto output not supported for input type: "+n);this.output=arguments[0].output}}if(this.texSize=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},this.output,!0),this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.floatOutput&&(this.floatOutput=!1,console.warn("Cannot use graphical mode and float output at the same time")),this.texSize=c.clone(this.output)}else void 0===this.floatOutput&&c.OES_texture_float&&(this.floatOutput=!0)}},{key:"updateMaxTexSize",value:function(){var e=this.texSize,t=this._canvas;if(null===this.maxTexSize){var n=d.indexOf(t);-1===n&&(n=d.length,d.push(t),m[n]=[e[0],e[1]]),this.maxTexSize=m[n]}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1])}},{key:"build",value:function(){this.validateOptions(),this.setupConstants(),this.setupParams(arguments),this.updateMaxTexSize();var e=this.texSize,t=this._webGl,n=this._canvas;t.enable(t.SCISSOR_TEST),t.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),n.width=this.maxTexSize[0],n.height=this.maxTexSize[1];for(var r=this.threadDim=c.clone(this.output);r.length<3;)r.push(1);this.functionBuilder&&this._addKernels();var i=this._getVertShaderString(arguments),o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,i),t.compileShader(o),this.vertShader=o;var a=this._getFragShaderString(arguments),s=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(s,a),t.compileShader(s),this.fragShader=s,!t.getShaderParameter(o,t.COMPILE_STATUS))throw console.log(i),console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(o)),new Error("Error compiling vertex shader");if(!t.getShaderParameter(s,t.COMPILE_STATUS))throw console.log(a),console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(s)),new Error("Error compiling fragment shader");this.debug&&(console.log("Options:"),console.dir(this),console.log("GLSL Shader Output:"),console.log(a));var u=this.program=t.createProgram();t.attachShader(u,o),t.attachShader(u,s),t.linkProgram(u),this.framebuffer=t.createFramebuffer(),this.framebuffer.width=e[0],this.framebuffer.height=e[1];var l=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=l.byteLength,f=this.buffer;f?t.bindBuffer(t.ARRAY_BUFFER,f):(f=this.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,l.byteLength+h.byteLength,t.STATIC_DRAW)),t.bufferSubData(t.ARRAY_BUFFER,0,l),t.bufferSubData(t.ARRAY_BUFFER,p,h);var d=t.getAttribLocation(this.program,"aPos");t.enableVertexAttribArray(d),t.vertexAttribPointer(d,2,t.FLOAT,t.FALSE,0,0);var m=t.getAttribLocation(this.program,"aTexCoord");t.enableVertexAttribArray(m),t.vertexAttribPointer(m,2,t.FLOAT,t.FALSE,0,p),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);for(var g in this.constants){var v=this.constants[g],y=c.getArgumentType(v);"Float"!==y&&"Integer"!==y&&(t.useProgram(this.program),this._addConstant(this.constants[g],y,g),this.constantsLength++)}this.outputImmutable||(this._setupOutputTexture(),null!==this.subKernelOutputVariableNames&&this.subKernelOutputVariableNames.length>0&&this._setupSubOutputTextures(this.subKernelOutputVariableNames.length))}},{key:"run",value:function(){null===this.program&&this.build.apply(this,arguments);var e=this.paramNames,t=this.paramTypes,n=this.texSize,r=this._webGl;r.useProgram(this.program),r.scissor(0,0,n[0],n[1]),this.hardcodeConstants||(this.setUniform3iv("uOutputDim",this.threadDim),this.setUniform2iv("uTexSize",n)),this.setUniform2f("ratio",n[0]/this.maxTexSize[0],n[1]/this.maxTexSize[1]),this.argumentsLength=0;for(var i=0;i<e.length;i++)this._addArgument(arguments[i],t[i],e[i]);if(this.graphical)return this.outputToTexture?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputTexture&&!this.outputImmutable||this._setupOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),new l(this.outputTexture,n,this.threadDim,this.output,this._webGl,"ArrayTexture(4)")):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputImmutable&&this._setupOutputTexture();var o=this.outputTexture;if(null!==this.subKernelOutputVariableNames&&(this.outputImmutable&&(this.subKernelOutputTextures=[],this._setupSubOutputTextures(this.subKernelOutputVariableNames.length)),this.drawBuffers.drawBuffersWEBGL(this.drawBuffersMap)),r.drawArrays(r.TRIANGLE_STRIP,0,4),null!==this.subKernelOutputTextures){if(null!==this.subKernels){var a=[];a.result=this.renderOutput(o);for(var s=0;s<this.subKernels.length;s++)a.push(new l(this.subKernelOutputTextures[s],n,this.threadDim,this.output,this._webGl));return a}if(null!==this.subKernelProperties){var u={result:this.renderOutput(o)},c=0;for(var h in this.subKernelProperties)this.subKernelProperties.hasOwnProperty(h)&&(u[h]=new l(this.subKernelOutputTextures[c],n,this.threadDim,this.output,this._webGl),c++);return u}}return this.renderOutput(o)}},{key:"renderOutput",value:function(e){var t=this.texSize,n=this._webGl,r=this.threadDim,i=this.output;if(this.outputToTexture)return new l(e,t,this.threadDim,i,this._webGl);var o=void 0;if(this.floatOutput){var a=t[0],s=Math.ceil(t[1]/4);o=new Float32Array(a*s*4),n.readPixels(0,0,a,s,n.RGBA,n.FLOAT,o)}else{var u=new Uint8Array(t[0]*t[1]*4);n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,u),o=new Float32Array(u.buffer)}if(o=o.subarray(0,r[0]*r[1]*r[2]),1===i.length)return o;if(2===i.length)return c.splitArray(o,i[0]);if(3===i.length){return c.splitArray(o,i[0]*i[1]).map(function(e){return c.splitArray(e,i[0])})}}},{key:"getOutputTexture",value:function(){return this.outputTexture}},{key:"_setupOutputTexture",value:function(){var e=this._webGl,t=this.texSize,n=this.outputTexture=this._webGl.createTexture();e.activeTexture(e.TEXTURE0+this.constantsLength+this.paramNames.length),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),this.floatOutput?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}},{key:"_setupSubOutputTextures",value:function(e){for(var t=this._webGl,n=this.texSize,r=this.drawBuffersMap=[t.COLOR_ATTACHMENT0],i=this.subKernelOutputTextures=[],o=0;o<e;o++){var a=this._webGl.createTexture();i.push(a),r.push(t.COLOR_ATTACHMENT0+o+1),t.activeTexture(t.TEXTURE0+this.constantsLength+this.paramNames.length+o),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this.floatOutput?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o+1,t.TEXTURE_2D,a,0)}}},{key:"getArgumentTexture",value:function(e){return this.getTextureCache("ARGUMENT_"+e)}},{key:"getTextureCache",value:function(e){return this.textureCache.hasOwnProperty(e)?this.textureCache[e]:this.textureCache[e]=this._webGl.createTexture()}},{key:"detachTextureCache",value:function(e){delete this.textureCache[e]}},{key:"setUniform1f",value:function(e,t){if(this.uniform1fCache.hasOwnProperty(e)){if(t===this.uniform1fCache[e])return}this.uniform1fCache[e]=t;var n=this.getUniformLocation(e);this._webGl.uniform1f(n,t)}},{key:"setUniform1i",value:function(e,t){if(this.uniform1iCache.hasOwnProperty(e)){if(t===this.uniform1iCache[e])return}this.uniform1iCache[e]=t;var n=this.getUniformLocation(e);this._webGl.uniform1i(n,t)}},{key:"setUniform2f",value:function(e,t,n){if(this.uniform2fCache.hasOwnProperty(e)){var r=this.uniform2fCache[e];if(t===r[0]&&n===r[1])return}this.uniform2fCache[e]=[t,n];var i=this.getUniformLocation(e);this._webGl.uniform2f(i,t,n)}},{key:"setUniform2fv",value:function(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){var n=this.uniform2fvCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2fvCache[e]=t;var r=this.getUniformLocation(e);this._webGl.uniform2fv(r,t)}},{key:"setUniform2iv",value:function(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){var n=this.uniform2ivCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2ivCache[e]=t;var r=this.getUniformLocation(e);this._webGl.uniform2iv(r,t)}},{key:"setUniform3fv",value:function(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){var n=this.uniform3fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3fvCache[e]=t;var r=this.getUniformLocation(e);this._webGl.uniform3fv(r,t)}},{key:"setUniform3iv",value:function(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){var n=this.uniform3ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3ivCache[e]=t;var r=this.getUniformLocation(e);this._webGl.uniform3iv(r,t)}},{key:"getUniformLocation",value:function(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this._webGl.getUniformLocation(this.program,e)}},{key:"_getFragShaderArtifactMap",value:function(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),GET_WRAPAROUND:this._getGetWraparoundString(),GET_TEXTURE_CHANNEL:this._getGetTextureChannelString(),GET_TEXTURE_INDEX:this._getGetTextureIndexString(),GET_RESULT:this._getGetResultString(),MAIN_PARAMS:this._getMainParamsString(e),MAIN_CONSTANTS:this._getMainConstantsString(),KERNEL:this._getKernelString(),MAIN_RESULT:this._getMainResultString()}}},{key:"_addArgument",value:function(e,t,n){var r=this._webGl,i=this.getArgumentTexture(n);switch(e instanceof l&&(t=e.type),t){case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"Array2D":case"Array3D":var o=c.getDimensions(e,!0),a=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},o);r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var s=a[0]*a[1],u=this._formatArrayTransfer(e,s),h=u.valuesFlat,p=u.bitRatio,f=void 0;this.floatTextures?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0],a[1],0,r.RGBA,r.FLOAT,h):(f=new Uint8Array(h.buffer),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0]/p,a[1],0,r.RGBA,r.UNSIGNED_BYTE,f)),this.hardcodeConstants||(this.setUniform3iv("user_"+n+"Dim",o),this.setUniform2iv("user_"+n+"Size",a)),this.setUniform1i("user_"+n+"BitRatio",p),this.setUniform1i("user_"+n,this.argumentsLength);break;case"Integer":case"Float":case"Number":this.setUniform1f("user_"+n,e);break;case"Input":var d=e,m=d.size,g=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},m);r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var v=g[0]*g[1],y=this._formatArrayTransfer(e.value,v),b=y.valuesFlat,_=y.bitRatio;if(this.floatTextures)r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0],g[1],0,r.RGBA,r.FLOAT,inputArray);else{var x=new Uint8Array(b.buffer);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0]/_,g[1],0,r.RGBA,r.UNSIGNED_BYTE,x)}this.hardcodeConstants||(this.setUniform3iv("user_"+n+"Dim",m),this.setUniform2iv("user_"+n+"Size",g)),this.setUniform1i("user_"+n+"BitRatio",_),this.setUniform1i("user_"+n,this.argumentsLength);break;case"HTMLImage":var w=e,T=[w.width,w.height,1],E=[w.width,w.height];r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var S=r.RGBA,k=r.RGBA,C=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,S,k,C,w),this.setUniform3iv("user_"+n+"Dim",T),this.setUniform2iv("user_"+n+"Size",E),this.setUniform1i("user_"+n,this.argumentsLength);break;case"ArrayTexture(4)":case"NumberTexture":var M=e,A=M.dimensions,O=M.size;r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,M.texture),this.setUniform3iv("user_"+n+"Dim",A),this.setUniform2iv("user_"+n+"Size",O),this.setUniform1i("user_"+n+"BitRatio",1),this.setUniform1i("user_"+n,this.argumentsLength);break;default:throw new Error("Input type not supported (WebGL): "+e)}this.argumentsLength++}},{key:"_addConstant",value:function(e,t,n){var r=this._webGl,i=this.getArgumentTexture(n);switch(e instanceof l&&(t=e.type),t){case"Array":var o=c.getDimensions(e,!0),a=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},o);r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var s=a[0]*a[1],u=this._formatArrayTransfer(e,s),h=u.valuesFlat,p=u.bitRatio,f=void 0;this.floatTextures?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0],a[1],0,r.RGBA,r.FLOAT,h):(f=new Uint8Array(h.buffer),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0]/p,a[1],0,r.RGBA,r.UNSIGNED_BYTE,f)),this.hardcodeConstants||(this.setUniform3iv("constants_"+n+"Dim",o),this.setUniform2iv("constants_"+n+"Size",a)),this.setUniform1i("constants_"+n+"BitRatio",p),this.setUniform1i("constants_"+n,this.constantsLength);break;case"Input":var d=e,m=d.size,g=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},m);r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var v=g[0]*g[1],y=this._formatArrayTransfer(e.value,v),b=y.valuesFlat,_=y.bitRatio;if(this.floatTextures)r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0],g[1],0,r.RGBA,r.FLOAT,inputArray);else{var x=new Uint8Array(b.buffer);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0]/_,g[1],0,r.RGBA,r.UNSIGNED_BYTE,x)}this.hardcodeConstants||(this.setUniform3iv("constants_"+n+"Dim",m),this.setUniform2iv("constants_"+n+"Size",g)),this.setUniform1i("constants_"+n+"BitRatio",_),this.setUniform1i("constants_"+n,this.constantsLength);break;case"HTMLImage":var w=e,T=[w.width,w.height,1],E=[w.width,w.height];r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var S=r.RGBA,k=r.RGBA,C=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,S,k,C,w),this.setUniform3iv("constants_"+n+"Dim",T),this.setUniform2iv("constants_"+n+"Size",E),this.setUniform1i("constants_"+n,this.constantsLength);break;case"ArrayTexture(4)":case"NumberTexture":var M=e,A=M.dimensions,O=M.size;r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,M.texture),this.setUniform3iv("constants_"+n+"Dim",A),this.setUniform2iv("constants_"+n+"Size",O),this.setUniform1i("constants_"+n+"BitRatio",1),this.setUniform1i("constants_"+n,this.constantsLength);break;case"Integer":case"Float":default:throw new Error("Input type not supported (WebGL): "+e)}}},{key:"_formatArrayTransfer",value:function(e,t){var n=1,r=e;if(c.isArray(e[0])||this.floatTextures)r=new Float32Array(t),c.flattenTo(e,r);else switch(e.constructor){case Uint8Array:case Int8Array:n=4;break;case Uint16Array:case Int16Array:n=2;case Float32Array:case Int32Array:break;default:r=new Float32Array(t),c.flattenTo(e,r)}return{bitRatio:n,valuesFlat:r}}},{key:"_getHeaderString",value:function(){return null!==this.subKernels||null!==this.subKernelProperties?"#extension GL_EXT_draw_buffers : require\n":""}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" "+parseInt(this.loopMaxIterations)+".0;\n":" 1000.0;\n"}},{key:"_getConstantsString",value:function(){var e=[],t=this.threadDim,n=this.texSize;return this.hardcodeConstants?e.push("ivec3 uOutputDim = ivec3("+t[0]+","+t[1]+", "+t[2]+")","ivec2 uTexSize = ivec2("+n[0]+", "+n[1]+")"):e.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"),this._linesToString(e)}},{key:"_getTextureCoordinate",value:function(){var e=this.subKernelOutputVariableNames;return null===e||e.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}},{key:"_getDecode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  rgba.rgba = rgba.abgr;\n"}},{key:"_getEncode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  rgba.rgba = rgba.abgr;\n"}},{key:"_getDivideWithIntegerCheckString",value:function(){return this.fixIntegerDivisionAccuracy?"\n\t\t\t  float div_with_int_check(float x, float y) {\n\t\t\t  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n\t\t\t    return float(int(x)/int(y));\n\t\t\t  }\n\t\t\t  return x / y;\n\t\t\t}\n\t\t\t":""}},{key:"_getGetWraparoundString",value:function(){return this.wraparound?"  xyz = mod(xyz, texDim);\n":""}},{key:"_getGetTextureChannelString",value:function(){return this.floatTextures?this._linesToString(["  int channel = integerMod(index, 4)","  index = index / 4"]):""}},{key:"_getGetTextureIndexString",value:function(){return this.floatTextures?"  index = index / 4;\n":""}},{key:"_getGetResultString",value:function(){return this.floatTextures?this._linesToString(["  if (channel == 0) return texel.r","  if (channel == 1) return texel.g","  if (channel == 2) return texel.b","  if (channel == 3) return texel.a"]):"  return decode(texel, x, bitRatio);"}},{key:"_getMainParamsString",value:function(e){for(var t=[],n=this.paramTypes,r=this.paramNames,i=0;i<r.length;i++){var o=e[i],a=r[i],s=n[i];if(this.hardcodeConstants)if("Array"===s||"NumberTexture"===s||"ArrayTexture(4)"===s){var u=c.getDimensions(o,!0),l=c.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},u);t.push("uniform sampler2D user_"+a,"ivec2 user_"+a+"Size = ivec2("+l[0]+", "+l[1]+")","ivec3 user_"+a+"Dim = ivec3("+u[0]+", "+u[1]+", "+u[2]+")","uniform int user_"+a+"BitRatio")}else"Integer"===s?t.push("float user_"+a+" = "+o+".0"):"Float"===s&&t.push("float user_"+a+" = "+o);else if("Array"===s||"NumberTexture"===s||"ArrayTexture(4)"===s||"Input"===s||"HTMLImage"===s)t.push("uniform sampler2D user_"+a,"uniform ivec2 user_"+a+"Size","uniform ivec3 user_"+a+"Dim"),"HTMLImage"!==s&&t.push("uniform int user_"+a+"BitRatio");else{if("Integer"!==s&&"Float"!==s)throw new Error("Param type "+s+" not supported in WebGL, only WebGL2");t.push("uniform float user_"+a)}}return this._linesToString(t)}},{key:"_getMainConstantsString",value:function(){var e=[];if(this.constants)for(var t in this.constants)if(this.constants.hasOwnProperty(t)){var n=this.constants[t],r=c.getArgumentType(n);switch(r){case"Integer":e.push("const float constants_"+t+" = "+parseInt(n)+".0");break;case"Float":e.push("const float constants_"+t+" = "+parseFloat(n));break;case"Array":case"Input":case"HTMLImage":case"NumberTexture":case"ArrayTexture(4)":e.push("uniform sampler2D constants_"+t,"uniform ivec2 constants_"+t+"Size","uniform ivec3 constants_"+t+"Dim","uniform int constants_"+t+"BitRatio");break;default:throw new Error("Unsupported constant "+t+" type "+r)}}return this._linesToString(e)}},{key:"_getKernelString",value:function(){var e=[],t=this.subKernelOutputVariableNames;if(null!==t){e.push("float kernelResult = 0.0");for(var n=0;n<t.length;n++)e.push("float "+t[n]+" = 0.0")}else e.push("float kernelResult = 0.0");return this._linesToString(e)+this.functionBuilder.getPrototypeString("kernel")}},{key:"_getMainResultString",value:function(){var e=this.subKernelOutputVariableNames,t=[];if(this.floatOutput&&t.push("  index *= 4"),this.graphical)t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor");else if(this.floatOutput)for(var n=["r","g","b","a"],r=0;r<n.length;++r){if(t.push("  threadId = indexTo3D(index, uOutputDim)"),t.push("  kernel()"),e){t.push("  gl_FragData[0]."+n[r]+" = kernelResult");for(var i=0;i<e.length;++i)t.push("  gl_FragData["+(i+1)+"]."+n[r]+" = "+e[i])}else t.push("  gl_FragColor."+n[r]+" = kernelResult");r<n.length-1&&t.push("  index += 1")}else if(null!==e){t.push("  threadId = indexTo3D(index, uOutputDim)"),t.push("  kernel()"),t.push("  gl_FragData[0] = encode32(kernelResult)");for(var o=0;o<e.length;o++)t.push("  gl_FragData["+(o+1)+"] = encode32("+e[o]+")")}else t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = encode32(kernelResult)");return this._linesToString(t)}},{key:"_linesToString",value:function(e){return e.length>0?e.join(";\n")+";\n":"\n"}},{key:"_replaceArtifacts",value:function(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z])*)__;\n/g,function(e,n){if(t.hasOwnProperty(n))return t[n];throw"unhandled artifact "+n})}},{key:"_addKernels",value:function(){var e=this,t=this.functionBuilder,n=this._webGl;if(t.addFunctions(this.functions,{constants:this.constants,output:this.output}),t.addNativeFunctions(this.nativeFunctions),t.addKernel(this.fnString,{prototypeOnly:!1,constants:this.constants,output:this.output,debug:this.debug,loopMaxIterations:this.loopMaxIterations,paramNames:this.paramNames,paramTypes:this.paramTypes,constantTypes:this.constantTypes,fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy}),null!==this.subKernels){if(!(this.drawBuffers=n.getExtension("WEBGL_draw_buffers")))throw new Error("could not instantiate draw buffers extension");this.subKernelOutputVariableNames=[],this.subKernels.forEach(function(t){return e._addSubKernel(t)})}else if(null!==this.subKernelProperties){var r=this.drawBuffers=n.getExtension("WEBGL_draw_buffers");if(!r)throw new Error("could not instantiate draw buffers extension");this.subKernelOutputVariableNames=[],Object.keys(this.subKernelProperties).forEach(function(t){return e._addSubKernel(e.subKernelProperties[t])})}}},{key:"_addSubKernel",value:function(e){this.functionBuilder.addSubKernel(e,{prototypeOnly:!1,constants:this.constants,output:this.output,debug:this.debug,loopMaxIterations:this.loopMaxIterations,fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy}),this.subKernelOutputVariableNames.push(e.name+"Result")}},{key:"_getFragShaderString",value:function(e){return null!==this.compiledFragShaderString?this.compiledFragShaderString:this.compiledFragShaderString=this._replaceArtifacts(this.constructor.fragShaderString,this._getFragShaderArtifactMap(e))}},{key:"_getVertShaderString",value:function(e){return null!==this.compiledVertShaderString?this.compiledVertShaderString:this.compiledVertShaderString=this.constructor.vertShaderString}},{key:"toString",value:function(){return f(this)}},{key:"addFunction",value:function(e){this.functionBuilder.addFunction(null,e)}},{key:"destroy",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.outputTexture&&this._webGl.deleteTexture(this.outputTexture),this.buffer&&this._webGl.deleteBuffer(this.buffer),this.framebuffer&&this._webGl.deleteFramebuffer(this.framebuffer),this.vertShader&&this._webGl.deleteShader(this.vertShader),this.fragShader&&this._webGl.deleteShader(this.fragShader),this.program&&this._webGl.deleteProgram(this.program);for(var n=Object.keys(this.textureCache),r=0;r<n.length;r++){var i=n[r];this._webGl.deleteTexture(this.textureCache[i])}if(this.subKernelOutputTextures)for(var o=0;o<this.subKernelOutputTextures.length;o++)this._webGl.deleteTexture(this.subKernelOutputTextures[o]);if(e){var s=d.indexOf(this._canvas);s>=0&&(d[s]=null,m[s]=null)}delete this._webGl}}]),t}(u)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,s=null==a?0:Object(i.a)(a),u=null==n.weekStartsOn?s:Object(i.a)(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=Object(o.a)(e),l=c.getUTCDay(),h=(l<u?7:0)+l-u;return c.setUTCDate(c.getUTCDate()-h),c.setUTCHours(0,0,0,0),c}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(Math.PI,function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),a=n(22);e.exports=function(){function e(t,n){r(this,e),n=n||{},this.kernel=n.kernel,this.canvas=n.canvas,this.webGl=n.webGl,this.fn=null,this.functionBuilder=t,this.fnString=null,this.endianness=o.systemEndianness()}return i(e,[{key:"textureToArray",value:function(e){return this.createKernel(function(e){return e[this.thread.z][this.thread.y][this.thread.x]})(e)}},{key:"deleteTexture",value:function(e){this.webGl.deleteTexture(e.texture)}},{key:"buildPromiseKernel",value:function(){throw new Error("not yet implemented")}},{key:"getMode",value:function(){throw new Error('"mode" not implemented on BaseRunner')}},{key:"buildKernel",value:function(e,t){t=Object.assign({},t||{});var n=e.toString();return t.functionBuilder||(t.functionBuilder=this.functionBuilder),t.canvas||(t.canvas=this.canvas),t.webGl||(t.webGl=this.webgl),a(new this.Kernel(n,t))}}]),e}()},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){var t=function(){return e.run.apply(e,arguments)};return r.allPropertiesOf(e).forEach(function(n){"_"===n[0]&&"_"===n[1]||("function"===typeof e[n]?t[n]="add"===n.substring(0,3)||"set"===n.substring(0,3)?function(){return e[n].apply(e,arguments),t}:e[n].bind(e):(t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})))}),t.kernel=e,t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.exports=function(){function e(t){r(this,e),this.nodeMap={},this.nativeFunctions={},this.gpu=t,this.rootKernel=null,this.Node=null}return i(e,[{key:"addNativeFunction",value:function(e,t){this.nativeFunctions[e]=t}},{key:"addFunction",value:function(e,t,n){this.addFunctionNode(new this.Node(e,t,n).setBuilder(this))}},{key:"addFunctions",value:function(e,t){if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFunction(null,e[n],t);else for(var r in e)this.addFunction(r,e[r],t)}},{key:"addNativeFunctions",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.addNativeFunction(t,e[t])}},{key:"addFunctionNode",value:function(e){this.nodeMap[e.functionName]=e,e.isRootKernel&&(this.rootKernel=e)}},{key:"traceFunctionCalls",value:function(e,t,n){e=e||"kernel",t=t||[];var r=this.nodeMap[e];if(r){var i=t.indexOf(e);if(-1===i){t.push(e),n&&(r.parent=n),r.getFunctionString();for(var o=0;o<r.calledFunctions.length;++o)this.traceFunctionCalls(r.calledFunctions[o],t,r)}else{var a=t.splice(i,1)[0];t.push(a)}}return this.nativeFunctions[e]&&(t.indexOf(e)>=0||t.push(e)),t}},{key:"addKernel",value:function(e,t){var n=new this.Node("kernel",e,t);return n.setBuilder(this),n.isRootKernel=!0,this.addFunctionNode(n),n}},{key:"addSubKernel",value:function(e,t){var n=new this.Node(null,e,t);return n.setBuilder(this),n.isSubKernel=!0,this.addFunctionNode(n),n}},{key:"getPrototypeString",value:function(e){return this.getPrototypes(e).join("\n")}},{key:"getPrototypes",value:function(e){return this.rootKernel.generate(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.nodeMap))}},{key:"getStringFromFunctionNames",value:function(e){for(var t=[],n=0;n<e.length;++n){this.nodeMap[e[n]]&&t.push(this.nodeMap[e[n]].getFunctionString())}return t.join("\n")}},{key:"getPrototypesFromFunctionNames",value:function(e,t){for(var n=[],r=0;r<e.length;++r){var i=e[r],o=this.nodeMap[i];o?n.push(o.getFunctionPrototypeString(t)):this.nativeFunctions[i]&&n.push(this.nativeFunctions[i])}return n}},{key:"getPrototypeStringFromFunctionNames",value:function(e,t){return this.getPrototypesFromFunctionNames(e,t).toString()}},{key:"getString",value:function(e,t){return void 0===t&&(t={}),e?this.getStringFromFunctionNames(this.traceFunctionCalls(e,[],t).reverse(),t):this.getStringFromFunctionNames(Object.keys(this.nodeMap),t)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.replace(l,"((").replace(h,"((")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),c=n(4),l=/decode32\(\s+encode32\(/g,h=/encode32\(\s+decode32\(/g;e.exports=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"generate",value:function(){return this.debug,this.prototypeOnly?this.astFunctionPrototype(this.getJsAST(),[]).join("").trim():(this.functionStringArray=this.astGeneric(this.getJsAST(),[]),this.functionString=a(this.functionStringArray.join("").trim()),this.functionString)}},{key:"astFunctionDeclaration",value:function(e,t){return this.builder.addFunction(null,c.getAstString(this.jsFunctionString,e)),t}},{key:"astFunctionPrototype",value:function(e,t){if(this.isRootKernel||this.isSubKernel)return t;var n=this.returnType,r=p[n];if(!r)throw new Error("unknown type "+n);t.push(r),t.push(" "),t.push(this.functionName),t.push("(");for(var i=0;i<this.paramNames.length;++i)i>0&&t.push(", "),t.push(this.paramTypes[i]),t.push(" "),t.push("user_"),t.push(this.paramNames[i]);return t.push(");\n"),t}},{key:"astFunctionExpression",value:function(e,t){if(this.isRootKernel)t.push("void");else{var n=this.returnType,r=p[n];if(!r)throw new Error("unknown type "+n);t.push(r)}if(t.push(" "),t.push(this.functionName),t.push("("),!this.isRootKernel)for(var i=0;i<this.paramNames.length;++i){var o=this.paramNames[i];i>0&&t.push(", ");var a=this.getParamType(o),s=p[a];if(!s)throw new Error("unknown type "+a);t.push(s),t.push(" "),t.push("user_"),t.push(o)}t.push(") {\n");for(var u=0;u<e.body.body.length;++u)this.astGeneric(e.body.body[u],t),t.push("\n");return t.push("}\n"),t}},{key:"astReturnStatement",value:function(e,t){return this.isRootKernel?(t.push("kernelResult = "),this.astGeneric(e.argument,t),t.push(";"),t.push("return;")):this.isSubKernel?(t.push(this.functionName+"Result = "),this.astGeneric(e.argument,t),t.push(";"),t.push("return "+this.functionName+"Result;")):(t.push("return "),this.astGeneric(e.argument,t),t.push(";")),t}},{key:"astLiteral",value:function(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);t.push(e.value);var n=this.isState("in-get-call-parameters");return Number.isInteger(e.value)?n||t.push(".0"):n&&(t.pop(),t.push("int("),t.push(e.value),t.push(")")),t}},{key:"astBinaryExpression",value:function(e,t){var n=this.isState("in-get-call-parameters");return n&&(this.pushState("not-in-get-call-parameters"),t.push("int")),t.push("("),"%"===e.operator?(t.push("mod("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")")):"==="===e.operator?(this.astGeneric(e.left,t),t.push("=="),this.astGeneric(e.right,t)):"!=="===e.operator?(this.astGeneric(e.left,t),t.push("!="),this.astGeneric(e.right,t)):this.fixIntegerDivisionAccuracy&&"/"===e.operator?(t.push("div_with_int_check("),this.astGeneric(e.left,t),t.push(", "),this.astGeneric(e.right,t),t.push(")")):(this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t)),t.push(")"),n&&this.popState("not-in-get-call-parameters"),t}},{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);var n=!this.isState("in-get-call-parameters");switch(e.name){case"gpu_threadX":n&&t.push("float("),t.push("threadId.x"),n&&t.push(")");break;case"gpu_threadY":n&&t.push("float("),t.push("threadId.y"),n&&t.push(")");break;case"gpu_threadZ":n&&t.push("float("),t.push("threadId.z"),n&&t.push(")");break;case"gpu_outputX":t.push("uOutputDim.x");break;case"gpu_outputY":t.push("uOutputDim.y");break;case"gpu_outputZ":t.push("uOutputDim.z");break;case"Infinity":t.push("3.402823466e+38");break;default:var r=this.getUserParamName(e.name);null!==r?this.pushParameter(t,"user_"+r):this.pushParameter(t,"user_"+e.name)}return t}},{key:"astForStatement",value:function(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statment",e);if(e.test&&"BinaryExpression"===e.test.type){if("Identifier"===e.test.right.type&&"<"===e.test.operator&&!1===this.isIdentifierConstant(e.test.right.name)){if(this.loopMaxIterations||(console.warn("Warning: loopMaxIterations is not set! Using default of 1000 which may result in unintended behavior."),console.warn("Set loopMaxIterations or use a for loop of fixed length to silence this message.")),t.push("for ("),this.astGeneric(e.init,t),this.astGeneric(e.test.left,t),t.push(e.test.operator),t.push("LOOP_MAX"),t.push(";"),this.astGeneric(e.update,t),t.push(")"),t.push("{\n"),t.push("if ("),this.astGeneric(e.test.left,t),t.push(e.test.operator),this.astGeneric(e.test.right,t),t.push(") {\n"),"BlockStatement"===e.body.type)for(var n=0;n<e.body.body.length;n++)this.astGeneric(e.body.body[n],t);else this.astGeneric(e.body,t);return t.push("\n} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}var r=JSON.parse(JSON.stringify(e.init.declarations)),i=e.update.argument;if(!Array.isArray(r)||r.length<1)throw this.jsFunctionString,new Error("Error: Incompatible for loop declaration");if(r.length>1){for(var o=null,a=0;a<r.length;a++){var s=r[a];s.id.name===i.name?(o=s,r.splice(a,1)):(t.push("float "),this.astGeneric(s,t),t.push(";"))}t.push("for (float "),this.astGeneric(o,t),t.push(";")}else t.push("for ("),this.astGeneric(e.init,t);return this.astGeneric(e.test,t),t.push(";"),this.astGeneric(e.update,t),t.push(")"),this.astGeneric(e.body,t),t}throw this.astErrorOutput("Invalid for statement",e)}},{key:"astWhileStatement",value:function(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statment",e);return t.push("for (float i = 0.0; i < LOOP_MAX; i++) {"),t.push("if ("),this.astGeneric(e.test,t),t.push(") {\n"),this.astGeneric(e.body,t),t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astDoWhileStatement",value:function(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statment",e);return t.push("for (float i = 0.0; i < LOOP_MAX; i++) {"),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astAssignmentExpression",value:function(e,t){if("%="!==e.operator)return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t;this.astGeneric(e.left,t),t.push("="),t.push("mod("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")")}},{key:"astEmptyStatement",value:function(e,t){return t}},{key:"astBlockStatement",value:function(e,t){t.push("{\n");for(var n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);return t.push("}\n"),t}},{key:"astExpressionStatement",value:function(e,t){return this.astGeneric(e.expression,t),t.push(";"),t}},{key:"astVariableDeclaration",value:function(e,t){for(var n=0;n<e.declarations.length;n++){var r=e.declarations[n];n>0&&t.push(",");var i=[];this.astGeneric(r,i);var o="Number";if(0===n){var a=r.init;if(a)if(a.object){if("MemberExpression"===a.object.type&&a.object.object)if("ThisExpression"!==a.object.object.type||!a.object.property||"thread"!==a.object.property.name&&"output"!==a.object.property.name){if("Identifier"===a.object.object.type){var s=this.getParamType(a.object.object.name);o=f[s]}else if(a.object.object.object&&"Identifier"===a.object.object.object.type){var u=this.getParamType(a.object.object.object.name);o=f[u]}else if(a.object.object.object&&a.object.object.object.object&&"ThisExpression"===a.object.object.object.object.type&&"constants"===a.object.object.object.property.name){var c=this.getConstantType(a.object.object.property.name);o=f[c]}else if(a.object.object.object&&a.object.object.object.object&&a.object.object.object.object.object&&"ThisExpression"===a.object.object.object.object.object.type&&"constants"===a.object.object.object.object.property.name){var l=this.getConstantType(a.object.object.object.property.name);o=f[l]}}else o="Integer";if(!o)throw new Error("unknown lookup type "+f)}else if(a.name&&this.declarations[a.name])o=this.declarations[a.name];else if("ArrayExpression"===a.type)o="Array("+a.elements.length+")";else if("CallExpression"===a.type){var h=this.builder.nodeMap[a.callee.name];h&&h.returnType&&(o=h.returnType)}var d=p[o];if(!d)throw new Error("type "+o+" not handled");t.push(d+" ")}this.declarations[r.id.name]=o,t.push.apply(t,i)}return t.push(";"),t}},{key:"astVariableDeclarator",value:function(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push("="),this.astGeneric(e.init,t)),t}},{key:"astIfStatement",value:function(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}},{key:"astBreakStatement",value:function(e,t){return t.push("break;\n"),t}},{key:"astContinueStatement",value:function(e,t){return t.push("continue;\n"),t}},{key:"astLogicalExpression",value:function(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}},{key:"astUpdateExpression",value:function(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}},{key:"astUnaryExpression",value:function(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}},{key:"astThisExpression",value:function(e,t){return t.push("this"),t}},{key:"astMemberExpression",value:function(e,t){if(e.object.type,e.computed)if("Identifier"===e.object.type||"MemberExpression"===e.object.type&&e.object.object.object&&"ThisExpression"===e.object.object.object.type&&"constants"===e.object.object.property.name){var n=e.object.name,r=(this.functionName,!1);if(this.paramNames){var i=this.paramNames.indexOf(n);i>=0&&"Number"===this.paramTypes[i]&&(r=!0)}if(r)this.astGeneric(e.object,t),t.push("[int("),this.astGeneric(e.property,t),t.push(")]");else{var o=this.isState("in-get-call-parameters"),a=this.isState("multi-member-expression");a&&this.popState("multi-member-expression"),this.pushState("not-in-get-call-parameters");var s=null;switch(e.object.name?s=this.declarations[e.object.name]?this.declarations[e.object.name]:this.getParamType(e.object.name):e.object&&e.object.object&&e.object.object.object&&"ThisExpression"===e.object.object.object.type&&(s=this.getConstantType(e.object.property.name)),s){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(e.object,t),t.push("["),t.push(e.property.raw),t.push("]"),a&&this.popState("not-in-get-call-parameters");break;case"HTMLImageArray":t.push("getImage3D("),this.astGeneric(e.object,t),t.push(", ivec2("),this.astGeneric(e.object,t),t.push("Size[0],"),this.astGeneric(e.object,t),t.push("Size[1]), ivec3("),this.astGeneric(e.object,t),t.push("Dim[0],"),this.astGeneric(e.object,t),t.push("Dim[1],"),this.astGeneric(e.object,t),t.push("Dim[2]"),t.push("), "),this.popState("not-in-get-call-parameters"),this.pushState("in-get-call-parameters"),this.astGeneric(e.property,t),a||this.popState("in-get-call-parameters"),t.push(")");break;case"ArrayTexture(4)":case"HTMLImage":t.push("getImage2D("),this.astGeneric(e.object,t),t.push(", ivec2("),this.astGeneric(e.object,t),t.push("Size[0],"),this.astGeneric(e.object,t),t.push("Size[1]), ivec3("),this.astGeneric(e.object,t),t.push("Dim[0],"),this.astGeneric(e.object,t),t.push("Dim[1],"),this.astGeneric(e.object,t),t.push("Dim[2]"),t.push("), "),this.popState("not-in-get-call-parameters"),this.pushState("in-get-call-parameters"),this.astGeneric(e.property,t),a||this.popState("in-get-call-parameters"),t.push(")");break;default:o&&t.push("int("),t.push("get("),this.astGeneric(e.object,t),t.push(", ivec2("),this.astGeneric(e.object,t),t.push("Size[0],"),this.astGeneric(e.object,t),t.push("Size[1]), ivec3("),this.astGeneric(e.object,t),t.push("Dim[0],"),this.astGeneric(e.object,t),t.push("Dim[1],"),this.astGeneric(e.object,t),t.push("Dim[2]"),t.push("), "),this.astGeneric(e.object,t),t.push("BitRatio"),t.push(", "),this.popState("not-in-get-call-parameters"),this.pushState("in-get-call-parameters"),this.astGeneric(e.property,t),a||this.popState("in-get-call-parameters"),t.push(")"),o&&t.push(")")}}}else{e.object;var u=(this.states.length,this.isState("in-get-call-parameters"));u||this.pushState("multi-member-expression"),this.astGeneric(e.object,t),this.isState("multi-member-expression")&&this.popState("multi-member-expression");var c=!u&&this.isState("in-get-call-parameters"),l=t.pop();t.push(","),e.property;var h=this.isState("should-pop-in-get-call-parameters");h&&this.popState("should-pop-in-get-call-parameters"),this.astGeneric(e.property,t),t.push(l),c?this.pushState("should-pop-in-get-call-parameters"):h&&this.popState("in-get-call-parameters")}else{var p=this.astMemberExpressionUnroll(e),f=p.toLowerCase();0===p.indexOf("this.constants.")&&(p="constants_"+p.slice("this.constants.".length));var d=!this.isState("in-get-call-parameters");switch(f){case"this.thread.x":d&&t.push("float("),t.push("threadId.x"),d&&t.push(")");break;case"this.thread.y":d&&t.push("float("),t.push("threadId.y"),d&&t.push(")");break;case"this.thread.z":d&&t.push("float("),t.push("threadId.z"),d&&t.push(")");break;case"this.output.x":t.push(this.output[0]+".0");break;case"this.output.y":t.push(this.output[1]+".0");break;case"this.output.z":t.push(this.output[2]+".0");break;default:e.object&&e.object.name&&this.declarations[e.object.name]&&t.push("user_"),t.push(p)}}return e.object.type,t}},{key:"astSequenceExpression",value:function(e,t){for(var n=0;n<e.expressions.length;n++)n>0&&t.push(","),this.astGeneric(e.expressions,t);return t}},{key:"astCallExpression",value:function(e,t){if(e.callee){var n=this.astMemberExpressionUnroll(e.callee);0===n.indexOf("Math.")&&(n=n.slice("Math.".length)),0===n.indexOf("this.")&&(n=n.slice("this.".length)),"atan2"===n&&(n="atan"),this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.hasOwnProperty("funcName")||(this.calledFunctionsArguments[n]=[]);var r=[];this.calledFunctionsArguments[n].push(r),t.push(n),t.push("(");for(var i=0;i<e.arguments.length;++i){var o=e.arguments[i];if(i>0&&t.push(", "),this.astGeneric(o,t),"Identifier"===o.type){var a=this.paramNames.indexOf(o.name);-1===a?r.push(null):r.push({name:o.name,type:this.paramTypes[a]||"Number"})}else r.push(null)}return t.push(")"),t}throw this.astErrorOutput("Unknown CallExpression",e)}},{key:"astArrayExpression",value:function(e,t){var n=e.elements.length;t.push("vec"+n+"(");for(var r=0;r<n;++r){r>0&&t.push(", ");var i=e.elements[r];this.astGeneric(i,t)}return t.push(")"),t}},{key:"getFunctionPrototypeString",value:function(){return this.webGlFunctionPrototypeString?this.webGlFunctionPrototypeString:this.webGlFunctionPrototypeString=this.generate()}},{key:"build",value:function(){return this.getFunctionPrototypeString().length>0}}]),t}(u);var p={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4",Array2D:"sampler2D",Array3D:"sampler2D",Float:"float",Input:"sampler2D",Integer:"float",Number:"float",NumberTexture:"sampler2D","ArrayTexture(4)":"sampler2D"},f={Array:"Number",Array2D:"Number",Array3D:"Number",HTMLImage:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number","ArrayTexture(4)":"Array(4)"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),u=n(4),c=n(9),l=n(134),h=n(135);e.exports=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"initWebGl",value:function(){return u.initWebGl2(this.getCanvas())}},{key:"validateOptions",value:function(){var e=u.isFloatReadPixelsSupportedWebGL2();if(!0===this.floatOutput&&!0!==this.floatOutputForce&&!e)throw new Error("Float texture outputs are not supported on this browser");void 0===this.floatTextures&&(this.floatTextures=!0,this.floatOutput=e);var t=u.hasIntegerDivisionAccuracyBug();if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=t:this.fixIntegerDivisionAccuracy&&!t&&(this.fixIntegerDivisionAccuracy=!1),u.checkOutput(this.output),!this.output||0===this.output.length){if(1!==arguments.length)throw new Error("Auto output only supported for kernels with only one input");var n=u.getArgumentType(arguments[0]);if("Array"===n)this.output=u.getDimensions(n);else{if("NumberTexture"!==n&&"ArrayTexture(4)"!==n)throw new Error("Auto output not supported for input type: "+n);this.output=arguments[0].output}}if(this.texSize=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},this.output,!0),this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.floatOutput&&(this.floatOutput=!1,console.warn("Cannot use graphical mode and float output at the same time")),this.texSize=u.clone(this.output)}else void 0===this.floatOutput&&(this.floatOutput=!0);(this.floatOutput||this.floatOutputForce)&&this._webGl.getExtension("EXT_color_buffer_float")}},{key:"run",value:function(){null===this.program&&this.build.apply(this,arguments);var e=this.paramNames,t=this.paramTypes,n=this.texSize,r=this._webGl;r.useProgram(this.program),r.scissor(0,0,n[0],n[1]),this.hardcodeConstants||(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",n)),this.setUniform2f("ratio",n[0]/this.maxTexSize[0],n[1]/this.maxTexSize[1]),this.argumentsLength=0;for(var i=0;i<e.length;i++)this._addArgument(arguments[i],t[i],e[i]);if(this.graphical)return this.outputToTexture?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputTexture&&!this.outputImmutable||this._setupOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),new c(this.outputTexture,n,this.threadDim,this.output,this._webGl,"ArrayTexture(4)")):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputImmutable&&this._setupOutputTexture();var o=this.outputTexture;if(null!==this.subKernelOutputVariableNames&&(this.outputImmutable&&(this.subKernelOutputTextures=[],this._setupSubOutputTextures(this.subKernelOutputVariableNames.length)),r.drawBuffers(this.drawBuffersMap)),r.drawArrays(r.TRIANGLE_STRIP,0,4),null!==this.subKernelOutputTextures){if(null!==this.subKernels){var a=[];a.result=this.renderOutput(o);for(var s=0;s<this.subKernels.length;s++)a.push(new c(this.subKernelOutputTextures[s],n,this.threadDim,this.output,this._webGl));return a}if(null!==this.subKernelProperties){var u={result:this.renderOutput(o)},l=0;for(var h in this.subKernelProperties)this.subKernelProperties.hasOwnProperty(h)&&(u[h]=new c(this.subKernelOutputTextures[l],n,this.threadDim,this.output,this._webGl),l++);return u}}return this.renderOutput(o)}},{key:"getOutputTexture",value:function(){return this.outputTexture}},{key:"_setupOutputTexture",value:function(){var e=this._webGl,t=this.texSize,n=this.outputTexture=this._webGl.createTexture();e.activeTexture(e.TEXTURE0+this.constantsLength+this.paramNames.length),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),this.floatOutput?e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}},{key:"_setupSubOutputTextures",value:function(e){for(var t=this._webGl,n=this.texSize,r=this.drawBuffersMap=[t.COLOR_ATTACHMENT0],i=this.subKernelOutputTextures=[],o=0;o<e;o++){var a=this._webGl.createTexture();i.push(a),r.push(t.COLOR_ATTACHMENT0+o+1),t.activeTexture(t.TEXTURE0+this.constantsLength+this.paramNames.length+o),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this.floatOutput?t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,n[0],n[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o+1,t.TEXTURE_2D,a,0)}}},{key:"_addArgument",value:function(e,t,n){var r=this._webGl,i=this.getArgumentTexture(n);switch(e instanceof c&&(t=e.type),t){case"Array":var o=u.getDimensions(e,!0),a=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},o);r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var s=a[0]*a[1],l=this._formatArrayTransfer(e,s),h=l.valuesFlat,p=l.bitRatio,f=void 0;this.floatTextures?r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,a[0],a[1],0,r.RGBA,r.FLOAT,h):(f=new Uint8Array(h.buffer),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0]/p,a[1],0,r.RGBA,r.UNSIGNED_BYTE,f)),this.hardcodeConstants||(this.setUniform3iv("user_"+n+"Dim",o),this.setUniform2iv("user_"+n+"Size",a)),this.setUniform1i("user_"+n+"BitRatio",p),this.setUniform1i("user_"+n,this.argumentsLength);break;case"Integer":case"Float":case"Number":this.setUniform1f("user_"+n,e);break;case"Input":var d=e,m=d.size,g=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},m);r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var v=g[0]*g[1],y=this._formatArrayTransfer(e.value,v),b=y.valuesFlat,_=y.bitRatio;if(this.floatTextures)r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,g[0],g[1],0,r.RGBA,r.FLOAT,inputArray);else{var x=new Uint8Array(b.buffer);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0]/_,g[1],0,r.RGBA,r.UNSIGNED_BYTE,x)}this.hardcodeConstants||(this.setUniform3iv("user_"+n+"Dim",m),this.setUniform2iv("user_"+n+"Size",g)),this.setUniform1i("user_"+n+"BitRatio",_),this.setUniform1i("user_"+n,this.argumentsLength);break;case"HTMLImage":var w=e,T=[w.width,w.height,1],E=[w.width,w.height];r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var S=r.RGBA,k=r.RGBA,C=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,S,k,C,w),this.setUniform3iv("user_"+n+"Dim",T),this.setUniform2iv("user_"+n+"Size",E),this.setUniform1i("user_"+n,this.argumentsLength);break;case"HTMLImageArray":var M=e,A=[M[0].width,M[0].height,M.length],O=[M[0].width,M[0].height];r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D_ARRAY,i),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MIN_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var D=r.RGBA,I=M[0].width,R=M[0].height,P=M.length,L=r.RGBA,N=r.UNSIGNED_BYTE;r.texImage3D(r.TEXTURE_2D_ARRAY,0,D,I,R,P,0,L,N,null);for(var U=0;U<M.length;U++){r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,U,M[U].width,M[U].height,1,L,N,M[U])}this.setUniform3iv("user_"+n+"Dim",A),this.setUniform2iv("user_"+n+"Size",O),this.setUniform1i("user_"+n,this.argumentsLength);break;case"ArrayTexture(4)":case"NumberTexture":var F=e,B=F.dimensions,j=F.size;r.activeTexture(r.TEXTURE0+this.constantsLength+this.argumentsLength),r.bindTexture(r.TEXTURE_2D,F.texture),this.setUniform3iv("user_"+n+"Dim",B),this.setUniform2iv("user_"+n+"Size",j),this.setUniform1i("user_"+n+"BitRatio",1),this.setUniform1i("user_"+n,this.argumentsLength);break;default:throw new Error("Input type not supported (WebGL): "+e)}this.argumentsLength++}},{key:"_getMainConstantsString",value:function(){var e=[];if(this.constants)for(var t in this.constants)if(this.constants.hasOwnProperty(t)){var n=this.constants[t],r=u.getArgumentType(n);switch(r){case"Integer":e.push("const float constants_"+t+" = "+parseInt(n)+".0");break;case"Float":e.push("const float constants_"+t+" = "+parseFloat(n));break;case"Array":case"Input":case"HTMLImage":case"ArrayTexture(4)":case"NumberTexture":e.push("uniform highp sampler2D constants_"+t,"uniform highp ivec2 constants_"+t+"Size","uniform highp ivec3 constants_"+t+"Dim","uniform highp int constants_"+t+"BitRatio");break;case"HTMLImageArray":e.push("uniform highp sampler2DArray constants_"+t,"uniform highp ivec2 constants_"+t+"Size","uniform highp ivec3 constants_"+t+"Dim","uniform highp int constants_"+t+"BitRatio");break;default:throw new Error("Unsupported constant "+t+" type "+r)}}return this._linesToString(e)}},{key:"_addConstant",value:function(e,t,n){var r=this._webGl,i=this.getArgumentTexture(n);switch(e instanceof c&&(t=e.type),t){case"Array":var o=u.getDimensions(e,!0),a=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},o);r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var s=a[0]*a[1],l=this._formatArrayTransfer(e,s),h=l.valuesFlat,p=l.bitRatio,f=void 0;this.floatTextures?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0],a[1],0,r.RGBA,r.FLOAT,h):(f=new Uint8Array(h.buffer),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a[0]/p,a[1],0,r.RGBA,r.UNSIGNED_BYTE,f)),this.hardcodeConstants||(this.setUniform3iv("constants_"+n+"Dim",o),this.setUniform2iv("constants_"+n+"Size",a)),this.setUniform1i("constants_"+n+"BitRatio",p),this.setUniform1i("constants_"+n,this.constantsLength);break;case"Input":var d=e,m=d.size,g=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},m);r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var v=g[0]*g[1],y=this._formatArrayTransfer(e.value,v),b=y.valuesFlat,_=y.bitRatio;if(this.floatTextures)r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,g[0],g[1],0,r.RGBA,r.FLOAT,inputArray);else{var x=new Uint8Array(b.buffer);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,g[0]/_,g[1],0,r.RGBA,r.UNSIGNED_BYTE,x)}this.hardcodeConstants||(this.setUniform3iv("constants_"+n+"Dim",m),this.setUniform2iv("constants_"+n+"Size",g)),this.setUniform1i("constants_"+n+"BitRatio",_),this.setUniform1i("constants_"+n,this.constantsLength);break;case"HTMLImage":var w=e,T=[w.width,w.height,1],E=[w.width,w.height];r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var S=r.RGBA,k=r.RGBA,C=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,S,k,C,w),this.setUniform3iv("constants_"+n+"Dim",T),this.setUniform2iv("constants_"+n+"Size",E),this.setUniform1i("constants_"+n,this.constantsLength);break;case"HTMLImageArray":var M=e,A=[M[0].width,M[0].height,M.length],O=[M[0].width,M[0].height];r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D_ARRAY,i),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MIN_FILTER,r.NEAREST),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var D=r.RGBA,I=M[0].width,R=M[0].height,P=M.length,L=r.RGBA,N=r.UNSIGNED_BYTE;r.texImage3D(r.TEXTURE_2D_ARRAY,0,D,I,R,P,0,L,N,null);for(var U=0;U<M.length;U++){r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,U,M[U].width,M[U].height,1,L,N,M[U])}this.setUniform3iv("constants_"+n+"Dim",A),this.setUniform2iv("constants_"+n+"Size",O),this.setUniform1i("constants_"+n,this.constantsLength);break;case"ArrayTexture(4)":case"NumberTexture":var F=e,B=F.dimensions,j=F.size;r.activeTexture(r.TEXTURE0+this.constantsLength),r.bindTexture(r.TEXTURE_2D,F.texture),this.setUniform3iv("constants_"+n+"Dim",B),this.setUniform2iv("constants_"+n+"Size",j),this.setUniform1i("constants_"+n+"BitRatio",1),this.setUniform1i("constants_"+n,this.constantsLength);break;case"Integer":case"Float":default:throw new Error("Input type not supported (WebGL): "+e)}}},{key:"_getGetResultString",value:function(){return this.floatTextures?"  return texel[channel];":"  return decode(texel, x, bitRatio);"}},{key:"_getHeaderString",value:function(){return""}},{key:"_getTextureCoordinate",value:function(){var e=this.subKernelOutputVariableNames;return null===e||e.length<1?"in highp vec2 vTexCoord;\n":"out highp vec2 vTexCoord;\n"}},{key:"_getMainParamsString",value:function(e){for(var t=[],n=this.paramTypes,r=this.paramNames,i=0;i<r.length;i++){var o=e[i],a=r[i],s=n[i];if(this.hardcodeConstants)if("Array"===s||"NumberTexture"===s||"ArrayTexture(4)"===s){var c=u.getDimensions(o,!0),l=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},c);t.push("uniform highp sampler2D user_"+a,"highp ivec2 user_"+a+"Size = ivec2("+l[0]+", "+l[1]+")","highp ivec3 user_"+a+"Dim = ivec3("+c[0]+", "+c[1]+", "+c[2]+")","uniform highp int user_"+a+"BitRatio")}else"Integer"===s?t.push("highp float user_"+a+" = "+o+".0"):"Float"===s&&t.push("highp float user_"+a+" = "+o);else"Array"===s||"NumberTexture"===s||"ArrayTexture(4)"===s||"Input"===s||"HTMLImage"===s?(t.push("uniform highp sampler2D user_"+a,"uniform highp ivec2 user_"+a+"Size","uniform highp ivec3 user_"+a+"Dim"),"HTMLImage"!==s&&t.push("uniform highp int user_"+a+"BitRatio")):"HTMLImageArray"===s?t.push("uniform highp sampler2DArray user_"+a,"uniform highp ivec2 user_"+a+"Size","uniform highp ivec3 user_"+a+"Dim"):"Integer"!==s&&"Float"!==s||t.push("uniform float user_"+a)}return this._linesToString(t)}},{key:"_getKernelString",value:function(){var e=[],t=this.subKernelOutputVariableNames;if(null!==t){e.push("float kernelResult = 0.0"),e.push("layout(location = 0) out vec4 data0");for(var n=0;n<t.length;n++)e.push("float "+t[n]+" = 0.0","layout(location = "+(n+1)+") out vec4 data"+(n+1))}else e.push("out vec4 data0"),e.push("float kernelResult = 0.0");return this._linesToString(e)+this.functionBuilder.getPrototypeString("kernel")}},{key:"_getMainResultString",value:function(){var e=this.subKernelOutputVariableNames,t=[];if(this.floatOutput&&t.push("  index *= 4"),this.graphical)t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor");else if(this.floatOutput)for(var n=["r","g","b","a"],r=0;r<n.length;++r){if(t.push("  threadId = indexTo3D(index, uOutputDim)"),t.push("  kernel()"),e){t.push("  data0."+n[r]+" = kernelResult");for(var i=0;i<e.length;++i)t.push("  data"+(i+1)+"."+n[r]+" = "+e[i])}else t.push("  data0."+n[r]+" = kernelResult");r<n.length-1&&t.push("  index += 1")}else if(null!==e){t.push("  threadId = indexTo3D(index, uOutputDim)"),t.push("  kernel()"),t.push("  data0 = encode32(kernelResult)");for(var o=0;o<e.length;o++)t.push("  data"+(o+1)+" = encode32("+e[o]+")")}else t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = encode32(kernelResult)");return this._linesToString(t)}},{key:"_addKernels",value:function(){var e=this,t=this.functionBuilder;this._webGl;t.addFunctions(this.functions,{constants:this.constants,output:this.output}),t.addNativeFunctions(this.nativeFunctions),t.addKernel(this.fnString,{prototypeOnly:!1,constants:this.constants,output:this.output,debug:this.debug,loopMaxIterations:this.loopMaxIterations,paramNames:this.paramNames,paramTypes:this.paramTypes,constantTypes:this.constantTypes,fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy}),null!==this.subKernels?(this.subKernelOutputTextures=[],this.subKernelOutputVariableNames=[],this.subKernels.forEach(function(t){return e._addSubKernel(t)})):null!==this.subKernelProperties&&(this.subKernelOutputTextures=[],this.subKernelOutputVariableNames=[],Object.keys(this.subKernelProperties).forEach(function(t){return e._addSubKernel(e.subKernelProperties[t])}))}},{key:"_getFragShaderString",value:function(e){return null!==this.compiledFragShaderString?this.compiledFragShaderString:this.compiledFragShaderString=this._replaceArtifacts(this.constructor.fragShaderString,this._getFragShaderArtifactMap(e))}},{key:"_getVertShaderString",value:function(e){return null!==this.compiledVertShaderString?this.compiledVertShaderString:this.compiledVertShaderString=this.constructor.vertShaderString}}],[{key:"fragShaderString",get:function(){return l}},{key:"vertShaderString",get:function(){return h}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e).getTime(),r=Object(i.a)(t);return new Date(n+r)}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(o.a)(e,t),r=n.getUTCFullYear(),s=t||{},u=s.locale,c=u&&u.options&&u.options.firstWeekContainsDate,l=null==c?1:Object(i.a)(c),h=null==s.firstWeekContainsDate?l:Object(i.a)(s.firstWeekContainsDate);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(r+1,0,h),p.setUTCHours(0,0,0,0);var f=Object(a.a)(p,t),d=new Date(0);d.setUTCFullYear(r,0,h),d.setUTCHours(0,0,0,0);var m=Object(a.a)(d,t);return n.getTime()>=f.getTime()?r+1:n.getTime()>=m.getTime()?r:r-1}t.a=r;var i=n(1),o=n(0),a=n(19)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return n.setDate(n.getDate()+r),n}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t),s=n.getMonth()+r,u=new Date(0);u.setFullYear(n.getFullYear(),s,1),u.setHours(0,0,0,0);var c=Object(a.a)(u);return n.setMonth(s,Math.min(c,n.getDate())),n}t.a=r;var i=n(1),o=n(0),a=n(85)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e);return t.setHours(0,0,0,0),t}t.a=r;var i=n(0)},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}e.exports=n},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m});var r=n(31),i=n.n(r),o=n(32),a=n.n(o),s=n(33),u=n.n(s),c=n(34),l=n.n(c),h=n(5),p=(n.n(h),n(221)),f=n.n(p),d=f()({setReferenceNode:void 0,referenceNode:void 0}),m=function(e){function t(){var t;return t=e.call(this)||this,l()(u()(u()(t)),"setReferenceNode",function(e){e&&t.state.context.referenceNode!==e&&t.setState(function(t){var n=t.context;return{context:i()({},n,{referenceNode:e})}})}),t.state={context:{setReferenceNode:t.setReferenceNode,referenceNode:void 0}},t}return a()(t,e),t.prototype.render=function(){return h.createElement(d.Provider,{value:this.state.context},this.props.children)},t}(h.Component)},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!o.TYPED_ARRAY_SUPPORT&&!(this instanceof o))return new o(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"===typeof t?l(e,t,n):f(e,t)}function s(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"===typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function f(e,t){if(o.isBuffer(t)){var n=0|d(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||K(t.length)?i(e,0):h(e,t);if("Buffer"===t.type&&Z(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"===typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var h=!0,p=0;p<u;p++)if(o(e,c+p)!==o(t,p)){h=!1;break}if(h)return c}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function w(e,t,n,r){return X(H(t,e.length-n),e,n,r)}function T(e,t,n,r){return X(W(t),e,n,r)}function E(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return X(Y(t),e,n,r)}function k(e,t,n,r){return X(q(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(h=(15&o)<<12|(63&u)<<6|63&c)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(h=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return A(r)}function A(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function G(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return Q.toByteArray(G(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e){return e!==e}var Q=n(303),J=n(304),Z=n(305);t.Buffer=o,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:H(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(7))},function(e,t,n){"use strict";var r=n(311);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,o=function(e){try{var t=r.call(e);return i.test(t)}catch(e){return!1}},a=function(e){try{return!o(e)&&(r.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,u="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(u)return a(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return v=e,y}}function o(e,t){try{return e(t)}catch(e){return v=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return v=e,y}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),c(e,new d(t,n,a))})}function c(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);l(e,t)}function l(e,t){g(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):p(t.promise,e._18));var r=o(n,e._18);r===y?p(t.promise,v):h(t.promise,r)})}function h(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===y)return p(e,v);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,f(e)}function p(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(c(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)c(e,e._38[t]);e._38=null}}function d(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==y||(n=!0,p(t,v))}var g=n(99),v=null,y={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return c(this,new d(e,t,n)),n}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(106)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?d=f.concat(d):g=-1,d.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=d.length;t;){for(f=d,d=[];++g<t;)f&&f[g].run();g=-1,t=d.length}f=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,h,p=e.exports={};!function(){try{l="function"===typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var f,d=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){function r(e){return i(void 0,e)}function i(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(e[r],t[r]));return e}function o(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function a(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())}function s(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function u(){return"object"===typeof self&&self.self===self}function c(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function l(){return!0===A.NODE_CLIENT||!0===A.NODE_ADMIN}function h(e,t){return e.replace(G,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}function p(e){return JSON.parse(e)}function f(e){return JSON.stringify(e)}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function g(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function v(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function y(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],a=i[1];!function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}(o,a)}return t.length?"&"+t.join("&"):""}function b(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t}function _(e,t){var n=new X(e,t);return n.subscribe.bind(n)}function x(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function w(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function T(){}function E(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function S(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(E(e,t,r)+"must be a valid firebase namespace.")}function k(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(E(e,t,r)+"must be a valid function.")}function C(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(E(e,t,r)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0});var M=n(14),A={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},O=function(e,t){if(!e)throw D(t)},D=function(e){return new Error("Firebase Database ("+A.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},I=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},R=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,p=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(p=64)),r.push(n[l],n[h],n[p],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(I(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):R(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var p=o<<2|s>>4;if(r.push(p),64!==c){var f=s<<4&240|c>>2;if(r.push(f),64!==h){var d=c<<6&192|h;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},L=function(e){var t=I(e);return P.encodeByteArray(t,!0)},N=function(e){try{return P.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},U=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),F="FirebaseError",B=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=F,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,j.prototype.create),i}return M.__extends(t,e),t}(Error),j=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?h(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new B(i,s),c=0,l=Object.keys(r);c<l.length;c++){var p=l[c];"_"!==p.slice(-1)&&(p in u&&console.warn('Overwriting FirebaseError base field "'+p+'" can cause unexpected behavior.'),u[p]=r[p])}return u},e}(),G=/\{\$([^}]+)}/g,V=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=p(N(o[0])||""),n=p(N(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},z=function(e){var t=V(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},H=function(e){var t=V(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},W=function(e){var t=V(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},q=function(e){var t=V(e).claims;return"object"===typeof t&&!0===t.admin},Y=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),X=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=w(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),K=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},Q=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,O(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},J=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};t.CONSTANTS=A,t.Deferred=U,t.ErrorFactory=j,t.FirebaseError=B,t.Sha1=Y,t.assert=O,t.assertionError=D,t.async=x,t.base64=P,t.base64Decode=N,t.base64Encode=L,t.contains=d,t.createSubscribe=_,t.decode=V,t.deepCopy=r,t.deepExtend=i,t.errorPrefix=E,t.getUA=o,t.isAdmin=q,t.isBrowser=u,t.isEmpty=g,t.isMobileCordova=a,t.isNode=s,t.isNodeSdk=l,t.isReactNative=c,t.isValidFormat=W,t.isValidTimestamp=z,t.issuedAtTime=H,t.jsonEval=p,t.map=v,t.querystring=y,t.querystringDecode=b,t.safeGet=m,t.stringLength=J,t.stringToByteArray=Q,t.stringify=f,t.validateArgCount=K,t.validateCallback=k,t.validateContextObject=C,t.validateNamespace=S}).call(t,n(7))},function(e,t,n){"use strict";function r(e){o.forEach(function(t){t.logLevel=e})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LogLevel",function(){return i}),n.d(t,"Logger",function(){return u}),n.d(t,"setLogLevel",function(){return r});var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.ERROR].concat(e))},e}()},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";function t(){return Dr.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e){return void 0===e}function a(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,r){return St(e,t,n,r,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=p()),e._pf}function d(e){if(null==e._isValid){var t=f(e),n=Ir.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=h(NaN);return null!=e?l(f(t),e):f(t).userInvalidated=!0,t}function g(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),Rr.length>0)for(n=0;n<Rr.length;n++)r=Rr[n],i=t[r],o(i)||(e[r]=i);return e}function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Pr&&(Pr=!0,t.updateOffset(this),Pr=!1)}function y(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=b(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&_(e[r])!==_(t[r]))&&a++;return a+o}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,n){var r=!0;return l(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"===typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function E(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Lr[e]||(w(n),Lr[e]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function C(e,t){var n,i=l({},e);for(n in t)c(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},l(i[n],e[n]),l(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)c(e,n)&&!c(t,n)&&r(e[n])&&(i[n]=l({},i[n]));return i}function M(e){null!=e&&this.set(e)}function A(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return S(r)?r.call(t,n):r}function O(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function D(){return this._invalidDate}function I(e){return this._ordinal.replace("%d",e)}function R(e,t,n,r){var i=this._relativeTime[n];return S(i)?i(e,t,n,r):i.replace(/%d/i,e)}function P(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function L(e,t){var n=e.toLowerCase();Gr[n]=Gr[n+"s"]=Gr[t]=e}function N(e){return"string"===typeof e?Gr[e]||Gr[e.toLowerCase()]:void 0}function U(e){var t,n,r={};for(n in e)c(e,n)&&(t=N(n))&&(r[t]=e[n]);return r}function F(e,t){Vr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Vr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function G(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(qr[e]=i),t&&(qr[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(qr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,r=e.match(zr);for(t=0,n=r.length;t<n;t++)qr[r[t]]?r[t]=qr[r[t]]:r[t]=V(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=S(r[i])?r[i].call(t,e):r[i];return o}}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),Wr[t]=Wr[t]||z(t),Wr[t](e)):e.localeData().invalidDate()}function W(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Hr.lastIndex=0;r>=0&&Hr.test(e);)e=e.replace(Hr,n),Hr.lastIndex=0,r-=1;return e}function q(e,t,n){li[e]=S(t)?t:function(e,r){return e&&n?n:t}}function Y(e,t){return c(li,e)?li[e](t._strict,t._locale):new RegExp(X(e))}function X(e){return K(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e,t){var n,r=t;for("string"===typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)hi[e[n]]=r}function J(e,t){Q(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function Z(e,t,n){null!=t&&c(hi,e)&&hi[e](t,n._a,n,e)}function $(e){return ee(e)?366:365}function ee(e){return e%4===0&&e%100!==0||e%400===0}function te(){return ee(this.year())}function ne(e,n){return function(r){return null!=r?(ie(this,e,r),t.updateOffset(this,n),this):re(this,e)}}function re(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ee(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ue(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function oe(e){return e=N(e),S(this[e])?this[e]():this}function ae(e,t){if("object"===typeof e){e=U(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=N(e),S(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function ue(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=se(t,12);return e+=(t-n)/12,1===n?ee(e)?29:28:31-n%7%2}function ce(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ti).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function le(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ti.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function he(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=xi.call(this._shortMonthsParse,a),-1!==i?i:null):(i=xi.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===t?-1!==(i=xi.call(this._shortMonthsParse,a))?i:(i=xi.call(this._longMonthsParse,a),-1!==i?i:null):-1!==(i=xi.call(this._longMonthsParse,a))?i:(i=xi.call(this._shortMonthsParse,a),-1!==i?i:null)}function pe(e,t,n){var r,i,o;if(this._monthsParseExact)return he.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fe(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=_(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ue(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function de(e){return null!=e?(fe(this,e),t.updateOffset(this,!0),this):re(this,"Month")}function me(){return ue(this.year(),this.month())}function ge(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ye.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=ki),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ve(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ye.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ci),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ye(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=h([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=K(r[t]),i[t]=K(i[t]);for(t=0;t<24;t++)o[t]=K(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function be(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function _e(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function xe(e,t,n){var r=7+t-n;return-(7+_e(e,0,r).getUTCDay()-t)%7+r-1}function we(e,t,n,r,i){var o,a,s=(7+n-r)%7,u=xe(e,r,i),c=1+7*(t-1)+s+u;return c<=0?(o=e-1,a=$(o)+c):c>$(e)?(o=e+1,a=c-$(e)):(o=e,a=c),{year:o,dayOfYear:a}}function Te(e,t,n){var r,i,o=xe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+Ee(i,t,n)):a>Ee(e.year(),t,n)?(r=a-Ee(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ee(e,t,n){var r=xe(e,t,n),i=xe(e+1,t,n);return($(e)-r+i)/7}function Se(e){return Te(e,this._week.dow,this._week.doy).week}function ke(){return this._week.dow}function Ce(){return this._week.doy}function Me(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ae(e){var t=Te(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Oe(e,t){return"string"!==typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"===typeof e?e:null):parseInt(e,10)}function De(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ie(e,t){return e.slice(t,7).concat(e.slice(0,t))}function Re(e,t){var r=n(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ie(r,this._week.dow):e?r[e.day()]:r}function Pe(e){return!0===e?Ie(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Le(e){return!0===e?Ie(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=xi.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===t?(i=xi.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=xi.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===t?-1!==(i=xi.call(this._weekdaysParse,a))?i:-1!==(i=xi.call(this._shortWeekdaysParse,a))?i:(i=xi.call(this._minWeekdaysParse,a),-1!==i?i:null):"ddd"===t?-1!==(i=xi.call(this._shortWeekdaysParse,a))?i:-1!==(i=xi.call(this._weekdaysParse,a))?i:(i=xi.call(this._minWeekdaysParse,a),-1!==i?i:null):-1!==(i=xi.call(this._minWeekdaysParse,a))?i:-1!==(i=xi.call(this._weekdaysParse,a))?i:(i=xi.call(this._shortWeekdaysParse,a),-1!==i?i:null)}function Ue(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Oe(e,this.localeData()),this.add(e-t,"d")):t}function Be(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function je(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=De(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ge(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Ii),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ve(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ri),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ze(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function He(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(e),s.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)s[t]=K(s[t]),u[t]=K(u[t]),c[t]=K(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function We(){return this.hours()%12||12}function qe(){return this.hours()||24}function Ye(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Xe(e,t){return t._meridiemParse}function Ke(e){return"p"===(e+"").toLowerCase().charAt(0)}function Qe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Ze(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Je(e[o]).split("-"),t=i.length,n=Je(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=$e(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return Li}function $e(t){var n=null;if(!Bi[t]&&"undefined"!==typeof e&&e&&e.exports)try{n=Li._abbr;!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),et(n)}catch(e){}return Bi[t]}function et(e,t){var n;return e&&(n=o(t)?rt(e):tt(e,t),n?Li=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Li._abbr}function tt(e,t){if(null!==t){var n,r=Fi;if(t.abbr=e,null!=Bi[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Bi[e]._config;else if(null!=t.parentLocale)if(null!=Bi[t.parentLocale])r=Bi[t.parentLocale]._config;else{if(null==(n=$e(t.parentLocale)))return ji[t.parentLocale]||(ji[t.parentLocale]=[]),ji[t.parentLocale].push({name:e,config:t}),null;r=n._config}return Bi[e]=new M(C(r,t)),ji[e]&&ji[e].forEach(function(e){tt(e.name,e.config)}),et(e),Bi[e]}return delete Bi[e],null}function nt(e,t){if(null!=t){var n,r,i=Fi;r=$e(e),null!=r&&(i=r._config),t=C(i,t),n=new M(t),n.parentLocale=Bi[e],Bi[e]=n,et(e)}else null!=Bi[e]&&(null!=Bi[e].parentLocale?Bi[e]=Bi[e].parentLocale:null!=Bi[e]&&delete Bi[e]);return Bi[e]}function rt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Li;if(!n(e)){if(t=$e(e))return t;e=[e]}return Ze(e)}function it(){return Nr(Bi)}function ot(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[fi]<0||n[fi]>11?fi:n[di]<1||n[di]>ue(n[pi],n[fi])?di:n[mi]<0||n[mi]>24||24===n[mi]&&(0!==n[gi]||0!==n[vi]||0!==n[yi])?mi:n[gi]<0||n[gi]>59?gi:n[vi]<0||n[vi]>59?vi:n[yi]<0||n[yi]>999?yi:-1,f(e)._overflowDayOfYear&&(t<pi||t>di)&&(t=di),f(e)._overflowWeeks&&-1===t&&(t=bi),f(e)._overflowWeekday&&-1===t&&(t=_i),f(e).overflow=t),e}function at(e,t,n){return null!=e?e:null!=t?t:n}function st(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ut(e){var t,n,r,i,o,a=[];if(!e._d){for(r=st(e),e._w&&null==e._a[di]&&null==e._a[fi]&&ct(e),null!=e._dayOfYear&&(o=at(e._a[pi],r[pi]),(e._dayOfYear>$(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=_e(o,0,e._dayOfYear),e._a[fi]=n.getUTCMonth(),e._a[di]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[mi]&&0===e._a[gi]&&0===e._a[vi]&&0===e._a[yi]&&(e._nextDay=!0,e._a[mi]=0),e._d=(e._useUTC?_e:be).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[mi]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(f(e).weekdayMismatch=!0)}}function ct(e){var t,n,r,i,o,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=at(t.GG,e._a[pi],Te(kt(),1,4).year),r=at(t.W,1),((i=at(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=Te(kt(),o,a);n=at(t.gg,e._a[pi],c.year),r=at(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>Ee(n,o,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(s=we(n,r,i,o,a),e._a[pi]=s.year,e._dayOfYear=s.dayOfYear)}function lt(e){var t,n,r,i,o,a,s=e._i,u=Gi.exec(s)||Vi.exec(s);if(u){for(f(e).iso=!0,t=0,n=Hi.length;t<n;t++)if(Hi[t][1].exec(u[1])){i=Hi[t][0],r=!1!==Hi[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Wi.length;t<n;t++)if(Wi[t][1].exec(u[3])){o=(u[2]||" ")+Wi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!zi.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),yt(e)}else e._isValid=!1}function ht(e,t,n,r,i,o){var a=[pt(e),Si.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function pt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function ft(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function dt(e,t,n){if(e){if(Oi.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return f(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function mt(e,t,n){if(e)return Xi[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function gt(e){var t=Yi.exec(ft(e._i));if(t){var n=ht(t[4],t[3],t[2],t[5],t[6],t[7]);if(!dt(t[1],n,e))return;e._a=n,e._tzm=mt(t[8],t[9],t[10]),e._d=_e.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function vt(e){var n=qi.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));lt(e),!1===e._isValid&&(delete e._isValid,gt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function yt(e){if(e._f===t.ISO_8601)return void lt(e);if(e._f===t.RFC_2822)return void gt(e);e._a=[],f(e).empty=!0;var n,r,i,o,a,s=""+e._i,u=s.length,c=0;for(i=W(e._f,e._locale).match(zr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(Y(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),qr[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),Z(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-c,s.length>0&&f(e).unusedInput.push(s),e._a[mi]<=12&&!0===f(e).bigHour&&e._a[mi]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[mi]=bt(e._locale,e._a[mi],e._meridiem),ut(e),ot(e)}function bt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function _t(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],yt(t),d(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));l(e,n||t)}function xt(e){if(!e._d){var t=U(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ut(e)}}function wt(e){var t=new v(ot(Tt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Tt(e){var t=e._i,r=e._f;return e._locale=e._locale||rt(e._l),null===t||void 0===r&&""===t?m({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new v(ot(t)):(s(t)?e._d=t:n(r)?_t(e):r?yt(e):Et(e),d(e)||(e._d=null),e))}function Et(e){var i=e._i;o(i)?e._d=new Date(t.now()):s(i)?e._d=new Date(i.valueOf()):"string"===typeof i?vt(e):n(i)?(e._a=u(i.slice(0),function(e){return parseInt(e,10)}),ut(e)):r(i)?xt(e):a(i)?e._d=new Date(i):t.createFromInputFallback(e)}function St(e,t,o,a,s){var u={};return!0!==o&&!1!==o||(a=o,o=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=o,u._i=e,u._f=t,u._strict=a,wt(u)}function kt(e,t,n,r){return St(e,t,n,r,!1)}function Ct(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return kt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function Mt(){return Ct("isBefore",[].slice.call(arguments,0))}function At(){return Ct("isAfter",[].slice.call(arguments,0))}function Ot(e){for(var t in e)if(-1===xi.call(Zi,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Zi.length;++r)if(e[Zi[r]]){if(n)return!1;parseFloat(e[Zi[r]])!==_(e[Zi[r]])&&(n=!0)}return!0}function Dt(){return this._isValid}function It(){return Jt(NaN)}function Rt(e){var t=U(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=Ot(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=rt(),this._bubble()}function Pt(e){return e instanceof Rt}function Lt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){G(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}function Ut(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match($i)||["-",0,0],o=60*i[1]+_(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Ft(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(y(e)||s(e)?e.valueOf():kt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):kt(e).local()}function Bt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function jt(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=Ut(si,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(i=Bt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?nn(this,Jt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Bt(this)}function Gt(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Vt(e){return this.utcOffset(0,e)}function zt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Bt(this),"m")),this}function Ht(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=Ut(ai,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Wt(e){return!!this.isValid()&&(e=e?kt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function qt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),e=Tt(e),e._a){var t=e._isUTC?h(e._a):kt(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Xt(){return!!this.isValid()&&!this._isUTC}function Kt(){return!!this.isValid()&&this._isUTC}function Qt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Jt(e,t){var n,r,i,o=e,s=null;return Pt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=eo.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:_(s[di])*n,h:_(s[mi])*n,m:_(s[gi])*n,s:_(s[vi])*n,ms:_(Lt(1e3*s[yi]))*n}):(s=to.exec(e))?(n="-"===s[1]?-1:1,o={y:Zt(s[2],n),M:Zt(s[3],n),w:Zt(s[4],n),d:Zt(s[5],n),h:Zt(s[6],n),m:Zt(s[7],n),s:Zt(s[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=en(kt(o.from),kt(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Rt(o),Pt(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function Zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){var n;return e.isValid()&&t.isValid()?(t=Ft(t,e),e.isBefore(t)?n=$t(e,t):(n=$t(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tn(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"===typeof n?+n:n,i=Jt(n,r),nn(this,i,e),this}}function nn(e,n,r,i){var o=n._milliseconds,a=Lt(n._days),s=Lt(n._months);e.isValid()&&(i=null==i||i,s&&fe(e,re(e,"Month")+s*r),a&&ie(e,"Date",re(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&t.updateOffset(e,a||s))}function rn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function on(e,n){var r=e||kt(),i=Ft(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(S(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,kt(r)))}function an(){return new v(this)}function sn(e,t){var n=y(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&(t=N(t)||"millisecond","millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function un(e,t){var n=y(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&(t=N(t)||"millisecond","millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function cn(e,t,n,r){var i=y(e)?e:kt(e),o=y(t)?t:kt(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(r=r||"()",("("===r[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n)))}function ln(e,t){var n,r=y(e)?e:kt(e);return!(!this.isValid()||!r.isValid())&&(t=N(t)||"millisecond","millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function hn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function pn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function fn(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(r=Ft(e,this),!r.isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=N(t)){case"year":o=dn(this,r)/12;break;case"month":o=dn(this,r);break;case"quarter":o=dn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:b(o)}function dn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function mn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gn(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function vn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=H(this,e);return this.localeData().postformat(n)}function bn(e,t){return this.isValid()&&(y(e)&&e.isValid()||kt(e).isValid())?Jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.from(kt(),e)}function xn(e,t){return this.isValid()&&(y(e)&&e.isValid()||kt(e).isValid())?Jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function wn(e){return this.to(kt(),e)}function Tn(e){var t;return void 0===e?this._locale._abbr:(t=rt(e),null!=t&&(this._locale=t),this)}function En(){return this._locale}function Sn(e,t){return(e%t+t)%t}function kn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-uo:new Date(e,t,n).valueOf()}function Cn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-uo:Date.UTC(e,t,n)}function Mn(e){var n;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Cn:kn;switch(e){case"year":n=r(this.year(),0,1);break;case"quarter":n=r(this.year(),this.month()-this.month()%3,1);break;case"month":n=r(this.year(),this.month(),1);break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=r(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=Sn(n+(this._isUTC?0:this.utcOffset()*ao),so);break;case"minute":n=this._d.valueOf(),n-=Sn(n,ao);break;case"second":n=this._d.valueOf(),n-=Sn(n,oo)}return this._d.setTime(n),t.updateOffset(this,!0),this}function An(e){var n;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Cn:kn;switch(e){case"year":n=r(this.year()+1,0,1)-1;break;case"quarter":n=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=r(this.year(),this.month()+1,1)-1;break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=so-Sn(n+(this._isUTC?0:this.utcOffset()*ao),so)-1;break;case"minute":n=this._d.valueOf(),n+=ao-Sn(n,ao)-1;break;case"second":n=this._d.valueOf(),n+=oo-Sn(n,oo)-1}return this._d.setTime(n),t.updateOffset(this,!0),this}function On(){return this._d.valueOf()-6e4*(this._offset||0)}function Dn(){return Math.floor(this.valueOf()/1e3)}function In(){return new Date(this.valueOf())}function Rn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Pn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ln(){return this.isValid()?this.toISOString():null}function Nn(){return d(this)}function Un(){return l({},f(this))}function Fn(){return f(this).overflow}function Bn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function jn(e,t){G(0,[e,e.length],0,t)}function Gn(e){return Wn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Vn(e){return Wn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function zn(){return Ee(this.year(),1,4)}function Hn(){var e=this.localeData()._week;return Ee(this.year(),e.dow,e.doy)}function Wn(e,t,n,r,i){var o;return null==e?Te(this,r,i).year:(o=Ee(e,r,i),t>o&&(t=o),qn.call(this,e,t,n,r,i))}function qn(e,t,n,r,i){var o=we(e,t,n,r,i),a=_e(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Yn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Xn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Kn(e,t){t[yi]=_(1e3*("0."+e))}function Qn(){return this._isUTC?"UTC":""}function Jn(){return this._isUTC?"Coordinated Universal Time":""}function Zn(e){return kt(1e3*e)}function $n(){return kt.apply(null,arguments).parseZone()}function er(e){return e}function tr(e,t,n,r){var i=rt(),o=h().set(r,t);return i[n](o,e)}function nr(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return tr(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=tr(e,r,n,"month");return i}function rr(e,t,n,r){"boolean"===typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=rt(),o=e?i._week.dow:0;if(null!=n)return tr(t,(n+o)%7,r,"day");var s,u=[];for(s=0;s<7;s++)u[s]=tr(t,(s+o)%7,r,"day");return u}function ir(e,t){return nr(e,t,"months")}function or(e,t){return nr(e,t,"monthsShort")}function ar(e,t,n){return rr(e,t,n,"weekdays")}function sr(e,t,n){return rr(e,t,n,"weekdaysShort")}function ur(e,t,n){return rr(e,t,n,"weekdaysMin")}function cr(){var e=this._data;return this._milliseconds=vo(this._milliseconds),this._days=vo(this._days),this._months=vo(this._months),e.milliseconds=vo(e.milliseconds),e.seconds=vo(e.seconds),e.minutes=vo(e.minutes),e.hours=vo(e.hours),e.months=vo(e.months),e.years=vo(e.years),this}function lr(e,t,n,r){var i=Jt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function hr(e,t){return lr(this,e,t,1)}function pr(e,t){return lr(this,e,t,-1)}function fr(e){return e<0?Math.floor(e):Math.ceil(e)}function dr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*fr(gr(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=b(o/1e3),u.seconds=e%60,t=b(e/60),u.minutes=t%60,n=b(t/60),u.hours=n%24,a+=b(n/24),i=b(mr(a)),s+=i,a-=fr(gr(i)),r=b(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function mr(e){return 4800*e/146097}function gr(e){return 146097*e/4800}function vr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=N(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+mr(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(gr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function yr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN}function br(e){return function(){return this.as(e)}}function _r(){return Jt(this)}function xr(e){return e=N(e),this.isValid()?this[e+"s"]():NaN}function wr(e){return function(){return this.isValid()?this._data[e]:NaN}}function Tr(){return b(this.days()/7)}function Er(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Sr(e,t,n){var r=Jt(e).abs(),i=Po(r.as("s")),o=Po(r.as("m")),a=Po(r.as("h")),s=Po(r.as("d")),u=Po(r.as("M")),c=Po(r.as("y")),l=i<=Lo.ss&&["s",i]||i<Lo.s&&["ss",i]||o<=1&&["m"]||o<Lo.m&&["mm",o]||a<=1&&["h"]||a<Lo.h&&["hh",a]||s<=1&&["d"]||s<Lo.d&&["dd",s]||u<=1&&["M"]||u<Lo.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,Er.apply(null,l)}function kr(e){return void 0===e?Po:"function"===typeof e&&(Po=e,!0)}function Cr(e,t){return void 0!==Lo[e]&&(void 0===t?Lo[e]:(Lo[e]=t,"s"===e&&(Lo.ss=t-1),!0))}function Mr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=Sr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Ar(e){return(e>0)-(e<0)||+e}function Or(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=No(this._milliseconds)/1e3,i=No(this._days),o=No(this._months);e=b(r/60),t=b(e/60),r%=60,e%=60,n=b(o/12),o%=12;var a=n,s=o,u=i,c=t,l=e,h=r?r.toFixed(3).replace(/\.?0+$/,""):"",p=this.asSeconds();if(!p)return"P0D";var f=p<0?"-":"",d=Ar(this._months)!==Ar(p)?"-":"",m=Ar(this._days)!==Ar(p)?"-":"",g=Ar(this._milliseconds)!==Ar(p)?"-":"";return f+"P"+(a?d+a+"Y":"")+(s?d+s+"M":"")+(u?m+u+"D":"")+(c||l||h?"T":"")+(c?g+c+"H":"")+(l?g+l+"M":"")+(h?g+h+"S":"")}var Dr,Ir;Ir=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Rr=t.momentProperties=[],Pr=!1,Lr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Nr;Nr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var Ur={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Fr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Br=/\d{1,2}/,jr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gr={},Vr={},zr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Hr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wr={},qr={},Yr=/\d/,Xr=/\d\d/,Kr=/\d{3}/,Qr=/\d{4}/,Jr=/[+-]?\d{6}/,Zr=/\d\d?/,$r=/\d\d\d\d?/,ei=/\d\d\d\d\d\d?/,ti=/\d{1,3}/,ni=/\d{1,4}/,ri=/[+-]?\d{1,6}/,ii=/\d+/,oi=/[+-]?\d+/,ai=/Z|[+-]\d\d:?\d\d/gi,si=/Z|[+-]\d\d(?::?\d\d)?/gi,ui=/[+-]?\d+(\.\d{1,3})?/,ci=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,li={},hi={},pi=0,fi=1,di=2,mi=3,gi=4,vi=5,yi=6,bi=7,_i=8;G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),L("year","y"),F("year",1),q("Y",oi),q("YY",Zr,Xr),q("YYYY",ni,Qr),q("YYYYY",ri,Jr),q("YYYYYY",ri,Jr),Q(["YYYYY","YYYYYY"],pi),Q("YYYY",function(e,n){n[pi]=2===e.length?t.parseTwoDigitYear(e):_(e)}),Q("YY",function(e,n){n[pi]=t.parseTwoDigitYear(e)}),Q("Y",function(e,t){t[pi]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var xi,wi=ne("FullYear",!0);xi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),F("month",8),q("M",Zr),q("MM",Zr,Xr),q("MMM",function(e,t){return t.monthsShortRegex(e)}),q("MMMM",function(e,t){return t.monthsRegex(e)}),Q(["M","MM"],function(e,t){t[fi]=_(e)-1}),Q(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[fi]=i:f(n).invalidMonth=e});var Ti=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ei="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Si="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ki=ci,Ci=ci;G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),F("week",5),F("isoWeek",5),q("w",Zr),q("ww",Zr,Xr),q("W",Zr),q("WW",Zr,Xr),J(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=_(e)});var Mi={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),q("d",Zr),q("e",Zr),q("E",Zr),q("dd",function(e,t){return t.weekdaysMinRegex(e)}),q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),q("dddd",function(e,t){return t.weekdaysRegex(e)}),J(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),J(["d","e","E"],function(e,t,n,r){t[r]=_(e)});var Ai="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Oi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Di="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ii=ci,Ri=ci,Pi=ci;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,We),G("k",["kk",2],0,qe),G("hmm",0,0,function(){return""+We.apply(this)+j(this.minutes(),2)}),G("hmmss",0,0,function(){return""+We.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Ye("a",!0),Ye("A",!1),L("hour","h"),F("hour",13),q("a",Xe),q("A",Xe),q("H",Zr),q("h",Zr),q("k",Zr),q("HH",Zr,Xr),q("hh",Zr,Xr),q("kk",Zr,Xr),q("hmm",$r),q("hmmss",ei),q("Hmm",$r),q("Hmmss",ei),Q(["H","HH"],mi),Q(["k","kk"],function(e,t,n){var r=_(e);t[mi]=24===r?0:r}),Q(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Q(["h","hh"],function(e,t,n){t[mi]=_(e),f(n).bigHour=!0}),Q("hmm",function(e,t,n){var r=e.length-2;t[mi]=_(e.substr(0,r)),t[gi]=_(e.substr(r)),f(n).bigHour=!0}),Q("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[mi]=_(e.substr(0,r)),t[gi]=_(e.substr(r,2)),t[vi]=_(e.substr(i)),f(n).bigHour=!0}),Q("Hmm",function(e,t,n){var r=e.length-2;t[mi]=_(e.substr(0,r)),t[gi]=_(e.substr(r))}),Q("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[mi]=_(e.substr(0,r)),t[gi]=_(e.substr(r,2)),t[vi]=_(e.substr(i))});var Li,Ni=/[ap]\.?m?\.?/i,Ui=ne("Hours",!0),Fi={calendar:Ur,longDateFormat:Fr,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Br,relativeTime:jr,months:Ei,monthsShort:Si,week:Mi,weekdays:Ai,weekdaysMin:Di,weekdaysShort:Oi,meridiemParse:Ni},Bi={},ji={},Gi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zi=/Z|[+-]\d\d(?::?\d\d)?/,Hi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qi=/^\/?Date\((\-?\d+)/i,Yi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Xi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Ki=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Qi=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}),Ji=function(){return Date.now?Date.now():+new Date},Zi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),q("Z",si),q("ZZ",si),Q(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ut(si,e)});var $i=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var eo=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,to=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Jt.fn=Rt.prototype,Jt.invalid=It;var no=tn(1,"add"),ro=tn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var io=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)}),oo=1e3,ao=60*oo,so=60*ao,uo=3506328*so;G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jn("gggg","weekYear"),jn("ggggg","weekYear"),jn("GGGG","isoWeekYear"),jn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),q("G",oi),q("g",oi),q("GG",Zr,Xr),q("gg",Zr,Xr),q("GGGG",ni,Qr),q("gggg",ni,Qr),q("GGGGG",ri,Jr),q("ggggg",ri,Jr),J(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=_(e)}),J(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),L("quarter","Q"),F("quarter",7),q("Q",Yr),Q("Q",function(e,t){t[fi]=3*(_(e)-1)}),G("D",["DD",2],"Do","date"),L("date","D"),F("date",9),q("D",Zr),q("DD",Zr,Xr),q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Q(["D","DD"],di),Q("Do",function(e,t){t[di]=_(e.match(Zr)[0])});var co=ne("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),F("dayOfYear",4),q("DDD",ti),q("DDDD",Kr),Q(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),G("m",["mm",2],0,"minute"),L("minute","m"),F("minute",14),q("m",Zr),q("mm",Zr,Xr),Q(["m","mm"],gi);var lo=ne("Minutes",!1);G("s",["ss",2],0,"second"),L("second","s"),F("second",15),q("s",Zr),q("ss",Zr,Xr),Q(["s","ss"],vi);var ho=ne("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),F("millisecond",16),q("S",ti,Yr),q("SS",ti,Xr),q("SSS",ti,Kr);var po;for(po="SSSS";po.length<=9;po+="S")q(po,ii);for(po="S";po.length<=9;po+="S")Q(po,Kn);var fo=ne("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var mo=v.prototype;mo.add=no,mo.calendar=on,mo.clone=an,mo.diff=fn,mo.endOf=An,mo.format=yn,mo.from=bn,mo.fromNow=_n,mo.to=xn,mo.toNow=wn,mo.get=oe,mo.invalidAt=Fn,mo.isAfter=sn,mo.isBefore=un,mo.isBetween=cn,mo.isSame=ln,mo.isSameOrAfter=hn,mo.isSameOrBefore=pn,mo.isValid=Nn,mo.lang=io,mo.locale=Tn,mo.localeData=En,mo.max=Qi,mo.min=Ki,mo.parsingFlags=Un,mo.set=ae,mo.startOf=Mn,mo.subtract=ro,mo.toArray=Rn,mo.toObject=Pn,mo.toDate=In,mo.toISOString=gn,mo.inspect=vn,mo.toJSON=Ln,mo.toString=mn,mo.unix=Dn,mo.valueOf=On,mo.creationData=Bn,mo.year=wi,mo.isLeapYear=te,mo.weekYear=Gn,mo.isoWeekYear=Vn,mo.quarter=mo.quarters=Yn,mo.month=de,mo.daysInMonth=me,mo.week=mo.weeks=Me,mo.isoWeek=mo.isoWeeks=Ae,mo.weeksInYear=Hn,mo.isoWeeksInYear=zn,mo.date=co,mo.day=mo.days=Fe,mo.weekday=Be,mo.isoWeekday=je,mo.dayOfYear=Xn,mo.hour=mo.hours=Ui,mo.minute=mo.minutes=lo,mo.second=mo.seconds=ho,mo.millisecond=mo.milliseconds=fo,mo.utcOffset=jt,mo.utc=Vt,mo.local=zt,mo.parseZone=Ht,mo.hasAlignedHourOffset=Wt,mo.isDST=qt,mo.isLocal=Xt,mo.isUtcOffset=Kt,mo.isUtc=Qt,mo.isUTC=Qt,mo.zoneAbbr=Qn,mo.zoneName=Jn,mo.dates=T("dates accessor is deprecated. Use date instead.",co),mo.months=T("months accessor is deprecated. Use month instead",de),mo.years=T("years accessor is deprecated. Use year instead",wi),mo.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Gt),mo.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yt);var go=M.prototype;go.calendar=A,go.longDateFormat=O,go.invalidDate=D,go.ordinal=I,go.preparse=er,go.postformat=er,go.relativeTime=R,go.pastFuture=P,go.set=k,go.months=ce,go.monthsShort=le,go.monthsParse=pe,go.monthsRegex=ve,go.monthsShortRegex=ge,go.week=Se,go.firstDayOfYear=Ce,go.firstDayOfWeek=ke,go.weekdays=Re,go.weekdaysMin=Le,go.weekdaysShort=Pe,go.weekdaysParse=Ue,go.weekdaysRegex=Ge,go.weekdaysShortRegex=Ve,go.weekdaysMinRegex=ze,go.isPM=Ke,go.meridiem=Qe,et("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=T("moment.lang is deprecated. Use moment.locale instead.",et),t.langData=T("moment.langData is deprecated. Use moment.localeData instead.",rt);var vo=Math.abs,yo=br("ms"),bo=br("s"),_o=br("m"),xo=br("h"),wo=br("d"),To=br("w"),Eo=br("M"),So=br("Q"),ko=br("y"),Co=wr("milliseconds"),Mo=wr("seconds"),Ao=wr("minutes"),Oo=wr("hours"),Do=wr("days"),Io=wr("months"),Ro=wr("years"),Po=Math.round,Lo={ss:44,s:45,m:45,h:22,d:26,M:11},No=Math.abs,Uo=Rt.prototype;return Uo.isValid=Dt,Uo.abs=cr,Uo.add=hr,Uo.subtract=pr,Uo.as=vr,Uo.asMilliseconds=yo,Uo.asSeconds=bo,Uo.asMinutes=_o,Uo.asHours=xo,Uo.asDays=wo,Uo.asWeeks=To,Uo.asMonths=Eo,Uo.asQuarters=So,Uo.asYears=ko,Uo.valueOf=yr,Uo._bubble=dr,Uo.clone=_r,Uo.get=xr,Uo.milliseconds=Co,Uo.seconds=Mo,Uo.minutes=Ao,Uo.hours=Oo,Uo.days=Do,Uo.weeks=Tr,Uo.months=Io,Uo.years=Ro,Uo.humanize=Mr,Uo.toISOString=Or,Uo.toString=Or,Uo.toJSON=Or,Uo.locale=Tn,Uo.localeData=En,Uo.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Or),Uo.lang=io,G("X",0,0,"unix"),G("x",0,0,"valueOf"),q("x",oi),q("X",ui),Q("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Q("x",function(e,t,n){n._d=new Date(_(e))}),t.version="2.24.0",function(e){Dr=e}(kt),t.fn=mo,t.min=Mt,t.max=At,t.now=Ji,t.utc=h,t.unix=Zn,t.months=ir,t.isDate=s,t.locale=et,t.invalid=m,t.duration=Jt,t.isMoment=y,t.weekdays=ar,t.parseZone=$n,t.localeData=rt,t.isDuration=Pt,t.monthsShort=or,t.weekdaysMin=ur,t.defineLocale=tt,t.updateLocale=nt,t.locales=it,t.weekdaysShort=sr,t.normalizeUnits=N,t.relativeTimeRounding=kr,t.relativeTimeThreshold=Cr,t.calendarFormat=rn,t.prototype=mo,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t})}).call(t,n(125)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"isCanvas",value:function(e){return null!==e&&(e.nodeName&&e.getContext&&"CANVAS"===e.nodeName.toUpperCase()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}},{key:"isCanvasSupported",value:function(){return a}},{key:"initCanvas",value:function(){if(!a)return null;var e="undefined"!==typeof document?document.createElement("canvas"):new OffscreenCanvas(0,0);return e.width=2,e.height=2,e}},{key:"isWebGl",value:function(e){return e&&"function"===typeof e.getExtension}},{key:"isWebGl2",value:function(e){return e&&"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}},{key:"isWebGlSupported",value:function(){return c}},{key:"isWebGl2Supported",value:function(){return l}},{key:"isWebGlDrawBuffersSupported",value:function(){return h}},{key:"initWebGlDefaultOptions",value:function(){return{alpha:!1,depth:!1,antialias:!1}}},{key:"initWebGl",value:function(t){if(("undefined"!==typeof a||null===t)&&!a)return null;if(!e.isCanvas(t))throw new Error("Invalid canvas object - "+t);var n=null,r=e.initWebGlDefaultOptions();try{n=t.getContext("experimental-webgl",r)}catch(e){}return null===n&&(n=t.getContext("webgl2",r)||t.getContext("webgl",r)),n&&(n.OES_texture_float=n.getExtension("OES_texture_float"),n.OES_texture_float_linear=n.getExtension("OES_texture_float_linear"),n.OES_element_index_uint=n.getExtension("OES_element_index_uint")),n}},{key:"initWebGl2",value:function(t){if(("undefined"!==typeof a||null===t)&&!a)return null;if(!e.isCanvas(t))throw new Error("Invalid canvas object - "+t);return t.getContext("webgl2",e.initWebGlDefaultOptions())}},{key:"checkOutput",value:function(e){if(!e||!Array.isArray(e))throw new Error("kernel.output not an array");for(var t=0;t<e.length;t++)if(isNaN(e[t])||e[t]<1)throw new Error("kernel.output["+t+"] incorrectly defined as `"+e[t]+"`, needs to be numeric, and greater than 0")}}]),e}(),a="undefined"!==typeof document?o.isCanvas(document.createElement("canvas")):"undefined"!==typeof OffscreenCanvas,s=o.initWebGl(o.initCanvas()),u=o.initWebGl2(o.initCanvas()),c=o.isWebGl(s),l=o.isWebGl2(u),h=c&&Boolean(s.getExtension("WEBGL_draw_buffers"));c?(o.OES_texture_float=s.OES_texture_float,o.OES_texture_float_linear=s.OES_texture_float_linear,o.OES_element_index_uint=s.OES_element_index_uint):(o.OES_texture_float=!1,o.OES_texture_float_linear=!1,o.OES_element_index_uint=!1),e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(21),u=n(17),c=n(49);e.exports=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new c,e));return n.Kernel=u,n.kernel=null,n}return o(t,e),a(t,[{key:"getMode",value:function(){return"gpu"}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),a=n(16);e.exports=function(){function e(t,n){r(this,e),this.paramNames=o.getParamNamesFromString(t),this.fnString=t,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.wraparound=null,this.hardcodeConstants=null,this.outputToTexture=null,this.outputImmutable=null,this.texSize=null,this._canvas=null,this._webGl=null,this.threadDim=null,this.floatTextures=null,this.floatOutput=null,this.floatOutputForce=null,this.addFunction=null,this.functions=null,this.nativeFunctions=null,this.subKernels=null,this.subKernelProperties=null,this.subKernelNames=null,this.subKernelOutputVariableNames=null,this.functionBuilder=null,this.paramTypes=null,this.paramSizes=null,this.constantTypes=null,this.fixIntegerDivisionAccuracy=null;for(var i in n)n.hasOwnProperty(i)&&this.hasOwnProperty(i)&&(this[i]=n[i]);n.hasOwnProperty("canvas")&&(this._canvas=n.canvas),n.hasOwnProperty("webGl")&&(this._webGl=n.webGl),n.hasOwnProperty("output")&&this.setOutput(n.output),this._canvas||(this._canvas=o.initCanvas())}return i(e,[{key:"build",value:function(){throw new Error('"build" not defined on Base')}},{key:"setupParams",value:function(e){this.paramTypes=[],this.paramSizes=[];for(var t=0;t<e.length;t++){var n=e[t];this.paramTypes.push(o.getArgumentType(n)),this.paramSizes.push(n.constructor===a?n.size:null)}}},{key:"setupConstants",value:function(){if(this.constantTypes={},this.constants)for(var e in this.constants)this.constantTypes[e]=o.getArgumentType(this.constants[e])}},{key:"setFunctions",value:function(e){return this.functions=e,this}},{key:"setOutput",value:function(e){return e.hasOwnProperty("x")?e.hasOwnProperty("y")?e.hasOwnProperty("z")?this.output=[e.x,e.y,e.z]:this.output=[e.x,e.y]:this.output=[e.x]:this.output=e,this}},{key:"setDebug",value:function(e){return this.debug=e,this}},{key:"setGraphical",value:function(e){return this.graphical=e,this}},{key:"setLoopMaxIterations",value:function(e){return this.loopMaxIterations=e,this}},{key:"setFixIntegerDivisionAccuracy",value:function(e){return this.fixIntegerDivisionAccuracy=e,this}},{key:"setConstants",value:function(e){return this.constants=e,this}},{key:"setWraparound",value:function(e){return console.warn("Wraparound mode is not supported and undocumented."),this.wraparound=e,this}},{key:"setHardcodeConstants",value:function(e){return this.hardcodeConstants=e,this}},{key:"setOutputToTexture",value:function(e){return this.outputToTexture=e,this}},{key:"setOutputImmutable",value:function(e){return this.outputImmutable=e,this}},{key:"setFloatTextures",value:function(e){return this.floatTextures=e,this}},{key:"setFloatOutput",value:function(e){return this.floatOutput=e,this}},{key:"setFloatOutputForce",value:function(e){return this.floatOutputForce=e,this}},{key:"setCanvas",value:function(e){return this._canvas=e,this}},{key:"setWebGl",value:function(e){return this._webGl=e,this}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getWebGl",value:function(){return this._webGl}},{key:"validateOptions",value:function(){throw new Error("validateOptions not defined")}},{key:"exec",value:function(){return this.execute.apply(this,arguments)}},{key:"execute",value:function(){var e=this,t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return o.newPromise(function(n,r){try{n(e.run.apply(e,t))}catch(e){r(e)}})}},{key:"addSubKernel",value:function(e){return null===this.subKernels&&(this.subKernels=[],this.subKernelNames=[]),this.subKernels.push(e),this.subKernelNames.push(o.getFunctionNameFromString(e)),this}},{key:"addSubKernelProperty",value:function(e,t){if(null===this.subKernelProperties&&(this.subKernelProperties={},this.subKernelNames=[]),this.subKernelProperties.hasOwnProperty(e))throw new Error("cannot add sub kernel "+e+", already defined");return this.subKernelProperties[e]=t,this.subKernelNames.push(o.getFunctionNameFromString(t)),this}},{key:"addNativeFunction",value:function(e,t){this.functionBuilder.addNativeFunction(e,t)}},{key:"destroy",value:function(){}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return Math.floor(e+.5)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(23),c=n(24);e.exports=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Node=c,e}return o(t,e),s(t,[{key:"polyfillStandardFunctions",value:function(){this.addFunction("round",a)}}],[{key:"round",value:function(e){return a(e)}}]),t}(u)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),utils=__webpack_require__(4),acorn=__webpack_require__(133);module.exports=function(){function BaseFunctionNode(e,t,n){_classCallCheck(this,BaseFunctionNode),this.calledFunctions=[],this.calledFunctionsArguments={},this.builder=null,this.isRootKernel=!1,this.isSubKernel=!1,this.parent=null,this.debug=null,this.prototypeOnly=null,this.constants=null,this.output=null,this.declarations={},this.states=[],this.fixIntegerDivisionAccuracy=null;var r=void 0,i=void 0;if(n&&(n.hasOwnProperty("debug")&&(this.debug=n.debug),n.hasOwnProperty("prototypeOnly")&&(this.prototypeOnly=n.prototypeOnly),n.hasOwnProperty("constants")&&(this.constants=n.constants),n.hasOwnProperty("output")&&(this.output=n.output),n.hasOwnProperty("loopMaxIterations")&&(this.loopMaxIterations=n.loopMaxIterations),n.hasOwnProperty("paramTypes")&&(this.paramTypes=r=n.paramTypes),n.hasOwnProperty("constantTypes")?this.constantTypes=n.constantTypes:this.constantTypes={},n.hasOwnProperty("returnType")&&(i=n.returnType),n.hasOwnProperty("fixIntegerDivisionAccuracy")&&(this.fixIntegerDivisionAccuracy=n.fixIntegerDivisionAccuracy)),!t)throw"jsFunction, parameter is missing";if(this.jsFunctionString=t.toString(),!utils.isFunctionString(this.jsFunctionString))throw console.error("jsFunction, to string conversion check failed: not a function?",this.jsFunctionString),"jsFunction, to string conversion check failed: not a function?";if(utils.isFunction(t)?this.jsFunction=t:this.jsFunction=null,this.functionName=e||t&&t.name||utils.getFunctionNameFromString(this.jsFunctionString),!this.functionName)throw"jsFunction, missing name argument or value";if(this.paramNames=utils.getParamNamesFromString(this.jsFunctionString),r){if(Array.isArray(r)){if(r.length!==this.paramNames.length)throw"Invalid argument type array length, against function length -> ("+r.length+","+this.paramNames.length+")";this.paramTypes=r}else if("object"===("undefined"===typeof r?"undefined":_typeof(r))){var o=Object.keys(r);if(r.hasOwnProperty("returns")&&(this.returnType=r.returns,o.splice(o.indexOf("returns"),1)),o.length>0&&o.length!==this.paramNames.length)throw"Invalid argument type array length, against function length -> ("+o.length+","+this.paramNames.length+")";this.paramTypes=this.paramNames.map(function(e){return r.hasOwnProperty(e)?r[e]:"Number"})}}else this.paramTypes=[];this.returnType||(this.returnType=i||"Number")}return _createClass(BaseFunctionNode,[{key:"isIdentifierConstant",value:function(e){return!!this.constants&&this.constants.hasOwnProperty(e)}},{key:"isInput",value:function(e){return"Input"===this.paramTypes[this.paramNames.indexOf(e)]}},{key:"setBuilder",value:function(e){return this.builder=e,this}},{key:"pushState",value:function(e){this.states.push(e)}},{key:"popState",value:function(e){if(this.state!==e)throw new Error("Cannot popState "+e+" when in "+this.state);this.states.pop()}},{key:"isState",value:function(e){return this.state===e}},{key:"getJsFunction",value:function getJsFunction(){if(this.jsFunction)return this.jsFunction;if(this.jsFunctionString)return this.jsFunction=eval(this.jsFunctionString),this.jsFunction;throw"Missing jsFunction, and jsFunctionString parameter"}},{key:"astMemberExpressionUnroll",value:function(e){if("Identifier"===e.type)return e.name;if("ThisExpression"===e.type)return"this";if("MemberExpression"===e.type&&e.object&&e.property)return e.object.hasOwnProperty("name")&&"_"===e.object.name[0]?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+"."+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty("expressions")){var t=e.expressions[0];if("Literal"===t.type&&0===t.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1])}throw this.astErrorOutput("Unknown CallExpression_unroll",e)}},{key:"getJsAST",value:function(e){if(this.jsFunctionAST)return this.jsFunctionAST;if(null===(e=e||acorn))throw"Missing JS to AST parser";var t=e.parse("var "+this.functionName+" = "+this.jsFunctionString+";",{locations:!0});if(null===t)throw"Failed to parse JS code";var n=t.body[0].declarations[0].init;return this.jsFunctionAST=n,n}},{key:"getFunctionString",value:function(){return this.generate(),this.functionString}},{key:"setFunctionString",value:function(e){this.functionString=e}},{key:"getParamType",value:function(e){var t=this.paramNames.indexOf(e);if(-1===t)return this.declarations.hasOwnProperty(e)?this.declarations[e]:"Number";if(this.parent){if(this.paramTypes[t])return this.paramTypes[t];for(var n=this.parent.calledFunctionsArguments[this.functionName],r=0;r<n.length;r++){var i=n[r];if(null!==i[t])return this.paramTypes[t]=i[t].type}}else if(this.paramTypes[t])return this.paramTypes[t];return"Number"}},{key:"getConstantType",value:function(e){return this.constantTypes[e]?this.constantTypes[e]:null}},{key:"getUserParamName",value:function(e){var t=this.paramNames.indexOf(e);if(-1===t)return null;if(!this.parent||!this.isSubKernel)return null;for(var n=this.parent.calledFunctionsArguments[this.functionName],r=0;r<n.length;r++){var i=n[r],o=i[t];if(null!==o&&"Integer"!==o.type)return o.name}return null}},{key:"generate",value:function(e){throw new Error("generate not defined on BaseFunctionNode")}},{key:"astGeneric",value:function(e,t){if(null===e)throw this.astErrorOutput("NULL ast",e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.astGeneric(e[n],t);return t}switch(e.type){case"FunctionDeclaration":return this.astFunctionDeclaration(e,t);case"FunctionExpression":return this.astFunctionExpression(e,t);case"ReturnStatement":return this.astReturnStatement(e,t);case"Literal":return this.astLiteral(e,t);case"BinaryExpression":return this.astBinaryExpression(e,t);case"Identifier":return this.astIdentifierExpression(e,t);case"AssignmentExpression":return this.astAssignmentExpression(e,t);case"ExpressionStatement":return this.astExpressionStatement(e,t);case"EmptyStatement":return this.astEmptyStatement(e,t);case"BlockStatement":return this.astBlockStatement(e,t);case"IfStatement":return this.astIfStatement(e,t);case"BreakStatement":return this.astBreakStatement(e,t);case"ContinueStatement":return this.astContinueStatement(e,t);case"ForStatement":return this.astForStatement(e,t);case"WhileStatement":return this.astWhileStatement(e,t);case"DoWhileStatement":return this.astDoWhileStatement(e,t);case"VariableDeclaration":return this.astVariableDeclaration(e,t);case"VariableDeclarator":return this.astVariableDeclarator(e,t);case"ThisExpression":return this.astThisExpression(e,t);case"SequenceExpression":return this.astSequenceExpression(e,t);case"UnaryExpression":return this.astUnaryExpression(e,t);case"UpdateExpression":return this.astUpdateExpression(e,t);case"LogicalExpression":return this.astLogicalExpression(e,t);case"MemberExpression":return this.astMemberExpression(e,t);case"CallExpression":return this.astCallExpression(e,t);case"ArrayExpression":return this.astArrayExpression(e,t);case"DebuggerStatement":return this.astDebuggerStatement(e,t)}throw this.astErrorOutput("Unknown ast type : "+e.type,e)}},{key:"astErrorOutput",value:function(e,t){return console.error(utils.getAstString(this.jsFunctionString,t)),console.error(e,t,this),e}},{key:"astDebuggerStatement",value:function(e,t){return t}},{key:"astFunctionDeclaration",value:function(e,t){return t}},{key:"astFunctionExpression",value:function(e,t){return t}},{key:"astReturnStatement",value:function(e,t){return t}},{key:"astLiteral",value:function(e,t){return t}},{key:"astBinaryExpression",value:function(e,t){return t}},{key:"astIdentifierExpression",value:function(e,t){return t}},{key:"astAssignmentExpression",value:function(e,t){return t}},{key:"astExpressionStatement",value:function(e,t){return t}},{key:"astEmptyStatement",value:function(e,t){return t}},{key:"astBlockStatement",value:function(e,t){return t}},{key:"astIfStatement",value:function(e,t){return t}},{key:"astBreakStatement",value:function(e,t){return t}},{key:"astContinueStatement",value:function(e,t){return t}},{key:"astForStatement",value:function(e,t){return t}},{key:"astWhileStatement",value:function(e,t){return t}},{key:"astDoWhileStatement",value:function(e,t){return t}},{key:"astVariableDeclaration",value:function(e,t){return t}},{key:"astVariableDeclarator",value:function(e,t){return t}},{key:"astThisExpression",value:function(e,t){return t}},{key:"astSequenceExpression",value:function(e,t){return t}},{key:"astUnaryExpression",value:function(e,t){return t}},{key:"astUpdateExpression",value:function(e,t){return t}},{key:"astLogicalExpression",value:function(e,t){return t}},{key:"astMemberExpression",value:function(e,t){return t}},{key:"astCallExpression",value:function(e,t){return t}},{key:"astArrayExpression",value:function(e,t){return t}},{key:"pushParameter",value:function(e,t){this.isState("in-get-call-parameters")?e.push("int("+t+")"):e.push(t)}},{key:"state",get:function(){return this.states[this.states.length-1]}}]),BaseFunctionNode}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(21),u=n(52),c=n(25);e.exports=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new u,e));return n.Kernel=c,n.kernel=null,n}return o(t,e),a(t,[{key:"getMode",value:function(){return"gpu"}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(23),s=n(53);e.exports=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Node=s,e}return o(t,e),t}(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.replace(c,"((").replace(l,"((")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(24),c=/decode32\(\s+encode32\(/g,l=/encode32\(\s+decode32\(/g;e.exports=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"generate",value:function(){return this.debug&&console.log(this),this.prototypeOnly?this.astFunctionPrototype(this.getJsAST(),[]).join("").trim():(this.functionStringArray=this.astGeneric(this.getJsAST(),[]),this.functionString=a(this.functionStringArray.join("").trim()),this.functionString)}},{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);var n=!this.isState("in-get-call-parameters");switch(e.name){case"gpu_threadX":n&&t.push("float("),t.push("threadId.x"),n&&t.push(")");break;case"gpu_threadY":n&&t.push("float("),t.push("threadId.y"),n&&t.push(")");break;case"gpu_threadZ":n&&t.push("float("),t.push("threadId.z"),n&&t.push(")");break;case"gpu_outputX":t.push("uOutputDim.x");break;case"gpu_outputY":t.push("uOutputDim.y");break;case"gpu_outputZ":t.push("uOutputDim.z");break;case"Infinity":t.push("intBitsToFloat(2139095039)");break;default:var r=this.getUserParamName(e.name);null!==r?this.pushParameter(t,"user_"+r):this.pushParameter(t,"user_"+e.name)}return t}}]),t}(u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(n(4),n(21)),u=n(55),c=n(56);e.exports=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new c,e));return n.Kernel=u,n.kernel=null,n}return o(t,e),a(t,[{key:"getMode",value:function(){return"cpu"}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(48),u=n(4),c=n(136);e.exports=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._fn=null,o.run=null,o._canvasCtx=null,o._imageData=null,o._colorData=null,o._kernelString=null,o.thread={x:0,y:0,z:0},o.run=function(){return this.run=null,this.build.apply(this,arguments),this.run.apply(this,arguments)}.bind(o),o}return o(t,e),a(t,[{key:"validateOptions",value:function(){if(!this.output||0===this.output.length){if(1!==arguments.length)throw"Auto dimensions only supported for kernels with only one input";var e=u.getArgumentType(arguments[0]);if("Array"===e)this.output=u.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw"Auto dimensions not supported for input type: "+e;this.output=arguments[0].output}}u.checkOutput(this.output)}},{key:"build",value:function(){this.setupConstants(),this.setupParams(arguments),this.validateOptions();var e=this._canvas;e&&(this._canvasCtx=e.getContext("2d"));for(var t=this.threadDim=u.clone(this.output);t.length<3;)t.push(1);if(this.graphical){var n=this._canvas;if(!n)throw new Error("no canvas available for using graphical output");n.width=t[0],n.height=t[1],this._imageData=this._canvasCtx.createImageData(t[0],t[1]),this._colorData=new Uint8ClampedArray(t[0]*t[1]*4)}var r=this.getKernelString();this.debug&&(console.log("Options:"),console.dir(this),console.log("Function output:"),console.log(r)),this.kernelString=r,this.run=new Function([],r).bind(this)()}},{key:"color",value:function(e,t,n,r){"undefined"===typeof r&&(r=1),e=Math.floor(255*e),t=Math.floor(255*t),n=Math.floor(255*n),r=Math.floor(255*r);var i=this.output[0],o=this.output[1],a=this.thread.x,s=o-this.thread.y-1,u=a+s*i;this._colorData[4*u+0]=e,this._colorData[4*u+1]=t,this._colorData[4*u+2]=n,this._colorData[4*u+3]=r}},{key:"getKernelString",value:function(){if(null!==this._kernelString)return this._kernelString;for(var e=this.functionBuilder,t=this.threadDim||(this.threadDim=u.clone(this.output));t.length<3;)t.push(1);if(e.addKernel(this.fnString,{prototypeOnly:!1,constants:this.constants,output:t,debug:this.debug,loopMaxIterations:this.loopMaxIterations,paramNames:this.paramNames,paramTypes:this.paramTypes,paramSizes:this.paramSizes,constantTypes:this.constantTypes}),e.addFunctions(this.functions,{constants:this.constants,output:t}),e.addNativeFunctions(this.nativeFunctions),null!==this.subKernels){this.subKernelOutputTextures=[],this.subKernelOutputVariableNames=[];for(var n=0;n<this.subKernels.length;n++){var r=this.subKernels[n];e.addSubKernel(r,{prototypeOnly:!1,constants:this.constants,output:this.output,debug:this.debug,loopMaxIterations:this.loopMaxIterations}),this.subKernelOutputVariableNames.push(r.name+"Result")}}else if(null!==this.subKernelProperties){this.subKernelOutputVariableNames=[];var i=0;for(var o in this.subKernelProperties)if(this.subKernelProperties.hasOwnProperty(o)){var a=this.subKernelProperties[o];e.addSubKernel(a),this.subKernelOutputVariableNames.push(a.name+"Result"),i++}}var s=e.getPrototypes("kernel"),c=null;return s.length>1?s=s.filter(function(e){return/^function/.test(e)?e:(c=e,!1)}):c=s.shift(),this._kernelString="\n\t\tvar LOOP_MAX = "+this._getLoopMaxString()+"\n\t\tvar constants = this.constants;\n\t\tvar _this = this;\n    return function ("+this.paramNames.map(function(e){return"user_"+e}).join(", ")+") {\n      "+this._processConstants()+"\n      "+this._processParams()+"\n      "+this._kernelLoop(c)+"\n      if (this.graphical) {\n        this._imageData.data.set(this._colorData);\n        this._canvasCtx.putImageData(this._imageData, 0, 0);\n        return;\n      }\n      "+this._kernelOutput()+"\n      "+(s.length>0?s.join("\n"):"")+"\n    }.bind(this);"}},{key:"toString",value:function(){return c(this)}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" "+parseInt(this.loopMaxIterations)+";\n":" 1000;\n"}},{key:"_processConstants",value:function(){if(!this.constants)return"";var e=[];for(var t in this.constants){switch(this.constantTypes[t]){case"HTMLImage":e.push("  var constants_"+t+" = this._imageTo2DArray(this.constants."+t+")");break;case"HTMLImageArray":e.push("  var constants_"+t+" = this._imageTo3DArray(this.constants."+t+")");break;case"Input":e.push("  var constants_"+t+" = this.constants."+t+".value");break;default:e.push("  var constants_"+t+" = this.constants."+t)}}return e.join("\n")}},{key:"_processParams",value:function(){for(var e=[],t=0;t<this.paramTypes.length;t++)switch(this.paramTypes[t]){case"HTMLImage":e.push("  user_"+this.paramNames[t]+" = this._imageTo2DArray(user_"+this.paramNames[t]+")");break;case"HTMLImageArray":e.push("  user_"+this.paramNames[t]+" = this._imageTo3DArray(user_"+this.paramNames[t]+")");break;case"Input":e.push("  user_"+this.paramNames[t]+" = user_"+this.paramNames[t]+".value")}return e.join(";\n")}},{key:"_imageTo2DArray",value:function(e){var t=this._canvas;t.width<e.width&&(t.width=e.width),t.height<e.height&&(t.height=e.height);var n=this._canvasCtx;n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height).data,i=new Array(e.height),o=0,a=e.height-1;a>=0;a--){i[a]=new Array(e.width);for(var s=0;s<e.width;s++){var u=r[o++]/255,c=r[o++]/255,l=r[o++]/255,h=r[o++]/255,p=[u,c,l,h];p.r=u,p.g=c,p.b=l,p.a=h,i[a][s]=p}}return i}},{key:"_imageTo3DArray",value:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=this._imageTo2DArray(e[n]);return t}},{key:"_kernelLoop",value:function(e){switch(this.output.length){case 1:return this._kernel1DLoop(e);case 2:return this._kernel2DLoop(e);case 3:return this._kernel3DLoop(e);default:throw new Error("unsupported size kernel")}}},{key:"_kernel1DLoop",value:function(e){var t=this.threadDim;return"\n    var result = new Float32Array("+t[0]+");\n    "+this._mapSubKernels(function(e){return"var result_"+e+" = new Float32Array("+t[0]+");\n"}).join("")+"\n    for (var x = 0; x < "+t[0]+"; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      var kernelResult;\n      "+e+"\n      result[x] = kernelResult;\n      "+this._mapSubKernels(function(e){return"result_"+e+"[x] = "+e+";\n"}).join("")+"\n    }"}},{key:"_kernel2DLoop",value:function(e){var t=this.threadDim;return"\n    var result = new Array("+t[1]+");\n    "+this._mapSubKernels(function(e){return"var result_"+e+" = new Array("+t[1]+");\n"}).join("")+"\n    for (var y = 0; y < "+t[1]+"; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      var resultX = result[y] = new Float32Array("+t[0]+");\n      "+this._mapSubKernels(function(e){return"var result_"+e+"X = result_"+e+"[y] = new Float32Array("+t[0]+");\n"}).join("")+"\n      for (var x = 0; x < "+t[0]+"; x++) {\n      \tthis.thread.x = x;\n        var kernelResult;\n        "+e+"\n        resultX[x] = kernelResult;\n        "+this._mapSubKernels(function(e){return"result_"+e+"X[x] = "+e+";\n"}).join("")+"\n      }\n    }"}},{key:"_kernel3DLoop",value:function(e){var t=this.threadDim;return"\n    var result = new Array("+t[2]+");\n    "+this._mapSubKernels(function(e){return"var result_"+e+" = new Array("+t[2]+");\n"}).join("")+"\n    for (var z = 0; z < "+t[2]+"; z++) {\n      this.thread.z = z;\n      var resultY = result[z] = new Array("+t[1]+");\n      "+this._mapSubKernels(function(e){return"var result_"+e+"Y = result_"+e+"[z] = new Array("+t[1]+");\n"}).join("")+"\n      for (var y = 0; y < "+t[1]+"; y++) {\n        this.thread.y = y;\n        var resultX = resultY[y] = new Float32Array("+t[0]+");\n        "+this._mapSubKernels(function(e){return"var result_"+e+"X = result_"+e+"Y[y] = new Float32Array("+t[0]+");\n"}).join("")+"\n        for (var x = 0; x < "+t[0]+"; x++) {\n        \tthis.thread.x = x;\n          var kernelResult;\n          "+e+"\n          resultX[x] = kernelResult;\n          "+this._mapSubKernels(function(e){return"result_"+e+"X[x] = "+e+";\n"}).join("")+"\n        }\n      }\n    }"}},{key:"_kernelOutput",value:function(){var e=this;return this.subKernelOutputVariableNames?"return {\n      result: result,\n      "+Object.keys(this.subKernelProperties||this.subKernelOutputVariableNames).map(function(t,n){return t+": result_"+e.subKernelOutputVariableNames[n]}).join(",\n")+"\n    };":"return result;"}},{key:"_mapSubKernels",value:function(e){return null===this.subKernelOutputVariableNames?[""]:this.subKernelOutputVariableNames.map(e)}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(23),s=n(57);e.exports=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Node=s,e}return o(t,e),t}(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(50),u=n(4);e.exports=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));return a.paramSizes=o?o.paramSizes:[],a.memberStates=[],a}return o(t,e),a(t,[{key:"pushMemberState",value:function(e){this.memberStates.push(e)}},{key:"popMemberState",value:function(e){if(this.memberState!==e)throw new Error("Cannot popMemberState "+e+" when in "+this.memberState);this.memberStates.pop()}},{key:"generate",value:function(){return this.debug&&console.log(this),this.functionStringArray=this.astGeneric(this.getJsAST(),[]),this.functionString=this.functionStringArray.join("").trim(),this.functionString}},{key:"getFunctionPrototypeString",value:function(){return this.webGlFunctionPrototypeString?this.webGlFunctionPrototypeString:this.webGlFunctionPrototypeString=this.generate()}},{key:"astFunctionDeclaration",value:function(e,t){return this.builder.addFunction(null,u.getAstString(this.jsFunctionString,e)),t}},{key:"astFunctionPrototype",value:function(e,t){if(this.isRootKernel||this.isSubKernel)return t;t.push(this.returnType),t.push(" "),t.push(this.functionName),t.push("(");for(var n=0;n<this.paramNames.length;++n)n>0&&t.push(", "),t.push("user_"),t.push(this.paramNames[n]);return t.push(");\n"),t}},{key:"astFunctionExpression",value:function(e,t){if(!this.isRootKernel){t.push("function"),t.push(" "),t.push(this.functionName),t.push("(");for(var n=0;n<this.paramNames.length;++n){var r=this.paramNames[n];n>0&&t.push(", "),t.push("user_"),t.push(r)}t.push(") {\n")}for(var i=0;i<e.body.body.length;++i)this.astGeneric(e.body.body[i],t),t.push("\n");return this.isRootKernel||t.push("}\n"),t}},{key:"astReturnStatement",value:function(e,t){return this.isRootKernel?(t.push("kernelResult = "),this.astGeneric(e.argument,t),t.push(";")):this.isSubKernel?(t.push(this.functionName+"Result = "),this.astGeneric(e.argument,t),t.push(";"),t.push("return "+this.functionName+"Result;")):(t.push("return "),this.astGeneric(e.argument,t),t.push(";")),t}},{key:"astLiteral",value:function(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);return t.push(e.value),t}},{key:"astBinaryExpression",value:function(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}},{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);switch(this.state){case"input-index-y":case"input-index-z":t.push("(")}switch(e.name){case"gpu_threadX":t.push("threadId.x");break;case"gpu_threadY":t.push("threadId.y");break;case"gpu_threadZ":t.push("threadId.z");break;case"gpu_outputX":t.push("uOutputDim.x");break;case"gpu_outputY":t.push("uOutputDim.y");break;case"gpu_outputZ":t.push("uOutputDim.z");break;case"Infinity":t.push("Infinity");break;default:if(this.constants&&this.constants.hasOwnProperty(e.name))t.push("constants_"+e.name);else{var n=this.getUserParamName(e.name);null!==n?t.push("user_"+n):t.push("user_"+e.name)}}switch(this.state){case"input-index-y":var r=this.paramSizes[this.paramNames.indexOf(this.memberState)];t.push(" * "+r[0]+")");break;case"input-index-z":var i=this.paramSizes[this.paramNames.indexOf(this.memberState)];t.push(" * "+i[0]*i[1]+")")}return t}},{key:"astForStatement",value:function(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);if(e.test&&"BinaryExpression"===e.test.type){if(("Identifier"===e.test.right.type||"Literal"===e.test.right.type)&&"<"===e.test.operator&&!1===this.isIdentifierConstant(e.test.right.name)){if(this.loopMaxIterations||(console.warn("Warning: loopMaxIterations is not set! Using default of 1000 which may result in unintended behavior."),console.warn("Set loopMaxIterations or use a for loop of fixed length to silence this message.")),t.push("for ("),this.astGeneric(e.init,t),";"!==t[t.length-1]&&t.push(";"),this.astGeneric(e.test.left,t),t.push(e.test.operator),t.push("LOOP_MAX"),t.push(";"),this.astGeneric(e.update,t),t.push(")"),t.push("{\n"),t.push("if ("),this.astGeneric(e.test.left,t),t.push(e.test.operator),this.astGeneric(e.test.right,t),t.push(") {\n"),"BlockStatement"===e.body.type)for(var n=0;n<e.body.body.length;n++)this.astGeneric(e.body.body[n],t);else this.astGeneric(e.body,t);return t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}if(e.init.declarations){var r=JSON.parse(JSON.stringify(e.init.declarations)),i=e.update.argument;if(!Array.isArray(r)||r.length<1)throw console.log(this.jsFunctionString),new Error("Error: Incompatible for loop declaration");if(r.length>1){for(var o=null,a=0;a<r.length;a++){var s=r[a];s.id.name===i.name?(o=s,r.splice(a,1)):(t.push("var "),this.astGeneric(s,t),t.push(";"))}t.push("for (let "),this.astGeneric(o,t),t.push(";")}else t.push("for ("),this.astGeneric(e.init,t);return this.astGeneric(e.test,t),t.push(";"),this.astGeneric(e.update,t),t.push(")"),this.astGeneric(e.body,t),t}}throw this.astErrorOutput("Invalid for statement",e)}},{key:"astWhileStatement",value:function(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),t.push("if ("),this.astGeneric(e.test,t),t.push(") {\n"),this.astGeneric(e.body,t),t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astDoWhileStatement",value:function(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astAssignmentExpression",value:function(e,t){return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t}},{key:"astEmptyStatement",value:function(e,t){return t}},{key:"astBlockStatement",value:function(e,t){t.push("{\n");for(var n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);return t.push("}\n"),t}},{key:"astExpressionStatement",value:function(e,t){return this.astGeneric(e.expression,t),t.push(";"),t}},{key:"astVariableDeclaration",value:function(e,t){t.push("var ");for(var n=0;n<e.declarations.length;n++)this.declarations[e.declarations[n].id.name]="var",n>0&&t.push(","),this.astGeneric(e.declarations[n],t);return t.push(";"),t}},{key:"astVariableDeclarator",value:function(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push("="),this.astGeneric(e.init,t)),t}},{key:"astIfStatement",value:function(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}},{key:"astBreakStatement",value:function(e,t){return t.push("break;\n"),t}},{key:"astContinueStatement",value:function(e,t){return t.push("continue;\n"),t}},{key:"astLogicalExpression",value:function(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}},{key:"astUpdateExpression",value:function(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}},{key:"astUnaryExpression",value:function(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}},{key:"astThisExpression",value:function(e,t){return t.push("_this"),t}},{key:"astMemberExpression",value:function(e,t){if(e.computed)if("Identifier"===e.object.type||"MemberExpression"===e.object.type&&e.object.object.object&&"ThisExpression"===e.object.object.object.type&&"constants"===e.object.object.property.name)this.pushState("identifier"),this.astGeneric(e.object,t),this.popState("identifier"),t.push("["),this.isInput(e.object.name),this.astGeneric(e.property,t),t.push("]");else if(e.object.object)if(e.object.object.object&&this.isInput(e.object.object.object.name)){this.pushMemberState(e.object.object.object.name),this.pushState("input-index-z"),this.astGeneric(e.object,t);var n=t.pop();t.push(" + "),this.popState("input-index-z"),this.pushState("input-index"),this.astGeneric(e.property,t),this.popState("input-index"),t.push(n),this.popMemberState(e.object.object.object.name)}else if(this.isInput(e.object.object.name)){this.pushMemberState(e.object.object.name),this.isState("input-index-z")||this.pushState("input-index-y"),this.astGeneric(e.object,t);var r=t.pop();t.push(" + "),this.isState("input-index-z")||this.popState("input-index-y");var i=this.isState("input-index-z");i?this.pushState("input-index-y"):this.pushState("input-index"),this.astGeneric(e.property,t),i?this.popState("input-index-y"):this.popState("input-index"),t.push(r),this.popMemberState(e.object.object.name)}else{this.astGeneric(e.object,t);var o=t.pop();t.push("]["),this.astGeneric(e.property,t),t.push(o)}else{this.astGeneric(e.object,t);var a=t.pop();t.push("]["),this.astGeneric(e.property,t),t.push(a)}else{var s=this.astMemberExpressionUnroll(e);switch("Identifier"===e.property.type&&e.computed&&(s="user_"+s),0===s.indexOf("this.constants")?s="constants_"+s.substring(15):0===s.indexOf("this")&&(s="_"+s),this.state){case"input-index-y":case"input-index-z":t.push("(")}switch(s){case"_this.output.x":t.push(this.output[0]);break;case"_this.output.y":t.push(this.output[1]);break;case"_this.output.z":t.push(this.output[2]);break;default:e.object&&e.object.name&&this.declarations[e.object.name]&&t.push("user_"),t.push(s)}switch(this.state){case"input-index-y":var u=this.paramSizes[this.paramNames.indexOf(this.memberState)];t.push(" * "+u[0]+")");break;case"input-index-z":var c=this.paramSizes[this.paramNames.indexOf(this.memberState)];t.push(" * "+c[0]*c[1]+")")}}return t}},{key:"astSequenceExpression",value:function(e,t){for(var n=0;n<e.expressions.length;n++)n>0&&t.push(","),this.astGeneric(e.expressions,t);return t}},{key:"astCallExpression",value:function(e,t){if(e.callee){var n=this.astMemberExpressionUnroll(e.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.hasOwnProperty("funcName")||(this.calledFunctionsArguments[n]=[]);var r=[];this.calledFunctionsArguments[n].push(r),t.push(n),t.push("(");for(var i=0;i<e.arguments.length;++i){var o=e.arguments[i];if(i>0&&t.push(", "),this.astGeneric(o,t),"Identifier"===o.type){var a=this.paramNames.indexOf(o.name);-1===a?r.push(null):r.push({name:o.name,type:this.paramTypes[a]})}else r.push(null)}return t.push(")"),t}throw this.astErrorOutput("Unknown CallExpression",e)}},{key:"astArrayExpression",value:function(e,t){var n=e.elements.length;t.push("[");for(var r=0;r<n;++r){r>0&&t.push(", ");var i=e.elements[r];this.astGeneric(i,t)}return t.push("]"),t}},{key:"astDebuggerStatement",value:function(e,t){return t.push("debugger;"),t}},{key:"memberState",get:function(){return this.memberStates[this.memberStates.length-1]}}]),t}(s)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var i=n(3),o=n.n(i),a=function(){var e=r(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=7;break}return e.next=4,n(t[r],r,t);case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),s=function(e){var t=0;e.forEach(function(e){t+=e.length});var n=new Float32Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}},function(e,t){e.exports=[-52.2724990845,-3.20076746581e-15]},function(e,t){e.exports=[-22.6756038666,-79.3887023926,-16.738073349,-80.4222183228,-10.2350215912,-86.2126693726,-8.52239990234,-91.991027832,-6.72632217407,-98.3261108398,-5.15139722824,-104.143501282,-7.64773273468,-112.485427856,-12.1593351364,-116.481414795,-11.9597549438,-115.853782654,-10.5846796036,-121.721618652,-13.3648099899,-129.97328186,-18.0104198456,-133.812667847,-23.1355628967,-137.946914673,-27.8710308075,-141.674880981,-36.5241317749,-142.645965576,-41.9681282043,-140.060348511,-32.4494400024,-132.773880005,-31.3746528625,-138.704086304,-34.5709648132,-146.803634644,-39.405872345,-150.40171814,-44.7346954346,-154.269866943,-49.6536827087,-157.752105713,-58.3449821472,-158.28175354,-63.6503944397,-155.422531128,-62.9924240112,-155.393722534,-68.0276031494,-158.705718994,-76.7319335938,-158.937820435,-81.9364700317,-155.898864746,-87.5830078125,-152.511276245,-92.7139129639,-149.349594116,-96.6059570312,-141.560424805,-96.0536193848,-135.558990479,-71.0970611572,-135.461685181,-70.4979553223,-141.458633423,-74.3291473389,-149.277923584,-79.4352416992,-152.479522705,-85.0551986694,-155.911026001,-90.2358779907,-158.990463257,-98.9417495728,-158.826263428,-104.002593994,-155.553604126,-103.344429016,-155.577301025,-108.627388,-158.477783203,-117.322540283,-158.015945435,-122.268531799,-154.572158813,-127.627372742,-150.745666504,-132.490188599,-147.185424805,-135.749557495,-139.111022949,-134.721038818,-133.172622681,-125.145835876,-140.384658813,-130.569503784,-143.012634277,-139.229904175,-142.109069824,-143.994293213,-138.418136597,-149.151519775,-134.323974609,-153.826919556,-130.520935059,-156.671325684,-122.29119873,-155.342056274,-116.412811279,-155.137573242,-117.038856506,-159.680206299,-113.078178406,-162.241500854,-104.755981445,-160.711990356,-98.9264907837,-158.965377808,-92.5776062012,-157.297866821,-86.7860717773,-150.840179443,-80.9450759888,-144.910873413,-79.8652877808,-118.084571838,-103.09752655,-118.306251526,-109.120262146,-123.16481781,-116.346153259,-128.658737183,-118.823928833,-134.692993164,-121.459617615,-140.244186401,-123.806236267,-148.846923828,-122.460075378,-153.415939331,-118.529853821,-152.767089844,-118.642784119,-158.395294189,-120.798194885,-166.946960449,-119.158668518,-171.378890991,-115.074501038,-176.167800903,-110.555053711,-180.501525879,-106.36680603,-182.633026123,-97.9242935181,-180.806808472,-92.1808319092,-172.300872803,-100.627540588,-178.031433105,-102.493843079,-186.488616943,-100.421394348,-190.707061768,-96.1170578003,-195.259857178,-91.3598327637,-199.374893188,-86.9565505981,-201.074142456,-78.4165496826,-198.958129883,-72.7734222412,-198.840637207,-73.4214630127,-202.802703857,-68.8800354004,-204.208938599,-60.2869110107,-201.901168823,-54.7194480896,-199.307693481,-48.6669197083,-196.868362427,-43.1558265686,-189.676605225,-38.2468948364,-183.655563354,-37.9831428528,-180.186645508,-62.6976509094,-186.047622681,-64.1016616821,-194.312927246,-61.3622703552,-198.175170898,-56.7356643677,-202.334655762,-51.6309738159,-206.085922241,-46.9139633179,-207.099685669,-38.2657585144,-204.540969849,-32.8090705872,-204.475479126,-33.4644050598,-208.063293457,-28.6218681335,-208.780731201,-19.9440555573,-206.036911011,-14.5780601501,-202.969665527,-8.75129699707,-200.099212646,-3.45196700096,-192.539352417,.868640482426,-186.516418457,.652049183846,-192.368362427,-9.80992412567,-195.705154419,-4.79113960266,-195.980209351,3.91193437576,-192.966964722,9.13139915466,-189.607284546,14.7945833206,-186.470947266,19.9410247803,-178.701065063,23.8714523315,-172.696975708,23.3487434387,-173.289642334,23.0615577698,-169.979156494,28.0977401733,-162.079437256,31.7601699829,-156.096725464,31.032453537,-149.570022583,30.1598091125,-143.606277466,29.2902297974,-136.94619751,23.6810894012,-135.075057983,17.9521026611,-135.075057983,-17.9521026611,-136.94619751,-23.6810894012,-143.606277466,-29.2902297974,-149.570022583,-30.1598091125,-156.096725464,-31.032453537,-162.079437256,-31.7601699829,-169.979156494,-28.0977401733,-173.289642334,-23.0615577698,-172.696975708,-23.3487434387,-178.701065063,-23.8714523315,-186.470947266,-19.9410247803,-189.607284546,-14.7945833206,-192.966964722,-9.13139915466,-195.980209351,-3.91193437576,-195.705154419,4.79113960266,-192.368362427,9.80992412567,-186.516418457,-.652049183846,-192.539352417,-.868640482426,-200.099212646,3.45196700096,-202.969665527,8.75129699707,-206.036911011,14.5780601501,-208.780731201,19.9440555573,-208.063293457,28.6218681335,-204.475479126,33.4644050598,-204.540969849,32.8090705872,-207.099685669,38.2657585144,-206.085922241,46.9139633179,-202.334655762,51.6309738159,-198.175170898,56.7356643677,-194.312927246,61.3622703552,-186.047622681,64.1016616821,-180.186645508,62.6976509094,-183.655563354,37.9831428528,-189.676605225,38.2468948364,-196.868362427,43.1558265686,-199.307693481,48.6669197083,-201.901168823,54.7194480896,-204.208938599,60.2869110107,-202.802703857,68.8800354004,-198.840637207,73.4214630127,-198.958129883,72.7734222412,-201.074142456,78.4165496826,-199.374893188,86.9565505981,-195.259857178,91.3598327637,-190.707061768,96.1170578003,-186.488616943,100.421394348,-178.031433105,102.493843079,-172.300872803,100.627540588,-180.806808472,92.1808319092,-182.633026123,97.9242935181,-180.501525879,106.36680603,-176.167800903,110.555053711,-171.378890991,115.074501038,-166.946960449,119.158668518,-158.395294189,120.798194885,-152.767089844,118.642784119,-153.415939331,118.529853821,-148.846923828,122.460075378,-140.244186401,123.806236267,-134.692993164,121.459617615,-128.658737183,118.823928833,-123.16481781,116.346153259,-118.306251526,109.120262146,-118.084571838,103.09752655,-144.910873413,79.8652877808,-150.840179443,80.9450759888,-157.297866821,86.7860717773,-158.965377808,92.5776062012,-160.711990356,98.9264907837,-162.241500854,104.755981445,-159.680206299,113.078178406,-155.137573242,117.038856506,-155.342056274,116.412811279,-156.671325684,122.29119873,-153.826919556,130.520935059,-149.151519775,134.323974609,-143.994293213,138.418136597,-139.229904175,142.109069824,-130.569503784,143.012634277,-125.145835876,140.384658813,-134.721038818,133.172622681,-135.749557495,139.111022949,-132.490188599,147.185424805,-127.627372742,150.745666504,-122.268531799,154.572158813,-117.322540283,158.015945435,-108.627388,158.477783203,-103.344429016,155.577301025,-104.002593994,155.553604126,-98.9417495728,158.826263428,-90.2358779907,158.990463257,-85.0551986694,155.911026001,-79.4352416992,152.479522705,-74.3291473389,149.277923584,-70.4979553223,141.458633423,-71.0970611572,135.461685181,-96.0536193848,135.558990479,-96.6059570312,141.560424805,-92.7139129639,149.349594116,-87.5830078125,152.511276245,-81.9364700317,155.898864746,-76.7319335938,158.937820435,-68.0276031494,158.705718994,-62.9924240112,155.393722534,-63.6503944397,155.422531128,-58.3449821472,158.28175354,-49.6536827087,157.752105713,-44.7346954346,154.269866943,-39.405872345,150.40171814,-34.5709648132,146.803634644,-31.3746528625,138.704086304,-32.4494400024,132.773880005,-41.9681282043,140.060348511,-36.5241317749,142.645965576,-27.8710308075,141.674880981,-23.1355628967,137.946914673,-18.0104198456,133.812667847,-13.3648099899,129.97328186,-10.5846796036,121.721618652,-11.9597549438,115.853782654,-12.1593351364,116.481414795,-7.64773273468,112.485427856,-5.15139722824,104.143501282,-6.72632217407,98.3261108398,-8.52239990234,91.991027832,-10.2350215912,86.2126693726,-16.738073349,80.4222183228,-22.6756038666,79.3887023926,22.6756076813,79.3887023926,16.7380771637,80.4222183228,10.2350234985,86.2126693726,8.52240085602,91.991027832,6.72632217407,98.3261108398,5.1513967514,104.143501282,7.64773273468,112.485427856,12.1593351364,116.481414795,11.9597549438,115.853782654,10.5846796036,121.721618652,13.3648099899,129.97328186,18.0104198456,133.812667847,23.1355628967,137.946914673,27.8710308075,141.674880981,36.5241317749,142.645965576,41.9681282043,140.060348511,32.4494438171,132.773880005,31.3746604919,138.704086304,34.5709686279,146.803634644,39.4058799744,150.40171814,44.7347068787,154.269882202,49.6536903381,157.75213623,58.3449897766,158.28175354,63.6503944397,155.422531128,62.9924240112,155.393722534,68.0276107788,158.705718994,76.7319412231,158.937820435,81.9364776611,155.898864746,87.5830154419,152.511276245,92.7139205933,149.349594116,96.6059646606,141.560424805,96.0536346436,135.558990479,71.0970611572,135.461669922,70.4979553223,141.458618164,74.3291473389,149.277893066,79.4352416992,152.479507446,85.0551986694,155.911026001,90.2358779907,158.990463257,98.9417495728,158.82623291,104.002593994,155.553604126,103.344436646,155.577301025,108.62739563,158.477783203,117.322570801,158.015945435,122.268554688,154.572158813,127.627372742,150.745666504,132.490188599,147.185394287,135.749557495,139.111022949,134.721038818,133.172607422,125.145835876,140.384643555,130.569503784,143.012619019,139.229904175,142.109054565,143.994293213,138.418121338,149.151519775,134.323944092,153.826919556,130.5209198,156.671325684,122.291183472,155.342056274,116.412788391,155.137573242,117.038848877,159.680206299,113.078163147,162.241500854,104.755981445,160.711990356,98.9264755249,158.965377808,92.5775985718,157.297866821,86.7860641479,150.840179443,80.9450683594,144.910873413,79.8652801514,118.084571838,103.09752655,118.306251526,109.120262146,123.16481781,116.346153259,128.658737183,118.823913574,134.692993164,121.459609985,140.244186401,123.806221008,148.846923828,122.46006012,153.415939331,118.529830933,152.767089844,118.64276886,158.395294189,120.798187256,166.946960449,119.15864563,171.378890991,115.074485779,176.167800903,110.555046082,180.501525879,106.366790771,182.633026123,97.9242782593,180.806808472,92.1808166504,172.300872803,100.6275177,178.031433105,102.49382019,186.488616943,100.42137146,190.707061768,96.1170425415,195.259857178,91.3598175049,199.374893188,86.95652771,201.074142456,78.4165267944,198.958129883,72.7734069824,198.840637207,73.4214477539,202.802703857,68.8800125122,204.208938599,60.2868919373,201.901168823,54.7194328308,199.307693481,48.6669006348,196.868362427,43.1558074951,189.676605225,38.2468719482,183.655563354,37.9831237793,180.186645508,62.6976318359,186.047622681,64.1016387939,194.312927246,61.3622550964,198.175170898,56.7356452942,202.334655762,51.6309585571,206.085922241,46.913936615,207.099685669,38.2657356262,204.540969849,32.8090515137,204.475479126,33.464389801,208.063293457,28.6218528748,208.780731201,19.9440402985,206.036911011,14.5780420303,202.969665527,8.75127983093,200.099212646,3.45195126534,192.539352417,-.86865323782,186.516418457,-.652061462402,192.368362427,9.80992031097,195.705154419,4.79113721848,195.980209351,-3.91193819046,192.966964722,-9.13140296936,189.607284546,-14.794585228,186.470947266,-19.9410266876,178.701065063,-23.8714561462,172.696975708,-23.3487491608,173.289642334,-23.0615615845,169.979156494,-28.0977420807,162.079437256,-31.7601795197,156.096725464,-31.0324630737,149.570022583,-30.1598167419,143.606277466,-29.2902355194,136.94619751,-23.6810932159,135.075057983,-17.9521083832,135.07510376,17.9520874023,136.946228027,23.6810741425,143.606323242,29.2902145386,149.570068359,30.1597881317,156.09677124,31.0324344635,162.079483032,31.7601509094,169.979202271,28.0977115631,173.289672852,23.0615310669,172.697006226,23.3487243652,178.701095581,23.8714313507,186.470977783,19.9409999847,189.607315063,14.7945585251,192.96697998,9.13137245178,195.980224609,3.91190648079,195.705169678,-4.79116725922,192.368377686,-9.80995178223,186.516448975,.652025878429,192.539367676,.868616461754,200.099212646,-3.45199155807,202.969680786,-8.75131988525,206.03692627,-14.578086853,208.78074646,-19.9440822601,208.063308716,-28.6218967438,204.475494385,-33.4644317627,204.540969849,-32.8090934753,207.099685669,-38.2657775879,206.085922241,-46.9139862061,202.334655762,-51.6310043335,198.17515564,-56.7356872559,194.312927246,-61.3622894287,186.047622681,-64.1016769409,180.186645508,-62.6976737976,183.655563354,-37.9831695557,189.676605225,-38.2469215393,196.868362427,-43.1558532715,199.307693481,-48.6669502258,201.901153564,-54.7194747925,204.208908081,-60.2869415283,202.80267334,-68.8800582886,198.840637207,-73.4214935303,198.958129883,-72.7734603882,201.074142456,-78.4165878296,199.37487793,-86.9565887451,195.259841919,-91.3598709106,190.707046509,-96.1170959473,186.488601685,-100.421432495,178.031417847,-102.493881226,172.300857544,-100.627571106,180.806808472,-92.1808700562,182.633026123,-97.9243240356,180.501525879,-106.36681366,176.167800903,-110.55506897,171.378890991,-115.074508667,166.946960449,-119.158676147,158.395294189,-120.798210144,152.767089844,-118.642807007,153.415939331,-118.52986908,148.846923828,-122.460098267,140.244186401,-123.806251526,134.692993164,-121.459632874,128.658737183,-118.823944092,123.16481781,-116.346168518,118.306251526,-109.120269775,118.084571838,-103.097541809,144.910858154,-79.8652877808,150.840148926,-80.9450759888,157.297866821,-86.7860717773,158.965377808,-92.5776062012,160.711990356,-98.9264984131,162.241500854,-104.755996704,159.680206299,-113.078178406,155.137573242,-117.038871765,155.342056274,-116.412811279,156.671325684,-122.29119873,153.826919556,-130.520935059,149.151519775,-134.323974609,143.994293213,-138.418136597,139.229888916,-142.109069824,130.569503784,-143.012634277,125.145835876,-140.384658813,134.721038818,-133.172622681,135.749557495,-139.111022949,132.490188599,-147.185424805,127.627372742,-150.745666504,122.268531799,-154.572158813,117.322540283,-158.015945435,108.627388,-158.477783203,103.344429016,-155.577301025,104.002593994,-155.553604126,98.9417266846,-158.82623291,90.2358551025,-158.990463257,85.0551757812,-155.911026001,79.4352340698,-152.479507446,74.3291397095,-149.277908325,70.4979476929,-141.458618164,71.0970535278,-135.461685181,96.0536117554,-135.558990479,96.6059494019,-141.560424805,92.7139053345,-149.349594116,87.5829925537,-152.511276245,81.9364624023,-155.898864746,76.7319259644,-158.937820435,68.02759552,-158.705718994,62.9924087524,-155.393722534,63.6503753662,-155.422531128,58.3449630737,-158.28175354,49.65366745,-157.752105713,44.7346763611,-154.269866943,39.4058570862,-150.401702881,34.5709495544,-146.803634644,31.3746376038,-138.704071045,32.4494247437,-132.773864746,41.9681091309,-140.060348511,36.5241165161,-142.645965576,27.8710136414,-141.674880981,23.1355438232,-137.946914673,18.0104007721,-133.812667847,13.3647928238,-129.97328186,10.5846614838,-121.721618652,11.959736824,-115.853782654,12.1593132019,-116.481391907,7.64771270752,-112.485404968,5.15137624741,-104.143501282,6.72630262375,-98.3261032104,8.52238464355,-91.991027832,10.2350063324,-86.2126693726,16.7380580902,-80.4222183228,22.6755886078,-79.3887023926]},function(e,t){e.exports=[-25.9238681793,-76.8898010254,-21.9973392487,-75.3469619751,-16.0107727051,-76.3890075684,-12.8364973068,-79.1678543091,-9.43984889984,-82.1922912598,-6.31285858154,-85.0242462158,-4.58609294891,-90.8503265381,-5.6649274826,-94.928817749,-5.83590650558,-94.3257522583,-2.77704501152,-97.2311553955,-1.18911325932,-103.096595764,-2.36449193954,-107.1483078,-3.66836738586,-111.505439758,-4.91186571121,-115.536773682,-9.4607257843,-119.565765381,-13.612736702,-120.313293457,-10.9330644608,-111.886199951,-7.97534418106,-114.894508362,-6.58891248703,-120.810806274,-7.90215444565,-124.819976807,-9.35426044464,-129.129959106,-10.7348852158,-133.116409302,-15.4188594818,-136.987503052,-19.5940036774,-137.592605591,-19.1061172485,-137.199050903,-20.5810146332,-141.151580811,-25.3555927277,-144.910354614,-29.5439300537,-145.416168213,-34.063583374,-145.923370361,-38.2598495483,-146.358505249,-43.7488059998,-143.751541138,-46.0631141663,-140.224227905,-31.2222423553,-128.863677979,-28.4213867188,-132.018554688,-27.3377246857,-137.99772644,-28.8532180786,-141.934890747,-30.5227050781,-146.165420532,-32.1043434143,-150.07649231,-36.9791793823,-153.704269409,-41.1797027588,-154.096206665,-40.6724205017,-153.72795105,-42.3464813232,-157.600341797,-47.3060951233,-161.111358643,-51.5147399902,-161.403442383,-56.0543441772,-161.680084229,-60.2673149109,-161.901199341,-65.6165390015,-159.018356323,-67.7484130859,-155.377883911,-58.9139938354,-154.991027832,-60.719493866,-158.803924561,-65.7962646484,-162.143295288,-70.0124359131,-162.291275024,-74.5588378906,-162.412506104,-78.7769088745,-162.4894104,-84.0244216919,-159.425354004,-86.0305557251,-155.714111328,-85.4930343628,-156.036590576,-89.7117385864,-156.013305664,-94.8850250244,-152.825531006,-96.8024673462,-149.067672729,-98.8353347778,-144.999252319,-100.689178467,-141.209625244,-100.132278442,-135.158615112,-97.6179122925,-131.771011353,-69.5623550415,-131.661621094,-67.0216522217,-135.029541016,-66.4176025391,-141.076019287,-68.2418212891,-144.879989624,-70.2429199219,-148.964111328,-72.1310043335,-152.736816406,-77.279258728,-155.964859009,-81.4976577759,-156.021011353,-80.9626693726,-155.694366455,-82.9398117065,-159.421142578,-88.163269043,-162.526000977,-92.3818054199,-162.481994629,-96.9290237427,-162.396224976,-101.146217346,-162.28112793,-106.248855591,-158.981445312,-108.08404541,-155.182754517,-99.246887207,-155.500686646,-101.35030365,-159.157669067,-106.676887512,-162.082138062,-110.891456604,-161.893875122,-115.433067322,-161.652648926,-119.643867493,-161.3934021,-124.630706787,-157.921173096,-126.334907532,-154.061935425,-125.824783325,-154.426223755,-130.02822876,-154.067047119,-134.931228638,-150.477386475,-136.543304443,-146.578781128,-138.24571228,-142.361404419,-139.791854858,-138.436172485,-138.754867554,-132.448730469,-135.97869873,-129.272109985,-121.049697876,-140.516601562,-123.336433411,-144.061859131,-128.804901123,-146.711547852,-133.004425049,-146.309143066,-137.527893066,-145.837188721,-141.720046997,-145.364059448,-146.523773193,-141.64263916,-148.029464722,-137.701721191,-147.538528442,-138.091445923,-151.71824646,-137.51890564,-156.432250977,-133.684463501,-157.843933105,-129.708908081,-159.329605103,-125.410369873,-160.674072266,-121.411575317,-159.333831787,-115.484642029,-156.399658203,-112.453361511,-153.654327393,-120.859298706,-157.812042236,-120.144165039,-162.392196655,-116.150779724,-163.66708374,-112.129241943,-165.00491333,-107.782440186,-166.211837769,-103.740005493,-164.669708252,-97.8623580933,-161.633590698,-94.9331970215,-161.799850464,-95.5375823975,-162.910461426,-91.4676208496,-161.229171753,-85.6282653809,-158.124359131,-82.772026062,-154.751403809,-79.7211685181,-151.598907471,-76.9176635742,-145.620635986,-75.828956604,-141.6822052,-77.3411331177,-116.047554016,-99.5413665771,-113.988250732,-103.223396301,-114.211746216,-109.295852661,-116.536148071,-112.81653595,-119.073860168,-116.59072876,-121.457275391,-120.071739197,-126.996551514,-122.569969177,-131.183425903,-122.052185059,-130.60899353,-121.801269531,-133.074401855,-125.224693298,-138.671447754,-127.590698242,-142.844818115,-126.973625183,-147.338180542,-126.270515442,-151.500564575,-125.583190918,-156.107315063,-121.620513916,-157.409088135,-117.60760498,-148.697158813,-119.123908997,-151.278182983,-122.461021423,-156.952880859,-124.634231567,-161.102722168,-123.874809265,-165.569396973,-123.018455505,-169.705856323,-122.189208984,-174.1743927,-118.071311951,-175.338165283,-114.01625061,-174.882263184,-114.446472168,-178.997894287,-113.519233704,-183.367401123,-109.296394348,-184.434539795,-105.214828491,-185.547866821,-100.805175781,-186.546081543,-96.706199646,-184.704772949,-90.9153060913,-181.522567749,-88.1455612183,-168.26071167,-101.315071106,-171.008132935,-104.516571045,-176.786026001,-106.398284912,-180.891876221,-105.428749084,-185.309188843,-104.3462677,-189.398117065,-103.307662964,-193.651397705,-98.9677810669,-194.60736084,-94.858757019,-194.173950195,-95.3116226196,-198.237060547,-94.1762084961,-202.38609314,-89.7365570068,-203.244216919,-85.6059875488,-204.131774902,-81.145401001,-204.920166016,-77.0009613037,-202.786651611,-71.3112335205,-199.467666626,-68.7069625854,-197.890533447,-77.4080581665,-201.91242981,-76.1343841553,-205.907196045,-71.5554428101,-206.623580933,-67.3979415894,-207.358078003,-62.9096221924,-208.004302979,-58.7406387329,-205.677474976,-53.1271972656,-202.271377563,-50.6379394531,-202.518249512,-51.2141075134,-203.065261841,-47.030960083,-200.605789185,-41.4743499756,-197.141540527,-39.0666847229,-193.385162354,-36.5026664734,-189.880813599,-34.1537284851,-183.810058594,-33.8877944946,-180.113739014,-35.9213180542,-176.214050293,-63.7047576904,-179.207717896,-66.6772842407,-185.117111206,-68.0928955078,-189.132705688,-66.7994384766,-193.449798584,-65.3686141968,-197.443023682,-64.0076675415,-201.337188721,-59.3428497314,-201.962890625,-55.1707496643,-201.56690979,-55.6566772461,-205.526702881,-54.2013053894,-209.308944702,-49.4453353882,-209.83543396,-45.2595405579,-210.364929199,-40.7424507141,-210.820755005,-36.5483779907,-208.240905762,-31.0466308594,-204.725036621,-28.7149486542,-203.845855713,-37.5140075684,-207.753555298,-35.9240760803,-211.370986938,-31.0415477753,-211.753997803,-26.8402042389,-212.128738403,-22.307641983,-212.440887451,-18.1004390717,-209.674407959,-12.6901302338,-206.080886841,-10.4800367355,-206.372848511,-11.0347156525,-206.585006714,-6.8212852478,-203.690856934,-1.47819244862,-200.045852661,.645945012569,-196.097229004,2.90266728401,-192.416946411,4.96507072449,-186.344284058,4.74669075012,-182.821640015,2.42526221275,-191.945541382,-13.8863153458,-195.767318726,-12.099647522,-199.131652832,-7.03941631317,-199.300445557,-2.82402586937,-199.444107056,1.72172760963,-199.5418396,5.93936252594,-196.503707886,11.2019319534,-192.802398682,13.2263536453,-193.1222229,12.68724823,-193.119766235,16.9060173035,-189.95753479,22.0949573517,-186.209182739,24.030916214,-182.150848389,26.0838413239,-178.370407104,27.9563484192,-172.316726685,27.4293251038,-168.916748047,24.9316997528,-176.874603271,21.0756511688,-176.727874756,25.2918663025,-173.390060425,30.369638443,-169.577697754,32.1762886047,-165.451553345,34.0892295837,-161.609313965,35.8313751221,-155.577178955,35.0976486206,-152.264587402,32.4852180481,-152.885894775,32.5682907104,-149.003341675,34.2187004089,-142.990341187,33.3419418335,-139.740737915,30.6515884399,-136.262054443,27.7218437195,-133.058258057,24.9771022797,-131.171676636,19.2008056641,-132.137756348,15.0941419601,-132.137756348,-15.0941419601,-131.171676636,-19.2008056641,-133.058258057,-24.9771022797,-136.262054443,-27.7218437195,-139.740737915,-30.6515884399,-142.990341187,-33.3419418335,-149.003341675,-34.2187004089,-152.885894775,-32.5682907104,-152.264587402,-32.4852180481,-155.577178955,-35.0976486206,-161.609313965,-35.8313751221,-165.451553345,-34.0892295837,-169.577697754,-32.1762886047,-173.390060425,-30.369638443,-176.727874756,-25.2918663025,-176.874603271,-21.0756511688,-168.916748047,-24.9316997528,-172.316726685,-27.4293251038,-178.370407104,-27.9563484192,-182.150848389,-26.0838413239,-186.209182739,-24.030916214,-189.95753479,-22.0949573517,-193.119766235,-16.9060173035,-193.1222229,-12.68724823,-192.802398682,-13.2263536453,-196.503707886,-11.2019319534,-199.5418396,-5.93936252594,-199.444107056,-1.72172760963,-199.300445557,2.82402586937,-199.131652832,7.03941631317,-195.767318726,12.099647522,-191.945541382,13.8863153458,-182.821640015,-2.42526221275,-186.344284058,-4.74669075012,-192.416946411,-4.96507072449,-196.097229004,-2.90266728401,-200.045852661,-.645945012569,-203.690856934,1.47819244862,-206.585006714,6.8212852478,-206.372848511,11.0347156525,-206.080886841,10.4800367355,-209.674407959,12.6901302338,-212.440887451,18.1004390717,-212.128738403,22.307641983,-211.753997803,26.8402042389,-211.370986938,31.0415477753,-207.753555298,35.9240760803,-203.845855713,37.5140075684,-204.725036621,28.7149486542,-208.240905762,31.0466308594,-210.820755005,36.5483779907,-210.364929199,40.7424507141,-209.83543396,45.2595405579,-209.308944702,49.4453353882,-205.526702881,54.2013053894,-201.56690979,55.6566772461,-201.962890625,55.1707496643,-201.337188721,59.3428497314,-197.443023682,64.0076675415,-193.449798584,65.3686141968,-189.132705688,66.7994384766,-185.117111206,68.0928955078,-179.207717896,66.6772842407,-176.214050293,63.7047576904,-180.113739014,35.9213180542,-183.810058594,33.8877944946,-189.880813599,34.1537284851,-193.385162354,36.5026664734,-197.141540527,39.0666847229,-200.605789185,41.4743499756,-203.065261841,47.030960083,-202.518249512,51.2141075134,-202.271377563,50.6379394531,-205.677474976,53.1271972656,-208.004302979,58.7406387329,-207.358078003,62.9096221924,-206.623580933,67.3979415894,-205.907196045,71.5554428101,-201.91242981,76.1343841553,-197.890533447,77.4080581665,-199.467666626,68.7069625854,-202.786651611,71.3112335205,-204.920166016,77.0009613037,-204.131774902,81.145401001,-203.244216919,85.6059875488,-202.38609314,89.7365570068,-198.237060547,94.1762084961,-194.173950195,95.3116226196,-194.60736084,94.858757019,-193.651397705,98.9677810669,-189.398117065,103.307662964,-185.309188843,104.3462677,-180.891876221,105.428749084,-176.786026001,106.398284912,-171.008132935,104.516571045,-168.26071167,101.315071106,-181.522567749,88.1455612183,-184.704772949,90.9153060913,-186.546081543,96.706199646,-185.547866821,100.805175781,-184.434539795,105.214828491,-183.367401123,109.296394348,-178.997894287,113.519233704,-174.882263184,114.446472168,-175.338165283,114.01625061,-174.1743927,118.071311951,-169.705856323,122.189208984,-165.569396973,123.018455505,-161.102722168,123.874809265,-156.952880859,124.634231567,-151.278182983,122.461021423,-148.697158813,119.123908997,-157.409088135,117.60760498,-156.107315063,121.620513916,-151.500564575,125.583190918,-147.338180542,126.270515442,-142.844818115,126.973625183,-138.671447754,127.590698242,-133.074401855,125.224693298,-130.60899353,121.801269531,-131.183425903,122.052185059,-126.996551514,122.569969177,-121.457275391,120.071739197,-119.073860168,116.59072876,-116.536148071,112.81653595,-114.211746216,109.295852661,-113.988250732,103.223396301,-116.047554016,99.5413665771,-141.6822052,77.3411331177,-145.620635986,75.828956604,-151.598907471,76.9176635742,-154.751403809,79.7211685181,-158.124359131,82.772026062,-161.229171753,85.6282653809,-162.910461426,91.4676208496,-161.799850464,95.5375823975,-161.633590698,94.9331970215,-164.669708252,97.8623580933,-166.211837769,103.740005493,-165.00491333,107.782440186,-163.66708374,112.129241943,-162.392196655,116.150779724,-157.812042236,120.144165039,-153.654327393,120.859298706,-156.399658203,112.453361511,-159.333831787,115.484642029,-160.674072266,121.411575317,-159.329605103,125.410369873,-157.843933105,129.708908081,-156.432250977,133.684463501,-151.71824646,137.51890564,-147.538528442,138.091445923,-148.029464722,137.701721191,-146.523773193,141.64263916,-141.720046997,145.364059448,-137.527893066,145.837188721,-133.004425049,146.309143066,-128.804901123,146.711547852,-123.336433411,144.061859131,-121.049697876,140.516601562,-135.97869873,129.272109985,-138.754867554,132.448730469,-139.791854858,138.436172485,-138.24571228,142.361404419,-136.543304443,146.578781128,-134.931228638,150.477386475,-130.02822876,154.067047119,-125.824783325,154.426223755,-126.334907532,154.061935425,-124.630706787,157.921173096,-119.643867493,161.3934021,-115.433067322,161.652648926,-110.891456604,161.893875122,-106.676887512,162.082138062,-101.35030365,159.157669067,-99.246887207,155.500686646,-108.08404541,155.182754517,-106.248855591,158.981445312,-101.146217346,162.28112793,-96.9290237427,162.396224976,-92.3818054199,162.481994629,-88.163269043,162.526000977,-82.9398117065,159.421142578,-80.9626693726,155.694366455,-81.4976577759,156.021011353,-77.279258728,155.964859009,-72.1310043335,152.736816406,-70.2429199219,148.964111328,-68.2418212891,144.879989624,-66.4176025391,141.076019287,-67.0216522217,135.029541016,-69.5623550415,131.661621094,-97.6179122925,131.771011353,-100.132278442,135.158615112,-100.689178467,141.209625244,-98.8353347778,144.999252319,-96.8024673462,149.067672729,-94.8850250244,152.825531006,-89.7117385864,156.013305664,-85.4930343628,156.036590576,-86.0305557251,155.714111328,-84.0244216919,159.425354004,-78.7769088745,162.4894104,-74.5588378906,162.412506104,-70.0124359131,162.291275024,-65.7962646484,162.143295288,-60.719493866,158.803924561,-58.9139938354,154.991027832,-67.7484130859,155.377883911,-65.6165390015,159.018356323,-60.2673149109,161.901199341,-56.0543441772,161.680084229,-51.5147399902,161.403442383,-47.3060951233,161.111358643,-42.3464813232,157.600341797,-40.6724205017,153.72795105,-41.1797027588,154.096206665,-36.9791793823,153.704269409,-32.1043434143,150.07649231,-30.5227050781,146.165420532,-28.8532180786,141.934890747,-27.3377246857,137.99772644,-28.4213867188,132.018554688,-31.2222423553,128.863677979,-46.0631141663,140.224227905,-43.7488059998,143.751541138,-38.2598495483,146.358505249,-34.063583374,145.923370361,-29.5439300537,145.416168213,-25.3555927277,144.910354614,-20.5810146332,141.151580811,-19.1061172485,137.199050903,-19.5940036774,137.592605591,-15.4188594818,136.987503052,-10.7348852158,133.116409302,-9.35426044464,129.129959106,-7.90215444565,124.819976807,-6.58891248703,120.810806274,-7.97534418106,114.894508362,-10.9330644608,111.886199951,-13.612736702,120.313293457,-9.4607257843,119.565765381,-4.91186571121,115.536773682,-3.66836738586,111.505439758,-2.36449193954,107.1483078,-1.18911325932,103.096595764,-2.77704501152,97.2311553955,-5.83590650558,94.3257522583,-5.6649274826,94.928817749,-4.58609294891,90.8503265381,-6.31285858154,85.0242462158,-9.43984889984,82.1922912598,-12.8364973068,79.1678543091,-16.0107727051,76.3890075684,-21.9973392487,75.3469619751,-25.9238681793,76.8898010254,25.9238700867,76.8898010254,21.9973392487,75.3469619751,16.0107746124,76.3890075684,12.8365001678,79.1678543091,9.43985080719,82.1922912598,6.31286096573,85.0242462158,4.58609437943,90.8503265381,5.66492843628,94.928817749,5.83590555191,94.3257522583,2.77704405785,97.2311553955,1.18911266327,103.096595764,2.36449098587,107.1483078,3.66836738586,111.505439758,4.91186571121,115.536773682,9.4607257843,119.565765381,13.612736702,120.313293457,10.9330644608,111.886199951,7.97534418106,114.894508362,6.58891248703,120.810806274,7.90215444565,124.819976807,9.35426044464,129.129959106,10.7348852158,133.116409302,15.4188594818,136.987503052,19.5940036774,137.592605591,19.1061172485,137.199050903,20.5810146332,141.151580811,25.3555927277,144.910354614,29.5439300537,145.416168213,34.063583374,145.923370361,38.2598495483,146.358505249,43.7488059998,143.751541138,46.0631141663,140.224227905,31.22224617,128.863677979,28.4213943481,132.018554688,27.3377304077,137.99772644,28.8532276154,141.934890747,30.5227127075,146.165420532,32.104347229,150.07649231,36.9791870117,153.704269409,41.1797103882,154.096206665,40.6724319458,153.727966309,42.3464927673,157.600372314,47.3061065674,161.11138916,51.5147476196,161.403457642,56.0543518066,161.680084229,60.2673187256,161.901199341,65.6165466309,159.018356323,67.7484130859,155.377883911,58.9139938354,154.991027832,60.719493866,158.803924561,65.7962722778,162.143295288,70.0124435425,162.291275024,74.55884552,162.412506104,78.7769165039,162.4894104,84.0244293213,159.425354004,86.0305709839,155.714111328,85.4930496216,156.036590576,89.7117462158,156.013305664,94.8850250244,152.825515747,96.8024749756,149.067657471,98.8353424072,144.999252319,100.689178467,141.209625244,100.132286072,135.158615112,97.6179199219,131.771011353,69.5623550415,131.661621094,67.0216522217,135.029525757,66.4176025391,141.07598877,68.2418212891,144.879959106,70.2429199219,148.964096069,72.1310043335,152.736785889,77.279258728,155.964828491,81.4976577759,156.021011353,80.9626693726,155.694366455,82.9398117065,159.421142578,88.163269043,162.526000977,92.3818054199,162.481994629,96.9290237427,162.396209717,101.146217346,162.281097412,106.248855591,158.981414795,108.08404541,155.182723999,99.2469024658,155.500686646,101.350311279,159.157669067,106.676902771,162.082138062,110.891464233,161.893875122,115.433082581,161.652648926,119.643875122,161.3934021,124.630714417,157.921173096,126.33493042,154.061935425,125.824783325,154.426208496,130.02822876,154.067016602,134.931228638,150.477355957,136.543304443,146.578765869,138.24571228,142.36138916,139.791854858,138.436157227,138.754867554,132.44871521,135.97869873,129.272094727,121.049697876,140.516586304,123.336433411,144.061843872,128.804901123,146.711532593,133.004425049,146.309127808,137.527893066,145.837188721,141.720046997,145.364059448,146.523773193,141.64263916,148.029464722,137.701690674,147.538528442,138.091445923,151.71824646,137.518890381,156.432250977,133.684463501,157.843933105,129.708877563,159.329605103,125.410354614,160.674072266,121.4115448,159.333831787,115.48462677,156.399642944,112.453346252,153.654327393,120.859283447,157.812057495,120.14415741,162.392196655,116.150749207,163.66708374,112.129226685,165.00491333,107.782424927,166.211837769,103.739990234,164.669708252,97.8623504639,161.633590698,94.9331893921,161.799850464,95.5375747681,162.910461426,91.4676132202,161.229171753,85.6282577515,158.124359131,82.7720184326,154.751403809,79.7211608887,151.598907471,76.9176559448,145.620635986,75.8289489746,141.6822052,77.3411178589,116.047554016,99.5413665771,113.988250732,103.223396301,114.211746216,109.295852661,116.536148071,112.81653595,119.073860168,116.590744019,121.457275391,120.071746826,126.996551514,122.569969177,131.183425903,122.0521698,130.60899353,121.801254272,133.074401855,125.224693298,138.671447754,127.590682983,142.844833374,126.973609924,147.338180542,126.270492554,151.500564575,125.583175659,156.107315063,121.620491028,157.409088135,117.607589722,148.697158813,119.123878479,151.278182983,122.461006165,156.952880859,124.634216309,161.102722168,123.874801636,165.569396973,123.018440247,169.705856323,122.189186096,174.1743927,118.071304321,175.338165283,114.016220093,174.882263184,114.446464539,178.997894287,113.519226074,183.367401123,109.29637146,184.434539795,105.214805603,185.547866821,100.805160522,186.546081543,96.7061843872,184.704772949,90.9152908325,181.522567749,88.1455459595,168.26071167,101.315048218,171.008132935,104.516548157,176.786026001,106.398262024,180.891876221,105.428726196,185.309188843,104.346260071,189.398117065,103.307647705,193.651397705,98.9677658081,194.60736084,94.8587417603,194.173950195,95.3116073608,198.237060547,94.1761932373,202.38609314,89.7365341187,203.244216919,85.60597229,204.131774902,81.1453933716,204.920166016,77.0009384155,202.786651611,71.3112182617,199.467666626,68.7069473267,197.890533447,77.4080429077,201.91242981,76.1343612671,205.907196045,71.5554275513,206.623580933,67.3979263306,207.358078003,62.9096031189,208.004302979,58.7406234741,205.677474976,53.1271781921,202.271377563,50.6379241943,202.518249512,51.2140922546,203.065261841,47.0309410095,200.605789185,41.4743309021,197.141540527,39.0666656494,193.385162354,36.5026435852,189.880813599,34.1537055969,183.810058594,33.8877792358,180.113739014,35.9213027954,176.214050293,63.7047386169,179.207717896,66.6772689819,185.117111206,68.0928649902,189.132705688,66.7994232178,193.449798584,65.3685913086,197.443023682,64.0076522827,201.337188721,59.3428344727,201.962890625,55.1707229614,201.56690979,55.656665802,205.526702881,54.2012901306,209.308944702,49.4453048706,209.83543396,45.2595176697,210.364929199,40.7424278259,210.820755005,36.5483551025,208.240905762,31.0466079712,204.725036621,28.7149276733,203.845855713,37.5139961243,207.753555298,35.9240608215,211.370986938,31.0415325165,211.753997803,26.8401889801,212.128738403,22.3076267242,212.440887451,18.1004238129,209.674407959,12.690112114,206.080886841,10.4800195694,206.372848511,11.0346975327,206.585006714,6.8212685585,203.690856934,1.47817611694,200.045852661,-.645960509777,196.097229004,-2.90268015862,192.416931152,-4.96508407593,186.344284058,-4.74670314789,182.821640015,-2.42527389526,191.945541382,13.8863124847,195.767318726,12.0996456146,199.131652832,7.03941392899,199.300445557,2.82402420044,199.444107056,-1.72173130512,199.5418396,-5.93936681747,196.503707886,-11.2019357681,192.802398682,-13.22635746,193.1222229,-12.687251091,193.119766235,-16.9060173035,189.95753479,-22.094959259,186.209182739,-24.0309181213,182.150848389,-26.0838451385,178.370407104,-27.9563560486,172.316726685,-27.4293289185,168.916748047,-24.9317054749,176.874603271,-21.0756568909,176.727874756,-25.2918720245,173.390060425,-30.3696403503,169.577697754,-32.1762886047,165.451553345,-34.0892410278,161.609313965,-35.8313827515,155.577178955,-35.0976524353,152.264587402,-32.4852256775,152.885894775,-32.5682983398,149.003341675,-34.2187080383,142.990341187,-33.3419494629,139.740737915,-30.651594162,136.262054443,-27.7218475342,133.058258057,-24.9771060944,131.171676636,-19.2008094788,132.137756348,-15.0941467285,132.137786865,15.0941267014,131.171707153,19.2007904053,133.058303833,24.9770889282,136.26210022,27.7218284607,139.740768433,30.6515731812,142.990386963,33.3419265747,149.003387451,34.2186813354,152.885940552,32.5682678223,152.264633179,32.4851989746,155.577224731,35.0976295471,161.609344482,35.8313560486,165.451583862,34.089214325,169.57774353,32.1762657166,173.390090942,30.3696136475,176.727905273,25.2918395996,176.874633789,21.0756225586,168.916778564,24.9316806793,172.316772461,27.4293041229,178.370452881,27.9563312531,182.150894165,26.083820343,186.209228516,24.0308914185,189.957565308,22.0949325562,193.119812012,16.9059906006,193.122268677,12.6872224808,192.80241394,13.2263278961,196.503723145,11.2019042969,199.541854858,5.93933391571,199.444137573,1.72169852257,199.300476074,-2.82405471802,199.131668091,-7.03944396973,195.767333984,-12.0996751785,191.945571899,-13.8863430023,182.821655273,2.42523956299,186.344299316,4.74666881561,192.41696167,4.96504688263,196.097244263,2.90264344215,200.04586792,.645920753479,203.690887451,-1.47821724415,206.585021973,-6.82131099701,206.372879028,-11.0347394943,206.080917358,-10.4800634384,209.674438477,-12.6901569366,212.440917969,-18.1004676819,212.128768921,-22.3076705933,211.75402832,-26.8402309418,211.371002197,-31.0415725708,207.753570557,-35.9241027832,203.845855713,-37.5140380859,204.725036621,-28.7149715424,208.240905762,-31.0466537476,210.820755005,-36.5484046936,210.364929199,-40.7424697876,209.83543396,-45.2595672607,209.308944702,-49.4453620911,205.526702881,-54.2013320923,201.56690979,-55.6567077637,201.962875366,-55.1707725525,201.337173462,-59.342880249,197.443023682,-64.0076904297,193.449798584,-65.3686294556,189.132705688,-66.7994613647,185.117111206,-68.0929031372,179.207717896,-66.6772994995,176.214050293,-63.7047767639,180.113739014,-35.9213409424,183.810058594,-33.8878211975,189.880813599,-34.153755188,193.385162354,-36.502696991,197.141540527,-39.0667076111,200.605789185,-41.4743804932,203.065261841,-47.0309906006,202.518249512,-51.214138031,202.271362305,-50.6379699707,205.677459717,-53.1272201538,208.004272461,-58.7406692505,207.358078003,-62.90965271,206.623550415,-67.3979721069,205.907180786,-71.5554656982,201.912414551,-76.1344070435,197.89050293,-77.4080886841,199.467666626,-68.7070007324,202.786651611,-71.3112716675,204.920166016,-77.0009994507,204.131774902,-81.1454391479,203.24420166,-85.6060256958,202.386062622,-89.7365951538,198.237045288,-94.1762466431,194.173950195,-95.3116531372,194.607345581,-94.858795166,193.651382446,-98.9678192139,189.398101807,-103.307701111,185.309158325,-104.346305847,180.891845703,-105.428787231,176.786010742,-106.398323059,171.008132935,-104.516609192,168.260696411,-101.315109253,181.522567749,-88.1455917358,184.704772949,-90.9153366089,186.546081543,-96.7062301636,185.547866821,-100.805198669,184.434539795,-105.21484375,183.367401123,-109.296409607,178.99786377,-113.519264221,174.882263184,-114.446487427,175.338165283,-114.01625824,174.1743927,-118.071342468,169.705856323,-122.189224243,165.569381714,-123.018478394,161.102722168,-123.874824524,156.952880859,-124.634239197,151.278182983,-122.461036682,148.697158813,-119.123916626,157.409088135,-117.607627869,156.107315063,-121.620529175,151.500564575,-125.583213806,147.338180542,-126.270530701,142.844818115,-126.973648071,138.671447754,-127.590705872,133.074401855,-125.224716187,130.60899353,-121.80128479,131.183425903,-122.052192688,126.996551514,-122.569992065,121.457275391,-120.071746826,119.073860168,-116.590751648,116.536148071,-112.816558838,114.211746216,-109.295875549,113.988250732,-103.22341156,116.047554016,-99.5413818359,141.682189941,-77.3411331177,145.620620728,-75.828956604,151.598876953,-76.9176635742,154.75138855,-79.7211685181,158.124359131,-82.772026062,161.229171753,-85.6282653809,162.910461426,-91.467628479,161.799850464,-95.5375823975,161.633590698,-94.9332046509,164.669708252,-97.8623657227,166.211837769,-103.740005493,165.00491333,-107.782447815,163.66708374,-112.129257202,162.392196655,-116.150779724,157.812042236,-120.144165039,153.654327393,-120.859298706,156.399658203,-112.453361511,159.333831787,-115.484642029,160.674072266,-121.411575317,159.329605103,-125.410369873,157.843933105,-129.708908081,156.432250977,-133.684463501,151.71824646,-137.51890564,147.538528442,-138.091445923,148.029464722,-137.701721191,146.523773193,-141.64263916,141.720031738,-145.364059448,137.527877808,-145.837188721,133.004425049,-146.309127808,128.804901123,-146.711532593,123.336433411,-144.061859131,121.049697876,-140.516586304,135.97869873,-129.272109985,138.754867554,-132.448730469,139.791854858,-138.436172485,138.24571228,-142.361404419,136.543304443,-146.578781128,134.931228638,-150.477386475,130.02822876,-154.067047119,125.824783325,-154.426223755,126.334907532,-154.061935425,124.630706787,-157.921173096,119.643867493,-161.3934021,115.433067322,-161.652648926,110.891456604,-161.893875122,106.676887512,-162.082138062,101.35030365,-159.157669067,99.246887207,-155.500686646,108.08404541,-155.182723999,106.248855591,-158.981414795,101.146202087,-162.281097412,96.9290084839,-162.396209717,92.3817901611,-162.481994629,88.1632537842,-162.526000977,82.9397888184,-159.421142578,80.9626464844,-155.694366455,81.4976425171,-156.021011353,77.2792510986,-155.964828491,72.1309967041,-152.736785889,70.2429122925,-148.964096069,68.2418212891,-144.879974365,66.4175872803,-141.076004028,67.0216445923,-135.029525757,69.5623550415,-131.661621094,97.6179046631,-131.771011353,100.132270813,-135.158615112,100.689163208,-141.209625244,98.835319519,-144.999252319,96.8024520874,-149.067672729,94.8850097656,-152.825531006,89.711730957,-156.013305664,85.4930343628,-156.036590576,86.0305480957,-155.714111328,84.0244140625,-159.425354004,78.7769012451,-162.4894104,74.5588302612,-162.412506104,70.0124206543,-162.291275024,65.7962493896,-162.143295288,60.7194824219,-158.803924561,58.9139785767,-154.991027832,67.7483825684,-155.377883911,65.6165161133,-159.018356323,60.2672958374,-161.901199341,56.0543251038,-161.680084229,51.5147209167,-161.403442383,47.3060760498,-161.111358643,42.3464660645,-157.600341797,40.6724014282,-153.72795105,41.1796836853,-154.096176147,36.9791603088,-153.70425415,32.1043243408,-150.076477051,30.522687912,-146.165405273,28.8532066345,-141.934890747,27.3377132416,-137.997711182,28.4213752747,-132.018539429,31.2222270966,-128.86366272,46.0630950928,-140.224227905,43.7487869263,-143.751541138,38.2598342896,-146.358505249,34.0635643005,-145.923370361,29.5439109802,-145.416168213,25.3555755615,-144.910354614,20.580997467,-141.151580811,19.106098175,-137.199050903,19.5939865112,-137.592605591,15.4188404083,-136.987503052,10.7348670959,-133.116409302,9.35424232483,-129.129959106,7.90213680267,-124.819976807,6.58889484406,-120.810806274,7.97532653809,-114.894508362,10.9330472946,-111.886199951,13.6127138138,-120.313278198,9.46070384979,-119.565734863,4.91184425354,-115.536766052,3.66834664345,-111.50541687,2.36447024345,-107.1483078,1.18909263611,-103.096580505,2.77702474594,-97.2311477661,5.83588647842,-94.3257446289,5.66491222382,-94.928817749,4.58607721329,-90.8503265381,6.31284332275,-85.0242462158,9.43983364105,-82.1922912598,12.836482048,-79.1678543091,16.0107574463,-76.3890075684,21.9973239899,-75.3469619751,25.9238529205,-76.8898010254]},function(e,t){e.exports=[-28.7933578491,-76.5452423096,-26.9926872253,-74.2045974731,-23.0423679352,-72.6524047852,-20.1299552917,-73.1411514282,-17.0230007172,-73.681968689,-14.1167392731,-74.2060470581,-10.9232301712,-77.0017318726,-10.0193557739,-79.8131332397,-10.4063091278,-79.4685668945,-7.50929355621,-80.041557312,-4.36335420609,-82.8906784058,-3.50699210167,-85.7169265747,-2.61082220078,-88.7405853271,-1.78884601593,-91.5770263672,-2.87421751022,-95.680229187,-4.99113607407,-97.7392730713,-6.73741674423,-91.5798568726,-3.85482382774,-92.2214813232,-.777427017689,-95.1444854736,.0115814423189,-97.9902648926,.835698723793,-101.034355164,1.59008848667,-103.889511108,.407587647438,-107.965782166,-1.75762856007,-109.973983765,-1.60908639431,-109.477615356,-.902923822403,-112.345085144,-2.15395712852,-116.400856018,-4.35271167755,-118.372276306,-6.71351528168,-120.463272095,-8.93604850769,-122.407844543,-13.1132173538,-123.159889221,-15.8744115829,-122.112594604,-11.7401504517,-109.111083984,-8.88118362427,-109.850891113,-5.90554094315,-112.877433777,-5.21430635452,-115.748542786,-4.49476528168,-118.819015503,-3.83845019341,-121.698303223,-5.1596493721,-125.731758118,-7.39227056503,-127.664749146,-7.2268409729,-127.173736572,-6.61914587021,-130.063674927,-8.00813674927,-134.074295044,-10.273018837,-135.96937561,-12.7039442062,-137.978408813,-14.9916744232,-139.845855713,-19.1921195984,-140.45463562,-21.9158859253,-139.313537598,-16.932844162,-135.293899536,-16.3939476013,-138.19744873,-17.8777809143,-142.173950195,-20.1870250702,-144.014709473,-22.66497612,-145.96546936,-24.9964027405,-147.778060913,-29.2101192474,-148.286911011,-31.9060211182,-147.081451416,-31.39112854,-147.023666382,-33.7527770996,-148.796707153,-37.9744720459,-149.234481812,-40.6496734619,-147.983764648,-43.498374939,-146.630767822,-46.1581878662,-145.34765625,-48.4865150452,-141.798950195,-48.6046066284,-138.848175049,-31.8871059418,-126.051071167,-29.0694770813,-126.935386658,-26.2516517639,-130.109390259,-25.7073726654,-133.011917114,-25.1449623108,-136.11505127,-24.6359729767,-139.023986816,-26.1606464386,-142.985015869,-28.4887104034,-144.8019104,-28.2985248566,-144.319961548,-27.838634491,-147.237075806,-29.4298553467,-151.171844482,-31.7882099152,-152.949249268,-34.3181877136,-154.83203125,-36.6979560852,-156.580657959,-40.9239311218,-156.974975586,-43.5861206055,-155.696777344,-38.4050445557,-151.935836792,-38.0145530701,-154.863037109,-39.6987571716,-158.758895874,-42.0986595154,-160.479812622,-44.6726341248,-162.301986694,-47.0932540894,-163.993606567,-51.3274040222,-164.287475586,-53.9584846497,-162.946426392,-53.4413261414,-162.914932251,-55.8901138306,-164.565505981,-60.1286087036,-164.787963867,-62.7367210388,-163.402755737,-65.5129013062,-161.906600952,-68.1039962769,-160.489837646,-70.2487869263,-156.827285767,-70.2166061401,-153.874328613,-56.5866622925,-153.277496338,-56.2964935303,-156.216339111,-58.1129417419,-160.052337646,-60.5702819824,-161.690170288,-63.2050628662,-163.42326355,-65.6821060181,-165.03112793,-69.923828125,-165.180007935,-72.5075149536,-163.749786377,-71.9895782471,-163.735961914,-74.4933700562,-165.301864624,-78.7369995117,-165.379226685,-81.2962112427,-163.905654907,-84.0196151733,-162.315444946,-86.5607528687,-160.810913086,-88.5790405273,-157.077163696,-88.445892334,-154.127029419,-82.9559326172,-157.420700073,-85.4962005615,-158.926696777,-89.7404632568,-158.903274536,-92.263961792,-157.369354248,-94.9488372803,-155.714920044,-97.4535217285,-154.15045166,-99.3825912476,-150.369827271,-99.17943573,-147.423690796,-98.947845459,-147.887176514,-101.425811768,-146.280715942,-103.290893555,-142.46812439,-103.038101196,-139.525817871,-102.749076843,-136.385437012,-102.460586548,-133.446411133,-99.9309844971,-130.038269043,-97.2014312744,-128.911071777,-70.0011291504,-128.805023193,-67.2628707886,-129.910903931,-64.7067642212,-133.299224854,-64.395362854,-136.23588562,-64.0818710327,-139.373931885,-63.8061599731,-142.314178467,-65.6414337158,-146.141204834,-68.106803894,-147.766937256,-67.8788375854,-147.301651001,-67.6527175903,-150.246109009,-69.5522384644,-154.041671753,-72.0446548462,-155.625610352,-74.7165374756,-157.300918579,-77.2280044556,-158.854492188,-81.4719543457,-158.911010742,-84.0238952637,-157.424865723,-78.5597686768,-154.088500977,-78.4036407471,-157.037506104,-80.3927536011,-160.786880493,-82.922088623,-162.311203003,-85.6329956055,-163.922546387,-88.1806488037,-165.416061401,-92.4247436523,-165.371780396,-94.9406738281,-163.825454712,-94.4226455688,-163.835220337,-96.9951019287,-165.285568237,-101.237854004,-165.169769287,-103.727371216,-163.581268311,-106.375572205,-161.868789673,-108.845611572,-160.250152588,-110.691902161,-156.428436279,-110.424674988,-153.48739624,-96.7904815674,-153.977935791,-96.7352828979,-156.930557251,-98.8514404297,-160.609710693,-101.431419373,-162.046646118,-104.195846558,-163.56439209,-106.793083191,-164.969894409,-111.033187866,-164.780487061,-113.494766235,-163.149047852,-112.977371216,-163.176513672,-115.597923279,-164.538040161,-119.834220886,-164.277236938,-122.267951965,-162.604537964,-124.856063843,-160.802474976,-127.269317627,-159.100341797,-128.983840942,-155.217712402,-128.616195679,-152.287536621,-123.405952454,-156.007965088,-126.058097839,-157.306884766,-130.287017822,-156.945541382,-132.680358887,-155.215515137,-135.22492981,-153.352523804,-137.597076416,-151.593566895,-139.218933105,-147.671325684,-138.781799316,-144.750732422,-138.587844849,-145.231170654,-140.929992676,-143.432495117,-142.485534668,-139.483474731,-141.999237061,-136.570648193,-141.461044312,-133.463241577,-140.939422607,-130.556533813,-138.14642334,-127.360671997,-135.335769653,-126.454421997,-118.519012451,-139.120788574,-118.614089966,-142.072387695,-120.914672852,-145.639129639,-123.564399719,-146.942962646,-126.40246582,-148.318099976,-129.067840576,-149.589660645,-133.292800903,-149.184814453,-135.668212891,-147.430252075,-135.152893066,-147.484024048,-137.839309692,-148.710479736,-142.056854248,-148.234466553,-144.40234375,-146.440124512,-146.89541626,-144.508758545,-149.218948364,-142.686050415,-150.733764648,-138.721237183,-150.217529297,-135.813583374,-145.203292847,-139.794204712,-147.918060303,-140.956512451,-152.123123169,-140.380508423,-154.425354004,-138.530975342,-156.871871948,-136.540939331,-159.151443481,-134.663574219,-160.571685791,-130.663925171,-159.986541748,-127.769332886,-159.81729126,-128.259033203,-162.064910889,-126.343513489,-163.417541504,-122.320480347,-162.783691406,-119.436172485,-162.088134766,-116.360160828,-161.419281006,-113.483764648,-158.467346191,-110.434112549,-155.614242554,-109.672035217,-151.378692627,-122.640914917,-154.131637573,-123.709701538,-158.314544678,-122.990242004,-160.5521698,-121.063056946,-162.929229736,-118.990539551,-165.143295288,-117.036331177,-166.425888062,-112.99042511,-165.742111206,-110.117546082,-165.589706421,-110.612754822,-167.770523071,-108.621505737,-168.984786987,-104.55456543,-168.252655029,-101.693618774,-167.452316284,-98.6431808472,-166.685516357,-95.7913360596,-163.631027222,-92.8444213867,-160.75352478,-92.1803512573,-162.451705933,-98.3532104492,-164.584609985,-96.3107376099,-165.701950073,-92.2161178589,-164.902130127,-89.3733520508,-164.029556274,-86.3428039551,-163.195266724,-83.5099716187,-160.071624756,-80.6364059448,-157.179168701,-80.0408477783,-157.563430786,-80.3884124756,-156.681503296,-77.5700378418,-153.509902954,-74.7495422363,-150.607818604,-74.2028121948,-147.505157471,-73.6377792358,-144.59664917,-73.126335144,-140.634353638,-74.6476669312,-138.815475464,-76.9742050171,-116.093925476,-96.6516342163,-113.531417847,-98.1194839478,-111.459640503,-101.823822021,-111.550346375,-104.775566101,-111.66632843,-107.927101135,-111.792861938,-110.8775177,-114.131347656,-114.419540405,-116.794822693,-115.695030212,-116.505722046,-115.265075684,-116.681983948,-118.212944031,-119.079826355,-121.715034485,-121.764419556,-122.945472717,-124.639228821,-124.242027283,-127.338577271,-125.43976593,-131.550827026,-124.918830872,-133.877044678,-123.099578857,-128.010101318,-120.536956787,-128.25630188,-123.479820251,-130.73664856,-126.923995972,-133.449707031,-128.090316772,-136.354492188,-129.318252563,-139.08152771,-130.451553345,-143.280197144,-129.830749512,-145.562576294,-127.956771851,-145.050674438,-128.036880493,-147.796417236,-129.124053955,-151.984039307,-128.432571411,-154.234512329,-126.520385742,-156.625350952,-124.463813782,-158.852416992,-122.524452209,-160.162078857,-118.487213135,-159.497512817,-115.609832764,-146.056564331,-117.949203491,-146.403244019,-120.88192749,-148.999908447,-124.239265442,-151.751266479,-125.312141418,-154.696365356,-126.440010071,-157.460540771,-127.479393005,-161.635528564,-126.715370178,-163.852508545,-124.764442444,-163.343643188,-124.862007141,-166.124954224,-125.854667664,-170.286453247,-125.020385742,-172.470230103,-123.03237915,-174.789337158,-120.895233154,-176.948791504,-118.880851746,-178.119628906,-114.801200867,-177.357055664,-111.948219299,-172.700927734,-116.34236145,-175.505020142,-117.268692017,-179.645568848,-116.335838318,-181.781509399,-114.296516418,-184.049224854,-112.104919434,-186.160247803,-110.039810181,-187.233856201,-105.933517456,-186.403762817,-103.099441528,-186.276931763,-103.601806641,-188.352859497,-101.501419067,-189.357086182,-97.3776016235,-188.479354858,-94.5579299927,-187.523757935,-91.5525283813,-186.611846924,-88.7437133789,-183.410339355,-85.9571838379,-180.502593994,-85.4414367676,-165.563781738,-100.276222229,-166.059204102,-103.187507629,-168.823272705,-106.408401489,-171.625656128,-107.339927673,-174.624282837,-108.316505432,-177.437774658,-109.213928223,-181.568496704,-108.238525391,-183.683349609,-106.177345276,-183.180084229,-106.300674438,-186.008285522,-107.150543213,-190.122009277,-106.105636597,-192.201797485,-104.009109497,-194.409194946,-101.756767273,-196.463409424,-99.6351318359,-197.425140381,-95.5012054443,-196.518447876,-92.6907043457,-192.091888428,-97.3160171509,-194.939453125,-98.0984954834,-199.027175903,-96.9562149048,-201.056610107,-94.8108825684,-203.209899902,-92.5067596436,-205.213134766,-90.3369369507,-206.076477051,-86.1813354492,-205.103286743,-83.3931655884,-205.002166748,-83.9013214111,-206.968536377,-81.6980514526,-207.761703491,-77.5284957886,-206.741668701,-74.7571182251,-205.634399414,-71.8042297363,-204.580764771,-69.0454406738,-201.241668701,-66.4253921509,-198.311447144,-66.0582199097,-195.878204346,-79.4824905396,-198.75088501,-80.167137146,-202.797164917,-78.8857345581,-204.752029419,-76.6722640991,-206.825271606,-74.2958450317,-208.753143311,-72.0587997437,-209.473846436,-67.8761062622,-208.405853271,-65.1228408813,-208.322219849,-65.6341629028,-210.212081909,-63.3649406433,-210.862213135,-59.1706962585,-209.748031616,-56.4358253479,-208.540405273,-53.5225105286,-207.393051147,-50.8013725281,-203.966323853,-48.2970352173,-201.025253296,-48.0302810669,-203.546798706,-53.9149894714,-205.382247925,-51.6015319824,-205.932601929,-47.393032074,-204.753753662,-44.6853904724,-203.477325439,-41.801574707,-202.265670776,-39.1084480286,-198.780410767,-36.6861877441,-195.833862305,-36.4893493652,-196.261795044,-36.7814483643,-195.00491333,-34.10912323,-191.4793396,-31.7459506989,-188.529876709,-31.5988006592,-185.379226685,-31.4607810974,-182.428192139,-31.3494644165,-178.709472656,-33.3953094482,-177.223754883,-35.9474945068,-173.442947388,-62.8839912415,-174.168655396,-65.7465667725,-177.180465698,-68.7371139526,-180.048126221,-69.4425048828,-183.115005493,-70.1771850586,-185.991012573,-70.847694397,-190.030944824,-69.5464096069,-191.97492981,-67.323348999,-191.483108521,-67.4863586426,-194.370025635,-68.1082992554,-198.387435913,-66.739112854,-200.293670654,-64.4836044312,-202.314682007,-62.0626220703,-204.193389893,-59.7841339111,-204.822891235,-55.5867462158,-203.695236206,-52.8573875427,-199.651062012,-57.8205299377,-202.551925659,-58.3737449646,-206.535690308,-56.9095497131,-208.387832642,-54.6094169617,-210.350784302,-52.1411247253,-212.174865723,-49.8186683655,-212.70451355,-45.607509613,-211.512359619,-42.9056930542,-211.452026367,-43.42029953,-213.236694336,-41.0674285889,-213.695297241,-36.847946167,-212.457778931,-34.1666069031,-211.118850708,-31.3112659454,-209.848892212,-28.6451511383,-206.311706543,-26.2993392944,-203.361541748,-26.1666946411,-202.005142212,-39.742099762,-204.923202515,-40.1957969666,-208.854598999,-38.5962333679,-210.626983643,-36.2341079712,-212.504394531,-33.7001342773,-214.247955322,-31.3166618347,-214.633300781,-27.0898609161,-213.349456787,-24.4303913116,-213.306793213,-24.9467506409,-215.00994873,-22.5342311859,-215.323989868,-18.3015346527,-213.995529175,-15.6640806198,-212.559738159,-12.8561964035,-211.199325562,-10.2350702286,-207.584030151,-8.0115852356,-204.631057739,-7.97989940643,-207.613235474,-13.6451063156,-209.258636475,-11.1928215027,-209.472076416,-6.95386171341,-208.081344604,-4.34869766235,-206.579299927,-1.57569646835,-205.157058716,1.01238572598,-201.489944458,3.14939451218,-198.537063599,3.1109495163,-198.986907959,2.85385870934,-197.521240234,5.41760253906,-193.818649292,7.49250364304,-190.866821289,7.404296875,-187.715179443,7.29095935822,-184.764648438,7.16691160202,-181.220672607,4.83141613007,-179.942932129,2.16901516914,-190.220550537,-16.205165863,-193.157928467,-16.5098285675,-197.002868652,-14.7123327255,-198.652801514,-12.2631025314,-200.398834229,-9.63690376282,-202.01890564,-7.16781711578,-202.188720703,-2.92688369751,-200.771255493,-.33616951108,-200.754898071,-.854034900665,-202.333114624,1.6420058012,-202.431427002,5.88519763947,-200.970489502,8.4516544342,-199.393737793,11.1828632355,-197.901763916,13.731388092,-194.178024292,15.7680778503,-191.227279663,15.6494979858,-194.49382019,10.1433382034,-196.012298584,12.6761512756,-196.009841919,16.9204826355,-194.488372803,19.4515247345,-192.847213745,22.1445217133,-191.295120239,24.6569004059,-187.52406311,26.6045875549,-184.576965332,26.4159736633,-185.039291382,26.1820983887,-183.445083618,28.667963028,-179.641723633,30.5518188477,-176.69821167,30.3135623932,-173.556427002,30.0400390625,-170.616027832,29.7660522461,-167.195449829,27.2532939911,-166.054779053,24.5293388367,-178.332366943,18.5801296234,-179.763381958,21.1633892059,-179.615768433,25.4051532745,-178.008636475,27.882686615,-176.276351929,30.517988205,-174.63923645,32.9758224487,-170.80380249,34.793422699,-167.864852905,34.5041389465,-168.33493042,34.2862052917,-166.656661987,36.7160987854,-162.791137695,38.4687995911,-159.85748291,38.1300239563,-156.726882935,37.7492294312,-153.797576904,37.3748512268,-150.464904785,34.7465934753,-149.418060303,31.9852294922,-155.763793945,32.8336791992,-154.028289795,35.223033905,-150.122192383,36.883441925,-147.197433472,36.4751052856,-144.076751709,36.020072937,-141.157150269,35.5762481689,-137.8878479,32.8695907593,-136.90687561,30.0841407776,-137.30317688,30.4179077148,-134.391464233,29.9249362946,-131.168258667,27.16355896,-130.234375,24.3619785309,-129.255264282,21.364151001,-128.35546875,18.5514297485,-129.327407837,14.419883728,-131.386810303,12.3033075333,-131.386810303,-12.3033075333,-129.327407837,-14.419883728,-128.35546875,-18.5514297485,-129.255264282,-21.364151001,-130.234375,-24.3619785309,-131.168258667,-27.16355896,-134.391464233,-29.9249362946,-137.30317688,-30.4179077148,-136.90687561,-30.0841407776,-137.8878479,-32.8695907593,-141.157150269,-35.5762481689,-144.076751709,-36.020072937,-147.197433472,-36.4751052856,-150.122192383,-36.883441925,-154.028289795,-35.223033905,-155.763793945,-32.8336791992,-149.418060303,-31.9852294922,-150.464904785,-34.7465934753,-153.797576904,-37.3748512268,-156.726882935,-37.7492294312,-159.85748291,-38.1300239563,-162.791137695,-38.4687995911,-166.656661987,-36.7160987854,-168.33493042,-34.2862052917,-167.864852905,-34.5041389465,-170.80380249,-34.793422699,-174.63923645,-32.9758224487,-176.276351929,-30.517988205,-178.008636475,-27.882686615,-179.615768433,-25.4051532745,-179.763381958,-21.1633892059,-178.332366943,-18.5801296234,-166.054779053,-24.5293388367,-167.195449829,-27.2532939911,-170.616027832,-29.7660522461,-173.556427002,-30.0400390625,-176.69821167,-30.3135623932,-179.641723633,-30.5518188477,-183.445083618,-28.667963028,-185.039291382,-26.1820983887,-184.576965332,-26.4159736633,-187.52406311,-26.6045875549,-191.295120239,-24.6569004059,-192.847213745,-22.1445217133,-194.488372803,-19.4515247345,-196.009841919,-16.9204826355,-196.012298584,-12.6761512756,-194.49382019,-10.1433382034,-191.227279663,-15.6494979858,-194.178024292,-15.7680778503,-197.901763916,-13.731388092,-199.393737793,-11.1828632355,-200.970489502,-8.4516544342,-202.431427002,-5.88519763947,-202.333114624,-1.6420058012,-200.754898071,.854034900665,-200.771255493,.33616951108,-202.188720703,2.92688369751,-202.01890564,7.16781711578,-200.398834229,9.63690376282,-198.652801514,12.2631025314,-197.002868652,14.7123327255,-193.157928467,16.5098285675,-190.220550537,16.205165863,-179.942932129,-2.16901516914,-181.220672607,-4.83141613007,-184.764648438,-7.16691160202,-187.715179443,-7.29095935822,-190.866821289,-7.404296875,-193.818649292,-7.49250364304,-197.521240234,-5.41760253906,-198.986907959,-2.85385870934,-198.537063599,-3.1109495163,-201.489944458,-3.14939451218,-205.157058716,-1.01238572598,-206.579299927,1.57569646835,-208.081344604,4.34869766235,-209.472076416,6.95386171341,-209.258636475,11.1928215027,-207.613235474,13.6451063156,-204.631057739,7.97989940643,-207.584030151,8.0115852356,-211.199325562,10.2350702286,-212.559738159,12.8561964035,-213.995529175,15.6640806198,-215.323989868,18.3015346527,-215.00994873,22.5342311859,-213.306793213,24.9467506409,-213.349456787,24.4303913116,-214.633300781,27.0898609161,-214.247955322,31.3166618347,-212.504394531,33.7001342773,-210.626983643,36.2341079712,-208.854598999,38.5962333679,-204.923202515,40.1957969666,-202.005142212,39.742099762,-203.361541748,26.1666946411,-206.311706543,26.2993392944,-209.848892212,28.6451511383,-211.118850708,31.3112659454,-212.457778931,34.1666069031,-213.695297241,36.847946167,-213.236694336,41.0674285889,-211.452026367,43.42029953,-211.512359619,42.9056930542,-212.70451355,45.607509613,-212.174865723,49.8186683655,-210.350784302,52.1411247253,-208.387832642,54.6094169617,-206.535690308,56.9095497131,-202.551925659,58.3737449646,-199.651062012,57.8205299377,-203.695236206,52.8573875427,-204.822891235,55.5867462158,-204.193389893,59.7841339111,-202.314682007,62.0626220703,-200.293670654,64.4836044312,-198.387435913,66.739112854,-194.370025635,68.1082992554,-191.483108521,67.4863586426,-191.97492981,67.323348999,-190.030944824,69.5464096069,-185.991012573,70.847694397,-183.115005493,70.1771850586,-180.048126221,69.4425048828,-177.180465698,68.7371139526,-174.168655396,65.7465667725,-173.442947388,62.8839912415,-177.223754883,35.9474945068,-178.709472656,33.3953094482,-182.428192139,31.3494644165,-185.379226685,31.4607810974,-188.529876709,31.5988006592,-191.4793396,31.7459506989,-195.00491333,34.10912323,-196.261795044,36.7814483643,-195.833862305,36.4893493652,-198.780410767,36.6861877441,-202.265670776,39.1084480286,-203.477325439,41.801574707,-204.753753662,44.6853904724,-205.932601929,47.393032074,-205.382247925,51.6015319824,-203.546798706,53.9149894714,-201.025253296,48.0302810669,-203.966323853,48.2970352173,-207.393051147,50.8013725281,-208.540405273,53.5225105286,-209.748031616,56.4358253479,-210.862213135,59.1706962585,-210.212081909,63.3649406433,-208.322219849,65.6341629028,-208.405853271,65.1228408813,-209.473846436,67.8761062622,-208.753143311,72.0587997437,-206.825271606,74.2958450317,-204.752029419,76.6722640991,-202.797164917,78.8857345581,-198.75088501,80.167137146,-195.878204346,79.4824905396,-198.311447144,66.0582199097,-201.241668701,66.4253921509,-204.580764771,69.0454406738,-205.634399414,71.8042297363,-206.741668701,74.7571182251,-207.761703491,77.5284957886,-206.968536377,81.6980514526,-205.002166748,83.9013214111,-205.103286743,83.3931655884,-206.076477051,86.1813354492,-205.213134766,90.3369369507,-203.209899902,92.5067596436,-201.056610107,94.8108825684,-199.027175903,96.9562149048,-194.939453125,98.0984954834,-192.091888428,97.3160171509,-196.518447876,92.6907043457,-197.425140381,95.5012054443,-196.463409424,99.6351318359,-194.409194946,101.756767273,-192.201797485,104.009109497,-190.122009277,106.105636597,-186.008285522,107.150543213,-183.180084229,106.300674438,-183.683349609,106.177345276,-181.568496704,108.238525391,-177.437774658,109.213928223,-174.624282837,108.316505432,-171.625656128,107.339927673,-168.823272705,106.408401489,-166.059204102,103.187507629,-165.563781738,100.276222229,-180.502593994,85.4414367676,-183.410339355,85.9571838379,-186.611846924,88.7437133789,-187.523757935,91.5525283813,-188.479354858,94.5579299927,-189.357086182,97.3776016235,-188.352859497,101.501419067,-186.276931763,103.601806641,-186.403762817,103.099441528,-187.233856201,105.933517456,-186.160247803,110.039810181,-184.049224854,112.104919434,-181.781509399,114.296516418,-179.645568848,116.335838318,-175.505020142,117.268692017,-172.700927734,116.34236145,-177.357055664,111.948219299,-178.119628906,114.801200867,-176.948791504,118.880851746,-174.789337158,120.895233154,-172.470230103,123.03237915,-170.286453247,125.020385742,-166.124954224,125.854667664,-163.343643188,124.862007141,-163.852508545,124.764442444,-161.635528564,126.715370178,-157.460540771,127.479393005,-154.696365356,126.440010071,-151.751266479,125.312141418,-148.999908447,124.239265442,-146.403244019,120.88192749,-146.056564331,117.949203491,-159.497512817,115.609832764,-160.162078857,118.487213135,-158.852416992,122.524452209,-156.625350952,124.463813782,-154.234512329,126.520385742,-151.984039307,128.432571411,-147.796417236,129.124053955,-145.050674438,128.036880493,-145.562576294,127.956771851,-143.280197144,129.830749512,-139.08152771,130.451553345,-136.354492188,129.318252563,-133.449707031,128.090316772,-130.73664856,126.923995972,-128.25630188,123.479820251,-128.010101318,120.536956787,-133.877044678,123.099578857,-131.550827026,124.918830872,-127.338577271,125.43976593,-124.639228821,124.242027283,-121.764419556,122.945472717,-119.079826355,121.715034485,-116.681983948,118.212944031,-116.505722046,115.265075684,-116.794822693,115.695030212,-114.131347656,114.419540405,-111.792861938,110.8775177,-111.66632843,107.927101135,-111.550346375,104.775566101,-111.459640503,101.823822021,-113.531417847,98.1194839478,-116.093925476,96.6516342163,-138.815475464,76.9742050171,-140.634353638,74.6476669312,-144.59664917,73.126335144,-147.505157471,73.6377792358,-150.607818604,74.2028121948,-153.509902954,74.7495422363,-156.681503296,77.5700378418,-157.563430786,80.3884124756,-157.179168701,80.0408477783,-160.071624756,80.6364059448,-163.195266724,83.5099716187,-164.029556274,86.3428039551,-164.902130127,89.3733520508,-165.701950073,92.2161178589,-164.584609985,96.3107376099,-162.451705933,98.3532104492,-160.75352478,92.1803512573,-163.631027222,92.8444213867,-166.685516357,95.7913360596,-167.452316284,98.6431808472,-168.252655029,101.693618774,-168.984786987,104.55456543,-167.770523071,108.621505737,-165.589706421,110.612754822,-165.742111206,110.117546082,-166.425888062,112.99042511,-165.143295288,117.036331177,-162.929229736,118.990539551,-160.5521698,121.063056946,-158.314544678,122.990242004,-154.131637573,123.709701538,-151.378692627,122.640914917,-155.614242554,109.672035217,-158.467346191,110.434112549,-161.419281006,113.483764648,-162.088134766,116.360160828,-162.783691406,119.436172485,-163.417541504,122.320480347,-162.064910889,126.343513489,-159.81729126,128.259033203,-159.986541748,127.769332886,-160.571685791,130.663925171,-159.151443481,134.663574219,-156.871871948,136.540939331,-154.425354004,138.530975342,-152.123123169,140.380508423,-147.918060303,140.956512451,-145.203292847,139.794204712,-150.217529297,135.813583374,-150.733764648,138.721237183,-149.218948364,142.686050415,-146.89541626,144.508758545,-144.40234375,146.440124512,-142.056854248,148.234466553,-137.839309692,148.710479736,-135.152893066,147.484024048,-135.668212891,147.430252075,-133.292800903,149.184814453,-129.067840576,149.589660645,-126.40246582,148.318099976,-123.564399719,146.942962646,-120.914672852,145.639129639,-118.614089966,142.072387695,-118.519012451,139.120788574,-135.335769653,126.454421997,-138.14642334,127.360671997,-140.939422607,130.556533813,-141.461044312,133.463241577,-141.999237061,136.570648193,-142.485534668,139.483474731,-140.929992676,143.432495117,-138.587844849,145.231170654,-138.781799316,144.750732422,-139.218933105,147.671325684,-137.597076416,151.593566895,-135.22492981,153.352523804,-132.680358887,155.215515137,-130.287017822,156.945541382,-126.058097839,157.306884766,-123.405952454,156.007965088,-128.616195679,152.287536621,-128.983840942,155.217712402,-127.269317627,159.100341797,-124.856063843,160.802474976,-122.267951965,162.604537964,-119.834220886,164.277236938,-115.597923279,164.538040161,-112.977371216,163.176513672,-113.494766235,163.149047852,-111.033187866,164.780487061,-106.793083191,164.969894409,-104.195846558,163.56439209,-101.431419373,162.046646118,-98.8514404297,160.609710693,-96.7352828979,156.930557251,-96.7904815674,153.977935791,-110.424674988,153.48739624,-110.691902161,156.428436279,-108.845611572,160.250152588,-106.375572205,161.868789673,-103.727371216,163.581268311,-101.237854004,165.169769287,-96.9951019287,165.285568237,-94.4226455688,163.835220337,-94.9406738281,163.825454712,-92.4247436523,165.371780396,-88.1806488037,165.416061401,-85.6329956055,163.922546387,-82.922088623,162.311203003,-80.3927536011,160.786880493,-78.4036407471,157.037506104,-78.5597686768,154.088500977,-84.0238952637,157.424865723,-81.4719543457,158.911010742,-77.2280044556,158.854492188,-74.7165374756,157.300918579,-72.0446548462,155.625610352,-69.5522384644,154.041671753,-67.6527175903,150.246109009,-67.8788375854,147.301651001,-68.106803894,147.766937256,-65.6414337158,146.141204834,-63.8061599731,142.314178467,-64.0818710327,139.373931885,-64.395362854,136.23588562,-64.7067642212,133.299224854,-67.2628707886,129.910903931,-70.0011291504,128.805023193,-97.2014312744,128.911071777,-99.9309844971,130.038269043,-102.460586548,133.446411133,-102.749076843,136.385437012,-103.038101196,139.525817871,-103.290893555,142.46812439,-101.425811768,146.280715942,-98.947845459,147.887176514,-99.17943573,147.423690796,-99.3825912476,150.369827271,-97.4535217285,154.15045166,-94.9488372803,155.714920044,-92.263961792,157.369354248,-89.7404632568,158.903274536,-85.4962005615,158.926696777,-82.9559326172,157.420700073,-88.445892334,154.127029419,-88.5790405273,157.077163696,-86.5607528687,160.810913086,-84.0196151733,162.315444946,-81.2962112427,163.905654907,-78.7369995117,165.379226685,-74.4933700562,165.301864624,-71.9895782471,163.735961914,-72.5075149536,163.749786377,-69.923828125,165.180007935,-65.6821060181,165.03112793,-63.2050628662,163.42326355,-60.5702819824,161.690170288,-58.1129417419,160.052337646,-56.2964935303,156.216339111,-56.5866622925,153.277496338,-70.2166061401,153.874328613,-70.2487869263,156.827285767,-68.1039962769,160.489837646,-65.5129013062,161.906600952,-62.7367210388,163.402755737,-60.1286087036,164.787963867,-55.8901138306,164.565505981,-53.4413261414,162.914932251,-53.9584846497,162.946426392,-51.3274040222,164.287475586,-47.0932540894,163.993606567,-44.6726341248,162.301986694,-42.0986595154,160.479812622,-39.6987571716,158.758895874,-38.0145530701,154.863037109,-38.4050445557,151.935836792,-43.5861206055,155.696777344,-40.9239311218,156.974975586,-36.6979560852,156.580657959,-34.3181877136,154.83203125,-31.7882099152,152.949249268,-29.4298553467,151.171844482,-27.838634491,147.237075806,-28.2985248566,144.319961548,-28.4887104034,144.8019104,-26.1606464386,142.985015869,-24.6359729767,139.023986816,-25.1449623108,136.11505127,-25.7073726654,133.011917114,-26.2516517639,130.109390259,-29.0694770813,126.935386658,-31.8871059418,126.051071167,-48.6046066284,138.848175049,-48.4865150452,141.798950195,-46.1581878662,145.34765625,-43.498374939,146.630767822,-40.6496734619,147.983764648,-37.9744720459,149.234481812,-33.7527770996,148.796707153,-31.39112854,147.023666382,-31.9060211182,147.081451416,-29.2101192474,148.286911011,-24.9964027405,147.778060913,-22.66497612,145.96546936,-20.1870250702,144.014709473,-17.8777809143,142.173950195,-16.3939476013,138.19744873,-16.932844162,135.293899536,-21.9158859253,139.313537598,-19.1921195984,140.45463562,-14.9916744232,139.845855713,-12.7039442062,137.978408813,-10.273018837,135.96937561,-8.00813674927,134.074295044,-6.61914587021,130.063674927,-7.2268409729,127.173736572,-7.39227056503,127.664749146,-5.1596493721,125.731758118,-3.83845019341,121.698303223,-4.49476528168,118.819015503,-5.21430635452,115.748542786,-5.90554094315,112.877433777,-8.88118362427,109.850891113,-11.7401504517,109.111083984,-15.8744115829,122.112594604,-13.1132173538,123.159889221,-8.93604850769,122.407844543,-6.71351528168,120.463272095,-4.35271167755,118.372276306,-2.15395712852,116.400856018,-.902923822403,112.345085144,-1.60908639431,109.477615356,-1.75762856007,109.973983765,.407587647438,107.965782166,1.59008848667,103.889511108,.835698723793,101.034355164,.0115814423189,97.9902648926,-.777427017689,95.1444854736,-3.85482382774,92.2214813232,-6.73741674423,91.5798568726,-4.99113607407,97.7392730713,-2.87421751022,95.680229187,-1.78884601593,91.5770263672,-2.61082220078,88.7405853271,-3.50699210167,85.7169265747,-4.36335420609,82.8906784058,-7.50929355621,80.041557312,-10.4063091278,79.4685668945,-10.0193557739,79.8131332397,-10.9232301712,77.0017318726,-14.1167392731,74.2060470581,-17.0230007172,73.681968689,-20.1299552917,73.1411514282,-23.0423679352,72.6524047852,-26.9926872253,74.2045974731,-28.7933578491,76.5452423096,28.7933597565,76.5452423096,26.99269104,74.2045974731,23.0423698425,72.6524047852,20.1299571991,73.1411514282,17.0230026245,73.681968689,14.1167430878,74.2060470581,10.9232311249,77.0017318726,10.0193586349,79.8131332397,10.4063119888,79.4685668945,7.50929546356,80.041557312,4.36335659027,82.8906784058,3.50699448586,85.7169265747,2.61082339287,88.7405853271,1.78884744644,91.5770263672,2.87421870232,95.680229187,4.99113702774,97.7392730713,6.7374162674,91.5798568726,3.85482287407,92.2214813232,.777425825596,95.1444854736,-.0115825552493,97.9902648926,-.83569920063,101.034355164,-1.59008932114,103.889511108,-.407588750124,107.965782166,1.75762689114,109.973983765,1.60908639431,109.477615356,.902923822403,112.345085144,2.15395712852,116.400856018,4.35271167755,118.372276306,6.71351337433,120.463272095,8.93604755402,122.407844543,13.1132173538,123.159889221,15.8744115829,122.112594604,11.7401504517,109.111083984,8.88118362427,109.850891113,5.90554094315,112.877433777,5.21430635452,115.748542786,4.49476528168,118.819015503,3.83845019341,121.698303223,5.1596493721,125.731758118,7.39227056503,127.664749146,7.2268409729,127.173736572,6.61914587021,130.063674927,8.00813674927,134.074295044,10.273018837,135.96937561,12.7039442062,137.978408813,14.9916744232,139.845855713,19.1921195984,140.45463562,21.9158859253,139.313537598,16.932844162,135.293899536,16.3939476013,138.19744873,17.8777809143,142.173950195,20.1870250702,144.014709473,22.66497612,145.96546936,24.9964027405,147.778060913,29.2101192474,148.286911011,31.9060211182,147.081451416,31.39112854,147.023666382,33.7527770996,148.796707153,37.9744720459,149.234481812,40.6496734619,147.983764648,43.498374939,146.630767822,46.1581878662,145.34765625,48.4865150452,141.798950195,48.6046066284,138.848175049,31.8871116638,126.051071167,29.0694828033,126.935386658,26.2516593933,130.109390259,25.7073764801,133.011917114,25.1449699402,136.11505127,24.6359806061,139.023986816,26.1606559753,142.985015869,28.4887237549,144.8019104,28.2985286713,144.319976807,27.8386383057,147.237091064,29.4298591614,151.171844482,31.7882137299,152.949249268,34.318195343,154.83203125,36.6979637146,156.580657959,40.9239425659,156.974975586,43.5861282349,155.696777344,38.4050559998,151.935852051,38.0145606995,154.863052368,39.6987724304,158.758926392,42.0986671448,160.479827881,44.6726493835,162.302001953,47.0932693481,163.993652344,51.3274116516,164.287475586,53.9584999084,162.94644165,53.4413337708,162.914932251,55.8901176453,164.565505981,60.128616333,164.787963867,62.7367286682,163.402755737,65.5129089355,161.906600952,68.1040039062,160.489837646,70.2487869263,156.827285767,70.2166061401,153.874328613,56.5866622925,153.277496338,56.2964935303,156.216339111,58.1129417419,160.052337646,60.5702819824,161.690170288,63.2050666809,163.42326355,65.6821212769,165.03112793,69.9238357544,165.180007935,72.5075302124,163.749786377,71.9895858765,163.735961914,74.4933853149,165.301864624,78.7370071411,165.379226685,81.2962188721,163.905654907,84.0196228027,162.315444946,86.5607528687,160.810913086,88.5790405273,157.077163696,88.4459075928,154.127029419,82.9559402466,157.420700073,85.4962081909,158.926696777,89.7404708862,158.903274536,92.2639770508,157.369354248,94.9488449097,155.714904785,97.4535369873,154.150436401,99.382598877,150.369827271,99.1794509888,147.423690796,98.9478530884,147.887176514,101.425819397,146.280715942,103.290893555,142.46812439,103.038116455,139.525817871,102.749084473,136.385437012,102.460594177,133.446411133,99.9309921265,130.038284302,97.2014389038,128.911071777,70.0011291504,128.805007935,67.2628707886,129.910888672,64.7067642212,133.299209595,64.395362854,136.23588562,64.0818710327,139.373916626,63.8061599731,142.314163208,65.6414337158,146.141174316,68.106803894,147.766906738,67.8788375854,147.301635742,67.6527175903,150.24609375,69.5522384644,154.041656494,72.0446548462,155.625595093,74.7165374756,157.30090332,77.2280044556,158.854476929,81.4719543457,158.910980225,84.0238952637,157.424835205,78.5597686768,154.088500977,78.4036407471,157.037506104,80.3927536011,160.786880493,82.922088623,162.311203003,85.6329956055,163.922546387,88.1806488037,165.416061401,92.4247436523,165.371780396,94.9406738281,163.825454712,94.4226455688,163.835220337,96.9951019287,165.285552979,101.237854004,165.16973877,103.727371216,163.581237793,106.375572205,161.868759155,108.845611572,160.25012207,110.691902161,156.428405762,110.424674988,153.487380981,96.7904968262,153.977935791,96.7352905273,156.930557251,98.8514556885,160.609710693,101.431427002,162.046646118,104.195854187,163.56439209,106.793083191,164.969894409,111.033195496,164.780487061,113.494773865,163.149047852,112.977386475,163.176513672,115.597930908,164.538040161,119.834243774,164.277236938,122.267974854,162.604507446,124.856086731,160.802474976,127.269325256,159.100341797,128.98387146,155.217712402,128.616195679,152.287536621,123.405952454,156.007949829,126.058097839,157.306884766,130.287017822,156.945526123,132.680358887,155.215484619,135.22492981,153.352508545,137.597076416,151.593536377,139.218933105,147.671310425,138.781799316,144.750717163,138.587844849,145.231170654,140.929992676,143.432479858,142.485534668,139.483459473,141.999237061,136.570648193,141.461044312,133.463241577,140.939422607,130.556533813,138.14642334,127.360656738,135.335769653,126.454421997,118.519012451,139.120758057,118.614089966,142.072372437,120.914672852,145.63911438,123.564399719,146.942947388,126.40246582,148.318084717,129.067840576,149.589645386,133.292800903,149.184799194,135.668212891,147.430236816,135.152893066,147.484008789,137.839309692,148.710449219,142.056854248,148.234466553,144.40234375,146.440109253,146.89541626,144.508743286,149.218948364,142.686035156,150.733764648,138.721221924,150.217529297,135.813552856,145.203292847,139.794189453,147.918060303,140.956512451,152.123123169,140.380477905,154.425354004,138.530944824,156.871871948,136.540908813,159.151443481,134.66355896,160.571685791,130.663909912,159.986541748,127.769325256,159.81729126,128.259017944,162.064910889,126.343490601,163.417541504,122.320457458,162.783691406,119.436149597,162.088134766,116.360153198,161.419281006,113.48374939,158.467330933,110.434104919,155.614212036,109.672019958,151.378692627,122.640899658,154.131637573,123.709701538,158.314559937,122.990226746,160.552185059,121.063049316,162.929229736,118.990524292,165.143295288,117.036315918,166.425888062,112.99042511,165.742111206,110.117538452,165.589706421,110.612739563,167.770523071,108.621490479,168.984786987,104.554550171,168.252655029,101.693611145,167.452316284,98.6431732178,166.685516357,95.7913284302,163.631027222,92.8444213867,160.75352478,92.1803359985,162.451705933,98.3532028198,164.584609985,96.3107299805,165.701950073,92.2161026001,164.902130127,89.373336792,164.029556274,86.3427963257,163.195266724,83.5099563599,160.071624756,80.6363983154,157.179168701,80.0408401489,157.563430786,80.3883972168,156.681503296,77.570022583,153.509902954,74.7495269775,150.607818604,74.202796936,147.505157471,73.6377716064,144.59664917,73.1263275146,140.634353638,74.6476669312,138.815475464,76.9741973877,116.093925476,96.6516342163,113.531417847,98.1194839478,111.459640503,101.823822021,111.550346375,104.775566101,111.66632843,107.927101135,111.792861938,110.8775177,114.131347656,114.419540405,116.794822693,115.695030212,116.505722046,115.265090942,116.681983948,118.21295929,119.079826355,121.715049744,121.764419556,122.945472717,124.63923645,124.242012024,127.338577271,125.43976593,131.550827026,124.918823242,133.877044678,123.099578857,128.010101318,120.536949158,128.25630188,123.479812622,130.73664856,126.923980713,133.449707031,128.090316772,136.354492188,129.318237305,139.08152771,130.451538086,143.280212402,129.830734253,145.562576294,127.956756592,145.050674438,128.036865234,147.796417236,129.124023438,151.984039307,128.432556152,154.234512329,126.520370483,156.625350952,124.463790894,158.852416992,122.524429321,160.162078857,118.487197876,159.497512817,115.609809875,146.056564331,117.949180603,146.403244019,120.881896973,148.999908447,124.239242554,151.751266479,125.31212616,154.696365356,126.439987183,157.460540771,127.479377747,161.635528564,126.715354919,163.852508545,124.764427185,163.343643188,124.861991882,166.124954224,125.854652405,170.286453247,125.020362854,172.470230103,123.032356262,174.789337158,120.895225525,176.948791504,118.880828857,178.119628906,114.801177979,177.357055664,111.948204041,172.700927734,116.342346191,175.505020142,117.268661499,179.645568848,116.33581543,181.781509399,114.296508789,184.049224854,112.104896545,186.160247803,110.039802551,187.233856201,105.933509827,186.403762817,103.099433899,186.276931763,103.601783752,188.352859497,101.501411438,189.357086182,97.3775863647,188.479354858,94.5579071045,187.523757935,91.5525131226,186.611846924,88.7436904907,183.410339355,85.9571762085,180.502593994,85.4414215088,165.563781738,100.27620697,166.059204102,103.187492371,168.823272705,106.408378601,171.625656128,107.339920044,174.624282837,108.316490173,177.437774658,109.213920593,181.568496704,108.238502502,183.683349609,106.177322388,183.180084229,106.30065155,186.008285522,107.150520325,190.122009277,106.105613708,192.201797485,104.009101868,194.409194946,101.756744385,196.463409424,99.6351089478,197.425140381,95.5011825562,196.518447876,92.6906890869,192.091888428,97.3160018921,194.939453125,98.0984802246,199.027175903,96.9561920166,201.056610107,94.8108596802,203.209899902,92.5067367554,205.213134766,90.3369216919,206.076477051,86.1813201904,205.103286743,83.3931427002,205.002166748,83.9013061523,206.968536377,81.6980361938,207.761703491,77.5284805298,206.741668701,74.7570953369,205.634399414,71.8042068481,204.580764771,69.045425415,201.241668701,66.4253692627,198.311447144,66.0581970215,195.878204346,79.4824676514,198.75088501,80.1671142578,202.797164917,78.8857192993,204.752029419,76.6722412109,206.825271606,74.2958297729,208.753143311,72.0587768555,209.473846436,67.8760910034,208.405853271,65.1228256226,208.322219849,65.634147644,210.212081909,63.3649215698,210.862213135,59.1706771851,209.748031616,56.4358062744,208.540405273,53.5224914551,207.393051147,50.8013572693,203.966323853,48.2970199585,201.025253296,48.0302658081,203.546798706,53.9149703979,205.382247925,51.6015129089,205.932601929,47.3930168152,204.753753662,44.6853713989,203.477325439,41.8015556335,202.265670776,39.1084289551,198.780410767,36.6861724854,195.833862305,36.4893341064,196.261795044,36.7814254761,195.00491333,34.1091003418,191.4793396,31.745929718,188.529876709,31.5987796783,185.379226685,31.4607658386,182.428192139,31.349445343,178.709472656,33.3952903748,177.223754883,35.9474830627,173.442947388,62.883972168,174.168655396,65.7465515137,177.180465698,68.7370910645,180.048126221,69.4424819946,183.115005493,70.177154541,185.991012573,70.8476715088,190.030944824,69.5463867188,191.97492981,67.3233261108,191.483108521,67.4863357544,194.370025635,68.1082839966,198.387435913,66.7390899658,200.293670654,64.4835891724,202.314712524,62.0626029968,204.193389893,59.7841148376,204.822891235,55.5867271423,203.695236206,52.8573646545,199.651062012,57.8205108643,202.551925659,58.3737258911,206.535690308,56.9095344543,208.387832642,54.6093978882,210.350784302,52.1411018372,212.174865723,49.8186416626,212.70451355,45.6074867249,211.512359619,42.9056739807,211.452026367,43.4202766418,213.236694336,41.0674057007,213.695297241,36.8479232788,212.457778931,34.1665840149,211.118850708,31.3112411499,209.848892212,28.6451263428,206.311706543,26.2993202209,203.361541748,26.1666755676,202.005142212,39.7420883179,204.923202515,40.1957855225,208.854598999,38.5962142944,210.626983643,36.2340927124,212.504394531,33.7001190186,214.247955322,31.3166465759,214.633300781,27.0898456573,213.349456787,24.4303760529,213.306793213,24.9467353821,215.00994873,22.5342159271,215.323989868,18.3015174866,213.995529175,15.6640634537,212.559738159,12.85617733,211.199325562,10.2350521088,207.584030151,8.01156711578,204.631057739,7.97988176346,207.613235474,13.6450881958,209.258636475,11.1928043365,209.472076416,6.95384311676,208.081344604,4.34868001938,206.579299927,1.57567942142,205.157058716,-1.01240253448,201.489944458,-3.1494102478,198.537063599,-3.11096477509,198.986907959,-2.85387158394,197.521240234,-5.4176158905,193.818634033,-7.49251651764,190.866821289,-7.40430879593,187.715179443,-7.29097270966,184.764648438,-7.16692399979,181.220672607,-4.83142757416,179.942932129,-2.1690261364,190.220550537,16.2051620483,193.157928467,16.5098266602,197.002868652,14.7123308182,198.652801514,12.2631015778,200.398834229,9.63690280914,202.01890564,7.16781568527,202.188720703,2.926882267,200.771255493,.336168378592,200.754898071,.854031682014,202.333114624,-1.64200925827,202.431427002,-5.88520145416,200.970489502,-8.45165729523,199.393737793,-11.1828660965,197.901763916,-13.7313909531,194.178024292,-15.7680797577,191.227279663,-15.6495008469,194.49382019,-10.1433401108,196.012298584,-12.676153183,196.009841919,-16.9204845428,194.488372803,-19.4515247345,192.847213745,-22.1445236206,191.295120239,-24.6569004059,187.52406311,-26.6045913696,184.576965332,-26.415977478,185.039291382,-26.182100296,183.445083618,-28.6679649353,179.641723633,-30.551820755,176.69821167,-30.3135643005,173.556427002,-30.0400447845,170.616027832,-29.7660579681,167.195449829,-27.2532978058,166.054779053,-24.5293426514,178.332366943,-18.5801353455,179.763381958,-21.163394928,179.615768433,-25.4051570892,178.008636475,-27.8826904297,176.276351929,-30.5179901123,174.63923645,-32.9758224487,170.80380249,-34.793422699,167.864852905,-34.5041389465,168.33493042,-34.2862167358,166.656661987,-36.7161064148,162.791137695,-38.4688072205,159.85748291,-38.1300315857,156.726882935,-37.7492332458,153.797576904,-37.3748588562,150.464904785,-34.7466011047,149.418060303,-31.9852313995,155.763793945,-32.8336830139,154.028289795,-35.2230377197,150.122192383,-36.8834495544,147.197433472,-36.4751091003,144.076751709,-36.0200805664,141.157150269,-35.5762519836,137.8878479,-32.869594574,136.90687561,-30.0841503143,137.30317688,-30.4179115295,134.391464233,-29.9249401093,131.168258667,-27.1635665894,130.234375,-24.3619804382,129.255264282,-21.3641529083,128.35546875,-18.5514354706,129.327407837,-14.4198875427,131.386810303,-12.3033123016,131.38684082,12.3032913208,129.327453613,14.4198684692,128.355499268,18.5514144897,129.2552948,21.3641357422,130.234420776,24.3619651794,131.168304443,27.1635513306,134.391525269,29.9249210358,137.303222656,30.4178924561,136.906921387,30.0841274261,137.887893677,32.8695755005,141.157196045,35.5762290955,144.076797485,36.0200576782,147.197463989,36.4750823975,150.1222229,36.8834266663,154.028320312,35.2230072021,155.763824463,32.8336524963,149.418106079,31.9852085114,150.464935303,34.7465744019,153.797622681,37.374835968,156.726928711,37.749206543,159.857513428,38.1300048828,162.791168213,38.4687805176,166.656677246,36.7160797119,168.334976196,34.2861862183,167.864883423,34.5041122437,170.803833008,34.7933921814,174.639282227,32.9757957458,176.276382446,30.5179595947,178.008666992,27.8826599121,179.615783691,25.4051265717,179.763397217,21.1633605957,178.332397461,18.5801010132,166.054824829,24.5293178558,167.195480347,27.2532730103,170.616088867,29.7660369873,173.556472778,30.0400238037,176.698272705,30.3135414124,179.641769409,30.5517959595,183.445114136,28.6679401398,185.039321899,26.1820755005,184.57699585,26.4159488678,187.524093628,26.6045627594,191.295166016,24.6568717957,192.847244263,22.1444969177,194.48840332,19.4514980316,196.009887695,16.9204559326,196.01234436,12.6761255264,194.493835449,10.1433115005,191.227294922,15.6494722366,194.178039551,15.7680501938,197.901779175,13.7313604355,199.393768311,11.1828346252,200.97052002,8.45162582397,202.431442261,5.8851685524,202.333129883,1.64197587967,200.75491333,-.854064583778,200.771270752,-.336198985577,202.188751221,-2.92691326141,202.01890564,-7.16784524918,200.398834229,-9.63693237305,198.652816772,-12.2631320953,197.002868652,-14.7123613358,193.157943726,-16.5098552704,190.220565796,-16.2051925659,179.942932129,2.16899299622,181.220687866,4.83139419556,184.764678955,7.16689014435,187.715209961,7.29093742371,190.866851807,7.40427303314,193.818664551,7.49247980118,197.521255493,5.4175786972,198.986923218,2.85383462906,198.537078857,3.11092591286,201.489959717,3.14937019348,205.157058716,1.01236081123,206.579330444,-1.57572174072,208.081359863,-4.34872245789,209.472076416,-6.9538860321,209.258651733,-11.1928462982,207.613250732,-13.6451311111,204.631088257,-7.97992610931,207.584060669,-8.01161193848,211.199356079,-10.2350969315,212.559738159,-12.8562231064,213.995529175,-15.6641082764,215.324020386,-18.3015594482,215.00994873,-22.5342559814,213.306793213,-24.9467773438,213.349472046,-24.4304180145,214.63331604,-27.089887619,214.247970581,-31.3166885376,212.504394531,-33.7001647949,210.626998901,-36.2341384888,208.854598999,-38.5962600708,204.923202515,-40.1958312988,202.005142212,-39.7421264648,203.361541748,-26.1667194366,206.311706543,-26.29936409,209.848892212,-28.6451759338,211.118850708,-31.3112869263,212.457778931,-34.1666297913,213.695297241,-36.8479690552,213.236694336,-41.0674514771,211.452026367,-43.4203224182,211.512359619,-42.9057235718,212.70451355,-45.6075363159,212.174865723,-49.8186950684,210.350753784,-52.1411552429,208.387832642,-54.6094398499,206.535690308,-56.909576416,202.551925659,-58.3737678528,199.651062012,-57.8205528259,203.695236206,-52.8574142456,204.822860718,-55.5867767334,204.193389893,-59.7841567993,202.314682007,-62.0626487732,200.293670654,-64.4836349487,198.387435913,-66.7391281128,194.370025635,-68.1083221436,191.483108521,-67.4863739014,191.97492981,-67.3233795166,190.030944824,-69.5464324951,185.991012573,-70.8477172852,183.115005493,-70.1772003174,180.048126221,-69.4425201416,177.180465698,-68.7371292114,174.168655396,-65.7465896606,173.442947388,-62.8840026855,177.223754883,-35.9475212097,178.709472656,-33.3953323364,182.428192139,-31.3494911194,185.379226685,-31.460811615,188.529876709,-31.5988292694,191.4793396,-31.7459793091,195.00491333,-34.1091537476,196.261795044,-36.7814788818,195.833862305,-36.4893798828,198.780410767,-36.686214447,202.265670776,-39.1084785461,203.477325439,-41.8016090393,204.753753662,-44.68542099,205.932601929,-47.3930664062,205.382247925,-51.6015625,203.546798706,-53.915019989,201.025238037,-48.0303115845,203.966308594,-48.2970619202,207.393051147,-50.801399231,208.540405273,-53.5225410461,209.748001099,-56.4358558655,210.862213135,-59.1707267761,210.212081909,-63.3649711609,208.322219849,-65.6341934204,208.405853271,-65.1228713989,209.473831177,-67.8761291504,208.753128052,-72.0588226318,206.825271606,-74.2958679199,204.75201416,-76.6722869873,202.797134399,-78.8857650757,198.750869751,-80.1671600342,195.878189087,-79.4825134277,198.311447144,-66.0582580566,201.241668701,-66.4254226685,204.580764771,-69.0454788208,205.634399414,-71.8042602539,206.741668701,-74.7571716309,207.761703491,-77.5285415649,206.968536377,-81.6980895996,205.002166748,-83.9013595581,205.103256226,-83.3932037354,206.076446533,-86.1813735962,205.213119507,-90.3369750977,203.209899902,-92.5067901611,201.056594849,-94.8109207153,199.027160645,-96.9562454224,194.939437866,-98.0985336304,192.091873169,-97.3160552979,196.518432617,-92.6907424927,197.425140381,-95.5012359619,196.463378906,-99.6351623535,194.409194946,-101.75680542,192.201782227,-104.009147644,190.12197876,-106.105674744,186.008270264,-107.15058136,183.18006897,-106.300712585,183.683334351,-106.177383423,181.568466187,-108.238563538,177.437759399,-109.213981628,174.624267578,-108.316551208,171.62562561,-107.33996582,168.823257446,-106.408439636,166.059173584,-103.187545776,165.563751221,-100.276252747,180.502593994,-85.4414520264,183.410339355,-85.9572143555,186.611846924,-88.7437515259,187.523757935,-91.5525512695,188.479354858,-94.5579528809,189.357086182,-97.3776397705,188.352859497,-101.501449585,186.276931763,-103.601837158,186.403762817,-103.099472046,187.233856201,-105.933532715,186.160247803,-110.039825439,184.049224854,-112.104927063,181.781494141,-114.296539307,179.64553833,-116.335853577,175.505020142,-117.268699646,172.700927734,-116.342384338,177.357055664,-111.948242188,178.119628906,-114.801216125,176.948791504,-118.880867004,174.789337158,-120.895263672,172.470230103,-123.032394409,170.286453247,-125.020401001,166.124938965,-125.854690552,163.34362793,-124.862030029,163.852508545,-124.764465332,161.635528564,-126.715393066,157.460540771,-127.479400635,154.696365356,-126.44002533,151.751251221,-125.312149048,148.999908447,-124.239273071,146.403244019,-120.88193512,146.05657959,-117.94921875,159.497512817,-115.609855652,160.162078857,-118.487236023,158.852416992,-122.524467468,156.625350952,-124.463829041,154.234512329,-126.52040863,151.984039307,-128.432601929,147.796417236,-129.124069214,145.050674438,-128.036895752,145.562576294,-127.95677948,143.280197144,-129.830764771,139.08152771,-130.451568604,136.354492188,-129.318267822,133.449707031,-128.090332031,130.73664856,-126.924003601,128.25630188,-123.47983551,128.010101318,-120.536987305,133.877044678,-123.099601746,131.550827026,-124.91884613,127.338577271,-125.439788818,124.639228821,-124.242034912,121.764419556,-122.945495605,119.079826355,-121.715049744,116.681983948,-118.21295929,116.505722046,-115.265090942,116.794822693,-115.69506073,114.131347656,-114.419563293,111.792861938,-110.877540588,111.66632843,-107.927124023,111.550346375,-104.77557373,111.459640503,-101.82383728,113.531417847,-98.1194992065,116.093925476,-96.6516571045,138.815475464,-76.9742050171,140.634338379,-74.6476669312,144.59664917,-73.126335144,147.505157471,-73.6377792358,150.607788086,-74.2028045654,153.509887695,-74.7495422363,156.681488037,-77.5700378418,157.563415527,-80.3884124756,157.179168701,-80.0408477783,160.071624756,-80.6364059448,163.195266724,-83.5099716187,164.029556274,-86.3428039551,164.902130127,-89.3733520508,165.701950073,-92.2161254883,164.584609985,-96.3107376099,162.451705933,-98.3532104492,160.75352478,-92.1803588867,163.631027222,-92.8444366455,166.685516357,-95.791343689,167.452316284,-98.643196106,168.252655029,-101.693626404,168.984786987,-104.554573059,167.770523071,-108.621505737,165.589706421,-110.612754822,165.742111206,-110.117546082,166.425888062,-112.990432739,165.143295288,-117.036346436,162.929229736,-118.99054718,160.5521698,-121.063072205,158.314544678,-122.990249634,154.131637573,-123.709716797,151.378692627,-122.640914917,155.614242554,-109.672035217,158.467346191,-110.434127808,161.419281006,-113.483764648,162.088134766,-116.360160828,162.783691406,-119.436172485,163.417541504,-122.320480347,162.064910889,-126.343513489,159.81729126,-128.259033203,159.986541748,-127.769332886,160.571685791,-130.663925171,159.151443481,-134.663574219,156.871871948,-136.540939331,154.425354004,-138.530975342,152.123123169,-140.380508423,147.918060303,-140.956512451,145.203292847,-139.794204712,150.217529297,-135.813583374,150.733764648,-138.721237183,149.218948364,-142.686050415,146.89541626,-144.508758545,144.40234375,-146.440124512,142.056854248,-148.234466553,137.839294434,-148.710479736,135.152877808,-147.484024048,135.668212891,-147.430236816,133.292800903,-149.184814453,129.067840576,-149.589645386,126.40246582,-148.318099976,123.564399719,-146.942947388,120.914672852,-145.639129639,118.614089966,-142.072387695,118.519012451,-139.120773315,135.335769653,-126.454421997,138.14642334,-127.360671997,140.939422607,-130.556533813,141.461044312,-133.463241577,141.999237061,-136.570648193,142.485534668,-139.483474731,140.929992676,-143.432495117,138.587844849,-145.231170654,138.781799316,-144.750732422,139.218933105,-147.671325684,137.597076416,-151.593566895,135.22492981,-153.352523804,132.680358887,-155.215515137,130.287017822,-156.945541382,126.058097839,-157.306884766,123.405952454,-156.007965088,128.616195679,-152.287536621,128.983840942,-155.217712402,127.269317627,-159.100341797,124.856063843,-160.802474976,122.267951965,-162.604507446,119.834220886,-164.277236938,115.597923279,-164.538040161,112.977371216,-163.176513672,113.494766235,-163.149047852,111.033187866,-164.780487061,106.793083191,-164.969894409,104.195846558,-163.56439209,101.431419373,-162.046646118,98.8514404297,-160.609710693,96.7352828979,-156.930557251,96.7904815674,-153.977935791,110.424674988,-153.487380981,110.691902161,-156.428405762,108.845611572,-160.25012207,106.375572205,-161.868759155,103.727348328,-163.581237793,101.237838745,-165.16973877,96.9950866699,-165.285552979,94.4226226807,-163.835220337,94.9406585693,-163.825454712,92.4247283936,-165.371780396,88.1806259155,-165.416061401,85.6329727173,-163.922546387,82.9220657349,-162.311203003,80.3927307129,-160.786880493,78.4036178589,-157.037506104,78.559753418,-154.088500977,84.0238876343,-157.424835205,81.4719467163,-158.910980225,77.2279968262,-158.854476929,74.7165222168,-157.30090332,72.0446472168,-155.625595093,69.552230835,-154.041656494,67.6527099609,-150.246109009,67.8788299561,-147.301635742,68.1067886353,-147.766937256,65.6414260864,-146.141204834,63.8061485291,-142.314178467,64.0818634033,-139.373931885,64.3953552246,-136.23588562,64.7067565918,-133.299224854,67.2628631592,-129.910903931,70.0011138916,-128.805023193,97.201423645,-128.911071777,99.9309768677,-130.038284302,102.460571289,-133.446411133,102.749069214,-136.385437012,103.038101196,-139.525817871,103.290878296,-142.46812439,101.425804138,-146.280715942,98.9478378296,-147.887176514,99.1794281006,-147.423690796,99.3825759888,-150.369827271,97.4535217285,-154.15045166,94.9488296509,-155.714920044,92.2639541626,-157.369354248,89.7404556274,-158.903274536,85.4961929321,-158.926681519,82.9559173584,-157.420700073,88.445892334,-154.127029419,88.5790252686,-157.077163696,86.5607376099,-160.810913086,84.0196075439,-162.315444946,81.2962036133,-163.905654907,78.7369918823,-165.379226685,74.4933624268,-165.301864624,71.9895629883,-163.735961914,72.5074996948,-163.749786377,69.9238128662,-165.180007935,65.6820983887,-165.03112793,63.2050361633,-163.42326355,60.5702629089,-161.690170288,58.1129226685,-160.052337646,56.2964782715,-156.216339111,56.586643219,-153.277496338,70.2165908813,-153.874328613,70.2487640381,-156.827285767,68.1039733887,-160.489837646,65.512878418,-161.906600952,62.7367019653,-163.402755737,60.1285896301,-164.787963867,55.8900947571,-164.565505981,53.4413070679,-162.914932251,53.9584693909,-162.946426392,51.3273849487,-164.287475586,47.0932388306,-163.993606567,44.672618866,-162.301986694,42.0986404419,-160.479812622,39.6987419128,-158.758895874,38.0145339966,-154.863037109,38.4050254822,-151.935836792,43.586101532,-155.696746826,40.9239120483,-156.974945068,36.6979370117,-156.5806427,34.3181724548,-154.832015991,31.788192749,-152.949249268,29.4298381805,-151.171829224,27.8386154175,-147.237045288,28.2985095978,-144.319946289,28.4886989594,-144.8019104,26.1606349945,-142.98500061,24.6359577179,-139.023986816,25.1449489594,-136.115036011,25.7073574066,-133.011917114,26.2516403198,-130.109375,29.0694656372,-126.935379028,31.8870925903,-126.051071167,48.6045875549,-138.848175049,48.4864997864,-141.798950195,46.1581726074,-145.34765625,43.4983558655,-146.630767822,40.6496543884,-147.983764648,37.9744529724,-149.234481812,33.7527580261,-148.796707153,31.3911132812,-147.023666382,31.9060020447,-147.081451416,29.210100174,-148.286911011,24.9963874817,-147.778060913,22.6649570465,-145.96546936,20.1870079041,-144.014709473,17.8777637482,-142.173950195,16.3939285278,-138.19744873,16.9328269958,-135.293899536,21.9158668518,-139.313537598,19.1921005249,-140.45463562,14.9916563034,-139.845855713,12.7039260864,-137.978408813,10.2730007172,-135.96937561,8.00811862946,-134.074295044,6.61912822723,-130.063674927,7.22682332993,-127.173736572,7.39225292206,-127.664749146,5.15963125229,-125.731758118,3.83843231201,-121.698303223,4.4947476387,-118.819015503,5.21428823471,-115.748542786,5.90552330017,-112.877433777,8.88116645813,-109.850891113,11.7401332855,-109.111083984,15.8743886948,-122.112594604,13.113196373,-123.159889221,8.93602561951,-122.407821655,6.71349191666,-120.463241577,4.3526892662,-118.372253418,2.15393590927,-116.400840759,.902902901173,-112.345077515,1.60906612873,-109.477600098,1.75760579109,-109.973976135,-.40760961175,-107.965766907,-1.59010958672,-103.88949585,-.835718989372,-101.034347534,-.0116023058072,-97.9902496338,.7774066329,-95.1444702148,3.85480380058,-92.2214660645,6.73739671707,-91.5798492432,4.99112081528,-97.7392730713,2.87420201302,-95.680229187,1.7888302803,-91.5770263672,2.61080646515,-88.7405853271,3.50697636604,-85.7169265747,4.3633389473,-82.8906784058,7.50927734375,-80.041557312,10.406293869,-79.4685668945,10.0193395615,-79.8131332397,10.9232139587,-77.0017318726,14.1167240143,-74.2060470581,17.0229873657,-73.681968689,20.129940033,-73.1411514282,23.042350769,-72.6524047852,26.9926719666,-74.2045974731,28.793340683,-76.5452423096]},function(e,t){e.exports=[-30.6561183929,-77.3625946045,-30.4096660614,-75.3101425171,-28.6009483337,-72.959022522,-26.6803092957,-72.1945343018,-24.6395435333,-71.3926620483,-22.7122211456,-70.6451873779,-19.7867832184,-71.1361160278,-18.2090454102,-72.4718017578,-18.6047611237,-72.4029159546,-16.6685009003,-71.6789093018,-13.7492437363,-72.205329895,-12.1878423691,-73.5600662231,-10.5380506516,-75.0043411255,-8.9886932373,-76.3728408813,-8.08077812195,-79.1968231201,-8.54233074188,-81.2118301392,-11.9662895203,-78.1630477905,-10.0181016922,-77.4717636108,-7.10813045502,-78.0473175049,-5.56978225708,-79.4281845093,-3.9445669651,-80.900062561,-2.41849398613,-82.2944793701,-1.5583024025,-85.1333694458,-2.0537507534,-87.1403121948,-2.16789102554,-86.7552032471,-.658864498138,-88.1680526733,.166787564754,-91.0171737671,-.352997660637,-93.0179595947,-.913708627224,-95.1377029419,-1.45117068291,-97.1338043213,-3.57755637169,-99.2020568848,-5.58778810501,-99.6839981079,-8.26595497131,-90.2376556396,-6.30190181732,-89.5928344727,-3.40641784668,-90.2373199463,-1.90129446983,-91.6543273926,-.31148853898,-93.1643753052,1.18104255199,-94.5946426392,1.97357940674,-97.4531402588,1.43061339855,-99.4477539062,1.32565021515,-99.0600585938,2.80070161819,-100.508331299,3.55846476555,-103.376251221,2.99131536484,-105.364128113,2.38042664528,-107.469963074,1.79571628571,-109.452735901,-.379182755947,-111.469917297,-2.40029168129,-111.903991699,-1.08592998981,-107.511856079,.364502757788,-108.984786987,1.07382321358,-111.865081787,.473251253366,-113.843109131,-.17304174602,-115.938354492,-.791086316109,-117.910995483,-2.99967312813,-119.891227722,-5.02781152725,-120.291168213,-4.72712898254,-120.024856567,-5.36908435822,-121.989845276,-7.60155773163,-123.943115234,-9.63440227509,-124.318397522,-11.7923583984,-124.706916809,-13.8284435272,-125.064201355,-16.6019859314,-124.01222229,-17.8889732361,-122.394523621,-13.2218971252,-107.717399597,-11.2369432449,-107.140106201,-8.36519241333,-107.883232117,-6.90940237045,-109.350883484,-5.37216329575,-110.914413452,-3.92941451073,-112.394874573,-3.23508858681,-115.278816223,-3.84594368935,-117.253707886,-3.93758821487,-116.862609863,-2.51292419434,-118.360496521,-1.85367393494,-121.252655029,-2.48846793175,-123.219970703,-3.17100906372,-125.303688049,-3.823179245,-127.265304565,-6.06578493118,-129.206939697,-8.10055541992,-129.571640015,-6.63677024841,-125.227012634,-5.2375535965,-126.748695374,-4.627140522,-129.651535034,-5.29500150681,-131.60786438,-6.01256465912,-133.679794312,-6.69770240784,-135.630142212,-8.97271251678,-137.533691406,-11.01334095,-137.864059448,-10.7037277222,-137.608184814,-11.4125022888,-139.550064087,-13.7104625702,-141.425857544,-15.7549524307,-141.731399536,-17.9249324799,-142.045913696,-19.9720458984,-142.333374023,-22.7079925537,-141.187164307,-23.9389076233,-139.526397705,-16.2967128754,-133.361724854,-14.9340248108,-134.91619873,-14.3927173615,-137.832733154,-15.1068439484,-139.772674561,-15.8734054565,-141.826950073,-16.6046638489,-143.760482788,-18.9242343903,-145.609481812,-20.9721317291,-145.891281128,-20.6565322876,-145.642837524,-21.4112186432,-147.567352295,-23.7530727386,-149.388031006,-25.8042411804,-149.644958496,-27.9810791016,-149.907836914,-30.0344390869,-150.146606445,-32.7423973083,-148.935745239,-33.9335250854,-147.24621582,-29.377532959,-146.734939575,-30.1645469666,-148.646453857,-32.5367546082,-150.427429199,-34.5919647217,-150.649734497,-36.7729225159,-150.875915527,-38.8300132751,-151.080032349,-41.5171852112,-149.823699951,-42.6796722412,-148.114334106,-42.3168487549,-148.286651611,-44.3762664795,-148.465774536,-47.0479812622,-147.1769104,-48.1896247864,-145.453567505,-49.3924484253,-143.620269775,-50.5188064575,-141.886886597,-50.637424469,-138.922912598,-49.6531867981,-137.105072021,-33.2960319519,-124.583808899,-31.2842826843,-124.108261108,-28.4540538788,-124.996520996,-27.0748138428,-126.536323547,-25.6191043854,-128.176040649,-24.2535362244,-129.727981567,-23.7068214417,-132.643508911,-24.417350769,-134.584762573,-24.4889812469,-134.189529419,-23.1423606873,-135.75793457,-22.6310939789,-138.679885864,-23.3651504517,-140.612365723,-24.1528053284,-142.658660889,-24.903924942,-144.584564209,-27.2423973083,-146.409591675,-29.2930850983,-146.670303345,-27.6101856232,-142.405776978,-26.2901916504,-143.996658325,-25.8282413483,-146.926803589,-26.5947608948,-148.84664917,-27.4167995453,-150.879379272,-28.2002696991,-152.792358398,-30.5691699982,-154.577713013,-32.6239585876,-154.803848267,-32.3017272949,-154.564025879,-33.1083717346,-156.467346191,-35.4987792969,-158.2237854,-37.5561714172,-158.424942017,-39.7393379211,-158.628646851,-41.7984199524,-158.811599731,-44.4725151062,-157.527694702,-45.6173553467,-155.80645752,-37.6714439392,-150.038513184,-36.3895988464,-151.660308838,-35.9973602295,-154.600616455,-36.8092498779,-156.501693726,-37.6793251038,-158.514312744,-38.5079994202,-160.408157349,-40.9186286926,-162.136764526,-42.9782104492,-162.314025879,-42.6503791809,-162.081939697,-43.5019950867,-163.965576172,-45.9334373474,-165.664749146,-47.9950180054,-165.817001343,-50.1824111938,-165.968811035,-52.2452583313,-166.102813721,-54.8881072998,-164.755767822,-55.9917488098,-163.007827759,-51.4156532288,-162.729003906,-52.2988853455,-164.597991943,-54.7586250305,-166.255966187,-56.822479248,-166.373443604,-59.0121192932,-166.488372803,-61.0769309998,-166.587585449,-63.6967086792,-165.196182251,-64.7707290649,-163.429885864,-64.417137146,-163.620437622,-66.4830169678,-163.694580078,-69.0856933594,-162.271484375,-70.1381835938,-160.492279053,-71.2462005615,-158.600158691,-72.2829208374,-156.811737061,-72.2506027222,-153.845535278,-71.1751556396,-152.080123901,-55.7886123657,-151.406387329,-54.5629730225,-153.071060181,-54.2715110779,-156.023025513,-55.14793396,-157.895248413,-56.0863227844,-159.876953125,-56.9792709351,-161.741348267,-59.4476013184,-163.386489868,-61.5120391846,-163.493225098,-61.1764602661,-163.272506714,-62.0919914246,-165.125900269,-64.580116272,-166.740966797,-66.6456985474,-166.822616577,-68.8370056152,-166.899520874,-70.9032287598,-166.962905884,-73.4984741211,-165.526275635,-74.5416946411,-163.741622925,-69.9587249756,-163.619430542,-70.9053573608,-165.457122803,-73.4203567505,-167.030029297,-75.4870223999,-167.076858521,-77.6793060303,-167.116836548,-79.746307373,-167.145370483,-82.3169708252,-165.66519165,-83.3299636841,-163.863235474,-82.9831085205,-164.065750122,-85.0502929688,-164.069213867,-87.6027908325,-162.557937622,-88.5938339233,-160.743789673,-89.6364898682,-158.814910889,-90.6114501953,-156.99206543,-90.4777145386,-154.028717041,-89.3425292969,-152.301101685,-80.9228820801,-157.352401733,-81.9128875732,-159.167114258,-84.464515686,-160.679855347,-86.5317077637,-160.677597046,-88.7243347168,-160.665496826,-90.7914276123,-160.644958496,-93.326210022,-159.104156494,-94.2961273193,-157.278640747,-93.9541778564,-157.489349365,-96.0208740234,-157.443695068,-98.5367660522,-155.872238159,-99.4844436646,-154.035079956,-100.481010437,-152.081954956,-101.412399292,-150.236480713,-101.208343506,-147.277160645,-100.032455444,-145.57699585,-97.9832382202,-149.678115845,-100.048866272,-149.597640991,-102.537918091,-147.984008789,-103.454490662,-146.131118774,-104.417999268,-144.161499023,-105.31816864,-142.300582886,-105.06426239,-139.345123291,-103.85987854,-137.665023804,-103.89667511,-138.064987183,-104.774177551,-136.193283081,-104.484390259,-133.241134644,-103.25970459,-131.575759888,-101.952896118,-129.815093994,-100.713531494,-128.160614014,-97.9717636108,-127.028373718,-95.9261474609,-127.326263428,-71.2887268066,-127.230224609,-69.2454986572,-126.916381836,-66.4949951172,-128.027206421,-65.2427597046,-129.671966553,-63.9222602844,-131.422409058,-62.6846160889,-133.078170776,-62.3718261719,-136.02796936,-63.2346954346,-137.906463623,-63.2746276855,-137.506774902,-62.0571899414,-139.177459717,-61.7802467346,-142.130828857,-62.6658668518,-143.998718262,-63.6139793396,-145.975799561,-64.5160903931,-147.835769653,-66.992477417,-149.468765259,-69.0574188232,-149.565353394,-67.0402374268,-145.448364258,-65.8511352539,-147.139312744,-65.6240081787,-150.096939087,-66.540977478,-151.949615479,-67.5222854614,-153.910461426,-68.4556121826,-155.754974365,-70.9591751099,-157.345977783,-73.0254440308,-157.407745361,-72.6851425171,-157.194366455,-73.6408004761,-159.027404785,-76.1634902954,-160.587921143,-78.2303619385,-160.624588013,-80.4228134155,-160.653778076,-82.489944458,-160.672149658,-85.0532913208,-159.179367065,-86.0574111938,-157.372436523,-77.6773986816,-152.255645752,-76.5287857056,-153.974349976,-76.3719558716,-156.936553955,-77.3326644897,-158.766937256,-78.3602600098,-160.703903198,-79.3371124268,-162.525726318,-81.8777542114,-164.056854248,-83.9449234009,-164.069519043,-83.5996398926,-163.864273071,-84.5985565186,-165.674087524,-87.1576004028,-167.174255371,-89.2247543335,-167.161834717,-91.4172897339,-167.138961792,-93.4842529297,-167.108261108,-96.0114364624,-165.555007935,-96.9723739624,-163.724761963,-92.3885879517,-163.811203003,-93.4178695679,-165.603942871,-96.0018310547,-167.060775757,-98.0684890747,-167.013504028,-100.260322571,-166.953689575,-102.32648468,-166.888153076,-104.827133179,-165.292541504,-105.757080078,-163.446334839,-105.419784546,-163.664459229,-107.484985352,-163.573822021,-109.966064453,-161.947967529,-110.873535156,-160.090591431,-111.827339172,-158.116241455,-112.718345642,-156.250915527,-112.449905396,-153.296737671,-111.237289429,-151.622573853,-95.8459625244,-152.176315308,-94.7567749023,-153.933288574,-94.7013320923,-156.899139404,-95.724067688,-158.695602417,-96.8172988892,-160.596298218,-97.8558883667,-162.383636475,-100.447395325,-163.82699585,-102.513778687,-163.768981934,-102.161689758,-163.575668335,-103.221908569,-165.350265503,-105.830749512,-166.762054443,-107.896270752,-166.678955078,-110.086738586,-166.581100464,-112.151451111,-166.479736328,-114.624046326,-164.840988159,-115.521835327,-162.978927612,-110.943687439,-163.222091675,-112.033668518,-164.978561401,-114.665931702,-166.346160889,-116.729759216,-166.228271484,-118.918266296,-166.093521118,-120.980979919,-165.957382202,-123.425590515,-164.277191162,-124.291862488,-162.400268555,-123.962234497,-162.629760742,-126.023139954,-162.468566895,-128.447174072,-160.758834839,-129.290588379,-158.871520996,-130.176345825,-156.865707397,-131.003036499,-154.97102356,-130.633712769,-152.027755737,-129.364547729,-150.396011353,-121.373924255,-156.101806641,-122.505310059,-157.83190918,-125.169303894,-159.136657715,-127.229766846,-158.96975708,-129.41444397,-158.783081055,-131.473342896,-158.597991943,-133.877380371,-156.860214233,-134.69883728,-154.963226318,-134.374740601,-155.200531006,-136.431243896,-154.990432739,-138.813995361,-153.223617554,-139.612365723,-151.316802979,-140.450210571,-149.290557861,-141.231674194,-147.376754761,-140.79258728,-144.443099976,-139.485046387,-142.841964722,-137.768936157,-147.09324646,-139.821594238,-146.848526001,-142.174224854,-145.041793823,-142.940322876,-143.121795654,-143.743927002,-141.081710815,-144.493026733,-139.155014038,-144.004562378,-136.229171753,-142.670211792,-134.650299072,-142.738769531,-135.046081543,-143.464401245,-133.110427856,-142.940444946,-130.190734863,-141.587036133,-128.628189087,-140.144134521,-126.977172852,-138.776947021,-125.42665863,-135.953735352,-124.516365051,-133.938323975,-124.976219177,-117.484054565,-137.369552612,-116.485671997,-139.179672241,-116.581176758,-142.144485474,-117.693984985,-143.886581421,-118.882469177,-145.729202271,-120.010635376,-147.461410522,-122.672225952,-148.771072388,-124.732971191,-148.608001709,-124.371513367,-148.432846069,-125.520645142,-150.1512146,-128.197937012,-151.428466797,-130.256561279,-151.240386963,-132.439208984,-151.03125,-134.496078491,-150.824966431,-136.882095337,-149.062545776,-137.684005737,-147.157226562,-133.124145508,-147.632980347,-134.302078247,-149.331741333,-137.000518799,-150.563674927,-139.055679321,-150.340927124,-141.234481812,-150.095031738,-143.287597656,-149.854095459,-145.643569946,-148.051727295,-146.413238525,-146.133163452,-146.095703125,-146.379165649,-148.145736694,-146.113327026,-150.479675293,-144.282470703,-151.225982666,-142.354705811,-152.008529663,-140.306442261,-152.737762451,-138.372146606,-152.219238281,-135.451477051,-150.868682861,-133.886428833,-143.178665161,-139.99130249,-144.396591187,-141.661621094,-147.123519897,-142.829116821,-149.172805786,-142.557632446,-151.345153809,-142.260040283,-153.391967773,-141.970458984,-155.704483032,-140.11265564,-156.428390503,-138.176345825,-156.116790771,-138.429794312,-158.159927368,-138.115371704,-160.449707031,-136.229598999,-161.150039673,-134.28465271,-161.883743286,-132.218414307,-162.566833496,-130.267333984,-161.9790802,-127.359809875,-160.591766357,-125.827270508,-159.094161987,-130.160354614,-161.131729126,-129.811523438,-163.389373779,-127.887443542,-164.05682373,-125.930953979,-164.755599976,-123.852622986,-165.405731201,-121.890327454,-164.769042969,-118.993125916,-163.356109619,-117.484176636,-163.444717407,-117.875953674,-164.070953369,-115.905891418,-163.399124146,-113.016639709,-161.967956543,-111.524963379,-160.442977905,-109.949493408,-158.998672485,-108.470535278,-156.132797241,-107.705055237,-154.1434021,-108.266838074,-149.361984253,-122.907112122,-150.636322021,-124.534805298,-153.401580811,-125.608383179,-155.440383911,-125.266975403,-157.601318359,-124.895294189,-159.637023926,-124.535873413,-161.884658813,-122.600067139,-162.541915894,-120.640151978,-162.239181519,-120.90411377,-164.270385742,-120.520004272,-166.494338989,-118.557052612,-167.127761841,-116.589279175,-167.790344238,-114.499137878,-168.406326294,-112.525848389,-167.719482422,-109.64012146,-166.280578613,-108.155914307,-164.932022095,-112.537689209,-166.956451416,-112.119392395,-169.147033691,-110.119232178,-169.747177124,-108.141067505,-170.374465942,-106.040061951,-170.957092285,-104.056671143,-170.221710205,-101.182929993,-168.757995605,-99.7231826782,-168.859954834,-100.111694336,-169.418441772,-98.1213760376,-168.648223877,-95.2567749023,-167.166885376,-93.8149185181,-165.588912964,-92.2925186157,-164.09487915,-90.8638305664,-161.20451355,-90.1967773438,-159.235488892,-90.8262634277,-161.839920044,-100.29322052,-163.85383606,-99.8269729614,-165.996292114,-97.7753601074,-166.549285889,-95.7835083008,-167.12651062,-93.6681900024,-167.661895752,-91.6715240479,-166.85848999,-88.8160476685,-165.360534668,-87.3914794922,-165.47164917,-87.7774734497,-165.982727051,-85.7744522095,-165.144729614,-82.9289550781,-163.629562378,-81.5226821899,-162.015869141,-80.0381698608,-160.488327026,-78.6453552246,-157.582931519,-78.0471343994,-155.62940979,-78.723197937,-159.029510498,-81.798576355,-159.506759644,-79.7872238159,-158.620895386,-76.9562454224,-157.082260132,-75.5756988525,-155.443786621,-74.1186218262,-153.892990112,-72.7517471313,-150.977920532,-72.2025756836,-149.036071777,-72.9114685059,-149.431243896,-72.9834213257,-147.863952637,-71.6354751587,-144.942443848,-71.1217575073,-143.009338379,-71.8541793823,-140.962402344,-72.6400985718,-139.035858154,-73.3896026611,-137.208862305,-75.7265396118,-136.946395874,-77.7770004272,-117.155502319,-94.9164199829,-115.088569641,-94.8832473755,-112.514602661,-96.3576660156,-111.497581482,-98.157371521,-110.427276611,-100.071052551,-109.426216125,-101.879684448,-109.517326355,-104.84463501,-110.627540588,-106.588394165,-110.612754822,-106.187011719,-109.633735657,-108.007659912,-109.76083374,-110.97127533,-110.89214325,-112.701431274,-112.100227356,-114.531272888,-113.246795654,-116.251350403,-115.922172546,-117.532546997,-117.98109436,-117.34753418,-115.422988892,-113.542984009,-114.47479248,-115.379882812,-114.651824951,-118.340942383,-115.812133789,-120.051773071,-117.050880432,-121.860977173,-118.226280212,-123.561485291,-120.922874451,-124.797424316,-122.978363037,-124.577735901,-122.612205505,-124.412597656,-123.808174133,-126.098701477,-126.519584656,-127.301803589,-128.572250366,-127.057167053,-130.748336792,-126.788047791,-132.79876709,-126.525245667,-135.135375977,-124.697868347,-135.884567261,-122.771217346,-126.886779785,-118.841072083,-125.982452393,-120.699966431,-126.229766846,-123.655982971,-127.430358887,-125.338798523,-128.711730957,-127.11807251,-129.927185059,-128.790206909,-132.652374268,-129.961730957,-134.702072144,-129.69329834,-134.332092285,-129.536911011,-135.567749023,-131.194137573,-138.306976318,-132.332519531,-140.353240967,-132.03918457,-142.522323608,-131.718490601,-144.565917969,-131.407073975,-146.858520508,-129.524719238,-147.561721802,-127.580810547,-143.03225708,-128.289596558,-144.295669556,-129.925750732,-147.05368042,-131.017807007,-149.094726562,-130.690032959,-151.258087158,-130.332824707,-153.296142578,-129.987014771,-155.556686401,-128.066299438,-156.227035522,-126.110794067,-155.92250061,-126.37272644,-157.956237793,-126.002204895,-160.193252563,-124.054161072,-160.839828491,-122.090690613,-161.516403198,-120.005012512,-162.145584106,-118.035888672,-161.478042603,-115.145645142,-160.049087524,-113.651847839,-144.875900269,-116.292701721,-144.035690308,-118.181442261,-144.383911133,-121.12727356,-145.641357422,-122.768043518,-146.982803345,-124.502464294,-148.254730225,-126.132041931,-151.018417358,-127.209732056,-153.057723999,-126.871353149,-152.682617188,-126.72769928,-153.974227905,-128.341705322,-156.750762939,-129.385742188,-158.785827637,-129.022613525,-160.942672729,-128.627929688,-162.97442627,-128.246826172,-165.201293945,-126.28717041,-165.837615967,-124.320350647,-161.335037231,-125.18359375,-162.653671265,-126.775604248,-165.447418213,-127.772712708,-167.47605896,-127.375343323,-169.625915527,-126.944351196,-171.650970459,-126.529052734,-173.844497681,-124.532142639,-174.44758606,-122.554878235,-174.152191162,-122.827079773,-176.172058105,-122.387229919,-178.341156006,-120.363830566,-178.920196533,-118.379371643,-179.525054932,-116.27180481,-180.086517334,-114.282310486,-179.320541382,-111.416572571,-177.84135437,-109.97252655,-170.700500488,-116.711547852,-172.05657959,-118.271812439,-174.873214722,-119.202270508,-176.891845703,-118.756851196,-179.030883789,-118.274940491,-181.045501709,-117.811676025,-183.191009521,-115.763237,-183.74697876,-113.772209167,-183.458145142,-114.051338196,-185.466995239,-113.563644409,-187.58744812,-111.489311218,-188.119186401,-109.491661072,-188.673812866,-107.370330811,-189.187866211,-105.36806488,-188.3540802,-102.521324158,-186.841003418,-101.112808228,-185.71875,-105.557907104,-187.719085693,-105.036437988,-189.804275513,-102.926651001,-190.302276611,-100.920341492,-190.821075439,-98.7899398804,-191.301315308,-96.7793045044,-190.419647217,-93.947013855,-188.883071899,-92.5641937256,-189.004776001,-92.9469833374,-189.46055603,-90.9306640625,-188.544555664,-88.1092910767,-186.99130249,-86.745223999,-185.337387085,-85.3056945801,-183.772109985,-83.9554214478,-180.851348877,-83.4373703003,-178.917160034,-84.1669158936,-164.300369263,-98.681930542,-163.557312012,-100.610969543,-164.054962158,-103.53528595,-165.394256592,-105.109947205,-166.822189331,-106.773887634,-168.175354004,-108.336639404,-170.990264893,-109.272338867,-173.009735107,-108.830657959,-172.627792358,-108.70627594,-173.999832153,-110.252479553,-176.825897217,-111.153923035,-178.83984375,-110.68775177,-180.973815918,-110.183853149,-182.983551025,-109.699867249,-185.107849121,-107.629470825,-185.643310547,-105.632827759,-181.190429688,-106.724021912,-182.588348389,-108.246894836,-185.429199219,-109.100563049,-187.435012817,-108.600517273,-189.560180664,-108.060714722,-191.56149292,-107.542945862,-193.650588989,-105.437034607,-194.152313232,-103.431640625,-193.871170044,-103.718513489,-195.866043091,-103.176483154,-197.929428101,-101.045349121,-198.40675354,-99.0340118408,-198.903579712,-96.898399353,-199.363113403,-94.8829269409,-198.452346802,-92.0598602295,-196.901611328,-90.6929244995,-190.112854004,-97.786491394,-191.546524048,-99.2757492065,-194.406829834,-100.061729431,-196.400192261,-99.5141830444,-198.511962891,-98.9240646362,-200.50038147,-98.3589172363,-202.538894653,-96.203994751,-202.992858887,-94.1872711182,-202.718597412,-94.4807281494,-204.700042725,-93.8914718628,-206.712234497,-91.7119522095,-207.141662598,-89.6898498535,-207.587661743,-87.5430374146,-207.999191284,-85.5172195435,-207.021652222,-82.7165756226,-205.438903809,-81.3868560791,-204.544219971,-85.8832931519,-206.515426636,-85.2607269287,-208.490600586,-83.0476074219,-208.885879517,-81.0185623169,-209.295639038,-78.8645324707,-209.672988892,-76.8320617676,-208.648361206,-74.048286438,-207.043426514,-72.7454299927,-207.184432983,-73.1215286255,-207.53704834,-71.0846328735,-206.478713989,-68.3135147095,-204.858062744,-67.0302352905,-203.133071899,-65.6766967773,-201.50112915,-64.4078140259,-198.557800293,-64.0390014648,-196.663253784,-64.8660049438,-193.916412354,-80.0203704834,-195.400192261,-81.4597167969,-198.285705566,-82.1474227905,-200.259170532,-81.532043457,-202.349517822,-80.8700561523,-204.317474365,-80.2372436523,-206.281082153,-78.0138702393,-206.665817261,-75.9827957153,-206.401779175,-76.2854614258,-208.361907959,-75.6287918091,-210.29838562,-73.3817443848,-210.658416748,-71.3461456299,-211.030715942,-69.185333252,-211.37272644,-67.1466293335,-210.300003052,-64.3810501099,-208.672668457,-63.1062278748,-207.932296753,-67.6306381226,-209.881072998,-66.9410247803,-211.779418945,-64.6616516113,-212.105072021,-62.6202774048,-212.440933228,-60.4534912109,-212.748535156,-58.4093170166,-211.629348755,-55.6622161865,-209.980804443,-54.4149971008,-210.13458252,-54.7860488892,-210.417358398,-52.73828125,-209.264862061,-50.0049705505,-207.601303101,-48.7778663635,-205.831008911,-47.4841079712,-204.156646729,-46.2717666626,-201.202423096,-46.003818512,-199.337249756,-46.8951301575,-203.204376221,-55.9201583862,-205.136245728,-55.184463501,-206.979919434,-52.860660553,-207.257034302,-50.812122345,-207.541351318,-48.6379852295,-207.800323486,-46.5870742798,-206.616210938,-43.8673210144,-204.938476562,-42.6596031189,-205.101043701,-43.0268974304,-205.335098267,-40.9729919434,-204.118057251,-38.2678222656,-202.42578125,-37.0805664062,-200.625289917,-35.8292121887,-198.922607422,-34.6569709778,-195.962844849,-34.4592552185,-194.119384766,-35.3945999146,-197.905944824,-37.9792289734,-198.10534668,-35.921672821,-196.84286499,-33.2373962402,-195.130844116,-32.078830719,-193.309494019,-30.8579998016,-191.587310791,-29.7146224976,-188.624633789,-29.5668201447,-186.797180176,-30.5331020355,-187.198455811,-30.5506725311,-185.462493896,-29.4282970428,-182.498260498,-29.3164787292,-180.682678223,-30.3048839569,-178.761550903,-31.361782074,-176.954788208,-32.3662071228,-175.462432861,-34.9298095703,-175.481155396,-36.9969177246,-172.056594849,-61.3953857422,-171.469528198,-63.3774719238,-172.198471069,-66.2528533936,-173.658905029,-67.7158584595,-175.21484375,-69.2607879639,-176.688171387,-70.7108306885,-179.568649292,-71.4193725586,-181.546524048,-70.8182678223,-181.155883789,-70.7247009277,-182.646713257,-72.1567382812,-185.535583496,-72.8302459717,-187.505996704,-72.2051696777,-189.593078613,-71.532913208,-191.557891846,-70.8904342651,-193.510574341,-68.6574325562,-193.885299683,-66.6244888306,-189.533493042,-68.0668182373,-191.048248291,-69.473526001,-193.948074341,-70.0982513428,-195.907669067,-69.4400482178,-197.983078003,-68.732711792,-199.936798096,-68.0572052002,-201.851547241,-65.7916107178,-202.191986084,-63.7526359558,-201.93460083,-64.0609817505,-203.879959106,-63.3618049622,-205.767059326,-61.0731315613,-206.082687378,-59.0301704407,-206.407897949,-56.8617706299,-206.705459595,-54.8161010742,-205.572753906,-52.0745315552,-203.91809082,-50.83543396,-197.715774536,-58.4471206665,-199.263504028,-59.8174591064,-202.177352905,-60.3731498718,-204.120773315,-59.6686058044,-206.178817749,-58.9121894836,-208.115936279,-58.1904830933,-209.976364136,-55.8800544739,-210.268264771,-53.8335762024,-210.018249512,-54.1479492188,-211.946456909,-53.4027709961,-213.778686523,-51.0699272156,-214.045715332,-49.0200500488,-214.319335938,-46.8445320129,-214.568222046,-44.7923736572,-213.370773315,-42.0784835815,-211.687103271,-40.8790245056,-211.153366089,-45.4324493408,-213.068740845,-44.6548690796,-214.86138916,-42.2914772034,-215.093841553,-40.2373924255,-215.330749512,-38.0575790405,-215.545028687,-36.0015182495,-214.301971436,-33.3081893921,-212.598342896,-32.1372795105,-212.76890564,-32.5009460449,-212.9581604,-30.4424343109,-211.682495117,-27.7643985748,-209.964813232,-26.6142654419,-208.137481689,-25.4024047852,-206.409667969,-24.2675094604,-203.446304321,-24.1342697144,-201.623626709,-25.1095275879,-200.092407227,-40.4345016479,-201.686096191,-41.7511177063,-204.617218018,-42.2068405151,-206.535415649,-41.4362487793,-208.566390991,-40.6099090576,-210.47769165,-39.8223800659,-212.258010864,-37.4496879578,-212.479782104,-35.3944244385,-212.24067688,-35.7171630859,-214.142272949,-34.9064788818,-215.89364624,-32.512348175,-216.090423584,-30.4545383453,-216.289505005,-28.2709407806,-216.468063354,-26.211473465,-215.178497314,-23.5401115417,-213.454833984,-22.3989295959,-213.077087402,-26.9679336548,-214.964767456,-26.1253185272,-216.675537109,-23.702009201,-216.837615967,-21.6411762238,-216.999847412,-19.4545326233,-217.143692017,-17.3923492432,-215.809265137,-14.7430992126,-214.066619873,-13.6311321259,-214.24949646,-13.9887590408,-214.368255615,-11.9249792099,-213.001800537,-9.29213047028,-211.245742798,-8.20140838623,-209.378082275,-7.05273914337,-207.612472534,-5.97759199142,-204.646286011,-5.94576501846,-202.858032227,-6.98277902603,-207.431625366,-15.6711730957,-209.298736572,-14.7839698792,-210.951507568,-12.3207187653,-211.064590454,-10.2566184998,-211.174850464,-8.06674098969,-211.269683838,-6.00172138214,-209.872711182,-3.38490724564,-208.104171753,-2.31463360786,-208.295471191,-2.66781449318,-208.365219116,-.60179567337,-206.936584473,1.99786043167,-205.155166626,3.04657649994,-203.260696411,4.15057134628,-201.470062256,5.18348932266,-198.503982544,5.14487218857,-196.740844727,4.06568622589,-200.721237183,1.79081940651,-200.756134033,3.85772061348,-199.283905029,6.43292951584,-197.485061646,7.45147323608,-195.572280884,8.52338218689,-193.76449585,9.52597427368,-190.799484253,9.43737316132,-189.054763794,8.32862377167,-189.456176758,8.34305858612,-187.636322021,9.32362270355,-184.672607422,9.19902038574,-182.941497803,8.06916427612,-181.110671997,6.86263036728,-179.38961792,5.7175078392,-178.106155396,3.04320049286,-178.289428711,.984146177769,-188.345535278,-16.9939746857,-190.004119873,-18.2278118134,-192.954650879,-18.5338363647,-194.831161499,-17.6666584015,-196.817474365,-16.7380599976,-198.686248779,-15.8543186188,-200.343566895,-13.3941354752,-200.460479736,-11.3302497864,-200.238067627,-11.664732933,-202.095977783,-10.7583618164,-203.72328186,-8.27823352814,-203.815109253,-6.21307849884,-203.902877808,-4.02218103409,-203.976425171,-1.95629489422,-202.552627563,.646004974842,-200.773147583,1.6980214119,-200.628326416,-2.88428544998,-202.470687866,-1.9467304945,-204.055953979,.560472309589,-204.112991333,2.62688159943,-204.163787842,4.81894540787,-204.202529907,6.88577795029,-202.735061646,9.46371173859,-200.938095093,10.4855880737,-201.138916016,10.1377277374,-201.152557373,12.2048788071,-199.653900146,14.7648000717,-197.844665527,15.7647781372,-195.920944214,16.816947937,-194.102935791,17.8008842468,-191.139007568,17.6817722321,-189.405792236,16.5551300049,-194.415481567,8.11065483093,-196.235061646,9.09169387817,-197.760345459,11.6358327866,-197.768280029,13.7030134201,-197.76701355,15.8956680298,-197.75668335,17.9628372192,-196.228408813,20.505197525,-194.407684326,21.4841136932,-194.616714478,21.1411209106,-194.581268311,23.2080135345,-193.022232056,25.731628418,-191.189758301,26.6883602142,-189.241592407,27.6945514679,-187.400741577,28.6350364685,-184.440460205,28.4455795288,-182.73449707,27.2780971527,-186.825454712,25.2086639404,-186.755172729,27.2746620178,-185.153823853,29.7716445923,-183.305496216,30.6973590851,-181.340637207,31.6705703735,-179.484191895,32.5799026489,-176.527511597,32.3405799866,-174.84147644,31.1445102692,-175.241638184,31.1793441772,-173.374282837,32.0660591125,-170.420715332,31.7908477783,-168.749343872,30.5743923187,-166.98223877,29.2762813568,-165.321685791,28.0450897217,-164.175918579,25.3089504242,-164.463729858,23.2618865967,-178.323608398,16.5459575653,-180.108581543,17.5886459351,-181.545959473,20.1834564209,-181.483215332,22.2497005463,-181.406951904,24.4410247803,-181.325927734,26.5066318512,-179.711608887,28.9952468872,-177.85848999,29.9113292694,-178.07913208,29.5756855011,-177.973022461,31.6401557922,-176.328582764,34.1089820862,-174.46446228,35.0024909973,-172.483062744,35.9414749146,-170.611114502,36.8184661865,-167.6590271,36.5278892517,-165.993988037,35.3027534485,-170.153335571,33.374420166,-170.012451172,35.4368095398,-168.326660156,37.8775634766,-166.447738647,38.7395324707,-164.450805664,39.6449966431,-162.564346313,40.4903068542,-159.61756897,40.1500205994,-157.973419189,38.8969955444,-158.372146606,38.9454917908,-156.475570679,39.7678375244,-153.533157349,39.3917884827,-151.904342651,38.118888855,-150.182632446,36.7611083984,-148.565155029,35.4738540649,-147.513641357,32.7001342773,-147.871276855,30.6641120911,-157.60333252,31.9653282166,-157.413497925,34.0237922668,-155.670227051,36.4238319397,-153.771392822,37.240940094,-151.753463745,38.0987167358,-149.847457886,38.8989944458,-146.909622192,38.4888305664,-145.295684814,37.1971206665,-145.693145752,37.2550697327,-143.777557373,38.0321426392,-140.844909668,37.5863304138,-139.246795654,36.2751121521,-137.557846069,34.8768310547,-135.971374512,33.5515289307,-134.986022949,30.7536258698,-135.391891479,28.7266654968,-138.898529053,31.6799716949,-136.970123291,32.4246482849,-134.045394897,31.9294700623,-132.469589233,30.5915050507,-130.804458618,29.1649589539,-129.240570068,27.8131046295,-128.302490234,24.9989929199,-128.742492676,22.9791603088,-128.8671875,23.3609809875,-127.319816589,21.9902362823,-126.415992737,19.1649398804,-126.880477905,17.150598526,-127.382583618,15.0162115097,-127.864860535,13.0060596466,-129.93347168,10.8800191879,-131.929672241,10.3428888321,-131.929672241,-10.3428888321,-129.93347168,-10.8800191879,-127.864860535,-13.0060596466,-127.382583618,-15.0162115097,-126.880477905,-17.150598526,-126.415992737,-19.1649398804,-127.319816589,-21.9902362823,-128.8671875,-23.3609809875,-128.742492676,-22.9791603088,-128.302490234,-24.9989929199,-129.240570068,-27.8131046295,-130.804458618,-29.1649589539,-132.469589233,-30.5915050507,-134.045394897,-31.9294700623,-136.970123291,-32.4246482849,-138.898529053,-31.6799716949,-135.391891479,-28.7266654968,-134.986022949,-30.7536258698,-135.971374512,-33.5515289307,-137.557846069,-34.8768310547,-139.246795654,-36.2751121521,-140.844909668,-37.5863304138,-143.777557373,-38.0321426392,-145.693145752,-37.2550697327,-145.295684814,-37.1971206665,-146.909622192,-38.4888305664,-149.847457886,-38.8989944458,-151.753463745,-38.0987167358,-153.771392822,-37.240940094,-155.670227051,-36.4238319397,-157.413497925,-34.0237922668,-157.60333252,-31.9653282166,-147.871276855,-30.6641120911,-147.513641357,-32.7001342773,-148.565155029,-35.4738540649,-150.182632446,-36.7611083984,-151.904342651,-38.118888855,-153.533157349,-39.3917884827,-156.475570679,-39.7678375244,-158.372146606,-38.9454917908,-157.973419189,-38.8969955444,-159.61756897,-40.1500205994,-162.564346313,-40.4903068542,-164.450805664,-39.6449966431,-166.447738647,-38.7395324707,-168.326660156,-37.8775634766,-170.012451172,-35.4368095398,-170.153335571,-33.374420166,-165.993988037,-35.3027534485,-167.6590271,-36.5278892517,-170.611114502,-36.8184661865,-172.483062744,-35.9414749146,-174.46446228,-35.0024909973,-176.328582764,-34.1089820862,-177.973022461,-31.6401557922,-178.07913208,-29.5756855011,-177.85848999,-29.9113292694,-179.711608887,-28.9952468872,-181.325927734,-26.5066318512,-181.406951904,-24.4410247803,-181.483215332,-22.2497005463,-181.545959473,-20.1834564209,-180.108581543,-17.5886459351,-178.323608398,-16.5459575653,-164.463729858,-23.2618865967,-164.175918579,-25.3089504242,-165.321685791,-28.0450897217,-166.98223877,-29.2762813568,-168.749343872,-30.5743923187,-170.420715332,-31.7908477783,-173.374282837,-32.0660591125,-175.241638184,-31.1793441772,-174.84147644,-31.1445102692,-176.527511597,-32.3405799866,-179.484191895,-32.5799026489,-181.340637207,-31.6705703735,-183.305496216,-30.6973590851,-185.153823853,-29.7716445923,-186.755172729,-27.2746620178,-186.825454712,-25.2086639404,-182.73449707,-27.2780971527,-184.440460205,-28.4455795288,-187.400741577,-28.6350364685,-189.241592407,-27.6945514679,-191.189758301,-26.6883602142,-193.022232056,-25.731628418,-194.581268311,-23.2080135345,-194.616714478,-21.1411209106,-194.407684326,-21.4841136932,-196.228408813,-20.505197525,-197.75668335,-17.9628372192,-197.76701355,-15.8956680298,-197.768280029,-13.7030134201,-197.760345459,-11.6358327866,-196.235061646,-9.09169387817,-194.415481567,-8.11065483093,-189.405792236,-16.5551300049,-191.139007568,-17.6817722321,-194.102935791,-17.8008842468,-195.920944214,-16.816947937,-197.844665527,-15.7647781372,-199.653900146,-14.7648000717,-201.152557373,-12.2048788071,-201.138916016,-10.1377277374,-200.938095093,-10.4855880737,-202.735061646,-9.46371173859,-204.202529907,-6.88577795029,-204.163787842,-4.81894540787,-204.112991333,-2.62688159943,-204.055953979,-.560472309589,-202.470687866,1.9467304945,-200.628326416,2.88428544998,-200.773147583,-1.6980214119,-202.552627563,-.646004974842,-203.976425171,1.95629489422,-203.902877808,4.02218103409,-203.815109253,6.21307849884,-203.72328186,8.27823352814,-202.095977783,10.7583618164,-200.238067627,11.664732933,-200.460479736,11.3302497864,-200.343566895,13.3941354752,-198.686248779,15.8543186188,-196.817474365,16.7380599976,-194.831161499,17.6666584015,-192.954650879,18.5338363647,-190.004119873,18.2278118134,-188.345535278,16.9939746857,-178.289428711,-.984146177769,-178.106155396,-3.04320049286,-179.38961792,-5.7175078392,-181.110671997,-6.86263036728,-182.941497803,-8.06916427612,-184.672607422,-9.19902038574,-187.636322021,-9.32362270355,-189.456176758,-8.34305858612,-189.054763794,-8.32862377167,-190.799484253,-9.43737316132,-193.76449585,-9.52597427368,-195.572280884,-8.52338218689,-197.485061646,-7.45147323608,-199.283905029,-6.43292951584,-200.756134033,-3.85772061348,-200.721237183,-1.79081940651,-196.740844727,-4.06568622589,-198.503982544,-5.14487218857,-201.470062256,-5.18348932266,-203.260696411,-4.15057134628,-205.155166626,-3.04657649994,-206.936584473,-1.99786043167,-208.365219116,.60179567337,-208.295471191,2.66781449318,-208.104171753,2.31463360786,-209.872711182,3.38490724564,-211.269683838,6.00172138214,-211.174850464,8.06674098969,-211.064590454,10.2566184998,-210.951507568,12.3207187653,-209.298736572,14.7839698792,-207.431625366,15.6711730957,-202.858032227,6.98277902603,-204.646286011,5.94576501846,-207.612472534,5.97759199142,-209.378082275,7.05273914337,-211.245742798,8.20140838623,-213.001800537,9.29213047028,-214.368255615,11.9249792099,-214.24949646,13.9887590408,-214.066619873,13.6311321259,-215.809265137,14.7430992126,-217.143692017,17.3923492432,-216.999847412,19.4545326233,-216.837615967,21.6411762238,-216.675537109,23.702009201,-214.964767456,26.1253185272,-213.077087402,26.9679336548,-213.454833984,22.3989295959,-215.178497314,23.5401115417,-216.468063354,26.211473465,-216.289505005,28.2709407806,-216.090423584,30.4545383453,-215.89364624,32.512348175,-214.142272949,34.9064788818,-212.24067688,35.7171630859,-212.479782104,35.3944244385,-212.258010864,37.4496879578,-210.47769165,39.8223800659,-208.566390991,40.6099090576,-206.535415649,41.4362487793,-204.617218018,42.2068405151,-201.686096191,41.7511177063,-200.092407227,40.4345016479,-201.623626709,25.1095275879,-203.446304321,24.1342697144,-206.409667969,24.2675094604,-208.137481689,25.4024047852,-209.964813232,26.6142654419,-211.682495117,27.7643985748,-212.9581604,30.4424343109,-212.76890564,32.5009460449,-212.598342896,32.1372795105,-214.301971436,33.3081893921,-215.545028687,36.0015182495,-215.330749512,38.0575790405,-215.093841553,40.2373924255,-214.86138916,42.2914772034,-213.068740845,44.6548690796,-211.153366089,45.4324493408,-211.687103271,40.8790245056,-213.370773315,42.0784835815,-214.568222046,44.7923736572,-214.319335938,46.8445320129,-214.045715332,49.0200500488,-213.778686523,51.0699272156,-211.946456909,53.4027709961,-210.018249512,54.1479492188,-210.268264771,53.8335762024,-209.976364136,55.8800544739,-208.115936279,58.1904830933,-206.178817749,58.9121894836,-204.120773315,59.6686058044,-202.177352905,60.3731498718,-199.263504028,59.8174591064,-197.715774536,58.4471206665,-203.91809082,50.83543396,-205.572753906,52.0745315552,-206.705459595,54.8161010742,-206.407897949,56.8617706299,-206.082687378,59.0301704407,-205.767059326,61.0731315613,-203.879959106,63.3618049622,-201.93460083,64.0609817505,-202.191986084,63.7526359558,-201.851547241,65.7916107178,-199.936798096,68.0572052002,-197.983078003,68.732711792,-195.907669067,69.4400482178,-193.948074341,70.0982513428,-191.048248291,69.473526001,-189.533493042,68.0668182373,-193.885299683,66.6244888306,-193.510574341,68.6574325562,-191.557891846,70.8904342651,-189.593078613,71.532913208,-187.505996704,72.2051696777,-185.535583496,72.8302459717,-182.646713257,72.1567382812,-181.155883789,70.7247009277,-181.546524048,70.8182678223,-179.568649292,71.4193725586,-176.688171387,70.7108306885,-175.21484375,69.2607879639,-173.658905029,67.7158584595,-172.198471069,66.2528533936,-171.469528198,63.3774719238,-172.056594849,61.3953857422,-175.481155396,36.9969177246,-175.462432861,34.9298095703,-176.954788208,32.3662071228,-178.761550903,31.361782074,-180.682678223,30.3048839569,-182.498260498,29.3164787292,-185.462493896,29.4282970428,-187.198455811,30.5506725311,-186.797180176,30.5331020355,-188.624633789,29.5668201447,-191.587310791,29.7146224976,-193.309494019,30.8579998016,-195.130844116,32.078830719,-196.84286499,33.2373962402,-198.10534668,35.921672821,-197.905944824,37.9792289734,-194.119384766,35.3945999146,-195.962844849,34.4592552185,-198.922607422,34.6569709778,-200.625289917,35.8292121887,-202.42578125,37.0805664062,-204.118057251,38.2678222656,-205.335098267,40.9729919434,-205.101043701,43.0268974304,-204.938476562,42.6596031189,-206.616210938,43.8673210144,-207.800323486,46.5870742798,-207.541351318,48.6379852295,-207.257034302,50.812122345,-206.979919434,52.860660553,-205.136245728,55.184463501,-203.204376221,55.9201583862,-199.337249756,46.8951301575,-201.202423096,46.003818512,-204.156646729,46.2717666626,-205.831008911,47.4841079712,-207.601303101,48.7778663635,-209.264862061,50.0049705505,-210.417358398,52.73828125,-210.13458252,54.7860488892,-209.980804443,54.4149971008,-211.629348755,55.6622161865,-212.748535156,58.4093170166,-212.440933228,60.4534912109,-212.105072021,62.6202774048,-211.779418945,64.6616516113,-209.881072998,66.9410247803,-207.932296753,67.6306381226,-208.672668457,63.1062278748,-210.300003052,64.3810501099,-211.37272644,67.1466293335,-211.030715942,69.185333252,-210.658416748,71.3461456299,-210.29838562,73.3817443848,-208.361907959,75.6287918091,-206.401779175,76.2854614258,-206.665817261,75.9827957153,-206.281082153,78.0138702393,-204.317474365,80.2372436523,-202.349517822,80.8700561523,-200.259170532,81.532043457,-198.285705566,82.1474227905,-195.400192261,81.4597167969,-193.916412354,80.0203704834,-196.663253784,64.8660049438,-198.557800293,64.0390014648,-201.50112915,64.4078140259,-203.133071899,65.6766967773,-204.858062744,67.0302352905,-206.478713989,68.3135147095,-207.53704834,71.0846328735,-207.184432983,73.1215286255,-207.043426514,72.7454299927,-208.648361206,74.048286438,-209.672988892,76.8320617676,-209.295639038,78.8645324707,-208.885879517,81.0185623169,-208.490600586,83.0476074219,-206.515426636,85.2607269287,-204.544219971,85.8832931519,-205.438903809,81.3868560791,-207.021652222,82.7165756226,-207.999191284,85.5172195435,-207.587661743,87.5430374146,-207.141662598,89.6898498535,-206.712234497,91.7119522095,-204.700042725,93.8914718628,-202.718597412,94.4807281494,-202.992858887,94.1872711182,-202.538894653,96.203994751,-200.50038147,98.3589172363,-198.511962891,98.9240646362,-196.400192261,99.5141830444,-194.406829834,100.061729431,-191.546524048,99.2757492065,-190.112854004,97.786491394,-196.901611328,90.6929244995,-198.452346802,92.0598602295,-199.363113403,94.8829269409,-198.903579712,96.898399353,-198.40675354,99.0340118408,-197.929428101,101.045349121,-195.866043091,103.176483154,-193.871170044,103.718513489,-194.152313232,103.431640625,-193.650588989,105.437034607,-191.56149292,107.542945862,-189.560180664,108.060714722,-187.435012817,108.600517273,-185.429199219,109.100563049,-182.588348389,108.246894836,-181.190429688,106.724021912,-185.643310547,105.632827759,-185.107849121,107.629470825,-182.983551025,109.699867249,-180.973815918,110.183853149,-178.83984375,110.68775177,-176.825897217,111.153923035,-173.999832153,110.252479553,-172.627792358,108.70627594,-173.009735107,108.830657959,-170.990264893,109.272338867,-168.175354004,108.336639404,-166.822189331,106.773887634,-165.394256592,105.109947205,-164.054962158,103.53528595,-163.557312012,100.610969543,-164.300369263,98.681930542,-178.917160034,84.1669158936,-180.851348877,83.4373703003,-183.772109985,83.9554214478,-185.337387085,85.3056945801,-186.99130249,86.745223999,-188.544555664,88.1092910767,-189.46055603,90.9306640625,-189.004776001,92.9469833374,-188.883071899,92.5641937256,-190.419647217,93.947013855,-191.301315308,96.7793045044,-190.821075439,98.7899398804,-190.302276611,100.920341492,-189.804275513,102.926651001,-187.719085693,105.036437988,-185.71875,105.557907104,-186.841003418,101.112808228,-188.3540802,102.521324158,-189.187866211,105.36806488,-188.673812866,107.370330811,-188.119186401,109.491661072,-187.58744812,111.489311218,-185.466995239,113.563644409,-183.458145142,114.051338196,-183.74697876,113.772209167,-183.191009521,115.763237,-181.045501709,117.811676025,-179.030883789,118.274940491,-176.891845703,118.756851196,-174.873214722,119.202270508,-172.05657959,118.271812439,-170.700500488,116.711547852,-177.84135437,109.97252655,-179.320541382,111.416572571,-180.086517334,114.282310486,-179.525054932,116.27180481,-178.920196533,118.379371643,-178.341156006,120.363830566,-176.172058105,122.387229919,-174.152191162,122.827079773,-174.44758606,122.554878235,-173.844497681,124.532142639,-171.650970459,126.529052734,-169.625915527,126.944351196,-167.47605896,127.375343323,-165.447418213,127.772712708,-162.653671265,126.775604248,-161.335037231,125.18359375,-165.837615967,124.320350647,-165.201293945,126.28717041,-162.97442627,128.246826172,-160.942672729,128.627929688,-158.785827637,129.022613525,-156.750762939,129.385742188,-153.974227905,128.341705322,-152.682617188,126.72769928,-153.057723999,126.871353149,-151.018417358,127.209732056,-148.254730225,126.132041931,-146.982803345,124.502464294,-145.641357422,122.768043518,-144.383911133,121.12727356,-144.035690308,118.181442261,-144.875900269,116.292701721,-160.049087524,113.651847839,-161.478042603,115.145645142,-162.145584106,118.035888672,-161.516403198,120.005012512,-160.839828491,122.090690613,-160.193252563,124.054161072,-157.956237793,126.002204895,-155.92250061,126.37272644,-156.227035522,126.110794067,-155.556686401,128.066299438,-153.296142578,129.987014771,-151.258087158,130.332824707,-149.094726562,130.690032959,-147.05368042,131.017807007,-144.295669556,129.925750732,-143.03225708,128.289596558,-147.561721802,127.580810547,-146.858520508,129.524719238,-144.565917969,131.407073975,-142.522323608,131.718490601,-140.353240967,132.03918457,-138.306976318,132.332519531,-135.567749023,131.194137573,-134.332092285,129.536911011,-134.702072144,129.69329834,-132.652374268,129.961730957,-129.927185059,128.790206909,-128.711730957,127.11807251,-127.430358887,125.338798523,-126.229766846,123.655982971,-125.982452393,120.699966431,-126.886779785,118.841072083,-135.884567261,122.771217346,-135.135375977,124.697868347,-132.79876709,126.525245667,-130.748336792,126.788047791,-128.572250366,127.057167053,-126.519584656,127.301803589,-123.808174133,126.098701477,-122.612205505,124.412597656,-122.978363037,124.577735901,-120.922874451,124.797424316,-118.226280212,123.561485291,-117.050880432,121.860977173,-115.812133789,120.051773071,-114.651824951,118.340942383,-114.47479248,115.379882812,-115.422988892,113.542984009,-117.98109436,117.34753418,-115.922172546,117.532546997,-113.246795654,116.251350403,-112.100227356,114.531272888,-110.89214325,112.701431274,-109.76083374,110.97127533,-109.633735657,108.007659912,-110.612754822,106.187011719,-110.627540588,106.588394165,-109.517326355,104.84463501,-109.426216125,101.879684448,-110.427276611,100.071052551,-111.497581482,98.157371521,-112.514602661,96.3576660156,-115.088569641,94.8832473755,-117.155502319,94.9164199829,-136.946395874,77.7770004272,-137.208862305,75.7265396118,-139.035858154,73.3896026611,-140.962402344,72.6400985718,-143.009338379,71.8541793823,-144.942443848,71.1217575073,-147.863952637,71.6354751587,-149.431243896,72.9834213257,-149.036071777,72.9114685059,-150.977920532,72.2025756836,-153.892990112,72.7517471313,-155.443786621,74.1186218262,-157.082260132,75.5756988525,-158.620895386,76.9562454224,-159.506759644,79.7872238159,-159.029510498,81.798576355,-155.62940979,78.723197937,-157.582931519,78.0471343994,-160.488327026,78.6453552246,-162.015869141,80.0381698608,-163.629562378,81.5226821899,-165.144729614,82.9289550781,-165.982727051,85.7744522095,-165.47164917,87.7774734497,-165.360534668,87.3914794922,-166.85848999,88.8160476685,-167.661895752,91.6715240479,-167.12651062,93.6681900024,-166.549285889,95.7835083008,-165.996292114,97.7753601074,-163.85383606,99.8269729614,-161.839920044,100.29322052,-159.235488892,90.8262634277,-161.20451355,90.1967773438,-164.09487915,90.8638305664,-165.588912964,92.2925186157,-167.166885376,93.8149185181,-168.648223877,95.2567749023,-169.418441772,98.1213760376,-168.859954834,100.111694336,-168.757995605,99.7231826782,-170.221710205,101.182929993,-170.957092285,104.056671143,-170.374465942,106.040061951,-169.747177124,108.141067505,-169.147033691,110.119232178,-166.956451416,112.119392395,-164.932022095,112.537689209,-166.280578613,108.155914307,-167.719482422,109.64012146,-168.406326294,112.525848389,-167.790344238,114.499137878,-167.127761841,116.589279175,-166.494338989,118.557052612,-164.270385742,120.520004272,-162.239181519,120.90411377,-162.541915894,120.640151978,-161.884658813,122.600067139,-159.637023926,124.535873413,-157.601318359,124.895294189,-155.440383911,125.266975403,-153.401580811,125.608383179,-150.636322021,124.534805298,-149.361984253,122.907112122,-154.1434021,108.266838074,-156.132797241,107.705055237,-158.998672485,108.470535278,-160.442977905,109.949493408,-161.967956543,111.524963379,-163.399124146,113.016639709,-164.070953369,115.905891418,-163.444717407,117.875953674,-163.356109619,117.484176636,-164.769042969,118.993125916,-165.405731201,121.890327454,-164.755599976,123.852622986,-164.05682373,125.930953979,-163.389373779,127.887443542,-161.131729126,129.811523438,-159.094161987,130.160354614,-160.591766357,125.827270508,-161.9790802,127.359809875,-162.566833496,130.267333984,-161.883743286,132.218414307,-161.150039673,134.28465271,-160.449707031,136.229598999,-158.159927368,138.115371704,-156.116790771,138.429794312,-156.428390503,138.176345825,-155.704483032,140.11265564,-153.391967773,141.970458984,-151.345153809,142.260040283,-149.172805786,142.557632446,-147.123519897,142.829116821,-144.396591187,141.661621094,-143.178665161,139.99130249,-150.868682861,133.886428833,-152.219238281,135.451477051,-152.737762451,138.372146606,-152.008529663,140.306442261,-151.225982666,142.354705811,-150.479675293,144.282470703,-148.145736694,146.113327026,-146.095703125,146.379165649,-146.413238525,146.133163452,-145.643569946,148.051727295,-143.287597656,149.854095459,-141.234481812,150.095031738,-139.055679321,150.340927124,-137.000518799,150.563674927,-134.302078247,149.331741333,-133.124145508,147.632980347,-137.684005737,147.157226562,-136.882095337,149.062545776,-134.496078491,150.824966431,-132.439208984,151.03125,-130.256561279,151.240386963,-128.197937012,151.428466797,-125.520645142,150.1512146,-124.371513367,148.432846069,-124.732971191,148.608001709,-122.672225952,148.771072388,-120.010635376,147.461410522,-118.882469177,145.729202271,-117.693984985,143.886581421,-116.581176758,142.144485474,-116.485671997,139.179672241,-117.484054565,137.369552612,-133.938323975,124.976219177,-135.953735352,124.516365051,-138.776947021,125.42665863,-140.144134521,126.977172852,-141.587036133,128.628189087,-142.940444946,130.190734863,-143.464401245,133.110427856,-142.738769531,135.046081543,-142.670211792,134.650299072,-144.004562378,136.229171753,-144.493026733,139.155014038,-143.743927002,141.081710815,-142.940322876,143.121795654,-142.174224854,145.041793823,-139.821594238,146.848526001,-137.768936157,147.09324646,-139.485046387,142.841964722,-140.79258728,144.443099976,-141.231674194,147.376754761,-140.450210571,149.290557861,-139.612365723,151.316802979,-138.813995361,153.223617554,-136.431243896,154.990432739,-134.374740601,155.200531006,-134.69883728,154.963226318,-133.877380371,156.860214233,-131.473342896,158.597991943,-129.41444397,158.783081055,-127.229766846,158.96975708,-125.169303894,159.136657715,-122.505310059,157.83190918,-121.373924255,156.101806641,-129.364547729,150.396011353,-130.633712769,152.027755737,-131.003036499,154.97102356,-130.176345825,156.865707397,-129.290588379,158.871520996,-128.447174072,160.758834839,-126.023139954,162.468566895,-123.962234497,162.629760742,-124.291862488,162.400268555,-123.425590515,164.277191162,-120.980979919,165.957382202,-118.918266296,166.093521118,-116.729759216,166.228271484,-114.665931702,166.346160889,-112.033668518,164.978561401,-110.943687439,163.222091675,-115.521835327,162.978927612,-114.624046326,164.840988159,-112.151451111,166.479736328,-110.086738586,166.581100464,-107.896270752,166.678955078,-105.830749512,166.762054443,-103.221908569,165.350265503,-102.161689758,163.575668335,-102.513778687,163.768981934,-100.447395325,163.82699585,-97.8558883667,162.383636475,-96.8172988892,160.596298218,-95.724067688,158.695602417,-94.7013320923,156.899139404,-94.7567749023,153.933288574,-95.8459625244,152.176315308,-111.237289429,151.622573853,-112.449905396,153.296737671,-112.718345642,156.250915527,-111.827339172,158.116241455,-110.873535156,160.090591431,-109.966064453,161.947967529,-107.484985352,163.573822021,-105.419784546,163.664459229,-105.757080078,163.446334839,-104.827133179,165.292541504,-102.32648468,166.888153076,-100.260322571,166.953689575,-98.0684890747,167.013504028,-96.0018310547,167.060775757,-93.4178695679,165.603942871,-92.3885879517,163.811203003,-96.9723739624,163.724761963,-96.0114364624,165.555007935,-93.4842529297,167.108261108,-91.4172897339,167.138961792,-89.2247543335,167.161834717,-87.1576004028,167.174255371,-84.5985565186,165.674087524,-83.5996398926,163.864273071,-83.9449234009,164.069519043,-81.8777542114,164.056854248,-79.3371124268,162.525726318,-78.3602600098,160.703903198,-77.3326644897,158.766937256,-76.3719558716,156.936553955,-76.5287857056,153.974349976,-77.6773986816,152.255645752,-86.0574111938,157.372436523,-85.0532913208,159.179367065,-82.489944458,160.672149658,-80.4228134155,160.653778076,-78.2303619385,160.624588013,-76.1634902954,160.587921143,-73.6408004761,159.027404785,-72.6851425171,157.194366455,-73.0254440308,157.407745361,-70.9591751099,157.345977783,-68.4556121826,155.754974365,-67.5222854614,153.910461426,-66.540977478,151.949615479,-65.6240081787,150.096939087,-65.8511352539,147.139312744,-67.0402374268,145.448364258,-69.0574188232,149.565353394,-66.992477417,149.468765259,-64.5160903931,147.835769653,-63.6139793396,145.975799561,-62.6658668518,143.998718262,-61.7802467346,142.130828857,-62.0571899414,139.177459717,-63.2746276855,137.506774902,-63.2346954346,137.906463623,-62.3718261719,136.02796936,-62.6846160889,133.078170776,-63.9222602844,131.422409058,-65.2427597046,129.671966553,-66.4949951172,128.027206421,-69.2454986572,126.916381836,-71.2887268066,127.230224609,-95.9261474609,127.326263428,-97.9717636108,127.028373718,-100.713531494,128.160614014,-101.952896118,129.815093994,-103.25970459,131.575759888,-104.484390259,133.241134644,-104.774177551,136.193283081,-103.89667511,138.064987183,-103.85987854,137.665023804,-105.06426239,139.345123291,-105.31816864,142.300582886,-104.417999268,144.161499023,-103.454490662,146.131118774,-102.537918091,147.984008789,-100.048866272,149.597640991,-97.9832382202,149.678115845,-100.032455444,145.57699585,-101.208343506,147.277160645,-101.412399292,150.236480713,-100.481010437,152.081954956,-99.4844436646,154.035079956,-98.5367660522,155.872238159,-96.0208740234,157.443695068,-93.9541778564,157.489349365,-94.2961273193,157.278640747,-93.326210022,159.104156494,-90.7914276123,160.644958496,-88.7243347168,160.665496826,-86.5317077637,160.677597046,-84.464515686,160.679855347,-81.9128875732,159.167114258,-80.9228820801,157.352401733,-89.3425292969,152.301101685,-90.4777145386,154.028717041,-90.6114501953,156.99206543,-89.6364898682,158.814910889,-88.5938339233,160.743789673,-87.6027908325,162.557937622,-85.0502929688,164.069213867,-82.9831085205,164.065750122,-83.3299636841,163.863235474,-82.3169708252,165.66519165,-79.746307373,167.145370483,-77.6793060303,167.116836548,-75.4870223999,167.076858521,-73.4203567505,167.030029297,-70.9053573608,165.457122803,-69.9587249756,163.619430542,-74.5416946411,163.741622925,-73.4984741211,165.526275635,-70.9032287598,166.962905884,-68.8370056152,166.899520874,-66.6456985474,166.822616577,-64.580116272,166.740966797,-62.0919914246,165.125900269,-61.1764602661,163.272506714,-61.5120391846,163.493225098,-59.4476013184,163.386489868,-56.9792709351,161.741348267,-56.0863227844,159.876953125,-55.14793396,157.895248413,-54.2715110779,156.023025513,-54.5629730225,153.071060181,-55.7886123657,151.406387329,-71.1751556396,152.080123901,-72.2506027222,153.845535278,-72.2829208374,156.811737061,-71.2462005615,158.600158691,-70.1381835938,160.492279053,-69.0856933594,162.271484375,-66.4830169678,163.694580078,-64.417137146,163.620437622,-64.7707290649,163.429885864,-63.6967086792,165.196182251,-61.0769309998,166.587585449,-59.0121192932,166.488372803,-56.822479248,166.373443604,-54.7586250305,166.255966187,-52.2988853455,164.597991943,-51.4156532288,162.729003906,-55.9917488098,163.007827759,-54.8881072998,164.755767822,-52.2452583313,166.102813721,-50.1824111938,165.968811035,-47.9950180054,165.817001343,-45.9334373474,165.664749146,-43.5019950867,163.965576172,-42.6503791809,162.081939697,-42.9782104492,162.314025879,-40.9186286926,162.136764526,-38.5079994202,160.408157349,-37.6793251038,158.514312744,-36.8092498779,156.501693726,-35.9973602295,154.600616455,-36.3895988464,151.660308838,-37.6714439392,150.038513184,-45.6173553467,155.80645752,-44.4725151062,157.527694702,-41.7984199524,158.811599731,-39.7393379211,158.628646851,-37.5561714172,158.424942017,-35.4987792969,158.2237854,-33.1083717346,156.467346191,-32.3017272949,154.564025879,-32.6239585876,154.803848267,-30.5691699982,154.577713013,-28.2002696991,152.792358398,-27.4167995453,150.879379272,-26.5947608948,148.84664917,-25.8282413483,146.926803589,-26.2901916504,143.996658325,-27.6101856232,142.405776978,-29.2930850983,146.670303345,-27.2423973083,146.409591675,-24.903924942,144.584564209,-24.1528053284,142.658660889,-23.3651504517,140.612365723,-22.6310939789,138.679885864,-23.1423606873,135.75793457,-24.4889812469,134.189529419,-24.417350769,134.584762573,-23.7068214417,132.643508911,-24.2535362244,129.727981567,-25.6191043854,128.176040649,-27.0748138428,126.536323547,-28.4540538788,124.996520996,-31.2842826843,124.108261108,-33.2960319519,124.583808899,-49.6531867981,137.105072021,-50.637424469,138.922912598,-50.5188064575,141.886886597,-49.3924484253,143.620269775,-48.1896247864,145.453567505,-47.0479812622,147.1769104,-44.3762664795,148.465774536,-42.3168487549,148.286651611,-42.6796722412,148.114334106,-41.5171852112,149.823699951,-38.8300132751,151.080032349,-36.7729225159,150.875915527,-34.5919647217,150.649734497,-32.5367546082,150.427429199,-30.1645469666,148.646453857,-29.377532959,146.734939575,-33.9335250854,147.24621582,-32.7423973083,148.935745239,-30.0344390869,150.146606445,-27.9810791016,149.907836914,-25.8042411804,149.644958496,-23.7530727386,149.388031006,-21.4112186432,147.567352295,-20.6565322876,145.642837524,-20.9721317291,145.891281128,-18.9242343903,145.609481812,-16.6046638489,143.760482788,-15.8734054565,141.826950073,-15.1068439484,139.772674561,-14.3927173615,137.832733154,-14.9340248108,134.91619873,-16.2967128754,133.361724854,-23.9389076233,139.526397705,-22.7079925537,141.187164307,-19.9720458984,142.333374023,-17.9249324799,142.045913696,-15.7549524307,141.731399536,-13.7104625702,141.425857544,-11.4125022888,139.550064087,-10.7037277222,137.608184814,-11.01334095,137.864059448,-8.97271251678,137.533691406,-6.69770240784,135.630142212,-6.01256465912,133.679794312,-5.29500150681,131.60786438,-4.627140522,129.651535034,-5.2375535965,126.748695374,-6.63677024841,125.227012634,-8.10055541992,129.571640015,-6.06578493118,129.206939697,-3.823179245,127.265304565,-3.17100906372,125.303688049,-2.48846793175,123.219970703,-1.85367393494,121.252655029,-2.51292419434,118.360496521,-3.93758821487,116.862609863,-3.84594368935,117.253707886,-3.23508858681,115.278816223,-3.92941451073,112.394874573,-5.37216329575,110.914413452,-6.90940237045,109.350883484,-8.36519241333,107.883232117,-11.2369432449,107.140106201,-13.2218971252,107.717399597,-17.8889732361,122.394523621,-16.6019859314,124.01222229,-13.8284435272,125.064201355,-11.7923583984,124.706916809,-9.63440227509,124.318397522,-7.60155773163,123.943115234,-5.36908435822,121.989845276,-4.72712898254,120.024856567,-5.02781152725,120.291168213,-2.99967312813,119.891227722,-.791086316109,117.910995483,-.17304174602,115.938354492,.473251253366,113.843109131,1.07382321358,111.865081787,.364502757788,108.984786987,-1.08592998981,107.511856079,-2.40029168129,111.903991699,-.379182755947,111.469917297,1.79571628571,109.452735901,2.38042664528,107.469963074,2.99131536484,105.364128113,3.55846476555,103.376251221,2.80070161819,100.508331299,1.32565021515,99.0600585938,1.43061339855,99.4477539062,1.97357940674,97.4531402588,1.18104255199,94.5946426392,-.31148853898,93.1643753052,-1.90129446983,91.6543273926,-3.40641784668,90.2373199463,-6.30190181732,89.5928344727,-8.26595497131,90.2376556396,-5.58778810501,99.6839981079,-3.57755637169,99.2020568848,-1.45117068291,97.1338043213,-.913708627224,95.1377029419,-.352997660637,93.0179595947,.166787564754,91.0171737671,-.658864498138,88.1680526733,-2.16789102554,86.7552032471,-2.0537507534,87.1403121948,-1.5583024025,85.1333694458,-2.41849398613,82.2944793701,-3.9445669651,80.900062561,-5.56978225708,79.4281845093,-7.10813045502,78.0473175049,-10.0181016922,77.4717636108,-11.9662895203,78.1630477905,-8.54233074188,81.2118301392,-8.08077812195,79.1968231201,-8.9886932373,76.3728408813,-10.5380506516,75.0043411255,-12.1878423691,73.5600662231,-13.7492437363,72.205329895,-16.6685009003,71.6789093018,-18.6047611237,72.4029159546,-18.2090454102,72.4718017578,-19.7867832184,71.1361160278,-22.7122211456,70.6451873779,-24.6395435333,71.3926620483,-26.6803092957,72.1945343018,-28.6009483337,72.959022522,-30.4096660614,75.3101425171,-30.6561183929,77.3625946045,30.6561183929,77.3625946045,30.4096698761,75.3101425171,28.6009483337,72.959022522,26.6803131104,72.1945343018,24.639547348,71.3926620483,22.712223053,70.6451873779,19.7867851257,71.1361160278,18.2090473175,72.4718017578,18.604763031,72.4029159546,16.6685028076,71.6789093018,13.7492456436,72.205329895,12.1878442764,73.5600662231,10.5380525589,75.0043411255,8.98869514465,76.3728408813,8.08078098297,79.1968231201,8.54233360291,81.2118301392,11.9662914276,78.1630477905,10.0181026459,77.4717636108,7.10813188553,78.0473175049,5.56978464127,79.4281845093,3.94456934929,80.900062561,2.4184961319,82.2944793701,1.55830442905,85.1333694458,2.05375313759,87.1403121948,2.16789245605,86.7552032471,.658865869045,88.1680526733,-.166786178946,91.0171737671,.352999061346,93.0179595947,.913709759712,95.1377029419,1.45117175579,97.1338043213,3.57755661011,99.2020568848,5.58778810501,99.6839981079,8.26595401764,90.2376556396,6.30190038681,89.5928344727,3.40641736984,90.2373199463,1.90129387379,91.6543273926,.311487227678,93.1643753052,-1.18104374409,94.5946426392,-1.97358059883,97.4531402588,-1.43061470985,99.4477539062,-1.32565033436,99.0600585938,-2.80070161819,100.508331299,-3.5584654808,103.376251221,-2.99131631851,105.364128113,-2.38042759895,107.469963074,-1.79571759701,109.452735901,.379180550575,111.469917297,2.4002892971,111.903991699,1.08592998981,107.511856079,-.364502757788,108.984786987,-1.07382321358,111.865081787,-.473251253366,113.843109131,.17304174602,115.938354492,.791086316109,117.910995483,2.99967312813,119.891227722,5.02781152725,120.291168213,4.72712755203,120.024856567,5.36908340454,121.989845276,7.60155534744,123.943115234,9.63440132141,124.318397522,11.7923583984,124.706916809,13.8284435272,125.064201355,16.6019859314,124.01222229,17.8889732361,122.394523621,13.2218971252,107.717399597,11.2369432449,107.140106201,8.36519241333,107.883232117,6.90940237045,109.350883484,5.37216329575,110.914413452,3.92941451073,112.394874573,3.23508858681,115.278816223,3.84594368935,117.253707886,3.93758821487,116.862609863,2.51292419434,118.360496521,1.85367393494,121.252655029,2.48846793175,123.219970703,3.17100906372,125.303688049,3.823179245,127.265304565,6.06578493118,129.206939697,8.10055541992,129.571640015,6.63677024841,125.227012634,5.2375535965,126.748695374,4.627140522,129.651535034,5.29500150681,131.60786438,6.01256465912,133.679794312,6.69770240784,135.630142212,8.97271251678,137.533691406,11.01334095,137.864059448,10.7037277222,137.608184814,11.4125022888,139.550064087,13.7104625702,141.425857544,15.7549524307,141.731399536,17.9249324799,142.045913696,19.9720458984,142.333374023,22.7079925537,141.187164307,23.9389076233,139.526397705,16.2967128754,133.361724854,14.9340248108,134.91619873,14.3927173615,137.832733154,15.1068439484,139.772674561,15.8734054565,141.826950073,16.6046638489,143.760482788,18.9242343903,145.609481812,20.9721317291,145.891281128,20.6565322876,145.642837524,21.4112186432,147.567352295,23.7530727386,149.388031006,25.8042411804,149.644958496,27.9810791016,149.907836914,30.0344390869,150.146606445,32.7423973083,148.935745239,33.9335250854,147.24621582,29.377532959,146.734939575,30.1645469666,148.646453857,32.5367546082,150.427429199,34.5919647217,150.649734497,36.7729225159,150.875915527,38.8300132751,151.080032349,41.5171852112,149.823699951,42.6796722412,148.114334106,42.3168487549,148.286651611,44.3762664795,148.465774536,47.0479812622,147.1769104,48.1896247864,145.453567505,49.3924484253,143.620269775,50.5188064575,141.886886597,50.637424469,138.922912598,49.6531867981,137.105072021,33.2960395813,124.583808899,31.2842903137,124.108261108,28.4540576935,124.996520996,27.0748157501,126.536323547,25.6191082001,128.176040649,24.2535400391,129.727981567,23.7068271637,132.643508911,24.4173564911,134.584762573,24.488986969,134.189529419,23.1423683167,135.75793457,22.6311016083,138.679885864,23.3651580811,140.612365723,24.1528148651,142.658660889,24.9039325714,144.584564209,27.2424087524,146.409591675,29.2931003571,146.670303345,27.6101856232,142.405776978,26.2901954651,143.996673584,25.828245163,146.926818848,26.5947647095,148.846664429,27.4168014526,150.879379272,28.2002716064,152.792358398,30.5691738129,154.577713013,32.623966217,154.803848267,32.3017349243,154.564025879,33.1083755493,156.467346191,35.4987869263,158.2237854,37.5561714172,158.424942017,39.7393493652,158.628646851,41.7984352112,158.811599731,44.4725227356,157.527694702,45.6173667908,155.80645752,37.6714515686,150.038543701,36.3896102905,151.660324097,35.9973716736,154.600616455,36.8092575073,156.501708984,37.6793365479,158.514358521,38.5080108643,160.408172607,40.918636322,162.136764526,42.9782218933,162.314056396,42.6503944397,162.081970215,43.5020065308,163.965606689,45.9334526062,165.664794922,47.9950294495,165.81703186,50.1824188232,165.968841553,52.2452697754,166.102813721,54.8881187439,164.755767822,55.9917678833,163.007843018,51.4156570435,162.729003906,52.2988929749,164.597991943,54.7586288452,166.255966187,56.8224830627,166.373443604,59.0121269226,166.488372803,61.0769348145,166.587585449,63.6967124939,165.196182251,64.7707366943,163.429885864,64.4171447754,163.620437622,66.4830169678,163.694580078,69.0857009888,162.271484375,70.1381912231,160.492279053,71.2462005615,158.600158691,72.2829208374,156.811737061,72.2506027222,153.845535278,71.1751556396,152.080123901,55.7886123657,151.406387329,54.5629730225,153.071060181,54.2715110779,156.02305603,55.14793396,157.895248413,56.0863227844,159.876953125,56.9792709351,161.741348267,59.4476013184,163.386489868,61.5120391846,163.493225098,61.1764717102,163.272506714,62.091999054,165.125900269,64.5801239014,166.740966797,66.6457061768,166.822616577,68.8370056152,166.899520874,70.9032363892,166.962905884,73.4984741211,165.526275635,74.5417098999,163.741622925,69.958732605,163.619430542,70.9053726196,165.457122803,73.4203643799,167.030029297,75.4870300293,167.076858521,77.6793136597,167.116836548,79.746307373,167.145370483,82.3169708252,165.66519165,83.3299713135,163.863235474,82.9831161499,164.065750122,85.0503005981,164.069213867,87.6027984619,162.557937622,88.5938415527,160.743774414,89.6364974976,158.814910889,90.6114578247,156.99206543,90.4777297974,154.028717041,89.3425369263,152.301101685,80.9228897095,157.352401733,81.9128952026,159.167114258,84.4645233154,160.679855347,86.5317153931,160.677597046,88.7243423462,160.665496826,90.7914352417,160.644958496,93.3262176514,159.104156494,94.2961349487,157.278640747,93.9541854858,157.489318848,96.0208816528,157.44367981,98.5367660522,155.872207642,99.4844512939,154.035049438,100.481018066,152.081954956,101.412414551,150.236480713,101.208358765,147.277160645,100.032470703,145.57699585,97.9832458496,149.678115845,100.048873901,149.597640991,102.537918091,147.984008789,103.45450592,146.131118774,104.418014526,144.161499023,105.31816864,142.300582886,105.06426239,139.345123291,103.859893799,137.665023804,103.896690369,138.064987183,104.774177551,136.193283081,104.484390259,133.241134644,103.259719849,131.575759888,101.952903748,129.815093994,100.713539124,128.160614014,97.9717712402,127.028388977,95.9261550903,127.326278687,71.2887268066,127.230194092,69.2454986572,126.916366577,66.4949951172,128.027191162,65.2427597046,129.671951294,63.9222602844,131.42237854,62.6846160889,133.078140259,62.3718261719,136.027938843,63.2346954346,137.906433105,63.2746276855,137.506759644,62.0571899414,139.177429199,61.7802467346,142.130813599,62.6658668518,143.998687744,63.6139793396,145.975753784,64.5160903931,147.835739136,66.992477417,149.468734741,69.0574188232,149.565307617,67.0402374268,145.448348999,65.8511352539,147.139282227,65.6240081787,150.096908569,66.540977478,151.949615479,67.5222854614,153.910446167,68.4556121826,155.754943848,70.9591751099,157.345977783,73.0254440308,157.407730103,72.6851425171,157.194351196,73.6408004761,159.027389526,76.1634902954,160.587905884,78.2303619385,160.624557495,80.4228134155,160.653747559,82.489944458,160.672134399,85.0532836914,159.179351807,86.0574111938,157.372406006,77.6773986816,152.255645752,76.5287857056,153.974349976,76.3719558716,156.936553955,77.3326644897,158.766937256,78.3602523804,160.703903198,79.3371124268,162.525726318,81.8777542114,164.056854248,83.9449234009,164.069519043,83.5996398926,163.864273071,84.5985565186,165.674087524,87.1576004028,167.174255371,89.2247543335,167.161834717,91.4172897339,167.138961792,93.4842529297,167.108261108,96.0114364624,165.555007935,96.9723739624,163.724761963,92.3885879517,163.811203003,93.4178695679,165.603912354,96.0018310547,167.060760498,98.0684890747,167.01348877,100.260322571,166.953643799,102.32648468,166.888122559,104.827133179,165.292526245,105.757080078,163.446304321,105.419784546,163.664413452,107.484985352,163.573776245,109.966064453,161.947921753,110.873535156,160.090545654,111.827339172,158.116226196,112.718345642,156.250915527,112.449905396,153.296722412,111.237289429,151.622543335,95.8459701538,152.176315308,94.7567825317,153.933288574,94.7013473511,156.899139404,95.7240829468,158.695602417,96.8173065186,160.596298218,97.8558959961,162.383636475,100.447402954,163.82699585,102.513786316,163.768981934,102.161697388,163.575668335,103.221908569,165.350265503,105.830757141,166.762054443,107.896286011,166.678955078,110.086753845,166.581100464,112.15146637,166.479736328,114.624061584,164.840988159,115.521842957,162.978927612,110.943710327,163.222091675,112.033676147,164.978561401,114.66595459,166.346160889,116.729782104,166.228271484,118.918289185,166.093521118,120.980987549,165.957382202,123.425613403,164.277175903,124.291893005,162.400253296,123.962257385,162.629760742,126.023162842,162.468566895,128.44720459,160.758834839,129.290618896,158.871520996,130.176345825,156.865707397,131.003036499,154.97102356,130.633743286,152.027755737,129.364578247,150.396011353,121.373924255,156.101791382,122.505310059,157.831893921,125.169303894,159.136642456,127.229766846,158.969741821,129.41444397,158.783065796,131.473342896,158.597961426,133.877380371,156.860198975,134.69883728,154.963226318,134.374740601,155.200515747,136.431243896,154.990402222,138.813995361,153.223602295,139.612365723,151.31678772,140.450210571,149.290527344,141.231674194,147.376724243,140.79258728,144.443069458,139.485046387,142.841949463,137.768936157,147.093231201,139.821594238,146.848526001,142.174224854,145.041778564,142.940322876,143.121795654,143.743927002,141.081695557,144.493026733,139.155014038,144.004562378,136.229156494,142.670211792,134.650299072,142.738769531,135.046066284,143.464401245,133.110427856,142.940444946,130.190719604,141.587036133,128.628189087,140.144134521,126.977157593,138.776947021,125.426651001,135.953735352,124.516357422,133.938323975,124.976211548,117.484054565,137.369552612,116.485671997,139.179656982,116.581176758,142.144454956,117.693984985,143.886581421,118.882469177,145.729187012,120.010635376,147.461395264,122.672225952,148.77104187,124.732971191,148.60798645,124.371513367,148.432830811,125.520645142,150.151199341,128.197937012,151.428451538,130.256561279,151.240371704,132.439208984,151.031234741,134.496078491,150.824951172,136.882095337,149.062545776,137.684005737,147.157211304,133.124145508,147.632965088,134.302078247,149.331726074,137.000518799,150.563659668,139.055679321,150.340927124,141.234481812,150.095001221,143.287597656,149.854095459,145.643569946,148.051712036,146.413238525,146.133148193,146.095703125,146.379135132,148.145736694,146.113296509,150.479675293,144.282455444,151.225982666,142.354675293,152.008529663,140.306427002,152.737762451,138.372131348,152.219238281,135.451461792,150.868682861,133.886413574,143.178665161,139.991271973,144.396591187,141.661590576,147.123519897,142.829101562,149.172805786,142.557617188,151.345153809,142.260040283,153.391967773,141.970428467,155.704483032,140.112640381,156.428390503,138.176315308,156.116790771,138.429794312,158.159927368,138.115341187,160.449707031,136.229598999,161.150039673,134.28465271,161.883743286,132.218383789,162.566833496,130.267318726,161.9790802,127.359786987,160.591766357,125.82724762,159.094161987,130.160339355,161.131729126,129.811508179,163.389373779,127.887420654,164.05682373,125.930938721,164.755599976,123.852615356,165.405731201,121.890304565,164.769042969,118.993103027,163.356109619,117.484169006,163.444717407,117.875938416,164.070953369,115.905883789,163.399124146,113.016616821,161.967956543,111.524940491,160.442962646,109.949478149,158.998657227,108.470527649,156.132781982,107.705032349,154.143386841,108.266822815,149.361984253,122.907104492,150.636322021,124.534797668,153.401580811,125.60836792,155.44039917,125.266967773,157.601333618,124.895278931,159.637023926,124.535873413,161.884674072,122.600067139,162.541946411,120.640136719,162.239181519,120.904098511,164.270385742,120.519989014,166.494338989,118.557029724,167.127761841,116.589271545,167.790344238,114.49912262,168.406326294,112.525840759,167.719482422,109.640106201,166.280578613,108.155914307,164.932022095,112.53767395,166.956451416,112.119384766,169.147033691,110.119232178,169.747177124,108.141059875,170.374465942,106.040046692,170.957092285,104.056655884,170.221710205,101.182922363,168.757995605,99.7231750488,168.859954834,100.111686707,169.418441772,98.1213684082,168.648223877,95.2567672729,167.166885376,93.8149108887,165.588912964,92.2925186157,164.09487915,90.863822937,161.20451355,90.1967697144,159.235488892,90.8262634277,161.839920044,100.293212891,163.85383606,99.826965332,165.996292114,97.7753601074,166.549285889,95.7835083008,167.12651062,93.6681900024,167.661895752,91.6715240479,166.85848999,88.8160400391,165.360534668,87.3914642334,165.47164917,87.7774658203,165.982727051,85.7744522095,165.144729614,82.9289474487,163.629562378,81.5226669312,162.015869141,80.0381622314,160.488327026,78.6453475952,157.582931519,78.04712677,155.62940979,78.7231903076,159.029510498,81.7985687256,159.506759644,79.7872161865,158.620895386,76.956237793,157.082260132,75.5756988525,155.443786621,74.1186141968,153.892990112,72.7517318726,150.977920532,72.2025680542,149.036071777,72.9114608765,149.431243896,72.9834136963,147.863952637,71.6354675293,144.942443848,71.1217422485,143.009338379,71.8541717529,140.962402344,72.6400985718,139.035858154,73.3895874023,137.208862305,75.726524353,136.946395874,77.7769927979,117.155502319,94.9164199829,115.088569641,94.8832473755,112.514602661,96.3576660156,111.497581482,98.157371521,110.427276611,100.071052551,109.426216125,101.879692078,109.517326355,104.84463501,110.627540588,106.588394165,110.612754822,106.187011719,109.633735657,108.007659912,109.76083374,110.97127533,110.89214325,112.701431274,112.100227356,114.531272888,113.246795654,116.251350403,115.922172546,117.532546997,117.98109436,117.34753418,115.422988892,113.542991638,114.47479248,115.379890442,114.651824951,118.340950012,115.812133789,120.051780701,117.050880432,121.860992432,118.226280212,123.561500549,120.922874451,124.797424316,122.978363037,124.577735901,122.612205505,124.412590027,123.808174133,126.098701477,126.519584656,127.301795959,128.572250366,127.057151794,130.748336792,126.788032532,132.79876709,126.525245667,135.135375977,124.697853088,135.884567261,122.771202087,126.886779785,118.841056824,125.982452393,120.699958801,126.229766846,123.655967712,127.430358887,125.338783264,128.711730957,127.118057251,129.927185059,128.79019165,132.652374268,129.961715698,134.702072144,129.693283081,134.332092285,129.536895752,135.567749023,131.194137573,138.306976318,132.332504272,140.353240967,132.03918457,142.522323608,131.718475342,144.565933228,131.407073975,146.858520508,129.524719238,147.561737061,127.580795288,143.03225708,128.289581299,144.295669556,129.925750732,147.05368042,131.017791748,149.094726562,130.6900177,151.258087158,130.332794189,153.296142578,129.986984253,155.556686401,128.066253662,156.227035522,126.110771179,155.92250061,126.372711182,157.956237793,126.002182007,160.193252563,124.054153442,160.839828491,122.090660095,161.516403198,120.005004883,162.145584106,118.035865784,161.478042603,115.145614624,160.049087524,113.651817322,144.875900269,116.292694092,144.035690308,118.181427002,144.383911133,121.12726593,145.641357422,122.768035889,146.982803345,124.502456665,148.254730225,126.132026672,151.018417358,127.209701538,153.057723999,126.871330261,152.682617188,126.727684021,153.974227905,128.341690063,156.750762939,129.385726929,158.785827637,129.022613525,160.942672729,128.62789917,162.97442627,128.246795654,165.201293945,126.287155151,165.837615967,124.320327759,161.335037231,125.183586121,162.653671265,126.775596619,165.447418213,127.772689819,167.47605896,127.375328064,169.625915527,126.944328308,171.650970459,126.529029846,173.844497681,124.53213501,174.44758606,122.554862976,174.152191162,122.827056885,176.172058105,122.387199402,178.341156006,120.363792419,178.920196533,118.379348755,179.525054932,116.271781921,180.086517334,114.282302856,179.320541382,111.416557312,177.84135437,109.972503662,170.700500488,116.711540222,172.05657959,118.271789551,174.873214722,119.202255249,176.891845703,118.756835938,179.030883789,118.274917603,181.045501709,117.811660767,183.191009521,115.76322937,183.74697876,113.772186279,183.458145142,114.051315308,185.466995239,113.563621521,187.58744812,111.489295959,188.119186401,109.491645813,188.673812866,107.370307922,189.187866211,105.368057251,188.3540802,102.521316528,186.841003418,101.112792969,185.71875,105.557891846,187.719085693,105.036407471,189.804275513,102.926635742,190.302276611,100.920318604,190.821075439,98.7899246216,191.301315308,96.7792816162,190.419647217,93.9469985962,188.883071899,92.5641708374,189.004776001,92.9469680786,189.46055603,90.9306411743,188.544555664,88.1092605591,186.99130249,86.7452011108,185.337387085,85.3056716919,183.772109985,83.955406189,180.851348877,83.4373474121,178.917160034,84.1669006348,164.300369263,98.6819152832,163.557312012,100.610954285,164.054962158,103.535255432,165.394256592,105.109924316,166.822189331,106.773872375,168.175354004,108.336631775,170.990264893,109.272315979,173.009735107,108.8306427,172.627792358,108.706253052,173.999832153,110.252464294,176.825897217,111.153907776,178.83984375,110.687728882,180.973815918,110.183830261,182.983551025,109.699859619,185.107849121,107.629455566,185.643310547,105.632820129,181.190429688,106.723999023,182.588348389,108.246887207,185.429199219,109.10055542,187.435012817,108.600494385,189.560180664,108.060691833,191.56149292,107.542915344,193.650588989,105.437011719,194.152313232,103.431625366,193.871170044,103.718505859,195.866043091,103.176452637,197.929428101,101.045333862,198.40675354,99.033996582,198.903579712,96.8983840942,199.363113403,94.8829116821,198.452346802,92.0598449707,196.901611328,90.6929168701,190.112854004,97.7864761353,191.546524048,99.2757263184,194.406829834,100.061714172,196.400192261,99.5141677856,198.511962891,98.9240493774,200.50038147,98.3589019775,202.538894653,96.2039642334,202.992858887,94.1872406006,202.718597412,94.4807128906,204.700042725,93.891456604,206.712234497,91.7119369507,207.141662598,89.6898269653,207.587661743,87.5430145264,207.999191284,85.5172042847,207.021652222,82.7165527344,205.438903809,81.3868331909,204.544219971,85.8832778931,206.515426636,85.2607116699,208.490600586,83.0475921631,208.885879517,81.0185317993,209.295639038,78.8645172119,209.672988892,76.8320465088,208.648361206,74.0482711792,207.043426514,72.7454071045,207.184463501,73.1215133667,207.537078857,71.0846099854,206.478713989,68.3134918213,204.858062744,67.0302200317,203.133071899,65.6766815186,201.50112915,64.4077987671,198.557800293,64.0389862061,196.663253784,64.8659896851,193.916412354,80.0203475952,195.400192261,81.4596939087,198.285705566,82.1474075317,200.259170532,81.5320205688,202.349517822,80.8700408936,204.317474365,80.2372283936,206.281082153,78.0138626099,206.665817261,75.9827804565,206.401779175,76.285446167,208.361907959,75.6287765503,210.29838562,73.381729126,210.658416748,71.3461227417,211.030715942,69.1853179932,211.37272644,67.1466140747,210.300003052,64.3810348511,208.672668457,63.1062088013,207.932296753,67.6306152344,209.881072998,66.9410095215,211.779418945,64.6616363525,212.105072021,62.6202583313,212.440933228,60.4534759521,212.748535156,58.4092979431,211.629348755,55.662197113,209.980804443,54.4149780273,210.13458252,54.7860298157,210.417358398,52.7382621765,209.264862061,50.0049514771,207.601303101,48.77784729,205.831008911,47.4840927124,204.156646729,46.2717475891,201.202423096,46.0038032532,199.337249756,46.895111084,203.204376221,55.9201393127,205.136245728,55.1844444275,206.979919434,52.8606414795,207.257034302,50.8121032715,207.541351318,48.637966156,207.800323486,46.5870552063,206.616210938,43.8673019409,204.938476562,42.6595840454,205.101043701,43.0268783569,205.335098267,40.9729728699,204.118057251,38.2678031921,202.42578125,37.0805473328,200.625289917,35.8291931152,198.922607422,34.656955719,195.962844849,34.459236145,194.119384766,35.3945808411,197.905944824,37.9792060852,198.10534668,35.9216499329,196.84286499,33.2373733521,195.130844116,32.0788116455,193.309494019,30.8579788208,191.587310791,29.7146015167,188.624633789,29.5667953491,186.797180176,30.53307724,187.198455811,30.550655365,185.462493896,29.4282817841,182.498260498,29.3164634705,180.682678223,30.3048686981,178.761550903,31.3617668152,176.954788208,32.366191864,175.462432861,34.9297943115,175.481155396,36.9969100952,172.056594849,61.3953704834,171.469528198,63.3774528503,172.198471069,66.2528305054,173.658905029,67.7158432007,175.21484375,69.2607803345,176.688171387,70.7108154297,179.568649292,71.4193572998,181.546524048,70.8182525635,181.155883789,70.7246780396,182.646713257,72.1567153931,185.535583496,72.8302307129,187.505996704,72.2051467896,189.593078613,71.5328903198,191.557891846,70.8904037476,193.510574341,68.6574020386,193.885299683,66.624458313,189.533493042,68.0668029785,191.048248291,69.4734954834,193.948074341,70.0982284546,195.907669067,69.4400253296,197.983078003,68.7326889038,199.936798096,68.057182312,201.851547241,65.7915878296,202.191986084,63.7526168823,201.93460083,64.0609664917,203.879974365,63.3617858887,205.767059326,61.0731048584,206.082687378,59.0301513672,206.407897949,56.861743927,206.705459595,54.8160743713,205.572753906,52.074508667,203.91809082,50.8354148865,197.715774536,58.447101593,199.263504028,59.817440033,202.177352905,60.3731307983,204.120773315,59.6685791016,206.178817749,58.9121704102,208.115936279,58.1904640198,209.976364136,55.8800392151,210.268264771,53.8335571289,210.018249512,54.1479263306,211.946456909,53.4027404785,213.778686523,51.0699005127,214.045715332,49.0200271606,214.319335938,46.8445129395,214.568222046,44.7923545837,213.370773315,42.078453064,211.687103271,40.8790016174,211.153366089,45.4324264526,213.068740845,44.6548500061,214.86138916,42.2914581299,215.093841553,40.2373695374,215.330749512,38.0575523376,215.545013428,36.0014915466,214.301971436,33.3081626892,212.598342896,32.1372566223,212.76890564,32.5009231567,212.9581604,30.4424095154,211.682495117,27.7643737793,209.964813232,26.6142406464,208.137481689,25.4023857117,206.409667969,24.267490387,203.446304321,24.1342487335,201.623626709,25.1095066071,200.092407227,40.4344902039,201.686096191,41.7511024475,204.617218018,42.206829071,206.535415649,41.4362373352,208.566390991,40.6098899841,210.47769165,39.8223609924,212.258010864,37.4496765137,212.479782104,35.3944091797,212.24067688,35.7171478271,214.142272949,34.906463623,215.89364624,32.5123291016,216.090423584,30.4545230865,216.289505005,28.2709255219,216.468063354,26.2114562988,215.178497314,23.5400924683,213.454833984,22.3989143372,213.077087402,26.967918396,214.964767456,26.1253032684,216.675537109,23.7019939423,216.837615967,21.641160965,216.999847412,19.4545173645,217.143692017,17.3923301697,215.809265137,14.7430830002,214.066619873,13.6311149597,214.24949646,13.9887399673,214.368255615,11.9249582291,213.001800537,9.29211139679,211.245742798,8.20139026642,209.378082275,7.05272102356,207.612472534,5.97757387161,204.646286011,5.94574689865,202.858032227,6.98276090622,207.431625366,15.6711559296,209.298751831,14.7839517593,210.951507568,12.3207006454,211.064590454,10.2566003799,211.174850464,8.0667219162,211.269683838,6.00170278549,209.872711182,3.38488888741,208.104171753,2.31461620331,208.295471191,2.66779732704,208.365219116,.601778209209,206.936584473,-1.99787759781,205.155166626,-3.04659366608,203.260696411,-4.15058755875,201.470062256,-5.18350458145,198.503982544,-5.14488744736,196.740844727,-4.06570100784,200.721237183,-1.79083228111,200.756134033,-3.85773348808,199.283905029,-6.43294239044,197.485061646,-7.45148563385,195.572265625,-8.52339458466,193.764465332,-9.52598762512,190.799468994,-9.43738365173,189.054748535,-8.32863521576,189.456176758,-8.34307098389,187.636322021,-9.32363510132,184.672607422,-9.19903182983,182.941497803,-8.06917667389,181.110671997,-6.86264181137,179.38961792,-5.71751928329,178.106155396,-3.04321122169,178.289428711,-.984156668186,188.345535278,16.9939727783,190.004119873,18.2278079987,192.954650879,18.5338344574,194.831161499,17.6666564941,196.817474365,16.7380580902,198.686248779,15.8543167114,200.343566895,13.3941345215,200.460479736,11.330247879,200.238067627,11.6647319794,202.095977783,10.7583608627,203.72328186,8.27823257446,203.815109253,6.21307754517,203.902877808,4.02217960358,203.976425171,1.95629370213,202.552627563,-.646005690098,200.773147583,-1.69802236557,200.628326416,2.88428211212,202.470687866,1.94672739506,204.055953979,-.560475647449,204.112991333,-2.62688469887,204.163787842,-4.8189496994,204.202529907,-6.88578176498,202.735061646,-9.46371555328,200.938095093,-10.4855909348,201.138916016,-10.1377315521,201.152557373,-12.2048816681,199.653900146,-14.7648038864,197.844665527,-15.7647809982,195.920944214,-16.8169498444,194.102935791,-17.8008861542,191.139007568,-17.6817760468,189.405792236,-16.5551319122,194.415481567,-8.11065673828,196.235061646,-9.0916967392,197.760345459,-11.6358346939,197.768280029,-13.7030153275,197.76701355,-15.8956680298,197.75668335,-17.9628391266,196.228408813,-20.505197525,194.407684326,-21.4841136932,194.616714478,-21.1411247253,194.581268311,-23.2080154419,193.022232056,-25.7316246033,191.189758301,-26.6883602142,189.241592407,-27.6945514679,187.400741577,-28.6350402832,184.440460205,-28.4455814362,182.73449707,-27.2781009674,186.825454712,-25.2086658478,186.755172729,-27.2746677399,185.153823853,-29.771648407,183.305496216,-30.6973628998,181.340637207,-31.6705760956,179.484191895,-32.5799026489,176.527511597,-32.3405838013,174.84147644,-31.1445140839,175.241638184,-31.1793479919,173.374282837,-32.0660667419,170.420715332,-31.7908496857,168.749343872,-30.5743961334,166.98223877,-29.2762851715,165.321685791,-28.0450954437,164.175918579,-25.3089561462,164.463729858,-23.2618923187,178.323608398,-16.54596138,180.108581543,-17.5886497498,181.545959473,-20.1834602356,181.483215332,-22.249704361,181.406951904,-24.441028595,181.325927734,-26.5066356659,179.711608887,-28.9952507019,177.85848999,-29.9113311768,178.07913208,-29.5756874084,177.973022461,-31.6401557922,176.328582764,-34.1089820862,174.46446228,-35.002494812,172.483062744,-35.9414749146,170.611114502,-36.8184661865,167.6590271,-36.5278892517,165.993988037,-35.3027534485,170.153335571,-33.3744277954,170.012451172,-35.4368171692,168.326660156,-37.8775787354,166.447738647,-38.7395477295,164.450805664,-39.6450042725,162.564346313,-40.4903144836,159.61756897,-40.1500320435,157.973419189,-38.8970031738,158.372146606,-38.9454994202,156.475570679,-39.7678413391,153.533157349,-39.3917922974,151.904342651,-38.1188926697,150.182632446,-36.7611122131,148.565155029,-35.4738540649,147.513641357,-32.7001419067,147.871276855,-30.6641139984,157.60333252,-31.9653320312,157.413497925,-34.0237960815,155.670227051,-36.4238357544,153.771392822,-37.2409439087,151.753463745,-38.0987243652,149.847457886,-38.8990058899,146.909622192,-38.4888381958,145.295684814,-37.1971282959,145.693145752,-37.2550735474,143.777557373,-38.0321502686,140.844909668,-37.5863380432,139.246795654,-36.2751159668,137.557846069,-34.8768386841,135.971374512,-33.5515365601,134.986022949,-30.7536354065,135.391891479,-28.7266750336,138.898529053,-31.6799755096,136.970123291,-32.4246559143,134.045394897,-31.9294757843,132.469589233,-30.5915088654,130.804458618,-29.1649608612,129.240570068,-27.8131103516,128.302490234,-24.9989967346,128.742492676,-22.9791660309,128.8671875,-23.3609848022,127.319816589,-21.9902381897,126.415992737,-19.1649417877,126.880477905,-17.150604248,127.382583618,-15.0162162781,127.864860535,-13.006064415,129.93347168,-10.8800230026,131.929672241,-10.3428926468,131.929702759,10.3428726196,129.933502197,10.8800039291,127.864898682,13.0060462952,127.382621765,15.0161962509,126.880516052,17.1505832672,126.416030884,19.1649246216,127.319854736,21.9902210236,128.867218018,23.3609657288,128.742523193,22.9791469574,128.30255127,24.9989795685,129.240600586,27.8130912781,130.804504395,29.1649456024,132.46963501,30.5914897919,134.045440674,31.9294548035,136.970169067,32.4246330261,138.898574829,31.6799545288,135.391937256,28.7266540527,134.986053467,30.7536125183,135.971420288,33.5515174866,137.557876587,34.8768196106,139.246826172,36.2750968933,140.844955444,37.586315155,143.777618408,38.0321311951,145.693191528,37.2550544739,145.295730591,37.1970977783,146.90965271,38.4888114929,149.847488403,38.898979187,151.753494263,38.0986976624,153.77142334,37.2409133911,155.670288086,36.4238090515,157.413543701,34.023765564,157.603363037,31.965303421,147.871292114,30.6640911102,147.513671875,32.7001190186,148.565200806,35.4738349915,150.182678223,36.761089325,151.904388428,38.1188735962,153.533203125,39.3917694092,156.475601196,39.7678146362,158.372192383,38.9454689026,157.973449707,38.8969764709,159.617599487,40.1500015259,162.564376831,40.4902877808,164.450836182,39.6449775696,166.447769165,38.7395172119,168.326690674,37.8775444031,170.012496948,35.4367866516,170.153366089,33.3743972778,165.994018555,35.3027267456,167.659057617,36.5278625488,170.61114502,36.8184394836,172.483093262,35.9414520264,174.464523315,35.0024681091,176.32862854,34.1089515686,177.97303772,31.640127182,178.079147339,29.5756568909,177.858535767,29.9113044739,179.711639404,28.9952163696,181.325973511,26.5066051483,181.406997681,24.4409980774,181.48324585,22.2496700287,181.546005249,20.1834278107,180.108596802,17.5886154175,178.323638916,16.5459270477,164.463760376,23.2618675232,164.175964355,25.3089313507,165.321716309,28.0450706482,166.982284546,29.276260376,168.749389648,30.5743732452,170.420776367,31.7908287048,173.374328613,32.0660438538,175.241699219,31.1793270111,174.841522217,31.1444892883,176.527557373,32.3405570984,179.484237671,32.5798797607,181.340698242,31.6705513,183.305526733,30.6973381042,185.15385437,29.7716236115,186.755187988,27.2746429443,186.825485229,25.2086429596,182.734512329,27.2780723572,184.440490723,28.4455547333,187.400756836,28.6350135803,189.241622925,27.6945266724,191.189788818,26.6883335114,193.022262573,25.7315998077,194.581298828,23.207988739,194.616744995,21.1410961151,194.407730103,21.4840869904,196.228439331,20.5051708221,197.756713867,17.9628105164,197.767059326,15.8956403732,197.768325806,13.7029876709,197.760375977,11.6358070374,196.235092163,9.09166622162,194.415527344,8.11062812805,189.405807495,16.5551052094,191.139022827,17.6817474365,194.102966309,17.8008556366,195.920974731,16.8169193268,197.844680786,15.764749527,199.653915405,14.7647724152,201.152572632,12.2048501968,201.138946533,10.1376991272,200.938110352,10.4855594635,202.735076904,9.46368312836,204.202545166,6.88574886322,204.163803101,4.8189163208,204.113006592,2.62685132027,204.055984497,.560441911221,202.470703125,-1.94676053524,200.628341675,-2.88431549072,200.773147583,1.69799184799,202.552642822,.645974993706,203.976455688,-1.95632481575,203.902877808,-4.02221107483,203.815124512,-6.21310806274,203.723297119,-8.27826309204,202.095977783,-10.7583913803,200.238082886,-11.6647624969,200.460510254,-11.3302774429,200.343582153,-13.3941650391,198.686279297,-15.854347229,196.817504883,-16.7380886078,194.831176758,-17.6666870117,192.954666138,-18.5338630676,190.004150391,-18.2278385162,188.345550537,-16.9940032959,178.289459229,.984124600887,178.106170654,3.04317903519,179.389633179,5.71748638153,181.110671997,6.86260890961,182.94152832,8.06914329529,184.672637939,9.19899845123,187.636352539,9.32360076904,189.456192017,8.34303569794,189.054779053,8.32859992981,190.799499512,9.43734836578,193.764511108,9.52595043182,195.572296143,8.52335834503,197.485076904,7.45144844055,199.283935547,6.43290519714,200.756164551,3.85769605637,200.7212677,1.79079532623,196.740844727,4.06566286087,198.503997803,5.14484882355,201.470077515,5.1834654808,203.26071167,4.15054702759,205.155166626,3.04655194283,206.93661499,1.9978351593,208.365249634,-.601821005344,208.295471191,-2.66784000397,208.104171753,-2.31465888023,209.87272644,-3.38493251801,211.269714355,-6.00174617767,211.174850464,-8.06676673889,211.064605713,-10.2566432953,210.951522827,-12.3207435608,209.298751831,-14.7839946747,207.431625366,-15.6711969376,202.858047485,-6.98280525208,204.646316528,-5.94579124451,207.612487793,-5.97761869431,209.378082275,-7.05276632309,211.245773315,-8.20143508911,213.001800537,-9.29215812683,214.368286133,-11.9250049591,214.24949646,-13.98878479,214.066650391,-13.6311597824,215.809295654,-14.7431268692,217.143692017,-17.3923740387,216.999862671,-19.4545593262,216.837646484,-21.6412010193,216.675567627,-23.7020339966,214.964797974,-26.1253471375,213.07711792,-26.967962265,213.454849243,-22.3989562988,215.178512573,-23.5401382446,216.468078613,-26.2115020752,216.289505005,-28.2709693909,216.090438843,-30.4545631409,215.893661499,-32.5123710632,214.142272949,-34.9065055847,212.240692139,-35.7171897888,212.479782104,-35.3944511414,212.258041382,-37.4497184753,210.477722168,-39.8224029541,208.566421509,-40.6099357605,206.535415649,-41.4362792969,204.617218018,-42.2068748474,201.686096191,-41.7511405945,200.092407227,-40.4345321655,201.623626709,-25.1095504761,203.446304321,-24.1342926025,206.409667969,-24.2675323486,208.137481689,-25.402425766,209.964813232,-26.6142902374,211.682495117,-27.7644233704,212.9581604,-30.4424552917,212.76890564,-32.5009689331,212.598342896,-32.1373023987,214.301971436,-33.3082084656,215.545028687,-36.001537323,215.330749512,-38.0576019287,215.093841553,-40.2374153137,214.86138916,-42.2915000916,213.068740845,-44.6548957825,211.153366089,-45.432472229,211.687103271,-40.8790550232,213.370773315,-42.0785102844,214.568222046,-44.7924041748,214.319335938,-46.8445587158,214.045715332,-49.0200767517,213.778686523,-51.0699539185,211.946456909,-53.4028015137,210.018234253,-54.1479759216,210.268264771,-53.83360672,209.976364136,-55.8800849915,208.115936279,-58.1905136108,206.178817749,-58.9122200012,204.120773315,-59.6686286926,202.177352905,-60.3731803894,199.263504028,-59.817489624,197.715774536,-58.4471473694,203.918075562,-50.8354644775,205.572723389,-52.0745620728,206.705429077,-54.8161239624,206.407867432,-56.8617935181,206.082687378,-59.0302009583,205.767044067,-61.0731544495,203.879928589,-63.3618278503,201.934585571,-64.0610122681,202.191986084,-63.7526664734,201.851547241,-65.7916412354,199.936798096,-68.0572280884,197.983078003,-68.7327346802,195.907669067,-69.4400634766,193.948074341,-70.0982666016,191.048248291,-69.4735336304,189.533493042,-68.0668334961,193.885299683,-66.6245117188,193.510574341,-68.6574554443,191.557891846,-70.8904495239,189.593078613,-71.5329284668,187.505996704,-72.2051925659,185.535583496,-72.8302688599,182.646713257,-72.15675354,181.155883789,-70.7247238159,181.546524048,-70.8182907104,179.568649292,-71.4193954468,176.688171387,-70.7108535767,175.21484375,-69.2608108521,173.658905029,-67.7158813477,172.198471069,-66.2528610229,171.469528198,-63.3774795532,172.056594849,-61.395401001,175.481155396,-36.9969444275,175.462432861,-34.9298362732,176.954788208,-32.3662338257,178.761550903,-31.3618106842,180.682678223,-30.3049125671,182.498260498,-29.3165054321,185.462509155,-29.4283237457,187.198455811,-30.5507030487,186.797180176,-30.5331268311,188.624633789,-29.5668449402,191.587310791,-29.7146511078,193.309494019,-30.8580303192,195.130844116,-32.0788612366,196.84286499,-33.2374267578,198.10534668,-35.9217033386,197.905944824,-37.9792633057,194.119384766,-35.3946266174,195.962844849,-34.4592819214,198.922607422,-34.6569976807,200.625289917,-35.8292388916,202.42578125,-37.0805969238,204.118057251,-38.2678527832,205.335098267,-40.9730300903,205.101043701,-43.0269317627,204.938476562,-42.6596336365,206.616210938,-43.867351532,207.800323486,-46.5871047974,207.541351318,-48.6380157471,207.257034302,-50.8121528625,206.979919434,-52.8606910706,205.136245728,-55.1844940186,203.204376221,-55.9201889038,199.337234497,-46.8951530457,201.202407837,-46.0038490295,204.15663147,-46.2717895508,205.830993652,-47.4841346741,207.601272583,-48.7778930664,209.264846802,-50.0050010681,210.417327881,-52.7383117676,210.13458252,-54.7860717773,209.980789185,-54.4150276184,211.629348755,-55.6622467041,212.748535156,-58.4093475342,212.440933228,-60.4535217285,212.105072021,-62.6203079224,211.779388428,-64.6616821289,209.881057739,-66.9410552979,207.932281494,-67.6306686401,208.672668457,-63.1062583923,210.299972534,-64.3810806274,211.372711182,-67.1466598511,211.030700684,-69.1853561401,210.65838623,-71.3461685181,210.298355103,-73.3817672729,208.361877441,-75.6288223267,206.401748657,-76.2854919434,206.665786743,-75.9828186035,206.281051636,-78.0139007568,204.317459106,-80.2372741699,202.349502563,-80.8700866699,200.259155273,-81.5320739746,198.285690308,-82.1474533081,195.400161743,-81.4597396851,193.916397095,-80.0203857422,196.663253784,-64.8660430908,198.557800293,-64.0390319824,201.50112915,-64.4078521729,203.133071899,-65.6767349243,204.858062744,-67.0302734375,206.478713989,-68.3135528564,207.53704834,-71.0846710205,207.184432983,-73.1215667725,207.043426514,-72.7454833984,208.648361206,-74.0483398438,209.672988892,-76.8321075439,209.295639038,-78.8645782471,208.885879517,-81.0185928345,208.490600586,-83.0476455688,206.515426636,-85.2607650757,204.544219971,-85.8833312988,205.43888855,-81.3868942261,207.021621704,-82.7166137695,207.999176025,-85.517250061,207.587646484,-87.5430679321,207.14163208,-89.6898880005,206.712203979,-91.7119903564,204.700027466,-93.8915100098,202.718597412,-94.4807662964,202.992843628,-94.1873016357,202.538864136,-96.2040405273,200.500366211,-98.3589477539,198.511932373,-98.9241027832,196.400177002,-99.5142211914,194.406814575,-100.061767578,191.546524048,-99.2757873535,190.112838745,-97.786529541,196.901596069,-90.6929626465,198.452331543,-92.0598983765,199.363082886,-94.8829650879,198.903564453,-96.8984375,198.406738281,-99.0340499878,197.929412842,-101.045379639,195.866027832,-103.176513672,193.871154785,-103.718551636,194.152297974,-103.431678772,193.650588989,-105.437072754,191.561477661,-107.542976379,189.560165405,-108.060745239,187.4349823,-108.60055542,185.42918396,-109.100601196,182.58833313,-108.246932983,181.19039917,-106.724060059,185.643295288,-105.632881165,185.107833862,-107.62953186,182.983520508,-109.699920654,180.9737854,-110.183891296,178.839828491,-110.687797546,176.825897217,-111.153968811,173.999816895,-110.25252533,172.6277771,-108.706314087,173.00970459,-108.830696106,170.990249634,-109.272377014,168.175338745,-108.336677551,166.822174072,-106.773925781,165.394226074,-105.109985352,164.054946899,-103.535324097,163.557296753,-100.61100769,164.300354004,-98.681968689,178.917160034,-84.1669311523,180.851348877,-83.4373779297,183.772109985,-83.9554519653,185.337387085,-85.3057174683,186.99130249,-86.745262146,188.544555664,-88.1093215942,189.46055603,-90.9306945801,189.004776001,-92.947013855,188.883071899,-92.5642242432,190.419647217,-93.9470443726,191.301315308,-96.7793426514,190.821075439,-98.7899780273,190.302276611,-100.920372009,189.804275513,-102.926681519,187.719085693,-105.036460876,185.71875,-105.557945251,186.841003418,-101.112831116,188.3540802,-102.521347046,189.187866211,-105.368080139,188.673812866,-107.370346069,188.119186401,-109.491699219,187.58744812,-111.489334106,185.466995239,-113.563659668,183.458145142,-114.051353455,183.746963501,-113.772224426,183.190994263,-115.763267517,181.045471191,-117.811683655,179.03086853,-118.27495575,176.891845703,-118.756874084,174.873214722,-119.202293396,172.05657959,-118.271820068,170.700500488,-116.711578369,177.84135437,-109.972541809,179.320541382,-111.416595459,180.086517334,-114.282333374,179.525054932,-116.271820068,178.920196533,-118.379394531,178.341156006,-120.363845825,176.172058105,-122.387237549,174.152191162,-122.827095032,174.44758606,-122.554901123,173.844497681,-124.532165527,171.650970459,-126.529067993,169.625915527,-126.944366455,167.476043701,-127.375366211,165.447387695,-127.772727966,162.653656006,-126.775634766,161.335006714,-125.183609009,165.837615967,-124.320365906,165.201293945,-126.287193298,162.97442627,-128.246841431,160.942672729,-128.627944946,158.785827637,-129.022644043,156.750762939,-129.385742188,153.974227905,-128.341720581,152.682617188,-126.727706909,153.057693481,-126.871368408,151.018386841,-127.209739685,148.254730225,-126.132064819,146.982803345,-124.502494812,145.641357422,-122.768074036,144.383911133,-121.127296448,144.035690308,-118.181465149,144.875900269,-116.292732239,160.049102783,-113.651870728,161.478042603,-115.14566803,162.145584106,-118.035919189,161.516403198,-120.00504303,160.839828491,-122.090698242,160.193252563,-124.054191589,157.956237793,-126.002220154,155.92250061,-126.372749329,156.227035522,-126.110809326,155.556686401,-128.066299438,153.296142578,-129.987045288,151.258087158,-130.332839966,149.094726562,-130.690063477,147.05368042,-131.017822266,144.295669556,-129.92578125,143.03225708,-128.289611816,147.561721802,-127.580825806,146.858520508,-129.524734497,144.565917969,-131.407104492,142.522323608,-131.718505859,140.353240967,-132.039215088,138.306976318,-132.332519531,135.567749023,-131.194152832,134.332092285,-129.53692627,134.702072144,-129.693313599,132.652374268,-129.961761475,129.927185059,-128.790206909,128.711730957,-127.118080139,127.430358887,-125.338806152,126.229766846,-123.656005859,125.982452393,-120.699981689,126.886779785,-118.841079712,135.884567261,-122.771224976,135.135375977,-124.697891235,132.79876709,-126.525276184,130.748336792,-126.788070679,128.572250366,-127.057182312,126.519584656,-127.301818848,123.808174133,-126.098724365,122.612205505,-124.412612915,122.978363037,-124.577758789,120.922874451,-124.797447205,118.226280212,-123.561508179,117.050880432,-121.86100769,115.812133789,-120.051795959,114.651824951,-118.340950012,114.47479248,-115.379905701,115.422988892,-113.542991638,117.98109436,-117.347541809,115.922172546,-117.532554626,113.246795654,-116.251365662,112.100227356,-114.531280518,110.89214325,-112.701446533,109.76083374,-110.971298218,109.633735657,-108.00769043,110.612754822,-106.187034607,110.627540588,-106.588417053,109.517326355,-104.844642639,109.426216125,-101.879707336,110.427276611,-100.071075439,111.497581482,-98.1573867798,112.514602661,-96.3576812744,115.088569641,-94.8832626343,117.155502319,-94.9164352417,136.946395874,-77.7770004272,137.208847046,-75.7265396118,139.035842896,-73.3896026611,140.962387085,-72.6400985718,143.009338379,-71.8541793823,144.942428589,-71.1217575073,147.863937378,-71.6354751587,149.431228638,-72.9834213257,149.036056519,-72.9114608765,150.977905273,-72.2025680542,153.892974854,-72.7517471313,155.443771362,-74.1186218262,157.082244873,-75.5756988525,158.620864868,-76.9562454224,159.506744385,-79.7872238159,159.02947998,-81.798576355,155.62940979,-78.723197937,157.582931519,-78.0471343994,160.488327026,-78.6453552246,162.015869141,-80.0381698608,163.629562378,-81.5226821899,165.144729614,-82.9289550781,165.982727051,-85.7744522095,165.47164917,-87.7774734497,165.360534668,-87.3914871216,166.85848999,-88.8160552979,167.661895752,-91.6715393066,167.12651062,-93.6682052612,166.549285889,-95.7835083008,165.996292114,-97.7753601074,163.85383606,-99.8269729614,161.839920044,-100.29322052,159.235488892,-90.8262710571,161.20451355,-90.1967849731,164.09487915,-90.8638381958,165.588912964,-92.2925262451,167.166885376,-93.8149261475,168.648223877,-95.2567825317,169.418441772,-98.121383667,168.859954834,-100.111701965,168.757995605,-99.723197937,170.221710205,-101.182937622,170.957092285,-104.056678772,170.374465942,-106.04006958,169.747177124,-108.141082764,169.147033691,-110.119239807,166.956451416,-112.119392395,164.932022095,-112.537689209,166.280578613,-108.155921936,167.719482422,-109.64012146,168.406326294,-112.525863647,167.790344238,-114.499153137,167.127761841,-116.589294434,166.494338989,-118.557052612,164.270385742,-120.520011902,162.239181519,-120.904121399,162.541915894,-120.640151978,161.884658813,-122.600074768,159.637023926,-124.535888672,157.601318359,-124.895309448,155.440383911,-125.266990662,153.401580811,-125.608383179,150.636322021,-124.534805298,149.361984253,-122.90712738,154.1434021,-108.266838074,156.132797241,-107.705055237,158.998672485,-108.470550537,160.442977905,-109.949501038,161.967956543,-111.524963379,163.399124146,-113.016639709,164.070953369,-115.905891418,163.444717407,-117.875953674,163.356109619,-117.484176636,164.769042969,-118.993125916,165.405731201,-121.890335083,164.755599976,-123.852638245,164.05682373,-125.930953979,163.389373779,-127.887443542,161.131729126,-129.811523438,159.094161987,-130.160354614,160.591766357,-125.827270508,161.9790802,-127.359809875,162.566833496,-130.267333984,161.883743286,-132.218414307,161.150039673,-134.28465271,160.449707031,-136.229598999,158.159927368,-138.115371704,156.116790771,-138.429794312,156.428390503,-138.176345825,155.704483032,-140.11265564,153.391967773,-141.970458984,151.345153809,-142.260040283,149.172805786,-142.557632446,147.123519897,-142.829116821,144.396591187,-141.661621094,143.178665161,-139.99130249,150.868682861,-133.886428833,152.219238281,-135.451477051,152.737762451,-138.372146606,152.008529663,-140.306442261,151.225982666,-142.354705811,150.479675293,-144.282470703,148.145736694,-146.113327026,146.095703125,-146.379165649,146.413238525,-146.133163452,145.643569946,-148.051727295,143.287597656,-149.854095459,141.234481812,-150.095031738,139.055664062,-150.340927124,137.00050354,-150.563674927,134.302062988,-149.331741333,133.124145508,-147.632980347,137.684005737,-147.157226562,136.882095337,-149.062545776,134.496078491,-150.824951172,132.439208984,-151.031234741,130.256561279,-151.240371704,128.197937012,-151.428451538,125.520645142,-150.1512146,124.371513367,-148.432830811,124.732971191,-148.60798645,122.672225952,-148.771057129,120.010635376,-147.461410522,118.882469177,-145.729187012,117.693984985,-143.886581421,116.581176758,-142.144470215,116.485671997,-139.179656982,117.484054565,-137.369552612,133.938323975,-124.976219177,135.953735352,-124.516365051,138.776947021,-125.42665863,140.144134521,-126.977172852,141.587036133,-128.628189087,142.940444946,-130.190734863,143.464401245,-133.110427856,142.738769531,-135.046081543,142.670211792,-134.650299072,144.004562378,-136.229171753,144.493026733,-139.155014038,143.743927002,-141.081710815,142.940322876,-143.121795654,142.174224854,-145.041793823,139.821594238,-146.848526001,137.768936157,-147.09324646,139.485046387,-142.841964722,140.79258728,-144.443099976,141.231674194,-147.376754761,140.450210571,-149.290557861,139.612365723,-151.316802979,138.813995361,-153.223617554,136.431243896,-154.990432739,134.374740601,-155.200531006,134.69883728,-154.963226318,133.877380371,-156.860214233,131.473342896,-158.597991943,129.41444397,-158.783081055,127.229766846,-158.96975708,125.169303894,-159.136657715,122.505310059,-157.83190918,121.373924255,-156.101806641,129.364547729,-150.396011353,130.633712769,-152.027755737,131.003036499,-154.97102356,130.176345825,-156.865707397,129.290588379,-158.871520996,128.447174072,-160.758834839,126.023139954,-162.468566895,123.962234497,-162.629760742,124.291862488,-162.400253296,123.425590515,-164.277175903,120.980979919,-165.957382202,118.918266296,-166.093521118,116.729759216,-166.228271484,114.665931702,-166.346160889,112.033668518,-164.978561401,110.943687439,-163.222091675,115.521835327,-162.978927612,114.624046326,-164.840988159,112.151451111,-166.479736328,110.086738586,-166.581100464,107.896270752,-166.678955078,105.830749512,-166.762054443,103.221908569,-165.350265503,102.161689758,-163.575668335,102.513778687,-163.768981934,100.447395325,-163.82699585,97.8558883667,-162.383636475,96.8172988892,-160.596298218,95.724067688,-158.695602417,94.7013320923,-156.899139404,94.7567749023,-153.933288574,95.8459625244,-152.176315308,111.237289429,-151.622543335,112.449905396,-153.296722412,112.718345642,-156.250915527,111.827339172,-158.116226196,110.873535156,-160.090545654,109.966064453,-161.947921753,107.484985352,-163.573776245,105.419784546,-163.664413452,105.757049561,-163.446304321,104.827110291,-165.292526245,102.326469421,-166.888122559,100.260307312,-166.953643799,98.0684738159,-167.01348877,96.0018157959,-167.060760498,93.4178543091,-165.603912354,92.3885726929,-163.811203003,96.9723510742,-163.724761963,96.0114212036,-165.555007935,93.4842376709,-167.108261108,91.4172744751,-167.138961792,89.2247390747,-167.161834717,87.1575775146,-167.174255371,84.5985412598,-165.674087524,83.5996246338,-163.864273071,83.9449005127,-164.069519043,81.877746582,-164.056854248,79.337097168,-162.525726318,78.3602294922,-160.703903198,77.332649231,-158.766937256,76.3719329834,-156.936553955,76.5287628174,-153.974349976,77.6773834229,-152.255645752,86.0574111938,-157.372406006,85.053276062,-159.179351807,82.4899291992,-160.672134399,80.4228134155,-160.653747559,78.2303543091,-160.624557495,76.163482666,-160.587905884,73.6407775879,-159.027389526,72.6851196289,-157.194351196,73.0254364014,-157.407730103,70.9591598511,-157.345977783,68.4555969238,-155.754943848,67.522277832,-153.910446167,66.5409698486,-151.949615479,65.6239929199,-150.096939087,65.8511199951,-147.139297485,67.0402297974,-145.448348999,69.0574111938,-149.565322876,66.9924697876,-149.468765259,64.5160827637,-147.835754395,63.6139755249,-145.975784302,62.6658554077,-143.998703003,61.7802391052,-142.130828857,62.057182312,-139.177444458,63.2746124268,-137.506774902,63.2346916199,-137.906448364,62.3718147278,-136.027954102,62.6846122742,-133.078155518,63.9222450256,-131.422393799,65.2427520752,-129.671951294,66.4949874878,-128.027191162,69.2454833984,-126.916381836,71.2887268066,-127.230209351,95.9261398315,-127.326278687,97.9717559814,-127.028388977,100.713516235,-128.160614014,101.952880859,-129.815093994,103.259689331,-131.575759888,104.484382629,-133.241134644,104.774162292,-136.193283081,103.89667511,-138.064987183,103.859870911,-137.665023804,105.064247131,-139.345123291,105.318153381,-142.300582886,104.417999268,-144.161499023,103.454490662,-146.131118774,102.537902832,-147.984008789,100.048858643,-149.597640991,97.9832305908,-149.678115845,100.032447815,-145.57699585,101.208335876,-147.277160645,101.412391663,-150.236480713,100.480995178,-152.081954956,99.4844360352,-154.035079956,98.5367507935,-155.872238159,96.0208587646,-157.443695068,93.9541625977,-157.489349365,94.2961196899,-157.278640747,93.3261947632,-159.104156494,90.7914199829,-160.644958496,88.7243270874,-160.665496826,86.5317077637,-160.677581787,84.4645080566,-160.679840088,81.9128799438,-159.167114258,80.9228744507,-157.352401733,89.3425216675,-152.301101685,90.4777069092,-154.028717041,90.6114425659,-156.99206543,89.6364822388,-158.814910889,88.5938186646,-160.743789673,87.6027908325,-162.557937622,85.0502853394,-164.069213867,82.9830932617,-164.065750122,83.3299560547,-163.863235474,82.3169555664,-165.66519165,79.7462921143,-167.145370483,77.6792984009,-167.116836548,75.4869995117,-167.076858521,73.4203414917,-167.030029297,70.9053497314,-165.457122803,69.9587173462,-163.619430542,74.5416793823,-163.741622925,73.4984512329,-165.526275635,70.903213501,-166.962905884,68.8369903564,-166.899520874,66.6456832886,-166.822616577,64.5800933838,-166.740966797,62.0919685364,-165.125900269,61.1764411926,-163.272506714,61.5120201111,-163.493225098,59.4475860596,-163.386489868,56.9792518616,-161.741348267,56.0863037109,-159.876953125,55.1479148865,-157.895248413,54.2714920044,-156.023025513,54.562953949,-153.071060181,55.7885932922,-151.406387329,71.1751327515,-152.080123901,72.250579834,-153.845535278,72.2828903198,-156.811737061,71.2461776733,-158.600158691,70.138168335,-160.492279053,69.0856704712,-162.271484375,66.4829864502,-163.694580078,64.4171218872,-163.620437622,64.7707138062,-163.429885864,63.6966896057,-165.196182251,61.0769119263,-166.587585449,59.0121002197,-166.488372803,56.8224639893,-166.373443604,54.758605957,-166.255966187,52.298866272,-164.597991943,51.4156341553,-162.729003906,55.9917373657,-163.007827759,54.8880882263,-164.755767822,52.2452392578,-166.102813721,50.1823959351,-165.968811035,47.9949989319,-165.817001343,45.9334182739,-165.664749146,43.5019760132,-163.965576172,42.6503639221,-162.081939697,42.9781951904,-162.314025879,40.9186096191,-162.136764526,38.5079803467,-160.408157349,37.6793060303,-158.514312744,36.8092308044,-156.501693726,35.997341156,-154.600616455,36.3895797729,-151.660308838,37.6714248657,-150.038513184,45.6173362732,-155.806427002,44.4724960327,-157.527679443,41.7984046936,-158.811584473,39.7393188477,-158.628646851,37.5561523438,-158.424926758,35.4987640381,-158.2237854,33.1083564758,-156.467330933,32.3017082214,-154.56401062,32.6239433289,-154.803817749,30.569152832,-154.577697754,28.2002506256,-152.792327881,27.4167804718,-150.879364014,26.5947399139,-148.846618652,25.8282241821,-146.92678833,26.2901744843,-143.996643066,27.610168457,-142.405761719,29.2930736542,-146.670303345,27.2423858643,-146.409591675,24.9039115906,-144.584564209,24.1527938843,-142.65864563,23.3651332855,-140.612350464,22.6310787201,-138.679870605,23.1423473358,-135.757919312,24.4889678955,-134.18951416,24.417339325,-134.584747314,23.7068099976,-132.643493652,24.2535228729,-129.727981567,25.6190910339,-128.176025391,27.074798584,-126.536323547,28.4540424347,-124.996505737,31.2842712402,-124.108253479,33.2960205078,-124.583808899,49.6531677246,-137.105072021,50.6374053955,-138.922912598,50.5187911987,-141.886886597,49.3924331665,-143.620269775,48.1896057129,-145.453567505,47.0479621887,-147.1769104,44.376247406,-148.465774536,42.3168296814,-148.286651611,42.6796531677,-148.114334106,41.5171661377,-149.823699951,38.8299980164,-151.080032349,36.7729072571,-150.875915527,34.5919456482,-150.649734497,32.5367393494,-150.427429199,30.1645278931,-148.646453857,29.3775157928,-146.734939575,33.9335098267,-147.24621582,32.7423782349,-148.935745239,30.0344219208,-150.146606445,27.9810600281,-149.907836914,25.8042221069,-149.644958496,23.7530555725,-149.388031006,21.4111995697,-147.567352295,20.6565132141,-145.642837524,20.9721126556,-145.891281128,18.9242172241,-145.609481812,16.6046447754,-143.760482788,15.8733863831,-141.826950073,15.1068258286,-139.772674561,14.392698288,-137.832733154,14.934006691,-134.91619873,16.2966957092,-133.361724854,23.9388904572,-139.526397705,22.7079734802,-141.187164307,19.972026825,-142.333374023,17.9249134064,-142.045913696,15.7549343109,-141.731399536,13.7104454041,-141.425857544,11.412484169,-139.550064087,10.7037086487,-137.608184814,11.0133228302,-137.864059448,8.97269535065,-137.533691406,6.69768428802,-135.630142212,6.01254701614,-133.679794312,5.29498338699,-131.60786438,4.62712287903,-129.651535034,5.23753595352,-126.748695374,6.63675260544,-125.227012634,8.10053730011,-129.571640015,6.06576728821,-129.206939697,3.82316160202,-127.265304565,3.17099118233,-125.303688049,2.48845005035,-123.219970703,1.85365629196,-121.252655029,2.51290631294,-118.360496521,3.9375705719,-116.862609863,3.84592604637,-117.253707886,3.23507094383,-115.278816223,3.92939639091,-112.394874573,5.37214565277,-110.914413452,6.90938472748,-109.350883484,8.36517429352,-107.883232117,11.2369251251,-107.140106201,13.2218799591,-107.717399597,17.8889503479,-122.394508362,16.6019611359,-124.012207031,13.828420639,-125.064201355,11.7923355103,-124.70690155,9.63437843323,-124.318374634,7.60153388977,-123.943092346,5.36906099319,-121.989822388,4.72710609436,-120.024833679,5.02778863907,-120.291152954,2.9996509552,-119.891220093,.791064798832,-117.910972595,.173020735383,-115.938331604,-.473272502422,-113.843093872,-1.0738440752,-111.865058899,-.364522784948,-108.984764099,1.08591008186,-107.51184082,2.40026831627,-111.90397644,.379159390926,-111.469909668,-1.79573893547,-109.452728271,-2.38044881821,-107.469947815,-2.99133682251,-105.364112854,-3.55848574638,-103.376235962,-2.80072164536,-100.50831604,-1.32566988468,-99.060043335,-1.4306344986,-99.4477386475,-1.97360038757,-97.453125,-1.18106281757,-94.5946273804,.311468243599,-93.1643753052,1.90127432346,-91.6543121338,3.40639829636,-90.2373123169,6.30188179016,-89.5928192139,8.26593494415,-90.2376480103,5.58777284622,-99.6839981079,3.57754063606,-99.2020568848,1.45115506649,-97.1338043213,.913693070412,-95.1377029419,.352982074022,-93.0179595947,-.166803136468,-91.0171737671,.658848881721,-88.1680526733,2.16787552834,-86.7552032471,2.05373477936,-87.1403121948,1.55828630924,-85.1333694458,2.4184782505,-82.2944793701,3.94455170631,-80.900062561,5.56976652145,-79.4281845093,7.10811471939,-78.0473175049,10.0180864334,-77.4717636108,11.9662742615,-78.1630477905,8.54231452942,-81.2118301392,8.08076190948,-79.1968231201,8.98867797852,-76.3728408813,10.5380363464,-75.0043411255,12.1878271103,-73.5600662231,13.7492284775,-72.205329895,16.6684875488,-71.6789093018,18.6047477722,-72.4029159546,18.209028244,-72.4718017578,19.7867698669,-71.1361160278,22.7122058868,-70.6451873779,24.6395282745,-71.3926620483,26.6802940369,-72.1945343018,28.600933075,-72.9590301514,30.4096508026,-75.3101425171,30.6561031342,-77.3625946045]},function(e,t){e.exports=[-52.2724990845,-3.20076746581e-15,52.2724990845,-456980706076e-17]},function(e,t){e.exports=[-83.9610214233,-36.5907516479,-83.9610214233,36.5907516479,83.9610214233,36.5907440186,83.9610214233,-36.5907592773]},function(e,t){e.exports=[-83.8091583252,-75.5407028198,-122.533172607,-42.0047264099,-122.533172607,42.0047264099,-83.8091583252,75.5407028198,83.8091583252,75.5407028198,122.533172607,42.0047149658,122.533172607,-42.004737854,83.8091583252,-75.5407104492]},function(e,t){e.exports=[-65.7877731323,-99.0829467773,-101.646438599,-99.2227630615,-143.42414856,-63.0421943665,-148.408432007,-27.5313491821,-148.408432007,27.5313491821,-143.42414856,63.0421943665,-101.646438599,99.2227630615,-65.7877731323,99.0829467773,65.7877731323,99.0829467773,101.646438599,99.2227554321,143.42414856,63.0421829224,148.408432007,27.5313396454,148.408447266,-27.5313663483,143.42414856,-63.0422134399,101.646430969,-99.2227630615,65.7877578735,-99.0829467773]},function(e,t){e.exports=[-44.8969802856,-105.725852966,-64.8287887573,-120.983505249,-102.434616089,-121.130126953,-122.484794617,-106.028373718,-147.183044434,-84.6390609741,-164.994232178,-66.9519119263,-170.221359253,-29.7108535767,-157.967605591,-7.80380868912,-157.967605591,7.80380868912,-170.221359253,29.7108535767,-164.994232178,66.9519119263,-147.183044434,84.6390609741,-122.484794617,106.028373718,-102.434616089,121.130126953,-64.8287887573,120.983505249,-44.8969802856,105.725852966,44.8969802856,105.725852966,64.8287963867,120.983505249,102.434616089,121.130111694,122.484794617,106.028358459,147.183044434,84.6390380859,164.994232178,66.9518966675,170.221359253,29.7108440399,157.967605591,7.80380249023,157.967636108,-7.80382871628,170.221359253,-29.7108783722,164.994232178,-66.9519348145,147.183044434,-84.6390762329,122.484794617,-106.028373718,102.434608459,-121.130126953,64.8287811279,-120.983505249,44.8969612122,-105.725852966]},function(e,t){e.exports=[-29.5703468323,-101.380554199,-34.8948669434,-118.125267029,-55.470413208,-133.875671387,-73.0244674683,-134.644332886,-94.1326599121,-134.726638794,-111.692176819,-134.09487915,-132.389923096,-118.505401611,-137.844848633,-101.802711487,-140.806442261,-99.2378997803,-158.117080688,-96.2250137329,-176.503494263,-77.9666290283,-179.637268066,-60.6774673462,-182.571258545,-39.774017334,-184.318191528,-22.2902011871,-171.668716431,.324370503426,-155.856384277,7.98638486862,-155.856384277,-7.98638486862,-171.668716431,-.324370503426,-184.318191528,22.2902011871,-182.571258545,39.774017334,-179.637268066,60.6774673462,-176.503494263,77.9666290283,-158.117080688,96.2250137329,-140.806442261,99.2378997803,-137.844848633,101.802711487,-132.389923096,118.505401611,-111.692176819,134.09487915,-94.1326599121,134.726638794,-73.0244674683,134.644332886,-55.470413208,133.875671387,-34.8948669434,118.125267029,-29.5703468323,101.380554199,29.5703468323,101.380554199,34.8948669434,118.125267029,55.4704170227,133.875671387,73.0244750977,134.644332886,94.1326599121,134.726623535,111.692184448,134.094863892,132.389923096,118.505371094,137.844848633,101.802696228,140.806442261,99.2378845215,158.117080688,96.2249908447,176.503494263,77.9666137695,179.637268066,60.6774482727,182.571258545,39.7740058899,184.318191528,22.290189743,171.668716431,-.324375510216,155.856384277,-7.98639011383,155.856430054,7.98636484146,171.668731689,.324347704649,184.318222046,-22.2902240753,182.571258545,-39.7740440369,179.637268066,-60.6774978638,176.503494263,-77.9666595459,158.117080688,-96.2250289917,140.806442261,-99.2379150391,137.844833374,-101.802711487,132.389923096,-118.505401611,111.692176819,-134.09487915,94.1326522827,-134.726638794,73.0244598389,-134.644332886,55.4704017639,-133.875671387,34.8948478699,-118.125267029,29.5703277588,-101.380554199]},function(e,t){e.exports=[-21.9565048218,-92.8297424316,-18.6016292572,-104.662971497,-24.0448093414,-121.780838013,-33.6180114746,-129.503173828,-44.8203659058,-138.078491211,-54.7740287781,-145.30380249,-72.7192764282,-146.089584351,-83.2663803101,-139.761947632,-83.8511428833,-139.76423645,-94.3485946655,-146.173919678,-112.299438477,-145.528076172,-122.309120178,-138.380599976,-133.578018188,-129.89289856,-143.211135864,-122.24546051,-148.787643433,-105.170555115,-145.525131226,-93.3115234375,-131.305160522,-105.62638092,-142.576477051,-110.549568176,-160.272903442,-107.469543457,-169.218063354,-99.0277175903,-179.228561401,-89.0869293213,-187.732681274,-80.2009735107,-190.936294556,-62.526512146,-186.09197998,-51.2210655212,-186.17326355,-50.6419830322,-193.942733765,-41.1069984436,-195.728591919,-23.2335453033,-189.999328613,-12.3497943878,-183.112319946,-.0372834689915,-176.836791992,10.5409173965,-160.672103882,18.3736839294,-148.48097229,16.7436771393,-148.48097229,-16.7436771393,-160.672103882,-18.3736839294,-176.836791992,-10.5409173965,-183.112319946,.0372834689915,-189.999328613,12.3497943878,-195.728591919,23.2335453033,-193.942733765,41.1069984436,-186.17326355,50.6419830322,-186.09197998,51.2210655212,-190.936294556,62.526512146,-187.732681274,80.2009735107,-179.228561401,89.0869293213,-169.218063354,99.0277175903,-160.272903442,107.469543457,-142.576477051,110.549568176,-131.305160522,105.62638092,-145.525131226,93.3115234375,-148.787643433,105.170555115,-143.211135864,122.24546051,-133.578018188,129.89289856,-122.309120178,138.380599976,-112.299438477,145.528076172,-94.3485946655,146.173919678,-83.8511428833,139.76423645,-83.2663803101,139.761947632,-72.7192764282,146.089584351,-54.7740287781,145.30380249,-44.8203659058,138.078491211,-33.6180114746,129.503173828,-24.0448093414,121.780838013,-18.6016292572,104.662971497,-21.9565048218,92.8297424316,21.9565067291,92.8297424316,18.6016292572,104.662971497,24.0448093414,121.780838013,33.6180114746,129.503173828,44.8203735352,138.078491211,54.7740287781,145.30380249,72.7192840576,146.089584351,83.2663955688,139.761947632,83.8511428833,139.764221191,94.3485946655,146.173904419,112.299438477,145.528076172,122.309120178,138.380584717,133.578018188,129.892883301,143.211135864,122.245445251,148.787643433,105.170539856,145.525131226,93.3115158081,131.305160522,105.626373291,142.576477051,110.549552917,160.272903442,107.469528198,169.218063354,99.0276947021,179.228561401,89.0869064331,187.732681274,80.200958252,190.936294556,62.5264930725,186.09197998,51.2210464478,186.17326355,50.6419639587,193.942733765,41.1069831848,195.728591919,23.2335319519,189.999328613,12.3497810364,183.112319946,.0372791923583,176.836791992,-10.5409212112,160.672103882,-18.3736896515,148.48097229,-16.7436828613,148.481002808,16.7436580658,160.672134399,18.3736610413,176.836837769,10.5408945084,183.112335205,-.0373085066676,189.999359131,-12.3498182297,195.728622437,-23.2335720062,193.942733765,-41.1070213318,186.17326355,-50.6420059204,186.09197998,-51.2210884094,190.936279297,-62.5265426636,187.732681274,-80.2010040283,179.228546143,-89.0869674683,169.218063354,-99.0277328491,160.272903442,-107.469566345,142.576477051,-110.549583435,131.305160522,-105.626411438,145.525131226,-93.3115234375,148.787628174,-105.170555115,143.211135864,-122.24546051,133.578018188,-129.89289856,122.309120178,-138.380599976,112.299438477,-145.528076172,94.3485870361,-146.173904419,83.8511352539,-139.76423645,83.2663726807,-139.761947632,72.7192687988,-146.089584351,54.7740097046,-145.30380249,44.8203544617,-138.078475952,33.6179962158,-129.503173828,24.0447921753,-121.780838013,18.6016120911,-104.662956238,21.956489563,-92.8297424316]},function(e,t){e.exports=[-20.5559062958,-84.7833328247,-14.1258134842,-90.5088272095,-10.7180347443,-102.528663635,-13.1863641739,-110.776992798,-16.0928421021,-119.917373657,-18.8417835236,-128.076461792,-28.5659484863,-135.920547485,-37.1219711304,-136.880737305,-36.7838973999,-136.621948242,-39.9443511963,-144.630645752,-50.0549659729,-151.96987915,-58.6487541199,-152.49357605,-68.2309341431,-152.913162231,-76.837600708,-153.14263916,-87.5510253906,-146.715240479,-91.3994064331,-139.013458252,-75.7242050171,-138.952331543,-79.5124130249,-146.683898926,-90.1753997803,-153.194656372,-98.7835922241,-153.032287598,-108.368751526,-152.687408447,-116.96635437,-152.230758667,-127.133911133,-144.970581055,-130.356704712,-136.986785889,-130.01663208,-137.242935181,-138.579879761,-136.349502563,-148.36491394,-128.581466675,-151.177398682,-120.444046021,-154.155075073,-111.32660675,-156.687637329,-103.09778595,-153.373687744,-91.0517578125,-146.988449097,-85.2762832642,-123.143280029,-105.926780701,-127.947341919,-113.071609497,-139.396408081,-118.072433472,-147.902633667,-116.741386414,-157.35194397,-115.096748352,-165.807647705,-113.475601196,-174.893875122,-104.900650024,-177.001464844,-96.5528640747,-176.699386597,-96.8528518677,-185.061691284,-94.8036422729,-193.699935913,-85.7775650024,-195.380111694,-77.3333740234,-197.090744019,-67.8957977295,-198.481201172,-59.3990859985,-193.560501099,-47.9153556824,-186.449417114,-43.0614929199,-184.270584106,-58.5846595764,-192.443130493,-55.8760108948,-200.335098267,-46.190662384,-201.337493896,-37.6394844055,-202.29107666,-28.0956459045,-203.000488281,-19.5151920319,-197.180862427,-8.45980930328,-189.705810547,-4.18767642975,-189.913665771,-4.55924081802,-190.185623169,4.04619216919,-183.811141968,14.7912034988,-176.128433228,18.6775341034,-167.497009277,22.8599777222,-159.685928345,26.4813194275,-147.302536011,24.8256092072,-140.717178345,19.2793979645,-140.717178345,-19.2793979645,-147.302536011,-24.8256092072,-159.685928345,-26.4813194275,-167.497009277,-22.8599777222,-176.128433228,-18.6775341034,-183.811141968,-14.7912034988,-190.185623169,-4.04619216919,-189.913665771,4.55924081802,-189.705810547,4.18767642975,-197.180862427,8.45980930328,-203.000488281,19.5151920319,-202.29107666,28.0956459045,-201.337493896,37.6394844055,-200.335098267,46.190662384,-192.443130493,55.8760108948,-184.270584106,58.5846595764,-186.449417114,43.0614929199,-193.560501099,47.9153556824,-198.481201172,59.3990859985,-197.090744019,67.8957977295,-195.380111694,77.3333740234,-193.699935913,85.7775650024,-185.061691284,94.8036422729,-176.699386597,96.8528518677,-177.001464844,96.5528640747,-174.893875122,104.900650024,-165.807647705,113.475601196,-157.35194397,115.096748352,-147.902633667,116.741386414,-139.396408081,118.072433472,-127.947341919,113.071609497,-123.143280029,105.926780701,-146.988449097,85.2762832642,-153.373687744,91.0517578125,-156.687637329,103.09778595,-154.155075073,111.32660675,-151.177398682,120.444046021,-148.36491394,128.581466675,-138.579879761,136.349502563,-130.01663208,137.242935181,-130.356704712,136.986785889,-127.133911133,144.970581055,-116.96635437,152.230758667,-108.368751526,152.687408447,-98.7835922241,153.032287598,-90.1753997803,153.194656372,-79.5124130249,146.683898926,-75.7242050171,138.952331543,-91.3994064331,139.013458252,-87.5510253906,146.715240479,-76.837600708,153.14263916,-68.2309341431,152.913162231,-58.6487541199,152.49357605,-50.0549659729,151.96987915,-39.9443511963,144.630645752,-36.7838973999,136.621948242,-37.1219711304,136.880737305,-28.5659484863,135.920547485,-18.8417835236,128.076461792,-16.0928421021,119.917373657,-13.1863641739,110.776992798,-10.7180347443,102.528663635,-14.1258134842,90.5088272095,-20.5559062958,84.7833328247,20.5559101105,84.7833328247,14.1258163452,90.5088272095,10.7180347443,102.528663635,13.1863641739,110.776992798,16.0928421021,119.917373657,18.8417835236,128.076461792,28.5659484863,135.920547485,37.1219711304,136.880737305,36.7839012146,136.621948242,39.9443511963,144.630645752,50.054977417,151.969909668,58.6487617493,152.49357605,68.2309341431,152.913162231,76.8376083374,153.14263916,87.5510406494,146.715240479,91.3994140625,139.013458252,75.7242050171,138.952331543,79.5124130249,146.683868408,90.1753997803,153.194656372,98.7835922241,153.03225708,108.368759155,152.687408447,116.966377258,152.230758667,127.133911133,144.970565796,130.356704712,136.98677063,130.01663208,137.242919922,138.579879761,136.349487305,148.36491394,128.581436157,151.177398682,120.444038391,154.155075073,111.32660675,156.687637329,103.097770691,153.373687744,91.0517501831,146.988449097,85.2762756348,123.143280029,105.926780701,127.947341919,113.071609497,139.396408081,118.072418213,147.902633667,116.741363525,157.35194397,115.096725464,165.807647705,113.475585938,174.893875122,104.900634766,177.001464844,96.5528411865,176.699386597,96.8528289795,185.061691284,94.8036270142,193.699935913,85.7775421143,195.380111694,77.3333587646,197.090744019,67.8957748413,198.481201172,59.399066925,193.560501099,47.9153366089,186.449417114,43.0614776611,184.270584106,58.5846481323,192.443130493,55.8759918213,200.335098267,46.1906433105,201.337493896,37.639465332,202.29107666,28.0956306458,203.000488281,19.5151748657,197.180862427,8.45979404449,189.705810547,4.18766307831,189.913665771,4.55923748016,190.185623169,-4.04619598389,183.811141968,-14.7912073135,176.128433228,-18.6775398254,167.497009277,-22.8599815369,159.685928345,-26.4813270569,147.302536011,-24.8256149292,140.717178345,-19.2794036865,140.717208862,19.2793807983,147.302566528,24.825592041,159.685958862,26.4812984467,167.497055054,22.8599529266,176.128463745,18.6775150299,183.811172485,14.7911806107,190.185638428,4.04616498947,189.91368103,-4.5592675209,189.705841064,-4.18770027161,197.180877686,-8.45983409882,203.000488281,-19.5152168274,202.291107178,-28.0956745148,201.337493896,-37.639503479,200.335098267,-46.1906852722,192.443130493,-55.8760299683,184.270584106,-58.5846824646,186.449417114,-43.0615196228,193.560501099,-47.9153823853,198.481185913,-59.3991088867,197.090713501,-67.8958206177,195.380111694,-77.333404541,193.699920654,-85.77759552,185.061676025,-94.8036804199,176.699371338,-96.8528900146,177.001464844,-96.5528945923,174.893875122,-104.900672913,165.807647705,-113.475624084,157.35194397,-115.096763611,147.902633667,-116.741401672,139.396408081,-118.072441101,127.947341919,-113.071632385,123.143280029,-105.926803589,146.988433838,-85.2762832642,153.373687744,-91.0517578125,156.687637329,-103.097801208,154.155075073,-111.32661438,151.177398682,-120.444046021,148.36491394,-128.581466675,138.579879761,-136.349502563,130.01663208,-137.242935181,130.356704712,-136.986785889,127.133911133,-144.970581055,116.96635437,-152.230758667,108.368751526,-152.687408447,98.7835845947,-153.03225708,90.1753845215,-153.194656372,79.5124053955,-146.683883667,75.7241897583,-138.952331543,91.3993988037,-139.013458252,87.5510253906,-146.715240479,76.8375854492,-153.14263916,68.2309112549,-152.913162231,58.6487426758,-152.49357605,50.0549507141,-151.96987915,39.9443321228,-144.630630493,36.7838859558,-136.621948242,37.1219520569,-136.880737305,28.5659313202,-135.920547485,18.8417644501,-128.076461792,16.0928230286,-119.917373657,13.1863441467,-110.776977539,10.7180147171,-102.528656006,14.1257982254,-90.5088272095,20.555891037,-84.7833328247]},function(e,t,n){e.exports=n(153)()},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e);return!isNaN(t)}t.a=r;var i=n(0)},function(e,t,n){"use strict";var r=n(158),i=n(159),o=n(161),a=n(162),s=n(164),u={formatDistance:r.a,formatLong:i.a,formatRelative:o.a,localize:a.a,match:s.a,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.a=u},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,-n)}t.a=r;var i=n(1),o=n(26)},function(e,t,n){"use strict";function r(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}t.a=r},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=Object(o.a)(t).getTime()-Object(a.a)(t).getTime();return Math.round(n/s)+1}t.a=r;var i=n(0),o=n(18),a=n(170),s=6048e5},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Object(o.a)(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var u=Object(o.a)(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}t.a=r;var i=n(0),o=n(18)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(o.a)(n,t).getTime()-Object(a.a)(n,t).getTime();return Math.round(r/s)+1}t.a=r;var i=n(0),o=n(19),a=n(171),s=6048e5},function(e,t,n){"use strict";function r(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function i(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function o(e,t){var n=e.match(/(P+)(p+)?/),o=n[1],a=n[2];if(!a)return r(e,t);var s;switch(o){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",r(o,t)).replace("{{time}}",i(a,t))}var a={p:i,P:o};t.a=a},function(e,t,n){"use strict";function r(e){return-1!==a.indexOf(e)}function i(e){return-1!==s.indexOf(e)}function o(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}t.a=r,t.b=i,t.c=o;var a=["D","DD"],s=["YY","YYYY"]},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,n*a)}t.a=r;var i=n(1),o=n(26),a=6e4},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,n*a)}t.a=r;var i=n(1),o=n(26),a=36e5},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t),r=7*n;return Object(o.a)(e,r)}t.a=r;var i=n(1),o=n(28)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=t.getFullYear(),r=t.getMonth(),o=new Date(0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,12*n)}t.a=r;var i=n(1),o=n(29)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,s=null==a?0:Object(o.a)(a),u=null==n.weekStartsOn?s:Object(o.a)(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=Object(i.a)(e),l=c.getDay(),h=(l<u?7:0)+l-u;return c.setDate(c.getDate()-h),c.setHours(0,0,0,0),c}t.a=r;var i=n(0),o=n(1)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r=function(e){return Array.isArray(e)?e[0]:e},i=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}},function(e,t){e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},function(e,t,n){"use strict";var r=n(312),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,u=function(e){return"function"===typeof e&&"[object Function]"===o.call(e)},c=s&&function(){var e={};try{s(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,n,r){(!(t in e)||u(r)&&r())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},h=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)l(e,o[s],t[o[s]],n[o[s]])};h.supportsDescriptors=!!c,e.exports=h},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=n(38),i=n(314),o=r.call(Function.call,String.prototype.replace),a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){var e=i.ToString(i.CheckObjectCoercible(this));return o(o(e,a,""),s,"")}},function(e,t,n){"use strict";var r,i,o=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator,s=Object.getPrototypeOf||function(e){return e.__proto__},u=r?s(r):void 0,c=i?s(i):void 0,l=i?i():void 0,h="undefined"===typeof Uint8Array?void 0:s(Uint8Array),p={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":a?s([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":i?s(l):void 0,"$ %AsyncGeneratorFunction%":c,"$ %AsyncGeneratorPrototype%":c?c.prototype:void 0,"$ %AsyncIteratorPrototype%":l&&a&&Symbol.asyncIterator?l[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"===typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"===typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":r?s(r()):void 0,"$ %GeneratorFunction%":u,"$ %GeneratorPrototype%":u?u.prototype:void 0,"$ %Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":a?s(s([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"===typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!==typeof Map&&a?s((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"===typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"===typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"===typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!==typeof Set&&a?s((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":a?s(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":a?Symbol:void 0,"$ %SymbolPrototype%":a?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":o,"$ %TypedArray%":h,"$ %TypedArrayPrototype%":h?h.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype};e.exports=function(e,t){if(arguments.length>1&&"boolean"!==typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+e;if(!(n in p))throw new SyntaxError("intrinsic "+e+" does not exist!");if("undefined"===typeof p[n]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return p[n]}},function(e,t,n){"use strict";var r=n(38);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(92),i="\u200b";e.exports=function(){return String.prototype.trim&&i.trim()===i?String.prototype.trim:r}},function(e,t,n){n(97),e.exports=n(102)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(98).enable(),window.Promise=n(100)),n(101),Object.assign=n(8)},function(e,t,n){"use strict";function r(){c=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||u))&&(h[t].displayId=l++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},c&&r(),c=!0;var i=0,l=0,h={};s._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(40),u=[ReferenceError,TypeError,RangeError],c=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>c){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,c=1024,l="undefined"!==typeof t?t:self,h=l.MutationObserver||l.WebKitMutationObserver;o="function"===typeof h?function(e){var t=1,n=new h(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(7))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(40);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return c;if(""===e)return l;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=f,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"init",function(){return f}),n.d(t,"canRun",function(){return d}),n.d(t,"setConfig",function(){return m});var i=n(3),o=n.n(i),a=n(5),s=n.n(a),u=n(41),c=n.n(u),l=n(109),h=(n.n(l),n(110)),p=void 0,f=function(e){p=c.a.render(s.a.createElement(h.a,{config:e}),document.getElementById("symphony-root"))},d=function(){if(!window.WebGLRenderingContext)return console.log("Your browser does not support WebGL"),!1;var e=document.createElement("canvas").getContext("webgl");return null===e&&(e=document.createElement("canvas").getContext("experimental-webgl")),null===e?(console.log("Your browser does not support WebGL"),!1):-1!==e.getSupportedExtensions().indexOf("ANGLE_instanced_arrays")||(console.log("ANGLE_instanced_arrays support is required to run this app"),!1)},m=function(){var e=r(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",p.setConfig(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(104),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new f(r||[]);return a._invoke=c(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function c(e,t,n){var i=S;return function(o,a){if(i===C)throw new Error("Generator is already running");if(i===M){if("throw"===o)throw a;return m()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=M,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=C;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?M:k,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=M,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,l(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,A;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function d(e){if(e){var t=e[_];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:g,done:!0}}var g,v=Object.prototype,y=v.hasOwnProperty,b="function"===typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",x=b.asyncIterator||"@@asyncIterator",w=b.toStringTag||"@@toStringTag",T="object"===typeof e,E=t.regeneratorRuntime;if(E)return void(T&&(e.exports=E));E=t.regeneratorRuntime=T?e.exports:{},E.wrap=n;var S="suspendedStart",k="suspendedYield",C="executing",M="completed",A={},O={};O[_]=function(){return this};var D=Object.getPrototypeOf,I=D&&D(D(d([])));I&&I!==v&&y.call(I,_)&&(O=I);var R=a.prototype=i.prototype=Object.create(O);o.prototype=R.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(R),e},E.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[x]=function(){return this},E.AsyncIterator=u,E.async=function(e,t,r,i){var o=new u(n(e,t,r,i));return E.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(R),R[w]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=d,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:d(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),A}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;e=Error(t.replace(/%s/g,function(){return u[c++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function o(e,t,n){this.props=e,this.context=t,this.refs=U,this.updater=n||N}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=U,this.updater=n||N}function u(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)G.call(t,r)&&!V.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:T,type:e,key:o,ref:a,props:i,_owner:j.current}}function c(e,t){return{$$typeof:T,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===T}function h(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function p(e,t,n,r){if(H.length){var i=H.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function f(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>H.length&&H.push(e)}function d(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case T:case E:a=!0}}if(a)return n(r,e,""===t?"."+g(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+g(o,s);a+=d(o,u,n,r)}else if(null===e||"object"!==typeof e?u=null:(u=L&&e[L]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+g(o,s++),a+=d(o,u,n,r);else"object"===o&&(n=""+e,i("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function m(e,t,n){return null==e?0:d(e,"",t,n)}function g(e,t){return"object"===typeof e&&null!==e&&null!=e.key?h(e.key):t.toString(36)}function v(e,t){e.func.call(e.context,t,e.count++)}function y(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?b(e,r,n,function(e){return e}):null!=e&&(l(e)&&(e=c(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(z,"$&/")+"/")+n)),r.push(e))}function b(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(z,"$&/")+"/"),t=p(t,o,r,i),m(e,y,t),f(t)}function _(){var e=B.current;return null===e&&i("321"),e}var x=n(8),w="function"===typeof Symbol&&Symbol.for,T=w?Symbol.for("react.element"):60103,E=w?Symbol.for("react.portal"):60106,S=w?Symbol.for("react.fragment"):60107,k=w?Symbol.for("react.strict_mode"):60108,C=w?Symbol.for("react.profiler"):60114,M=w?Symbol.for("react.provider"):60109,A=w?Symbol.for("react.context"):60110,O=w?Symbol.for("react.concurrent_mode"):60111,D=w?Symbol.for("react.forward_ref"):60112,I=w?Symbol.for("react.suspense"):60113,R=w?Symbol.for("react.memo"):60115,P=w?Symbol.for("react.lazy"):60116,L="function"===typeof Symbol&&Symbol.iterator,N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U={};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var F=s.prototype=new a;F.constructor=s,x(F,o.prototype),F.isPureReactComponent=!0;var B={current:null},j={current:null},G=Object.prototype.hasOwnProperty,V={key:!0,ref:!0,__self:!0,__source:!0},z=/\/+/g,H=[],W={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return b(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=p(null,null,t,n),m(e,v,t),f(t)},count:function(e){return m(e,function(){return null},null)},toArray:function(e){var t=[];return b(e,t,null,function(e){return e}),t},only:function(e){return l(e)||i("143"),e}},createRef:function(){return{current:null}},Component:o,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:A,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:M,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:D,render:e}},lazy:function(e){return{$$typeof:P,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:R,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return _().useCallback(e,t)},useContext:function(e,t){return _().useContext(e,t)},useEffect:function(e,t){return _().useEffect(e,t)},useImperativeHandle:function(e,t,n){return _().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return _().useLayoutEffect(e,t)},useMemo:function(e,t){return _().useMemo(e,t)},useReducer:function(e,t,n){return _().useReducer(e,t,n)},useRef:function(e){return _().useRef(e)},useState:function(e){return _().useState(e)},Fragment:S,StrictMode:k,Suspense:I,createElement:u,cloneElement:function(e,t,n){(null===e||void 0===e)&&i("267",e);var r=void 0,o=x({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=j.current),void 0!==t.key&&(a=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(r in t)G.call(t,r)&&!V.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==c?c[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){c=Array(r);for(var l=0;l<r;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:T,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.8.6",unstable_ConcurrentMode:O,unstable_Profiler:C,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:B,ReactCurrentOwner:j,assign:x}},q={default:W},Y=q&&W||q;e.exports=Y.default||Y},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;e=Error(t.replace(/%s/g,function(){return u[c++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function o(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function a(e,t,n,r,i,a,s,u,c){ci=!1,li=null,o.apply(fi,arguments)}function s(e,t,n,r,o,s,u,c,l){if(a.apply(this,arguments),ci){if(ci){var h=li;ci=!1,li=null}else i("198"),h=void 0;hi||(hi=!0,pi=h)}}function u(){if(di)for(var e in mi){var t=mi[e],n=di.indexOf(e);if(-1<n||i("96",e),!gi[n]){t.extractEvents||i("97",e),gi[n]=t,n=t.eventTypes;for(var r in n){var o=void 0,a=n[r],s=t,u=r;vi.hasOwnProperty(u)&&i("99",u),vi[u]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&c(l[o],s,u);o=!0}else a.registrationName?(c(a.registrationName,s,u),o=!0):o=!1;o||i("98",r,e)}}}}function c(e,t,n){yi[e]&&i("100",e),yi[e]=t,bi[e]=t.eventTypes[n].dependencies}function l(e,t,n){var r=e.type||"unknown-event";e.currentTarget=wi(n),s(r,t,void 0,e),e.currentTarget=null}function h(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function p(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function f(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)l(e,t[r],n[r]);else t&&l(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function d(e,t){var n=e.stateNode;if(!n)return null;var r=_i(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(e=e.type,r=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&i("231",t,typeof n),n)}function m(e){if(null!==e&&(Ti=h(Ti,e)),e=Ti,Ti=null,e&&(p(e,f),Ti&&i("95"),hi))throw e=pi,hi=!1,pi=null,e}function g(e){if(e[ki])return e[ki];for(;!e[ki];){if(!e.parentNode)return null;e=e.parentNode}return e=e[ki],5===e.tag||6===e.tag?e:null}function v(e){return e=e[ki],!e||5!==e.tag&&6!==e.tag?null:e}function y(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function b(e){return e[Ci]||null}function _(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function x(e,t,n){(t=d(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function w(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=_(t);for(t=n.length;0<t--;)x(n[t],"captured",e);for(t=0;t<n.length;t++)x(n[t],"bubbled",e)}}function T(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=d(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function E(e){e&&e.dispatchConfig.registrationName&&T(e._targetInst,null,e)}function S(e){p(e,w)}function k(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function C(e){if(Oi[e])return Oi[e];if(!Ai[e])return e;var t,n=Ai[e];for(t in n)if(n.hasOwnProperty(t)&&t in Di)return Oi[e]=n[t];return e}function M(){if(Bi)return Bi;var e,t,n=Fi,r=n.length,i="value"in Ui?Ui.value:Ui.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Bi=i.slice(e,1<t?1-t:void 0)}function A(){return!0}function O(){return!1}function D(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?A:O,this.isPropagationStopped=O,this}function I(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function R(e){e instanceof this||i("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function P(e){e.eventPool=[],e.getPooled=I,e.release=R}function L(e,t){switch(e){case"keyup":return-1!==Vi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function N(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function U(e,t){switch(e){case"compositionend":return N(t);case"keypress":return 32!==t.which?null:(Ki=!0,Yi);case"textInput":return e=t.data,e===Yi&&Ki?null:e;default:return null}}function F(e,t){if(Qi)return"compositionend"===e||!zi&&L(e,t)?(e=M(),Bi=Fi=Ui=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qi&&"ko"!==t.locale?null:t.data;default:return null}}function B(e){if(e=xi(e)){"function"!==typeof Zi&&i("280");var t=_i(e.stateNode);Zi(e.stateNode,e.type,t)}}function j(e){$i?eo?eo.push(e):eo=[e]:$i=e}function G(){if($i){var e=$i,t=eo;if(eo=$i=null,B(e),t)for(e=0;e<t.length;e++)B(t[e])}}function V(e,t){return e(t)}function z(e,t,n){return e(t,n)}function H(){}function W(e,t){if(to)return e(t);to=!0;try{return V(e,t)}finally{to=!1,(null!==$i||null!==eo)&&(H(),G())}}function q(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!no[e.type]:"textarea"===t}function Y(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function X(e){if(!Mi)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function J(e){e._valueTracker||(e._valueTracker=Q(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){return null===e||"object"!==typeof e?null:(e=bo&&e[bo]||e["@@iterator"],"function"===typeof e?e:null)}function ee(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case fo:return"ConcurrentMode";case uo:return"Fragment";case so:return"Portal";case lo:return"Profiler";case co:return"StrictMode";case go:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case po:return"Context.Consumer";case ho:return"Context.Provider";case mo:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case vo:return ee(e.type);case yo:if(e=1===e._status?e._result:null)return ee(e)}return null}function te(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ee(e.type);n=null,r&&(n=ee(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(io,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ne(e){return!!xo.call(To,e)||!xo.call(wo,e)&&(_o.test(e)?To[e]=!0:(wo[e]=!0,!1))}function re(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ie(e,t,n,r){if(null===t||"undefined"===typeof t||re(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oe(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}function ae(e){return e[1].toUpperCase()}function se(e,t,n,r){var i=Eo.hasOwnProperty(t)?Eo[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ie(t,n,i,r)&&(n=null),r||null===i?ne(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function ue(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ce(e,t){var n=t.checked;return si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function le(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ue(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function he(e,t){null!=(t=t.checked)&&se(e,"checked",t,!1)}function pe(e,t){he(e,t);var n=ue(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?de(e,t.type,n):t.hasOwnProperty("defaultValue")&&de(e,t.type,ue(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function fe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function de(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function me(e,t,n){return e=D.getPooled(ko.change,e,t,n),e.type="change",j(n),S(e),e}function ge(e){m(e)}function ve(e){if(Z(y(e)))return e}function ye(e,t){if("change"===e)return t}function be(){Co&&(Co.detachEvent("onpropertychange",_e),Mo=Co=null)}function _e(e){"value"===e.propertyName&&ve(Mo)&&(e=me(Mo,e,Y(e)),W(ge,e))}function xe(e,t,n){"focus"===e?(be(),Co=t,Mo=n,Co.attachEvent("onpropertychange",_e)):"blur"===e&&be()}function we(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ve(Mo)}function Te(e,t){if("click"===e)return ve(t)}function Ee(e,t){if("input"===e||"change"===e)return ve(t)}function Se(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Io[e])&&!!t[e]}function ke(){return Se}function Ce(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function Me(e,t){if(Ce(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Go.call(t,n[r])||!Ce(e[n[r]],t[n[r]]))return!1;return!0}function Ae(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Oe(e){2!==Ae(e)&&i("188")}function De(e){var t=e.alternate;if(!t)return t=Ae(e),3===t&&i("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Oe(o),e;if(s===r)return Oe(o),t;s=s.sibling}i("188")}if(n.return!==r.return)n=o,r=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}s||i("189")}}n.alternate!==r&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?e:t}function Ie(e){if(!(e=De(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Re(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Pe(e,t){var n=e[0];e=e[1];var r="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},$o[e]=t,ea[n]=t}function Le(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=g(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Y(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<gi.length;s++){var u=gi[s];u&&(u=u.extractEvents(r,t,o,i))&&(a=h(a,u))}m(a)}}function Ne(e,t){if(!t)return null;var n=(na(e)?Fe:Be).bind(null,e);t.addEventListener(e,n,!1)}function Ue(e,t){if(!t)return null;var n=(na(e)?Fe:Be).bind(null,e);t.addEventListener(e,n,!0)}function Fe(e,t){z(Be,e,t)}function Be(e,t){if(ia){var n=Y(t);if(n=g(n),null===n||"number"!==typeof n.tag||2===Ae(n)||(n=null),ra.length){var r=ra.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{W(Le,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ra.length&&ra.push(e)}}}function je(e){return Object.prototype.hasOwnProperty.call(e,sa)||(e[sa]=aa++,oa[e[sa]]={}),oa[e[sa]]}function Ge(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ve(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ze(e,t){var n=Ve(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ve(n)}}function He(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?He(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function We(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;e=t.contentWindow,t=Ge(e.document)}return t}function qe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ye(){var e=We();if(qe(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,c=0,l=e,h=null;t:for(;;){for(var p;l!==t||0!==r&&3!==l.nodeType||(a=o+r),l!==i||0!==n&&3!==l.nodeType||(s=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(p=l.firstChild);)h=l,l=p;for(;;){if(l===e)break t;if(h===t&&++u===r&&(a=o),h===i&&++c===n&&(s=o),null!==(p=l.nextSibling))break;l=h,h=l.parentNode}l=p}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}function Xe(e){var t=We(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&He(n.ownerDocument.documentElement,n)){if(null!==r&&qe(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ze(n,o);var a=ze(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}function Ke(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return fa||null==la||la!==Ge(n)?null:(n=la,"selectionStart"in n&&qe(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pa&&Me(pa,n)?null:(pa=n,e=D.getPooled(ca.select,ha,e,t),e.type="select",e.target=la,S(e),e))}function Qe(e){var t="";return ai.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Je(e,t){return e=si({children:void 0},t),(t=Qe(t.children))&&(e.children=t),e}function Ze(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ue(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function $e(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function et(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:ue(n)}}function tt(e,t){var n=ue(t.value),r=ue(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function nt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function rt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?rt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function ot(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function at(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ya.hasOwnProperty(e)&&ya[e]?(""+t).trim():t+"px"}function st(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=at(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ut(e,t){t&&(_a[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!==typeof t.style&&i("62",""))}function ct(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function lt(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=je(e);t=bi[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Ue("scroll",e);break;case"focus":case"blur":Ue("focus",e),Ue("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":X(i)&&Ue(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===Ni.indexOf(i)&&Ne(i,e)}n[i]=!0}}}function ht(){}function pt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ft(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function dt(e,t,n,r,i){e[Ci]=i,"input"===n&&"radio"===i.type&&null!=i.name&&he(e,i),ct(n,r),r=ct(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?st(e,s):"dangerouslySetInnerHTML"===a?va(e,s):"children"===a?ot(e,s):se(e,a,s,r)}switch(n){case"input":pe(e,i);break;case"textarea":tt(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Ze(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Ze(e,!!i.multiple,i.defaultValue,!0):Ze(e,!!i.multiple,i.multiple?[]:"",!1))}}function mt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function gt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function vt(e){0>Ma||(e.current=Ca[Ma],Ca[Ma]=null,Ma--)}function yt(e,t){Ma++,Ca[Ma]=e.current,e.current=t}function bt(e,t){var n=e.type.contextTypes;if(!n)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _t(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xt(e){vt(Da,e),vt(Oa,e)}function wt(e){vt(Da,e),vt(Oa,e)}function Tt(e,t,n){Oa.current!==Aa&&i("168"),yt(Oa,t,e),yt(Da,n,e)}function Et(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;r=r.getChildContext();for(var o in r)o in e||i("108",ee(t)||"Unknown",o);return si({},n,r)}function St(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Aa,Ia=Oa.current,yt(Oa,t,e),yt(Da,Da.current,e),!0}function kt(e,t,n){var r=e.stateNode;r||i("169"),n?(t=Et(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=t,vt(Da,e),vt(Oa,e),yt(Oa,t,e)):vt(Da,e),yt(Da,n,e)}function Ct(e){return function(t){try{return e(t)}catch(e){}}}function Mt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ra=Ct(function(e){return t.onCommitFiberRoot(n,e)}),Pa=Ct(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function At(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ot(e,t,n,r){return new At(e,t,n,r)}function Dt(e){return!(!(e=e.prototype)||!e.isReactComponent)}function It(e){if("function"===typeof e)return Dt(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===mo)return 11;if(e===vo)return 14}return 2}function Rt(e,t){var n=e.alternate;return null===n?(n=Ot(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pt(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Dt(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case uo:return Lt(n.children,o,a,t);case fo:return Nt(n,3|o,a,t);case co:return Nt(n,2|o,a,t);case lo:return e=Ot(12,n,t,4|o),e.elementType=lo,e.type=lo,e.expirationTime=a,e;case go:return e=Ot(13,n,t,o),e.elementType=go,e.type=go,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ho:s=10;break e;case po:s=9;break e;case mo:s=11;break e;case vo:s=14;break e;case yo:s=16,r=null;break e}i("130",null==e?e:typeof e,"")}return t=Ot(s,n,t,o),t.elementType=e,t.type=r,t.expirationTime=a,t}function Lt(e,t,n,r){return e=Ot(7,e,r,t),e.expirationTime=n,e}function Nt(e,t,n,r){return e=Ot(8,e,r,t),t=0===(1&t)?co:fo,e.elementType=t,e.type=t,e.expirationTime=n,e}function Ut(e,t,n){return e=Ot(6,e,null,t),e.expirationTime=n,e}function Ft(e,t,n){return t=Ot(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bt(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),zt(t,e)}function jt(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),n=e.earliestSuspendedTime,0===n?Bt(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Bt(e,t)):t>n&&Bt(e,t)}zt(0,e)}function Gt(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),zt(t,e)}function Vt(e,t){var n=e.earliestPendingTime;return e=e.earliestSuspendedTime,n>t&&(t=n),e>t&&(t=e),t}function zt(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;i=0!==i?i:o,0===i&&(0===e||r<e)&&(i=r),e=i,0!==e&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function Ht(e,t){if(e&&e.defaultProps){t=si({},t),e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n])}return t}function Wt(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,t=e._ctor,t=t(),t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function qt(e,t,n,r){t=e.memoizedState,n=n(r,t),n=null===n||void 0===n?t:si({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}function Yt(e,t,n,r,i,o,a){return e=e.stateNode,"function"===typeof e.shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Me(n,r)||!Me(i,o))}function Xt(e,t,n){var r=!1,i=Aa,o=t.contextType;return"object"===typeof o&&null!==o?o=Gn(o):(i=_t(t)?Ia:Oa.current,r=t.contextTypes,o=(r=null!==r&&void 0!==r)?bt(e,i):Aa),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Na,e.stateNode=t,t._reactInternalFiber=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Kt(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Na.enqueueReplaceState(t,t.state,null)}function Qt(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=La;var o=t.contextType;"object"===typeof o&&null!==o?i.context=Gn(o):(o=_t(t)?Ia:Oa.current,i.context=bt(e,o)),o=e.updateQueue,null!==o&&(Qn(e,o,n,i,r),i.state=e.memoizedState),o=t.getDerivedStateFromProps,"function"===typeof o&&(qt(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Na.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(Qn(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}function Jt(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&i("309"),r=n.stateNode),r||i("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===La&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!==typeof e&&i("284"),n._owner||i("290",e)}return e}function Zt(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function $t(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Rt(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=Ut(n,e.mode,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=o(t,n.props,r),r.ref=Jt(e,t,n),r.return=e,r):(r=Pt(n.type,n.key,n.props,null,e.mode,r),r.ref=Jt(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ft(n,e.mode,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?(t=Lt(n,e.mode,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function p(e,t,n){if("string"===typeof t||"number"===typeof t)return t=Ut(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ao:return n=Pt(t.type,t.key,t.props,null,e.mode,n),n.ref=Jt(e,null,t),n.return=e,n;case so:return t=Ft(t,e.mode,n),t.return=e,t}if(Ua(t)||$(t))return t=Lt(t,e.mode,n,null),t.return=e,t;Zt(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ao:return n.key===i?n.type===uo?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case so:return n.key===i?l(e,t,n,r):null}if(Ua(n)||$(n))return null!==i?null:h(e,t,n,r,null);Zt(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ao:return e=e.get(null===r.key?n:r.key)||null,r.type===uo?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case so:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,i)}if(Ua(r)||$(r))return e=e.get(n)||null,h(t,e,r,i,null);Zt(t,r)}return null}function m(i,o,s,u){for(var c=null,l=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,s[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===l?c=v:l.sibling=v,l=v,h=g}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)(h=p(i,s[m],u))&&(o=a(h,o,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)(g=d(h,i,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach(function(e){return t(i,e)}),c}function g(o,s,u,c){var l=$(u);"function"!==typeof l&&i("150"),null==(u=l.call(u))&&i("151");for(var h=l=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(o,m,y.value,c);if(null===b){m||(m=v);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===h?l=b:h.sibling=b,h=b,m=v}if(y.done)return n(o,m),l;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=p(o,y.value,c))&&(s=a(y,s,g),null===h?l=y:h.sibling=y,h=y);return l}for(m=r(o,m);!y.done;g++,y=u.next())null!==(y=d(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?l=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(o,e)}),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===uo&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ao:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?a.type===uo:c.elementType===a.type){n(e,c.sibling),r=o(c,a.type===uo?a.props.children:a.props,u),r.ref=Jt(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===uo?(r=Lt(a.props.children,e.mode,u,a.key),r.return=e,e=r):(u=Pt(a.type,a.key,a.props,null,e.mode,u),u.ref=Jt(e,r,a),u.return=e,e=u)}return s(e);case so:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),r=o(r,a.children||[],u),r.return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}r=Ft(a,e.mode,u),r.return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),r=o(r,a,u),r.return=e,e=r):(n(e,r),r=Ut(a,e.mode,u),r.return=e,e=r),s(e);if(Ua(a))return m(e,r,a,u);if($(a))return g(e,r,a,u);if(l&&Zt(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:u=e.type,i("152",u.displayName||u.name||"Component")}return n(e,r)}}function en(e){return e===ja&&i("174"),e}function tn(e,t){yt(za,t,e),yt(Va,e,e),yt(Ga,ja,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:it(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=it(t,n)}vt(Ga,e),yt(Ga,t,e)}function nn(e){vt(Ga,e),vt(Va,e),vt(za,e)}function rn(e){en(za.current);var t=en(Ga.current),n=it(t,e.type);t!==n&&(yt(Va,e,e),yt(Ga,n,e))}function on(e){Va.current===e&&(vt(Ga,e),vt(Va,e))}function an(){i("321")}function sn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ce(e[n],t[n]))return!1;return!0}function un(e,t,n,r,o,a){if($a=a,es=t,ns=null!==e?e.memoizedState:null,Za.current=null===ns?fs:ds,t=n(r,o),cs){do{cs=!1,hs+=1,ns=null!==e?e.memoizedState:null,os=rs,ss=is=ts=null,Za.current=ds,t=n(r,o)}while(cs);ls=null,hs=0}return Za.current=ps,e=es,e.memoizedState=rs,e.expirationTime=as,e.updateQueue=ss,e.effectTag|=us,e=null!==ts&&null!==ts.next,$a=0,os=is=rs=ns=ts=es=null,as=0,ss=null,us=0,e&&i("300"),t}function cn(){Za.current=ps,$a=0,os=is=rs=ns=ts=es=null,as=0,ss=null,us=0,cs=!1,ls=null,hs=0}function ln(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===is?rs=is=e:is=is.next=e,is}function hn(){if(null!==os)is=os,os=is.next,ts=ns,ns=null!==ts?ts.next:null;else{null===ns&&i("310"),ts=ns;var e={memoizedState:ts.memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};is=null===is?rs=e:is.next=e,ns=ts.next}return is}function pn(e,t){return"function"===typeof t?t(e):t}function fn(e){var t=hn(),n=t.queue;if(null===n&&i("311"),n.lastRenderedReducer=e,0<hs){var r=n.dispatch;if(null!==ls){var o=ls.get(n);if(void 0!==o){ls.delete(n);var a=t.memoizedState;do{a=e(a,o.action),o=o.next}while(null!==o);return Ce(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=o=null,c=r,l=!1;do{var h=c.expirationTime;h<$a?(l||(l=!0,u=s,o=a),h>as&&(as=h)):a=c.eagerReducer===e?c.eagerState:e(a,c.action),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,o=a),Ce(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseUpdate=u,t.baseState=o,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function dn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===ss?(ss={lastEffect:null},ss.lastEffect=e.next=e):(t=ss.lastEffect,null===t?ss.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,ss.lastEffect=e)),e}function mn(e,t,n,r){var i=ln();us|=e,i.memoizedState=dn(t,n,void 0,void 0===r?null:r)}function gn(e,t,n,r){var i=hn();r=void 0===r?null:r;var o=void 0;if(null!==ts){var a=ts.memoizedState;if(o=a.destroy,null!==r&&sn(r,a.deps))return void dn(Ha,n,o,r)}us|=e,i.memoizedState=dn(t,n,o,r)}function vn(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function yn(){}function bn(e,t,n){25>hs||i("301");var r=e.alternate;if(e===es||null!==r&&r===es)if(cs=!0,e={expirationTime:$a,action:n,eagerReducer:null,eagerState:null,next:null},null===ls&&(ls=new Map),void 0===(n=ls.get(t)))ls.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{yr();var o=Lr();o=Er(o,e);var a={expirationTime:o,action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(a.eagerReducer=r,a.eagerState=l,Ce(l,c))return}catch(e){}Mr(e,o)}}function _n(e,t){var n=Ot(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function xn(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function wn(e){if(vs){var t=gs;if(t){var n=t;if(!xn(e,t)){if(!(t=mt(n))||!xn(e,t))return e.effectTag|=2,vs=!1,void(ms=e);_n(ms,n)}ms=e,gs=gt(t)}else e.effectTag|=2,vs=!1,ms=e}}function Tn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ms=e}function En(e){if(e!==ms)return!1;if(!vs)return Tn(e),vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ft(t,e.memoizedProps))for(t=gs;t;)_n(e,t),t=mt(t);return Tn(e),gs=ms?mt(e.stateNode):null,!0}function Sn(){gs=ms=null,vs=!1}function kn(e,t,n,r){t.child=null===e?Ba(t,null,n,r):Fa(t,e.child,n,r)}function Cn(e,t,n,r,i){n=n.render;var o=t.ref;return jn(t,i),r=un(e,t,n,r,o,i),null===e||bs?(t.effectTag|=1,kn(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Nn(e,t,i))}function Mn(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Dt(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=Pt(n.type,null,r,null,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,An(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,n=n.compare,(n=null!==n?n:Me)(i,r)&&e.ref===t.ref)?Nn(e,t,o):(t.effectTag|=1,e=Rt(a,r,o),e.ref=t.ref,e.return=t,t.child=e)}function An(e,t,n,r,i,o){return null!==e&&Me(e.memoizedProps,r)&&e.ref===t.ref&&(bs=!1,i<o)?Nn(e,t,o):Dn(e,t,n,r,o)}function On(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Dn(e,t,n,r,i){var o=_t(n)?Ia:Oa.current;return o=bt(t,o),jn(t,i),n=un(e,t,n,r,o,i),null===e||bs?(t.effectTag|=1,kn(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Nn(e,t,i))}function In(e,t,n,r,i){if(_t(n)){var o=!0;St(t)}else o=!1;if(jn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Xt(t,n,r,i),Qt(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Gn(c):(c=_t(n)?Ia:Oa.current,c=bt(t,c));var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Kt(t,a,r,c),Ms=!1;var p=t.memoizedState;u=a.state=p;var f=t.updateQueue;null!==f&&(Qn(t,f,r,a,i),u=t.memoizedState),s!==r||p!==u||Da.current||Ms?("function"===typeof l&&(qt(t,n,l,r),u=t.memoizedState),(s=Ms||Yt(t,n,s,r,p,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Ht(t.type,s),u=a.context,c=n.contextType,"object"===typeof c&&null!==c?c=Gn(c):(c=_t(n)?Ia:Oa.current,c=bt(t,c)),l=n.getDerivedStateFromProps,(h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Kt(t,a,r,c),Ms=!1,u=t.memoizedState,p=a.state=u,f=t.updateQueue,null!==f&&(Qn(t,f,r,a,i),p=t.memoizedState),s!==r||u!==p||Da.current||Ms?("function"===typeof l&&(qt(t,n,l,r),p=t.memoizedState),(l=Ms||Yt(t,n,s,r,u,p,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Rn(e,t,n,r,o,i)}function Rn(e,t,n,r,i,o){On(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&kt(t,n,!1),Nn(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Fa(t,e.child,null,o),t.child=Fa(t,null,s,o)):kn(e,t,s,o),t.memoizedState=r.state,i&&kt(t,n,!0),t.child}function Pn(e){var t=e.stateNode;t.pendingContext?Tt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tt(e,t.context,!1),tn(e,t.containerInfo)}function Ln(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0===(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Lt(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Lt(s,r,n,null),e.sibling=r,n=e,n.return=r.return=t}else n=r=Ba(t,null,i.children,n);else null!==e.memoizedState?(r=e.child,s=r.sibling,a?(n=i.fallback,i=Rt(r,r.pendingProps,0),0===(1&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a),r=i.sibling=Rt(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=Fa(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,i=Lt(null,r,0,null),i.child=s,0===(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),r=i.sibling=Lt(a,r,n,null),r.effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=Fa(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Nn(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){for(e=t.child,n=Rt(e,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Rt(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function Un(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Da.current)bs=!0;else if(r<n){switch(bs=!1,t.tag){case 3:Pn(t),Sn();break;case 5:rn(t);break;case 1:_t(t.type)&&St(t);break;case 4:tn(t,t.stateNode.containerInfo);break;case 10:Fn(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ln(e,t,n):(t=Nn(e,t,n),null!==t?t.sibling:null)}return Nn(e,t,n)}}else bs=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=bt(t,Oa.current);if(jn(t,n),o=un(null,t,r,e,o,n),t.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,cn(),_t(r)){var a=!0;St(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&qt(t,r,s,e),o.updater=Na,t.stateNode=o,o._reactInternalFiber=t,Qt(t,r,e,n),t=Rn(null,t,r,!0,a,n)}else t.tag=0,kn(null,t,o,n),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=Wt(o),t.type=e,o=t.tag=It(e),a=Ht(e,a),s=void 0,o){case 0:s=Dn(null,t,e,a,n);break;case 1:s=In(null,t,e,a,n);break;case 11:s=Cn(null,t,e,a,n);break;case 14:s=Mn(null,t,e,Ht(e.type,a),r,n);break;default:i("306",e,"")}return s;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ht(r,o),Dn(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ht(r,o),In(e,t,r,o,n);case 3:return Pn(t),r=t.updateQueue,null===r&&i("282"),o=t.memoizedState,o=null!==o?o.element:null,Qn(t,r,t.pendingProps,null,n),r=t.memoizedState.element,r===o?(Sn(),t=Nn(e,t,n)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(gs=gt(t.stateNode.containerInfo),ms=t,o=vs=!0),o?(t.effectTag|=2,t.child=Ba(t,null,r,n)):(kn(e,t,r,n),Sn()),t=t.child),t;case 5:return rn(t),null===e&&wn(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,ft(r,o)?s=null:null!==a&&ft(r,a)&&(t.effectTag|=16),On(e,t),1!==n&&1&t.mode&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(kn(e,t,s,n),t=t.child),t;case 6:return null===e&&wn(t),null;case 13:return Ln(e,t,n);case 4:return tn(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Fa(t,null,r,n):kn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ht(r,o),Cn(e,t,r,o,n);case 7:return kn(e,t,t.pendingProps,n),t.child;case 8:case 12:return kn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Fn(t,a),null!==s){var u=s.value;if(0===(a=Ce(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===o.children&&!Da.current){t=Nn(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.contextDependencies;if(null!==c){s=u.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&(l=Hn(n),l.tag=ks,qn(u,l)),u.expirationTime<n&&(u.expirationTime=n),l=u.alternate,null!==l&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var h=u.return;null!==h;){var p=h.alternate;if(h.childExpirationTime<l)h.childExpirationTime=l,null!==p&&p.childExpirationTime<l&&(p.childExpirationTime=l);else{if(!(null!==p&&p.childExpirationTime<l))break;p.childExpirationTime=l}h=h.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}kn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,r=a.children,jn(t,n),o=Gn(o,a.unstable_observedBits),r=r(o),t.effectTag|=1,kn(e,t,r,n),t.child;case 14:return o=t.type,a=Ht(o,t.pendingProps),a=Ht(o.type,a),Mn(e,t,o,a,r,n);case 15:return An(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ht(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_t(r)?(e=!0,St(t)):e=!1,jn(t,n),Xt(t,r,o,n),Qt(t,r,o,n),Rn(null,t,r,!0,e,n)}i("156")}function Fn(e,t){var n=e.type._context;yt(_s,n._currentValue,e),n._currentValue=t}function Bn(e){var t=_s.current;vt(_s,e),e.type._context._currentValue=t}function jn(e,t){xs=e,Ts=ws=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(bs=!0),e.contextDependencies=null}function Gn(e,t){return Ts!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(Ts=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ws?(null===xs&&i("308"),ws=t,xs.contextDependencies={first:t,expirationTime:0}):ws=ws.next=t),e._currentValue}function Vn(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function zn(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Hn(e){return{expirationTime:e,tag:Es,payload:null,callback:null,next:null,nextEffect:null}}function Wn(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function qn(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Vn(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Vn(e.memoizedState),i=n.updateQueue=Vn(n.memoizedState)):r=e.updateQueue=zn(i):null===i&&(i=n.updateQueue=zn(r));null===i||r===i?Wn(r,t):null===r.lastUpdate||null===i.lastUpdate?(Wn(r,t),Wn(i,t)):(Wn(r,t),i.lastUpdate=t)}function Yn(e,t){var n=e.updateQueue;n=null===n?e.updateQueue=Vn(e.memoizedState):Xn(e,n),null===n.lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Xn(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=zn(t)),t}function Kn(e,t,n,r,i,o){switch(n.tag){case Ss:return e=n.payload,"function"===typeof e?e.call(o,r,i):e;case Cs:e.effectTag=-2049&e.effectTag|64;case Es:if(e=n.payload,null===(i="function"===typeof e?e.call(o,r,i):e)||void 0===i)break;return si({},r,i);case ks:Ms=!0}return r}function Qn(e,t,n,r,i){Ms=!1,t=Xn(e,t);for(var o=t.baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(c=Kn(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=Kn(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=c}function Jn(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Zn(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Zn(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Zn(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&i("191",n),n.call(r)}e=e.nextEffect}}function $n(e,t){return{value:e,source:t,stack:te(t)}}function er(e){e.effectTag|=4}function tr(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=te(n)),null!==n&&ee(n.type),t=t.value,null!==e&&1===e.tag&&ee(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function nr(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){Tr(e,t)}else t.current=null}function rr(e,t,n){if(n=n.updateQueue,null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Ha){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Ha&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ir(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=at("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){r=n.child.sibling,r.return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function or(e){switch("function"===typeof Pa&&Pa(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Tr(i,e)}}n=n.next}while(n!==t)}break;case 1:if(nr(e),t=e.stateNode,"function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Tr(e,t)}break;case 5:nr(e);break;case 4:ur(e)}}function ar(e){return 5===e.tag||3===e.tag||4===e.tag}function sr(e){e:{for(var t=e.return;null!==t;){if(ar(t)){var n=t;break e}t=t.return}i("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:i("161")}16&n.effectTag&&(ot(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ar(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(r){var a=t,s=o.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else t.insertBefore(o.stateNode,n);else r?(s=t,u=o.stateNode,8===s.nodeType?(a=s.parentNode,a.insertBefore(u,s)):(a=s,a.appendChild(u)),null!==(s=s._reactRootContainer)&&void 0!==s||null!==a.onclick||(a.onclick=ht)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ur(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&i("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(or(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=r,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(or(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function cr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:rr(qa,Ya,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&dt(n,a,o,e,r,t)}break;case 6:null===t.stateNode&&i("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Lr())),null!==e&&ir(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new Rs),n.forEach(function(e){var n=kr.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:i("163")}}function lr(e,t,n){n=Hn(n),n.tag=Cs,n.payload={element:null};var r=t.value;return n.callback=function(){Hr(r),tr(e,t)},n}function hr(e,t,n){n=Hn(n),n.tag=Cs;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var n=t.value,i=t.stack;tr(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function pr(e){switch(e.tag){case 1:_t(e.type)&&xt(e);var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return nn(e),wt(e),t=e.effectTag,0!==(64&t)&&i("285"),e.effectTag=-2049&t|64,e;case 5:return on(e),null;case 13:return t=e.effectTag,2048&t?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return nn(e),null;case 10:return Bn(e),null;default:return null}}function fr(){if(null!==Bs)for(var e=Bs.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&xt(t);break;case 3:nn(t),wt(t);break;case 5:on(t);break;case 4:nn(t);break;case 10:Bn(t)}e=e.return}js=null,Gs=0,Vs=-1,zs=!1,Bs=null}function dr(){for(;null!==Hs;){var e=Hs.effectTag;if(16&e&&ot(Hs.stateNode,""),128&e){var t=Hs.alternate;null!==t&&null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null)}switch(14&e){case 2:sr(Hs),Hs.effectTag&=-3;break;case 6:sr(Hs),Hs.effectTag&=-3,cr(Hs.alternate,Hs);break;case 4:cr(Hs.alternate,Hs);break;case 8:e=Hs,ur(e),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Hs=Hs.nextEffect}}function mr(){for(;null!==Hs;){if(256&Hs.effectTag)e:{var e=Hs.alternate,t=Hs;switch(t.tag){case 0:case 11:case 15:rr(Wa,Ha,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:Ht(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:i("163")}}Hs=Hs.nextEffect}}function gr(e,t){for(;null!==Hs;){var n=Hs.effectTag;if(36&n){var r=Hs.alternate,o=Hs,a=t;switch(o.tag){case 0:case 11:case 15:rr(Xa,Ka,o);break;case 1:var s=o.stateNode;if(4&o.effectTag)if(null===r)s.componentDidMount();else{var u=o.elementType===o.type?r.memoizedProps:Ht(o.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}r=o.updateQueue,null!==r&&Jn(o,r,s,a);break;case 3:if(null!==(r=o.updateQueue)){if(s=null,null!==o.child)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}Jn(o,r,s,a)}break;case 5:a=o.stateNode,null===r&&4&o.effectTag&&pt(o.type,o.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:i("163")}}128&n&&null!==(o=Hs.ref)&&(a=Hs.stateNode,"function"===typeof o?o(a):o.current=a),512&n&&(qs=e),Hs=Hs.nextEffect}}function vr(e,t){Xs=Ys=qs=null;var n=eu;eu=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;rr(Ja,Ha,o),rr(Ha,Qa,o)}catch(e){r=!0,i=e}r&&Tr(t,i)}t=t.nextEffect}while(null!==t);eu=n,n=e.expirationTime,0!==n&&Nr(e,n),au||eu||jr(1073741823,!1)}function yr(){null!==Ys&&ka(Ys),null!==Xs&&Xs()}function br(e,t){Ws=Fs=!0,e.current===t&&i("177");var n=e.pendingCommitExpirationTime;0===n&&i("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,o=t.childExpirationTime;for(jt(e,o>r?o:r),Ns.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,xa=ia,wa=Ye(),ia=!1,Hs=r;null!==Hs;){o=!1;var a=void 0;try{mr()}catch(e){o=!0,a=e}o&&(null===Hs&&i("178"),Tr(Hs,a),null!==Hs&&(Hs=Hs.nextEffect))}for(Hs=r;null!==Hs;){o=!1,a=void 0;try{dr()}catch(e){o=!0,a=e}o&&(null===Hs&&i("178"),Tr(Hs,a),null!==Hs&&(Hs=Hs.nextEffect))}for(Xe(wa),wa=null,ia=!!xa,xa=null,e.current=t,Hs=r;null!==Hs;){o=!1,a=void 0;try{gr(e,n)}catch(e){o=!0,a=e}o&&(null===Hs&&i("178"),Tr(Hs,a),null!==Hs&&(Hs=Hs.nextEffect))}if(null!==r&&null!==qs){var s=vr.bind(null,e,r);Ys=ui.unstable_runWithPriority(ui.unstable_NormalPriority,function(){return Sa(s)}),Xs=s}Fs=Ws=!1,"function"===typeof Ra&&Ra(t.stateNode),n=t.expirationTime,t=t.childExpirationTime,t=t>n?t:n,0===t&&(Ks=null),Pr(e,t)}function _r(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){Bs=e;e:{var o=t;t=e;var a=Gs,s=t.pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:_t(t.type)&&xt(t);break;case 3:nn(t),wt(t),s=t.stateNode,s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==o&&null!==o.child||(En(t),t.effectTag&=-3),Os(t);break;case 5:on(t);var u=en(za.current);if(a=t.type,null!==o&&null!=t.stateNode)Ds(o,t,a,s,u),o.ref!==t.ref&&(t.effectTag|=128);else if(s){var c=en(Ga.current);if(En(t)){s=t,o=s.stateNode;var l=s.type,h=s.memoizedProps,p=u;switch(o[ki]=s,o[Ci]=h,a=void 0,u=l){case"iframe":case"object":Ne("load",o);break;case"video":case"audio":for(l=0;l<Ni.length;l++)Ne(Ni[l],o);break;case"source":Ne("error",o);break;case"img":case"image":case"link":Ne("error",o),Ne("load",o);break;case"form":Ne("reset",o),Ne("submit",o);break;case"details":Ne("toggle",o);break;case"input":le(o,h),Ne("invalid",o),lt(p,"onChange");break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Ne("invalid",o),lt(p,"onChange");break;case"textarea":et(o,h),Ne("invalid",o),lt(p,"onChange")}ut(u,h),l=null;for(a in h)h.hasOwnProperty(a)&&(c=h[a],"children"===a?"string"===typeof c?o.textContent!==c&&(l=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(l=["children",""+c]):yi.hasOwnProperty(a)&&null!=c&&lt(p,a));switch(u){case"input":J(o),fe(o,h,!0);break;case"textarea":J(o),nt(o,h);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(o.onclick=ht)}a=l,s.updateQueue=a,s=null!==a,s&&er(t)}else{h=t,p=a,o=s,l=9===u.nodeType?u:u.ownerDocument,c===ma.html&&(c=rt(p)),c===ma.html?"script"===p?(o=l.createElement("div"),o.innerHTML="<script><\/script>",l=o.removeChild(o.firstChild)):"string"===typeof o.is?l=l.createElement(p,{is:o.is}):(l=l.createElement(p),"select"===p&&(p=l,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):l=l.createElementNS(c,p),o=l,o[ki]=h,o[Ci]=s,As(o,t,!1,!1),p=o,l=a,h=s;var f=u,d=ct(l,h);switch(l){case"iframe":case"object":Ne("load",p),u=h;break;case"video":case"audio":for(u=0;u<Ni.length;u++)Ne(Ni[u],p);u=h;break;case"source":Ne("error",p),u=h;break;case"img":case"image":case"link":Ne("error",p),Ne("load",p),u=h;break;case"form":Ne("reset",p),Ne("submit",p),u=h;break;case"details":Ne("toggle",p),u=h;break;case"input":le(p,h),u=ce(p,h),Ne("invalid",p),lt(f,"onChange");break;case"option":u=Je(p,h);break;case"select":p._wrapperState={wasMultiple:!!h.multiple},u=si({},h,{value:void 0}),Ne("invalid",p),lt(f,"onChange");break;case"textarea":et(p,h),u=$e(p,h),Ne("invalid",p),lt(f,"onChange");break;default:u=h}ut(l,u),c=void 0;var m=l,g=p,v=u;for(c in v)if(v.hasOwnProperty(c)){var y=v[c];"style"===c?st(g,y):"dangerouslySetInnerHTML"===c?null!=(y=y?y.__html:void 0)&&va(g,y):"children"===c?"string"===typeof y?("textarea"!==m||""!==y)&&ot(g,y):"number"===typeof y&&ot(g,""+y):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(yi.hasOwnProperty(c)?null!=y&&lt(f,c):null!=y&&se(g,c,y,d))}switch(l){case"input":J(p),fe(p,h,!1);break;case"textarea":J(p),nt(p,h);break;case"option":null!=h.value&&p.setAttribute("value",""+ue(h.value));break;case"select":u=p,u.multiple=!!h.multiple,p=h.value,null!=p?Ze(u,!!h.multiple,p,!1):null!=h.defaultValue&&Ze(u,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof u.onClick&&(p.onclick=ht)}(s=pt(a,s))&&er(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&i("166");break;case 6:o&&null!=t.stateNode?Is(o,t,o.memoizedProps,s):("string"!==typeof s&&(null===t.stateNode&&i("166")),o=en(za.current),en(Ga.current),En(t)?(s=t,a=s.stateNode,o=s.memoizedProps,a[ki]=s,(s=a.nodeValue!==o)&&er(t)):(a=t,s=(9===o.nodeType?o:o.ownerDocument).createTextNode(s),s[ki]=t,a.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=a,Bs=t;break e}s=null!==s,a=null!==o&&null!==o.memoizedState,null!==o&&!s&&a&&null!==(o=o.child.sibling)&&(u=t.firstEffect,null!==u?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8),(s||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:nn(t),Os(t);break;case 10:Bn(t);break;case 9:case 14:break;case 17:_t(t.type)&&xt(t);break;case 18:break;default:i("156")}Bs=null}if(t=e,1===Gs||1!==t.childExpirationTime){for(s=0,a=t.child;null!==a;)o=a.expirationTime,u=a.childExpirationTime,o>s&&(s=o),u>s&&(s=u),a=a.sibling;t.childExpirationTime=s}if(null!==Bs)return Bs;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=pr(e,Gs)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function xr(e){var t=Un(e.alternate,e,Gs);return e.memoizedProps=e.pendingProps,null===t&&(t=_r(e)),Ns.current=null,t}function wr(e,t){Fs&&i("243"),yr(),Fs=!0;var n=Ls.current;Ls.current=ps;var r=e.nextExpirationTimeToWorkOn;r===Gs&&e===js&&null!==Bs||(fr(),js=e,Gs=r,Bs=Rt(js.current,null,Gs),e.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(t)for(;null!==Bs&&!Fr();)Bs=xr(Bs);else for(;null!==Bs;)Bs=xr(Bs)}catch(t){if(Ts=ws=xs=null,cn(),null===Bs)o=!0,Hr(t);else{null===Bs&&i("271");var a=Bs,s=a.return;if(null!==s){e:{var u=e,c=s,l=a,h=t;if(s=Gs,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==h&&"object"===typeof h&&"function"===typeof h.then){var p=h;h=c;var f=-1,d=-1;do{if(13===h.tag){var m=h.alternate;if(null!==m&&null!==(m=m.memoizedState)){d=10*(1073741822-m.timedOutAt);break}m=h.pendingProps.maxDuration,"number"===typeof m&&(0>=m?f=0:(-1===f||m<f)&&(f=m))}h=h.return}while(null!==h);h=c;do{if((m=13===h.tag)&&(m=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),m){if(c=h.updateQueue,null===c?(c=new Set,c.add(p),h.updateQueue=c):c.add(p),0===(1&h.mode)){h.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:(s=Hn(1073741823),s.tag=ks,qn(l,s))),l.expirationTime=1073741823;break e}l=u,c=s;var g=l.pingCache;null===g?(g=l.pingCache=new Ps,m=new Set,g.set(p,m)):void 0===(m=g.get(p))&&(m=new Set,g.set(p,m)),m.has(c)||(m.add(c),l=Sr.bind(null,l,p,c),p.then(l,l)),-1===f?u=1073741823:(-1===d&&(d=10*(1073741822-Vt(u,s))-5e3),u=d+f),0<=u&&Vs<u&&(Vs=u),h.effectTag|=2048,h.expirationTime=s;break e}h=h.return}while(null!==h);h=Error((ee(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+te(l))}zs=!0,h=$n(h,l),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,s=lr(u,h,s),Yn(u,s);break e;case 1:if(f=h,d=u.type,l=u.stateNode,0===(64&u.effectTag)&&("function"===typeof d.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Ks||!Ks.has(l)))){u.effectTag|=2048,u.expirationTime=s,s=hr(u,f,s),Yn(u,s);break e}}u=u.return}while(null!==u)}Bs=_r(a);continue}o=!0,Hr(t)}}break}if(Fs=!1,Ls.current=n,Ts=ws=xs=null,cn(),o)js=null,e.finishedWork=null;else if(null!==Bs)e.finishedWork=null;else{if(n=e.current.alternate,null===n&&i("281"),js=null,zs){if(o=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==o&&o<r||0!==a&&a<r||0!==s&&s<r)return Gt(e,r),void Ir(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Ir(e,n,r,t,-1)}t&&-1!==Vs?(Gt(e,r),t=10*(1073741822-Vt(e,r)),t<Vs&&(Vs=t),t=10*(1073741822-Lr()),t=Vs-t,Ir(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Tr(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r)))return e=$n(t,e),e=hr(n,e,1073741823),qn(n,e),void Mr(n,1073741823);break;case 3:return e=$n(t,e),e=lr(n,e,1073741823),qn(n,e),void Mr(n,1073741823)}n=n.return}3===e.tag&&(n=$n(t,e),n=lr(e,n,1073741823),qn(e,n),Mr(e,1073741823))}function Er(e,t){var n=ui.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(Fs&&!Ws)r=Gs;else{switch(n){case ui.unstable_ImmediatePriority:r=1073741823;break;case ui.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case ui.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case ui.unstable_LowPriority:case ui.unstable_IdlePriority:r=1;break;default:i("313")}null!==js&&r===Gs&&--r}return n===ui.unstable_UserBlockingPriority&&(0===ru||r<ru)&&(ru=r),r}function Sr(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==js&&Gs===n?js=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,t=e.latestPingedTime,(0===t||t>n)&&(e.latestPingedTime=n),zt(n,e),0!==(n=e.expirationTime)&&Nr(e,n)))}function kr(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Lr(),t=Er(t,e),null!==(e=Cr(e,t))&&(Bt(e,t),0!==(t=e.expirationTime)&&Nr(e,t))}function Cr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Mr(e,t){null!==(e=Cr(e,t))&&(!Fs&&0!==Gs&&t>Gs&&fr(),Bt(e,t),Fs&&!Ws&&js===e||Nr(e,e.expirationTime),fu>pu&&(fu=0,i("185")))}function Ar(e,t,n,r,i){return ui.unstable_runWithPriority(ui.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}function Or(){lu=1073741822-((ui.unstable_now()-cu)/10|0)}function Dr(e,t){if(0!==Zs){if(t<Zs)return;null!==$s&&ui.unstable_cancelCallback($s)}Zs=t,e=ui.unstable_now()-cu,$s=ui.unstable_scheduleCallback(Br,{timeout:10*(1073741822-t)-e})}function Ir(e,t,n,r,i){e.expirationTime=r,0!==i||Fr()?0<i&&(e.timeoutHandle=Ta(Rr.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Rr(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,Or(),hu=lu,Gr(e,n)}function Pr(e,t){e.expirationTime=t,e.finishedWork=null}function Lr(){return eu?hu:(Ur(),0!==nu&&1!==nu||(Or(),hu=lu),hu)}function Nr(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Js?(Qs=Js=e,e.nextScheduledRoot=e):(Js=Js.nextScheduledRoot=e,Js.nextScheduledRoot=Qs)):t>e.expirationTime&&(e.expirationTime=t),eu||(au?su&&(tu=e,nu=1073741823,Vr(e,1073741823,!1)):1073741823===t?jr(1073741823,!1):Dr(e,t))}function Ur(){var e=0,t=null;if(null!==Js)for(var n=Js,r=Qs;null!==r;){var o=r.expirationTime;if(0===o){if((null===n||null===Js)&&i("244"),r===r.nextScheduledRoot){Qs=Js=r.nextScheduledRoot=null;break}if(r===Qs)Qs=o=r.nextScheduledRoot,Js.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===Js){Js=n,Js.nextScheduledRoot=Qs,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(o>e&&(e=o,t=r),r===Js)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}tu=t,nu=e}function Fr(){return!!mu||!!ui.unstable_shouldYield()&&(mu=!0)}function Br(){try{if(!Fr()&&null!==Qs){Or();var e=Qs;do{var t=e.expirationTime;0!==t&&lu<=t&&(e.nextExpirationTimeToWorkOn=lu),e=e.nextScheduledRoot}while(e!==Qs)}jr(0,!0)}finally{mu=!1}}function jr(e,t){if(Ur(),t)for(Or(),hu=lu;null!==tu&&0!==nu&&e<=nu&&!(mu&&lu>nu);)Vr(tu,nu,lu>nu),Ur(),Or(),hu=lu;else for(;null!==tu&&0!==nu&&e<=nu;)Vr(tu,nu,!1),Ur();if(t&&(Zs=0,$s=null),0!==nu&&Dr(tu,nu),fu=0,du=null,null!==uu)for(e=uu,uu=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){iu||(iu=!0,ou=e)}}if(iu)throw e=ou,ou=null,iu=!1,e}function Gr(e,t){eu&&i("253"),tu=e,nu=t,Vr(e,t,!1),jr(1073741823,!1)}function Vr(e,t,n){if(eu&&i("245"),eu=!0,n){var r=e.finishedWork;null!==r?zr(e,r,t):(e.finishedWork=null,r=e.timeoutHandle,-1!==r&&(e.timeoutHandle=-1,Ea(r)),wr(e,n),null!==(r=e.finishedWork)&&(Fr()?e.finishedWork=r:zr(e,r,t)))}else r=e.finishedWork,null!==r?zr(e,r,t):(e.finishedWork=null,r=e.timeoutHandle,-1!==r&&(e.timeoutHandle=-1,Ea(r)),wr(e,n),null!==(r=e.finishedWork)&&zr(e,r,t));eu=!1}function zr(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===uu?uu=[r]:uu.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===du?fu++:(du=e,fu=0),ui.unstable_runWithPriority(ui.unstable_ImmediatePriority,function(){br(e,t)})}function Hr(e){null===tu&&i("246"),tu.expirationTime=0,iu||(iu=!0,ou=e)}function Wr(e,t){var n=au;au=!0;try{return e(t)}finally{(au=n)||eu||jr(1073741823,!1)}}function qr(e,t){if(au&&!su){su=!0;try{return e(t)}finally{su=!1}}return e(t)}function Yr(e,t,n){au||eu||0===ru||(jr(ru,!1),ru=0);var r=au;au=!0;try{return ui.unstable_runWithPriority(ui.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(au=r)||eu||jr(1073741823,!1)}}function Xr(e,t,n,r,o){var a=t.current;e:if(n){n=n._reactInternalFiber;t:{2===Ae(n)&&1===n.tag||i("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(_t(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);i("171"),s=void 0}if(1===n.tag){var u=n.type;if(_t(u)){n=Et(n,u,s);break e}}n=s}else n=Aa;return null===t.context?t.context=n:t.pendingContext=n,t=o,o=Hn(r),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),yr(),qn(a,o),Mr(a,r),r}function Kr(e,t,n,r){var i=t.current;return i=Er(Lr(),i),Xr(e,t,n,i,r)}function Qr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:so,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zr(e){var t=1073741822-25*(1+((1073741822-Lr()+500)/25|0));t>=Us&&(t=Us-1),this._expirationTime=Us=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function $r(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ei(e,t,n){t=Ot(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function ti(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ni(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ei(e,!1,t)}function ri(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var e=Qr(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=ni(n,r),"function"===typeof i){var s=i;i=function(){var e=Qr(o._internalRoot);s.call(e)}}qr(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Qr(o._internalRoot)}function ii(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ti(t)||i("200"),Jr(e,t,null,n)}function oi(e,t){return ti(e)||i("299","unstable_createRoot"),new ei(e,!0,null!=t&&!0===t.hydrate)}var ai=n(5),si=n(8),ui=n(107);ai||i("227");var ci=!1,li=null,hi=!1,pi=null,fi={onError:function(e){ci=!0,li=e}},di=null,mi={},gi=[],vi={},yi={},bi={},_i=null,xi=null,wi=null,Ti=null,Ei={injectEventPluginOrder:function(e){di&&i("101"),di=Array.prototype.slice.call(e),u()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];mi.hasOwnProperty(t)&&mi[t]===r||(mi[t]&&i("102",t),mi[t]=r,n=!0)}n&&u()}},Si=Math.random().toString(36).slice(2),ki="__reactInternalInstance$"+Si,Ci="__reactEventHandlers$"+Si,Mi=!("undefined"===typeof window||!window.document||!window.document.createElement),Ai={animationend:k("Animation","AnimationEnd"),animationiteration:k("Animation","AnimationIteration"),animationstart:k("Animation","AnimationStart"),transitionend:k("Transition","TransitionEnd")},Oi={},Di={};Mi&&(Di=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);var Ii=C("animationend"),Ri=C("animationiteration"),Pi=C("animationstart"),Li=C("transitionend"),Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ui=null,Fi=null,Bi=null;si(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=A)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=A)},persist:function(){this.isPersistent=A},isPersistent:O,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=O,this._dispatchInstances=this._dispatchListeners=null}}),D.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},D.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return si(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=si({},r.Interface,e),n.extend=r.extend,P(n),n},P(D);var ji=D.extend({data:null}),Gi=D.extend({data:null}),Vi=[9,13,27,32],zi=Mi&&"CompositionEvent"in window,Hi=null;Mi&&"documentMode"in document&&(Hi=document.documentMode);var Wi=Mi&&"TextEvent"in window&&!Hi,qi=Mi&&(!zi||Hi&&8<Hi&&11>=Hi),Yi=String.fromCharCode(32),Xi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ki=!1,Qi=!1,Ji={eventTypes:Xi,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(zi)e:{switch(e){case"compositionstart":i=Xi.compositionStart;break e;case"compositionend":i=Xi.compositionEnd;break e;case"compositionupdate":i=Xi.compositionUpdate;break e}i=void 0}else Qi?L(e,n)&&(i=Xi.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Xi.compositionStart);return i?(qi&&"ko"!==n.locale&&(Qi||i!==Xi.compositionStart?i===Xi.compositionEnd&&Qi&&(o=M()):(Ui=r,Fi="value"in Ui?Ui.value:Ui.textContent,Qi=!0)),i=ji.getPooled(i,t,n,r),o?i.data=o:null!==(o=N(n))&&(i.data=o),S(i),o=i):o=null,(e=Wi?U(e,n):F(e,n))?(t=Gi.getPooled(Xi.beforeInput,t,n,r),t.data=e,S(t)):t=null,null===o?t:null===t?o:[o,t]}},Zi=null,$i=null,eo=null,to=!1,no={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ro=ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ro.hasOwnProperty("ReactCurrentDispatcher")||(ro.ReactCurrentDispatcher={current:null});var io=/^(.*)[\\\/]/,oo="function"===typeof Symbol&&Symbol.for,ao=oo?Symbol.for("react.element"):60103,so=oo?Symbol.for("react.portal"):60106,uo=oo?Symbol.for("react.fragment"):60107,co=oo?Symbol.for("react.strict_mode"):60108,lo=oo?Symbol.for("react.profiler"):60114,ho=oo?Symbol.for("react.provider"):60109,po=oo?Symbol.for("react.context"):60110,fo=oo?Symbol.for("react.concurrent_mode"):60111,mo=oo?Symbol.for("react.forward_ref"):60112,go=oo?Symbol.for("react.suspense"):60113,vo=oo?Symbol.for("react.memo"):60115,yo=oo?Symbol.for("react.lazy"):60116,bo="function"===typeof Symbol&&Symbol.iterator,_o=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xo=Object.prototype.hasOwnProperty,wo={},To={},Eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Eo[e]=new oe(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Eo[t]=new oe(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Eo[e]=new oe(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Eo[e]=new oe(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Eo[e]=new oe(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Eo[e]=new oe(e,3,!0,e,null)}),["capture","download"].forEach(function(e){Eo[e]=new oe(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){Eo[e]=new oe(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){Eo[e]=new oe(e,5,!1,e.toLowerCase(),null)});var So=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(So,ae);Eo[t]=new oe(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(So,ae);Eo[t]=new oe(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(So,ae);Eo[t]=new oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){Eo[e]=new oe(e,1,!1,e.toLowerCase(),null)});var ko={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Co=null,Mo=null,Ao=!1;Mi&&(Ao=X("input")&&(!document.documentMode||9<document.documentMode));var Oo={eventTypes:ko,_isInputEventSupported:Ao,extractEvents:function(e,t,n,r){var i=t?y(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=ye:q(i)?Ao?o=Ee:(o=we,a=xe):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Te),o&&(o=o(e,t)))return me(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&de(i,"number",i.value)}},Do=D.extend({view:null,detail:null}),Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Ro=0,Po=0,Lo=!1,No=!1,Uo=Do.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ke,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ro;return Ro=e.screenX,Lo?"mousemove"===e.type?e.screenX-t:0:(Lo=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Po;return Po=e.screenY,No?"mousemove"===e.type?e.screenY-t:0:(No=!0,0)}}),Fo=Uo.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Bo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},jo={eventTypes:Bo,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?g(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Uo,s=Bo.mouseLeave,u=Bo.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Fo,s=Bo.pointerLeave,u=Bo.pointerEnter,c="pointer");var l=null==o?i:y(o);if(i=null==t?i:y(t),e=a.getPooled(s,o,n,r),e.type=c+"leave",e.target=l,e.relatedTarget=i,n=a.getPooled(u,t,n,r),n.type=c+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(t=o,i=r,c=0,a=t;a;a=_(a))c++;for(a=0,u=i;u;u=_(u))a++;for(;0<c-a;)t=_(t),c--;for(;0<a-c;)i=_(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=_(t),i=_(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=_(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=_(r);for(r=0;r<t.length;r++)T(t[r],"bubbled",e);for(r=o.length;0<r--;)T(o[r],"captured",n);return[e,n]}},Go=Object.prototype.hasOwnProperty,Vo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zo=D.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ho=Do.extend({relatedTarget:null}),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo=Do.extend({key:function(e){if(e.key){var t=Wo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Re(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?qo[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ke,charCode:function(e){return"keypress"===e.type?Re(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Re(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Xo=Uo.extend({dataTransfer:null}),Ko=Do.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ke}),Qo=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Jo=Uo.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Zo=[["abort","abort"],[Ii,"animationEnd"],[Ri,"animationIteration"],[Pi,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[Li,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],$o={},ea={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Pe(e,!0)}),Zo.forEach(function(e){Pe(e,!1)});var ta={eventTypes:$o,isInteractiveTopLevelEventType:function(e){return void 0!==(e=ea[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=ea[e];if(!i)return null;switch(e){case"keypress":if(0===Re(n))return null;case"keydown":case"keyup":e=Yo;break;case"blur":case"focus":e=Ho;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Ko;break;case Ii:case Ri:case Pi:e=Vo;break;case Li:e=Qo;break;case"scroll":e=Do;break;case"wheel":e=Jo;break;case"copy":case"cut":case"paste":e=zo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fo;break;default:e=D}return t=e.getPooled(i,t,n,r),S(t),t}},na=ta.isInteractiveTopLevelEventType,ra=[],ia=!0,oa={},aa=0,sa="_reactListenersID"+(""+Math.random()).slice(2),ua=Mi&&"documentMode"in document&&11>=document.documentMode,ca={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},la=null,ha=null,pa=null,fa=!1,da={eventTypes:ca,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=je(o),i=bi.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?y(t):window,e){case"focus":(q(o)||"true"===o.contentEditable)&&(la=o,ha=t,pa=null);break;case"blur":pa=ha=la=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":return fa=!1,Ke(n,r);case"selectionchange":if(ua)break;case"keydown":case"keyup":return Ke(n,r)}return null}};Ei.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_i=b,xi=v,wi=y,Ei.injectEventPluginsByName({SimpleEventPlugin:ta,EnterLeaveEventPlugin:jo,ChangeEventPlugin:Oo,SelectEventPlugin:da,BeforeInputEventPlugin:Ji});var ma={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},ga=void 0,va=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ma.svg||"innerHTML"in e)e.innerHTML=t;else{for(ga=ga||document.createElement("div"),ga.innerHTML="<svg>"+t+"</svg>",t=ga.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),ya={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ba=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(e){ba.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ya[t]=ya[e]})});var _a=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),xa=null,wa=null,Ta="function"===typeof setTimeout?setTimeout:void 0,Ea="function"===typeof clearTimeout?clearTimeout:void 0,Sa=ui.unstable_scheduleCallback,ka=ui.unstable_cancelCallback;new Set;var Ca=[],Ma=-1,Aa={},Oa={current:Aa},Da={current:!1},Ia=Aa,Ra=null,Pa=null,La=(new ai.Component).refs,Na={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ae(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Lr();r=Er(r,e);var i=Hn(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),yr(),qn(e,i),Mr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Lr();r=Er(r,e);var i=Hn(r);i.tag=Ss,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),yr(),qn(e,i),Mr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Lr();n=Er(n,e);var r=Hn(n);r.tag=ks,void 0!==t&&null!==t&&(r.callback=t),yr(),qn(e,r),Mr(e,n)}},Ua=Array.isArray,Fa=$t(!0),Ba=$t(!1),ja={},Ga={current:ja},Va={current:ja},za={current:ja},Ha=0,Wa=2,qa=4,Ya=8,Xa=16,Ka=32,Qa=64,Ja=128,Za=ro.ReactCurrentDispatcher,$a=0,es=null,ts=null,ns=null,rs=null,is=null,os=null,as=0,ss=null,us=0,cs=!1,ls=null,hs=0,ps={readContext:Gn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an},fs={readContext:Gn,useCallback:function(e,t){return ln().memoizedState=[e,void 0===t?null:t],e},useContext:Gn,useEffect:function(e,t){return mn(516,Ja|Qa,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,mn(4,qa|Ka,vn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mn(4,qa|Ka,e,t)},useMemo:function(e,t){var n=ln();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=bn.bind(null,es,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:function(e){var t=ln();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={last:null,dispatch:null,lastRenderedReducer:pn,lastRenderedState:e},e=e.dispatch=bn.bind(null,es,e),[t.memoizedState,e]},useDebugValue:yn},ds={readContext:Gn,useCallback:function(e,t){var n=hn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Gn,useEffect:function(e,t){return gn(516,Ja|Qa,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,gn(4,qa|Ka,vn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gn(4,qa|Ka,e,t)},useMemo:function(e,t){var n=hn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:fn,useRef:function(){return hn().memoizedState},useState:function(e){return fn(pn)},useDebugValue:yn},ms=null,gs=null,vs=!1,ys=ro.ReactCurrentOwner,bs=!1,_s={current:null},xs=null,ws=null,Ts=null,Es=0,Ss=1,ks=2,Cs=3,Ms=!1,As=void 0,Os=void 0,Ds=void 0,Is=void 0;As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=t.stateNode;switch(en(Ga.current),e=null,n){case"input":o=ce(a,o),r=ce(a,r),e=[];break;case"option":o=Je(a,o),r=Je(a,r),e=[];break;case"select":o=si({},o,{value:void 0}),r=si({},r,{value:void 0}),e=[];break;case"textarea":o=$e(a,o),r=$e(a,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(a.onclick=ht)}ut(n,r),a=n=void 0;var s=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(a in u)u.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(yi.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(e||(e=[]),e.push(n,s)),s=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(yi.hasOwnProperty(n)?(null!=c&&lt(i,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}s&&(e=e||[]).push("style",s),i=e,(t.updateQueue=i)&&er(t)}},Is=function(e,t,n,r){n!==r&&er(t)};var Rs="function"===typeof WeakSet?WeakSet:Set,Ps="function"===typeof WeakMap?WeakMap:Map,Ls=ro.ReactCurrentDispatcher,Ns=ro.ReactCurrentOwner,Us=1073741822,Fs=!1,Bs=null,js=null,Gs=0,Vs=-1,zs=!1,Hs=null,Ws=!1,qs=null,Ys=null,Xs=null,Ks=null,Qs=null,Js=null,Zs=0,$s=void 0,eu=!1,tu=null,nu=0,ru=0,iu=!1,ou=null,au=!1,su=!1,uu=null,cu=ui.unstable_now(),lu=1073741822-(cu/10|0),hu=lu,pu=50,fu=0,du=null,mu=!1;Zi=function(e,t,n){switch(t){case"input":if(pe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=b(r);o||i("90"),Z(r),pe(r,o)}}}break;case"textarea":tt(e,n);break;case"select":null!=(t=n.value)&&Ze(e,!!n.multiple,t,!1)}},Zr.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new $r;return Xr(e,t,null,n,r._onCommit),r},Zr.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Zr.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&i("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Gr(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Zr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},$r.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},$r.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&i("191",n),n()}}},ei.prototype.render=function(e,t){var n=this._internalRoot,r=new $r;return t=void 0===t?null:t,null!==t&&r.then(t),Kr(e,n,null,r._onCommit),r},ei.prototype.unmount=function(e){var t=this._internalRoot,n=new $r;return e=void 0===e?null:e,null!==e&&n.then(e),Kr(null,t,null,n._onCommit),n},ei.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new $r;return n=void 0===n?null:n,null!==n&&i.then(n),Kr(t,r,e,i._onCommit),i},ei.prototype.createBatch=function(){var e=new Zr(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},V=Wr,z=Yr,H=function(){eu||0===ru||(jr(ru,!1),ru=0)};var gu={createPortal:ii,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?i("188"):i("268",Object.keys(e))),e=Ie(t),e=null===e?null:e.stateNode},hydrate:function(e,t,n){return ti(t)||i("200"),ri(null,e,t,!0,n)},render:function(e,t,n){return ti(t)||i("200"),ri(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return ti(n)||i("200"),(null==e||void 0===e._reactInternalFiber)&&i("38"),ri(e,t,n,!1,r)},unmountComponentAtNode:function(e){return ti(e)||i("40"),!!e._reactRootContainer&&(qr(function(){ri(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ii.apply(void 0,arguments)},unstable_batchedUpdates:Wr,unstable_interactiveUpdates:Yr,flushSync:function(e,t){eu&&i("187");var n=au;au=!0;try{return Ar(e,t)}finally{au=n,jr(1073741823,!1)}},unstable_createRoot:oi,unstable_flushControlled:function(e){var t=au;au=!0;try{Ar(e)}finally{(au=t)||eu||jr(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[v,y,b,Ei.injectEventPluginsByName,vi,S,function(e){p(e,E)},j,G,Be,m]}};!function(e){var t=e.findFiberByHostInstance;Mt(si({},e,{overrideProps:null,currentDispatcherRef:ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ie(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:g,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var vu={default:gu},yu=vu&&gu||vu;e.exports=yu.default||yu},function(e,t,n){"use strict";e.exports=n(108)},function(e,t,n){"use strict";(function(e){function n(){if(!d){var e=c.expirationTime;m?T():m=!0,w(o,e)}}function r(){var e=c,t=c.next;if(c===t)c=null;else{var r=c.previous;c=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=h,o=f;h=e,f=t;try{var a=r()}finally{h=i,f=o}if("function"===typeof a)if(a={callback:a,priorityLevel:e,expirationTime:t,next:null,previous:null},null===c)c=a.next=a.previous=a;else{r=null,e=c;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==c);null===r?r=c:r===c&&(c=a,n()),t=r.previous,t.next=r.previous=a,a.next=r,a.previous=t}}function i(){if(-1===p&&null!==c&&1===c.priorityLevel){d=!0;try{do{r()}while(null!==c&&1===c.priorityLevel)}finally{d=!1,null!==c?n():m=!1}}}function o(e){d=!0;var o=l;l=e;try{if(e)for(;null!==c;){var a=t.unstable_now();if(!(c.expirationTime<=a))break;do{r()}while(null!==c&&c.expirationTime<=a)}else if(null!==c)do{r()}while(null!==c&&!E())}finally{d=!1,l=o,null!==c?n():m=!1,i()}}function a(e){s=b(function(t){y(u),e(t)}),u=v(function(){_(s),e(t.unstable_now())},100)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,c=null,l=!1,h=3,p=-1,f=-1,d=!1,m=!1,g=Date,v="function"===typeof setTimeout?setTimeout:void 0,y="function"===typeof clearTimeout?clearTimeout:void 0,b="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;if("object"===typeof performance&&"function"===typeof performance.now){var x=performance;t.unstable_now=function(){return x.now()}}else t.unstable_now=function(){return g.now()};var w,T,E,S=null;if("undefined"!==typeof window?S=window:"undefined"!==typeof e&&(S=e),S&&S._schedMock){var k=S._schedMock;w=k[0],T=k[1],E=k[2],t.unstable_now=k[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var C=null,M=function(e){if(null!==C)try{C(e)}finally{C=null}};w=function(e){null!==C?setTimeout(w,0,e):(C=e,setTimeout(M,0,!1))},T=function(){C=null},E=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof b&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,O=!1,D=-1,I=!1,R=!1,P=0,L=33,N=33;E=function(){return P<=t.unstable_now()};var U=new MessageChannel,F=U.port2;U.port1.onmessage=function(){O=!1;var e=A,n=D;A=null,D=-1;var r=t.unstable_now(),i=!1;if(0>=P-r){if(!(-1!==n&&n<=r))return I||(I=!0,a(B)),A=e,void(D=n);i=!0}if(null!==e){R=!0;try{e(i)}finally{R=!1}}};var B=function(e){if(null!==A){a(B);var t=e-P+N;t<N&&L<N?(8>t&&(t=8),N=t<L?L:t):L=t,P=e+N,O||(O=!0,F.postMessage(void 0))}else I=!1};w=function(e,t){A=e,D=t,R||0>t?F.postMessage(void 0):I||(I=!0,a(B))},T=function(){A=null,O=!1,D=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h,o=p;h=e,p=t.unstable_now();try{return n()}finally{h=r,p=o,i()}},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var n=3;break;default:n=h}var r=h,o=p;h=n,p=t.unstable_now();try{return e()}finally{h=r,p=o,i()}},t.unstable_scheduleCallback=function(e,r){var i=-1!==p?p:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=i+r.timeout;else switch(h){case 1:r=i+-1;break;case 2:r=i+250;break;case 5:r=i+1073741823;break;case 4:r=i+1e4;break;default:r=i+5e3}if(e={callback:e,priorityLevel:h,expirationTime:r,next:null,previous:null},null===c)c=e.next=e.previous=e,n();else{i=null;var o=c;do{if(o.expirationTime>r){i=o;break}o=o.next}while(o!==c);null===i?i=c:i===c&&(c=e,n()),r=i.previous,r.next=i.previous=e,e.next=i,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)c=null;else{e===c&&(c=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=h;return function(){var r=h,o=p;h=n,p=t.unstable_now();try{return e.apply(this,arguments)}finally{h=r,p=o,i()}}},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_shouldYield=function(){return!l&&(null!==c&&c.expirationTime<f||E())},t.unstable_continueExecution=function(){null!==c&&n()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return c}}).call(t,n(7))},function(e,t){},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(5),l=n.n(c),h=n(2),p=n(111),f=n.n(p),d=n(12),m=n.n(d),g=n(113),v=n.n(g),y=n(117),b=(n.n(y),n(118),n(121),n(123),n(45)),_=n.n(b),x=n(20),w=n(126),T=n(127),E=n(128),S=n(144),k=n(147),C=n(148),M=n.n(C),A=n(149),O=n(150),D=n(151),I=n(58),R=n(152),P=n(228),L=(n.n(P),n(229)),N=n(232),U=n(234),F=n(240),B=n.n(F),j=n(241),G=n.n(j),V=n(242),z=n.n(V),H=n(243),W=n(245),q=n(248),Y=n(251),X=n(254),K=n(257),Q=n(260),J=n(264),Z=n(267),$=n(270),ee=n(273),te=n(280),ne=n(283),re=n(290),ie=n(332),oe=(n.n(ie),n(333)),ae=n.n(oe),se=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ue=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=f()(H.a,n.props.config),n.planeSize=500,n.planeOffsetMultiplier=1080,n.planeMargin=100,n.blockReady=!1,n.baseGeoToLoadEitherSide=n.config.detector.isMobile?5:25,n.blocksToLoadEitherSide=n.config.detector.isMobile?1:4,"lite"===n.config.scene.mode&&(n.baseGeoToLoadEitherSide=10,n.blocksToLoadEitherSide=3),n.coils=100,n.radius=1e6,n.frame=0,n.loadingNearestBlocks=!1,n.blockGeoDataObject={},n.blockPositions=null,n.closestBlock=null,n.prevClosestBlock=null,n.underside=null,n.undersideL=null,n.undersideR=null,n.closestBlockReadyForUpdate=!1,n.clock=new h.Clock,n.loadedBaseGeoHeights={},n.mousePos=new h.Vector2(0,0),n.lastMousePos=new h.Vector2(0,0),n.camera=null,n.cameraMain=null,n.camPosTo=new h.Vector3(0,0,0),n.camPosToTarget=new h.Vector3(0,0,0),n.camFromPosition=new h.Vector3(0,0,0),n.camFromRotation=new h.Vector3(0,0,0),n.defaultCamEasing=M.a.Easing.Quadratic.InOut,n.autoPilot=!1,n.autoPilotDirection=!1,n.topViewYPos=n.config.detector.isMobile?800:400,n.undersideViewYPos=n.config.detector.isMobile?-800:-350,n.closestHeight=null,n.originOffset=new h.Vector2(0,0),n.txCountBufferSize=4e3,n.autoPilotYPos=20,n.boundingBoxObj=null,n.OBJLoader=new O.a,n.textureLoader=new h.TextureLoader,n.maxHeight=null,n.isNavigating=!1,n.camEuler=new h.Euler(0,0,0,"YXZ"),n.audioEnabled=!0,n.config.detector.isMobile&&(n.audioEnabled=!1),n.config.detector.isEdge&&(n.audioEnabled=!1),n.VRInteractionReady=!1,n.blockHeightTextMesh=null,n.blockDetailsTextMesh=null,n.txDetailsTextMesh=null,n.WebVRLib=new A.a,n.vrActive=!1,n.VRRightControllerSetup=!1,n.VRLeftControllerSetup=!1,n.viveController1=null,n.controllerCam=null,n.viveController2=null,n.viveController1Buttons=new D.a(0),n.viveController2Buttons=new D.a(1),n.viveTriggerPressed1=!1,n.viveTriggerPressed2=!1,n.viveController1MeshGroup=new h.Group,n.viveController2MeshGroup=new h.Group,n.VRReadyToEnd=!1,n.chapters={1:{title:"THE GENESIS BLOCK",height:0},2:{title:'"BITCOIN PIZZA DAY"',height:57043},3:{title:"THE MERKLE TREE",height:3e5},4:{title:"NETWORK CONGESTION",height:502117},5:{title:"CURRENT DAY",height:n.maxHeight},6:{title:"MEMPOOL"},7:{title:"END"}},n.state={loading:!0,closestBlock:null,controlType:"top",txSelected:null,sidebarOpen:!1,txSearchOpen:!1,blockSearchOpen:!1,dateSearchOpen:!1,currentDate:new Date,searchTXHash:"",searchBlockHash:"",showIntro:!1,posX:0,posY:0,posZ:0,sceneReady:!1,started:!1,flyControlsInteractionCount:0,qualitySelected:!1,showInfoOverlay:!1,UIClass:"symphony",animatingCamera:!0,loadProgress:0},n.initFirebase(),n.initWorkers(),n.setTimestampToLoad(),n.setBlockHashToLoad(),n.setHeightToLoad(),n.getUnconfirmedCount(),n}return a(t,e),se(t,[{key:"componentDidMount",value:function(){this.setState({loadProgress:10}),this.config.scene.skipLaunchScreen&&(this.setLoadingState(),this.initStage("high"))}},{key:"getUnconfirmedCount",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.unconfirmedCount=1e4,e.prev=1,e.next=4,window.fetch("https://blockchain.info/q/unconfirmedcount?format=json&apiCode="+this.config.blockchainInfo.apiCode);case 4:return t=e.sent,e.next=7,t.json();case 7:this.unconfirmedCount=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return e}()},{key:"initWorkers",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.nearestBlocksWorker=new B.a,t={cmd:"init",config:this.config},this.nearestBlocksWorker.postMessage(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"initObjects",value:function(){this.circuit=new S.a({FBStorageCircuitRef:this.FBStorageCircuitRef,config:this.config}),this.audioManager=new E.a({sampleRate:this.config.audio.sampleRate,soundDuration:this.config.audio.soundDuration,noteDuration:this.config.audio.noteDuration,config:this.config}),this.crystalGenerator=new W.a({planeSize:this.planeSize,config:this.config}),this.pickerGenerator=new q.a({planeSize:this.planeSize,config:this.config}),this.crystalAOGenerator=new Y.a({planeSize:this.planeSize,config:this.config}),this.planeGenerator=new X.a({planeSize:this.planeSize,config:this.config}),this.occlusionGenerator=new K.a({planeSize:this.planeSize,config:this.config}),this.treeGenerator=new Q.a({planeSize:this.planeSize,config:this.config}),this.undersideGenerator=new te.a({planeSize:this.planeSize,config:this.config}),this.config.detector.isMobile||(this.txGenerator=new ee.a({config:this.config})),this.particlesGenerator=new ne.a({config:this.config,particleCount:this.unconfirmedCount}),this.diskGenerator=new J.a({config:this.config}),this.glowGenerator=new $.a({config:this.config}),this.bgGenerator=new Z.a({config:this.config}),this.heightsToLoad=[],this.loadingMutex=[],this.textGenerator=new re.a({config:this.config,maxAnisotropy:this.renderer.capabilities.getMaxAnisotropy()})}},{key:"setMobileStageOptions",value:function(){this.config.detector.isMobile&&document.body.requestFullscreen&&document.body.requestFullscreen().catch(function(e){console.log("Error attempting to enable full-screen mode: "+e.message+" ("+e.name+")")})}},{key:"initStage",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"high";return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoadingState(),this.setMobileStageOptions(),this.initRenderer(t),e.next=5,this.initPositions();case 5:return this.setState({loadProgress:20}),this.initObjects(),this.initGUI(),e.next=10,this.initScene();case 10:this.setState({loadProgress:50}),this.initCamera(),this.initLights(),this.initEnvironment(),this.setState({loadProgress:60}),this.initGeometry(),this.setState({loadProgress:70}),this.addEvents(),this.setState({loadProgress:100}),this.renderer.setAnimationLoop(function(){this.renderFrame()}.bind(this)),this.startIntro();case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"enableVR",value:function(){this.renderer.vr.enabled=!0}},{key:"setRenderOrder",value:function(){this.config.detector.isMobile||(this.txs.renderOrder=0),this.particles.renderOrder=0,this.glow.renderOrder=0,this.camera.position.y>0?(this.centerTree&&(this.centerTree.material.depthWrite=!1),this.lTree&&(this.lTree.material.depthWrite=!0),this.rTree&&(this.rTree.material.depthWrite=!0),this.config.detector.isMobile||(this.occlusion.renderOrder=1),this.crystal.renderOrder=2,this.trees.renderOrder=0,this.disk.renderOrder=3,this.plane.renderOrder=4,this.crystalAO.renderOrder=7,this.underside.position.y=-3.1,this.undersideL.position.y=-3.1,this.undersideR.position.y=-3.1,this.underside.renderOrder=3,this.undersideL.renderOrder=3,this.undersideR.renderOrder=3):(this.centerTree&&(this.centerTree.material.depthWrite=!0),this.lTree&&(this.lTree.material.depthWrite=!0),this.rTree&&(this.rTree.material.depthWrite=!0),this.config.detector.isMobile||(this.occlusion.renderOrder=11),this.underside.position.y=-3.1,this.undersideL.position.y=-3.1,this.undersideR.position.y=-3.1,this.crystal.renderOrder=2,this.crystalAO.renderOrder=3,this.plane.renderOrder=4,this.underside.renderOrder=5,this.undersideL.renderOrder=5,this.undersideR.renderOrder=5,this.trees.renderOrder=6,this.disk.renderOrder=7),this.bg.renderOrder=0}},{key:"initGUI",value:function(){this.config.showGUI&&(this.gui=new k.a,this.gui.add(this.diskGenerator,"uRadiusMultiplier",8257.34,8257.4),this.gui.add(this.diskGenerator,"uOffset",.01,1))}},{key:"initPicker",value:function(){this.lastHoveredID=-1,this.lastSelectedID=-1,this.pickingScene=new h.Scene,this.pickingTexture=new h.WebGLRenderTarget(window.innerWidth,window.innerHeight),this.pickingTexture.texture.minFilter=h.LinearFilter,this.pickingTexture.texture.generateMipmaps=!1}},{key:"onMouseMove",value:function(e){if("undefined"!==typeof e){if("undefined"!==typeof e.touches){if("undefined"===typeof e.touches[0])return;e=e.touches[0]}this.mousePos.x=e.clientX,this.mousePos.y=e.clientY,this.movementX=(e.pageX-this.width/2)/this.width/2,this.movementY=(e.pageY-this.height/2)/this.height/2}}},{key:"updatePicker",value:function(){if(this.picker&&this.closestBlock){this.renderer.setClearColor(0),this.WebVRLib.VRSupported&&(this.renderer.vr.enabled=!0),this.renderer.vr.enabled&&(this.renderer.vr.enabled=!1),this.vrActive&&this.controllerCam?(this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.pickingScene,this.controllerCam)):(this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.pickingScene,this.cameraMain));var e=new Uint8Array(4),t=this.renderer.domElement.getBoundingClientRect();this.vrActive?this.renderer.readRenderTargetPixels(this.pickingTexture,this.pickingTexture.width/2,this.pickingTexture.height/2,1,1,e):this.renderer.readRenderTargetPixels(this.pickingTexture,this.mousePos.x-t.left,this.pickingTexture.height-(this.mousePos.y-t.top),1,1,e);var n=e[0]<<16|e[1]<<8|e[2]-1;if(this.lastHoveredID!==n){this.lastHoveredID=n,"undefined"!==typeof this.pickerGenerator.txMap[n]?(this.hoveredTXHash=this.pickerGenerator.txMap[n],this.emit("txMouseOver",{txData:this.hoveredTXHash,mousePos:this.mousePos}),this.txIsHovered=!0,document.body.style.cursor="pointer"):(this.emit("txMouseOut",{mousePos:this.mousePos}),this.txIsHovered=!1,document.body.style.cursor="default");var r=new Float32Array(this.crystalGenerator.instanceTotal);if(-1!==this.lastHoveredID){var i=this.crystalGenerator.txIndexOffsets[this.closestBlock.blockData.height];r[this.lastHoveredID+i]=1}this.crystal.geometry.attributes.isHovered.array=r,this.crystal.geometry.attributes.isHovered.needsUpdate=!0}}}},{key:"selectTX",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n,r){var i,o,a,s,c,l,p,f,d,m,g,v,y,b=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit("txSelect",{txData:n,mousePos:this.mousePos}),e.prev=1,e.next=4,window.fetch("https://blockchain.info/rawtx/"+n+"?cors=true&format=json&apiCode="+this.config.blockchainInfo.apiCode);case 4:return i=e.sent,e.next=7,i.json();case 7:o=e.sent,a=0,s=0,c=0,o.out.forEach(function(e){a+=e.value,c+=e.spent?1:0}),o.spentRatio=1,o.spentRatio=0!==c?c/o.out.length:0,o.inputs.forEach(function(e,t){"undefined"!==typeof e.prev_out&&(s+=e.prev_out.value)}),o.inTotal=s/1e8,o.outTotal=a/1e8,o.fee=(s-a)/1e8,o.fee<0&&(o.fee=0),this.setState({txSelected:o}),l=new Float32Array(this.crystalGenerator.instanceTotal),-1!==t&&(p=this.crystalGenerator.txIndexOffsets[this.closestBlock.blockData.height],f=this.crystal.geometry.attributes.offset.array[3*(t+p)+0]-this.originOffset.x,d=50+this.crystal.geometry.attributes.offset.array[3*(t+p)+1],m=this.crystal.geometry.attributes.offset.array[3*(t+p)+2]-this.originOffset.y,this.selectedLight.position.x=f,this.selectedLight.position.z=m,this.addTXDetailsVRText(o),r&&(g=new h.Vector3(this.camera.position.x,d,this.camera.position.z),v=new h.Vector3(f+this.originOffset.x,0,m+this.originOffset.y),this.prepareCamAnim(g,v),y=this,new M.a.Tween(this.camera.position).to(new h.Vector3(g.x,g.y,g.z),2e3).onUpdate(function(){y.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){b.controls.target=new h.Vector3(v.x,0,v.z),b.camera.position.x=g.x,b.camera.position.z=g.z,b.setState({searchTXHash:""}),b.setState({animatingCamera:!1})}).easing(this.defaultCamEasing).start(),this.animateCamRotation(2e3)),l[t+p]=1),this.crystal.geometry.attributes.isSelected.array=l,this.crystal.geometry.attributes.isSelected.needsUpdate=!0,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0);case 29:case"end":return e.stop()}},e,this,[[1,26]])}));return e}()},{key:"deselectTx",value:function(){if(this.lastSelectedID=-1,this.emit("txDeselect",{}),this.audioEnabled&&this.audioManager.stopNotes(),this.cameraMain.remove(this.txDetailsTextMesh),this.setState({txSelected:null}),this.selectedLight&&(this.selectedLight.position.x=-999999,this.selectedLight.position.z=-999999),this.crystal){var e=new Float32Array(this.crystalGenerator.instanceTotal);this.crystal.geometry.attributes.isSelected.array=e,this.crystal.geometry.attributes.isSelected.needsUpdate=!0}}},{key:"onMouseUp",value:function(e){if(-1!==["input-output","cockpit-border","block-details-heading","block-details","block-navigation","grad-right","grad-left","hud","symphony-stage"].indexOf(e.target.className)){var t=this.mousePos.clone().sub(this.lastMousePos);if(this.lastSelectedID===this.lastHoveredID)this.deselectTx();else{if(!this.config.detector.isMobile&&t.lengthSq()>10)return;this.txIsHovered?(this.lastSelectedID=this.lastHoveredID,"undefined"!==typeof this.pickerGenerator.txMap[this.lastHoveredID]&&(this.selectedTXHash=this.pickerGenerator.txMap[this.lastHoveredID],this.selectTX(this.lastSelectedID,this.selectedTXHash))):this.deselectTx()}}}},{key:"onMouseDown",value:function(){this.lastMousePos=new h.Vector2(this.mousePos.x,this.mousePos.y)}},{key:"setBlockHashToLoad",value:function(){if(this.blockHashToLoad=null,"undefined"!==typeof URLSearchParams){var e=new URLSearchParams(window.location.search);e.has("hash")&&(this.blockHashToLoad=e.get("hash"))}}},{key:"setHeightToLoad",value:function(){if(this.heightToLoad=null,"undefined"!==typeof URLSearchParams){var e=new URLSearchParams(window.location.search);e.has("height")&&(this.heightToLoad=e.get("height"))}}},{key:"setTimestampToLoad",value:function(){if(this.timestampToLoad=_()().valueOf(),"undefined"!==typeof URLSearchParams){var e=new URLSearchParams(window.location.search);e.has("date")&&(this.timestampToLoad=_()(e.get("date")).valueOf())}}},{key:"initFirebase",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{y.initializeApp(this.config.fireBase),y.firestore(),this.FBStorage=y.storage(),this.FBStorageRef=this.FBStorage.ref(),this.FBStorageCircuitRef=this.FBStorageRef.child("bitcoin_circuits"),this.FBStorageAudioRef=this.FBStorageRef.child("bitcoin_block_audio")}catch(e){console.log(e)}this.firebaseDB=y.firestore(),this.FBDocRefData=this.firebaseDB.collection("bitcoin_blocks"),this.FBDocRefGeo=this.firebaseDB.collection("bitcoin_blocks_geometry"),this.emit("ready");case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"anonymousSignin",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){y.auth().signInAnonymously().then(function(){e()}).catch(function(e){console.log(e.code),console.log(e.message)})}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getBlockData",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(r,o){var a,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new G.a,a.onmessage=function(e){var t=e.data;t.blockData&&(t.blockData.txValues=t.txValues,t.blockData.txSpentRatios=t.txSpentRatios,t.blockData.txIndexes=t.txIndexes,a.terminate(),r(t.blockData))},s={cmd:"get",heightToLoad:n,hash:t,config:i.config,maxHeight:i.maxHeight,txValues:new Float32Array(i.txCountBufferSize),txSpentRatios:new Float32Array(i.txCountBufferSize),txIndexes:new Uint32Array(i.txCountBufferSize)},a.postMessage(s,[s.txValues.buffer,s.txSpentRatios.buffer,s.txIndexes.buffer]);case 4:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"initLights",value:function(){this.sunLight=new h.PointLight(11652607,3),this.sunLight.position.set(0,5e3,0),this.scene.add(this.sunLight),this.selectedLight=new h.PointLight(16777215,.1,500),this.selectedLight.position.set(-999999,20,-999999),this.group.add(this.selectedLight)}},{key:"getGeometry",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(r,o){var a,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getBlockData(t,n);case 2:a=e.sent,s=new z.a,s.onmessage=function(e){var t=e.data;if(t.blockGeoData){var n=t.blockGeoData,o=parseInt(a.height,10);a.pos={x:i.blockPositions[2*o+0],z:i.blockPositions[2*o+1]},n.scales=t.scales,n.offsets=t.offsets,n.blockData=a,i.blockGeoDataObject[o]={},i.blockGeoDataObject[o].blockData={bits:n.blockData.bits,block_index:n.blockData.block_index,fee:n.blockData.fee,hash:n.blockData.hash,healthRatio:n.blockData.healthRatio,height:n.blockData.height,main_chain:n.blockData.main_chain,mrkl_root:n.blockData.mrkl_root,n_tx:n.blockData.n_tx,next_block:n.blockData.next_block,nonce:n.blockData.nonce,outputTotal:n.blockData.outputTotal,pos:n.blockData.pos,prev_block:n.blockData.prev_block,received_time:n.blockData.received_time,relayed_by:n.blockData.relayed_by,size:n.blockData.size,time:n.blockData.time,ver:n.blockData.ver,txIndexes:n.blockData.txIndexes},s.terminate(),r(n)}},c={cmd:"get",config:i.config,blockData:a,planeSize:i.planeSize,scales:new Float32Array(i.txCountBufferSize),offsets:new Float32Array(2*i.txCountBufferSize)},s.postMessage(c,[c.scales.buffer,c.offsets.buffer]);case 7:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnvironment",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.diskGenerator.init();case 2:return this.disk=e.sent,"full"===this.config.scene.mode&&this.group.add(this.disk),e.next=6,this.glowGenerator.init();case 6:return this.glow=e.sent,this.scene.add(this.glow),e.next=10,this.bgGenerator.init();case 10:this.bg=e.sent,this.scene.add(this.bg);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"initPositions",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o,a,s,c,l,h,p,f=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.FBDocRefData.orderBy("height","desc").limit(1),e.next=3,t.get();case 3:for(n=e.sent,n.forEach(function(e){var t=e.data();f.maxHeight=t.height}),this.blockPositions=new Float32Array(2*this.maxHeight+2),r=this.coils*(2*Math.PI),i=this.radius/r,o=this.planeSize+this.planeMargin,a=void 0,s=void 0,c=this.planeSize*this.planeOffsetMultiplier,l=(this.planeSize+c)/i,h=this.maxHeight;h>=0;h--)p=i*l,a=Math.cos(l)*p,s=Math.sin(l)*p,this.blockPositions[2*h+0]=a,this.blockPositions[2*h+1]=s,l+=o/p;case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"initGeometry",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.blockHashToLoad){e.next=8;break}return t=void 0,n=void 0,n=null!==this.heightToLoad?this.FBDocRefData.where("height","==",this.heightToLoad).limit(1):this.FBDocRefData.orderBy("height","desc").limit(1),e.next=6,n.get();case 6:t=e.sent,t.forEach(function(e){var t=e.data();o.blockHashToLoad=t.hash});case 8:return e.next=10,this.getGeometry(this.blockHashToLoad,0);case 10:return r=e.sent,this.closestHeight=r.blockData.height,e.next=14,this.crystalGenerator.init(r);case 14:return this.crystal=e.sent,this.group.add(this.crystal),this.initPicker(),e.next=19,this.pickerGenerator.init(r);case 19:return this.picker=e.sent,this.pickingScene.add(this.picker),e.next=23,this.crystalAOGenerator.init(r);case 23:if(this.crystalAO=e.sent,this.crystalAO.translateY(.1),this.group.add(this.crystalAO),this.config.detector.isMobile){e.next=35;break}return e.next=29,this.txGenerator.init({blockPositions:this.blockPositions,renderer:this.renderer,txHeights:[]});case 29:return this.txs=e.sent,this.group.add(this.txs),e.next=33,this.occlusionGenerator.init(r);case 33:this.occlusion=e.sent,this.group.add(this.occlusion);case 35:return e.next=37,this.treeGenerator.init(r);case 37:return this.trees=e.sent,this.group.add(this.trees),e.next=41,this.particlesGenerator.init({blockGeoData:r,renderer:this.renderer});case 41:return this.particles=e.sent,this.scene.add(this.particles),e.next=45,this.planeGenerator.init(r);case 45:return this.plane=e.sent,this.group.add(this.plane),this.closestBlockReadyForUpdate=!0,e.next=50,this.undersideGenerator.init();case 50:return i=e.sent,this.underside=i.underside,this.undersideL=i.undersideL,this.undersideR=i.undersideR,this.group.add(this.underside),this.group.add(this.undersideL),this.group.add(this.undersideR),this.addBlockBoundingBox(),this.blockReady=!0,this.setState({loading:!1}),this.emit("sceneReady"),e.abrupt("return",!0);case 62:case"end":return e.stop()}},e,this)}));return e}()},{key:"startUnconfirmed",value:function(){this.config.detector.isMobile||(this.config.scene.liveUnconfirmedTX?this.unconfirmedLoop():this.offlineUnconfirmedLoop())}},{key:"startScene",value:function(){this.loadSpiralAnim()}},{key:"addBlockBoundingBox",value:function(){var e=this,t=this.plane.geometry.attributes.planeOffset.array[0],n=this.plane.geometry.attributes.planeOffset.array[1],r=new h.Quaternion(this.plane.geometry.attributes.quaternion.array[0],this.plane.geometry.attributes.quaternion.array[1],this.plane.geometry.attributes.quaternion.array[2],this.plane.geometry.attributes.quaternion.array[3]),i=new h.BoxGeometry(this.planeSize+15,this.planeSize+15,10);this.boundingBoxObj=new h.Mesh(i,new h.MeshBasicMaterial({colorWrite:!1})),this.boundingBoxObj.visible=!1,this.boundingBoxObj.position.y=-2.5,this.boundingBoxObj.frustumCulled=!1,this.boundingBoxObj.position.x=t,this.boundingBoxObj.position.z=n,this.boundingBoxObj.applyQuaternion(r),this.boundingBoxObj.rotateX(Math.PI/2),this.boundingBoxObj.updateMatrix(),this.boundingBoxObj.updateMatrixWorld(),this.boundingBoxObj.geometry.computeBoundingBox(),this.boundingBoxObj.updateMatrixWorld(!0),this.boxMatrixInverse=(new h.Matrix4).getInverse(this.boundingBoxObj.matrixWorld);var o=this.boundingBoxObj.clone();o.applyMatrix(this.boxMatrixInverse),this.boundingBox=(new h.Box3).setFromObject(o),this.boundingBoxOuter=this.boundingBox.clone(),this.boundingBoxOuter.expandByVector(new h.Vector3(250,250,500)),this.on("controlsEnabled",function(){e.controls.updateClosestBlockBBox(e.boundingBox,e.boxMatrixInverse,e.boundingBoxOuter)}),this.scene.add(this.boundingBoxObj)}},{key:"offlineUnconfirmedLoop",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=this.maxHeight-50;n<this.maxHeight;n++)Math.random()>.85&&t.push(n);for(r=this.maxHeight-200;r<this.maxHeight;r++)Math.random()>.98&&t.push(r);for(i=this.maxHeight-1e4;i<this.maxHeight-1e3;i++)Math.random()>.999&&t.push(i);return t.push(Math.floor(Math.random()*this.maxHeight)),t.push(Math.floor(Math.random()*this.maxHeight)),t.push(Math.floor(Math.random()*this.maxHeight)),e.next=9,this.txGenerator.updateGeometry({blockPositions:this.blockPositions,renderer:this.renderer,txHeights:t});case 9:setTimeout(function(){o.offlineUnconfirmedLoop()},5e3);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"unconfirmedLoop",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUnconfirmed();case 2:this.unconfirmedLoop();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"getUnconfirmed",value:function(){var e=this;return new Promise(function(t,n){setTimeout(r(u.a.mark(function n(){var i,o,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch("https://blockchain.info/unconfirmed-transactions?cors=true&format=json&apiCode="+e.config.blockchainInfo.apiCode);case 2:return i=n.sent,n.next=5,i.json();case 5:return o=n.sent,a=[],n.next=9,I.a(o.txs,function(){var t=r(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a(n.inputs,function(t){return new Promise(function(){var n=r(u.a.mark(function n(r,i){var o,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch("https://blockchain.info/rawtx/"+t.prev_out.tx_index+"?cors=true&format=json&apiCode="+e.config.blockchainInfo.apiCode);case 2:return o=n.sent,n.next=5,o.json();case 5:s=n.sent,a.push(s.block_height),r();case 8:case"end":return n.stop()}},n,e)}));return function(e,t){return n.apply(this,arguments)}}())});case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 9:return n.next=11,e.txGenerator.updateGeometry({blockPositions:e.blockPositions,renderer:e.renderer,txHeights:a});case 11:t();case 12:case"end":return n.stop()}},n,e)})),1e4)})}},{key:"createCubeMap",value:function(e){this.scene.background=this.crystalGenerator.cubeMap,this.cubeCamera=new h.CubeCamera(1,1500,256),this.cubeCamera.position.copy(e),this.renderer.vr.enabled&&(this.renderer.vr.enabled=!1),this.cubeCamera.update(this.renderer,this.scene),this.crystal.material.envMap=this.cubeCamera.renderTarget.texture,this.trees.material.envMap=this.cubeCamera.renderTarget.texture,this.centerTree&&(this.centerTree.material.envMap=this.cubeCamera.renderTarget.texture),this.lTree&&(this.lTree.material.envMap=this.cubeCamera.renderTarget.texture),this.rTree&&(this.rTree.material.envMap=this.cubeCamera.renderTarget.texture),this.scene.background=this.cubeMap}},{key:"stopAutoPilotAnimation",value:function(){"undefined"!==typeof this.autoPilotTween&&this.autoPilotTween.stop(),"undefined"!==typeof this.cameraMainRotationTween&&this.cameraMainRotationTween.stop(),this.autoPilot=!1}},{key:"toggleFlyControls",value:function(){this.stopAutoPilotAnimation(),this.controls&&(this.controls.dispose(),this.controls=null),this.setState({controlType:"fly",showInfoOverlay:!1});var e=new h.Vector3(0,50,0),t=this.closestBlock.blockData.height-1;t<0&&(t=this.closestBlock.blockData.height-1),e.x=this.blockPositions[2*t+0],e.z=this.blockPositions[2*t+1],this.prepareCamAnim(new h.Vector3(this.closestBlock.blockData.pos.x,50,this.closestBlock.blockData.pos.z),e);var n=this;new M.a.Tween(this.camera.position).to(this.camPosTo,6e3).onUpdate(function(){n.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){n.setState({animatingCamera:!1}),n.setState({flyControlsInteractionCount:n.state.flyControlsInteractionCount+1}),n.controls=new w.a(n.cameraMain),n.controls.movementSpeed=70,n.controls.domElement=n.renderer.domElement,n.controls.rollSpeed=Math.PI/24,n.controls.autoForward=!1,n.controls.dragToLook=!1,n.deselectTx(),n.emit("controlsEnabled")}).easing(this.defaultCamEasing).start(),this.animateCamRotation(5e3)}},{key:"toggleMapControls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"positive";this.config.detector.isMobile?this.controls=new T.a(this.cameraMain,this.renderer.domElement):this.controls=new T.a(this.cameraMain),this.controls.domElement=this.renderer.domElement,this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.screenSpacePanning=!0,this.controls.minDistance=20,this.controls.maxDistance=800,this.controls.maxPolarAngle="positive"===t?Math.PI/2:2*Math.PI,this.controls.rotateSpeed=.05,this.controls.panSpeed=.1,this.controls.keyPanSpeed=3,this.controls.zoomSpeed=.5,this.controls.enableRotate=!1,this.controls.target=e,this.controls.currentBlockPos=e.clone()}},{key:"prepareCamAnim",value:function(e,t){this.setState({animatingCamera:!0}),this.controls&&(this.controls.dispose(),this.controls=null),this.camPosTo=e,this.camPosTarget=t,this.camFromPosition=(new h.Vector3).copy(this.camera.position),this.camFromRotation=(new h.Euler).copy(this.camera.rotation),this.camera.position.set(this.camPosTo.x,this.camPosTo.y,this.camPosTo.z),t?this.camera.lookAt(this.camPosTarget):this.camera.lookAt(new h.Vector3(0,0,0)),this.camToRotation=(new h.Euler).copy(this.camera.rotation),this.camera.position.set(this.camFromPosition.x,this.camFromPosition.y,this.camFromPosition.z),this.camera.rotation.set(this.camFromRotation.x,this.camFromRotation.y,this.camFromRotation.z),this.camFromQuaternion=(new h.Quaternion).copy(this.camera.quaternion),this.camToQuaternion=(new h.Quaternion).setFromEuler(this.camToRotation),this.camMoveQuaternion=new h.Quaternion}},{key:"toggleTopView",value:function(){var e=this;if(!this.isNavigating){this.setState({controlType:"top",showInfoOverlay:!1}),this.stopAutoPilotAnimation();var t=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),n=this.topViewYPos;this.vrActive&&(n=20);var r=new h.Vector3(this.closestBlock.blockData.pos.x,n,this.closestBlock.blockData.pos.z).add(t.normalize().multiplyScalar(.01)),i=this.planeGenerator.blockHeightIndex[this.closestBlock.blockData.height],o=new h.Vector2(this.plane.geometry.attributes.planeOffset.array[i+0],this.plane.geometry.attributes.planeOffset.array[i+1]);this.prepareCamAnim(r,new h.Vector3(o.x,0,o.y));var a=this;new M.a.Tween(this.camera.position).to(this.camPosTo,6e3).onUpdate(function(){a.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){e.setState({animatingCamera:!1}),e.toggleMapControls(new h.Vector3(o.x,0,o.y),"negative")}).easing(this.defaultCamEasing).start(),this.vrActive||this.animateCamRotation(5e3)}}},{key:"toggleUndersideView",value:function(){var e=this;if(!this.isNavigating){this.setState({controlType:"underside",showInfoOverlay:!1}),this.stopAutoPilotAnimation();var t=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),n=new h.Vector3(this.closestBlock.blockData.pos.x,this.undersideViewYPos,this.closestBlock.blockData.pos.z).add(t.normalize().multiplyScalar(20)),r=this.planeGenerator.blockHeightIndex[this.closestBlock.blockData.height],i=new h.Vector2(this.plane.geometry.attributes.planeOffset.array[r+0],this.plane.geometry.attributes.planeOffset.array[r+1]);this.prepareCamAnim(n,new h.Vector3(i.x,0,i.y));var o=this;new M.a.Tween(this.camera.position).to(this.camPosTo,6e3).onUpdate(function(){o.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){e.setState({animatingCamera:!1}),e.toggleMapControls(new h.Vector3(i.x,0,i.y),"negative")}).easing(this.defaultCamEasing).start(),this.vrActive||this.animateCamRotation(5e3)}}},{key:"toggleSideView",value:function(){var e=this;if(!this.isNavigating){this.setState({controlType:"side",showInfoOverlay:!1}),this.stopAutoPilotAnimation();var t=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),n=500;this.config.detector.isMobile&&(n=800);var r=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z).add(t.normalize().multiplyScalar(n)),i=this.planeGenerator.blockHeightIndex[this.closestBlock.blockData.height],o=new h.Vector2(this.plane.geometry.attributes.planeOffset.array[i+0],this.plane.geometry.attributes.planeOffset.array[i+1]);this.prepareCamAnim(r,new h.Vector3(o.x,0,o.y));var a=this;new M.a.Tween(this.camera.position).to(this.camPosTo,6e3).onUpdate(function(){a.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){e.setState({animatingCamera:!1})}).easing(this.defaultCamEasing).start(),this.vrActive||this.animateCamRotation(5e3)}}},{key:"getClosestBlock",value:function(){if(this.camera.position.y>=1100)return null!==this.state.closestBlock&&this.setState({closestBlock:null}),void(this.closestBlockReadyForUpdate=!0);if(this.prevClosestBlock=this.closestBlock,Object.keys(this.blockGeoDataObject).length>0){var e=Number.MAX_SAFE_INTEGER;for(var t in this.blockGeoDataObject)if(this.blockGeoDataObject.hasOwnProperty(t)){var n=this.blockGeoDataObject[t],r=new h.Vector3(n.blockData.pos.x,0,n.blockData.pos.z);this.vrActive||("top"===this.state.controlType&&(r.y+=this.topViewYPos),"underside"===this.state.controlType&&(r.y-=this.topViewYPos));var i=r.distanceToSquared(this.camera.position);if("undefined"!==typeof this.audioManager.gainNodes[t]){var o=Object(x.a)(.001*i,0,100,.5,0);(o<0||!isFinite(o))&&(o=0),this.audioManager.gainNodes[t].gain.value=o}if(i<e){var a=!1;null===this.closestBlock&&(a=!0),e=i,this.closestBlock=n,a&&this.emit("closestBlockLoaded")}}this.prevClosestBlock&&(this.prevClosestBlock.blockData.hash!==this.closestBlock.blockData.hash&&(this.closestBlockReadyForUpdate=!0),e<1e6&&this.closestBlockReadyForUpdate&&(this.closestBlockReadyForUpdate=!1,this.emit("blockChanged")))}}},{key:"loadNearestBlocks",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,o){if(t.loadingNearestBlocks)return void e();if(!t.blockReady)return void e();if(!n&&t.camera.position.y>2e4)return t.loadingNearestBlocks=!1,void e();var a=!1;if(n&&(a=!0),"undefined"===typeof t.lastLoadPos&&(t.lastLoadPos={x:t.camera.position.x,z:t.camera.position.z},a=!0),n||(Math.abs(t.camera.position.x-t.lastLoadPos.x)>500||Math.abs(t.camera.position.z-t.lastLoadPos.z)>500)&&(a=!0),!a)return t.loadingNearestBlocks=!1,void e();if(t.loadingNearestBlocks=!0,t.lastLoadPos={x:t.camera.position.x,z:t.camera.position.z},null!==i)t.closestHeight=JSON.parse(JSON.stringify(i));else{var s=Number.MAX_SAFE_INTEGER,c=new h.Vector2(t.camera.position.x,t.camera.position.z),l=t.closestHeight-5,p=t.closestHeight+5;l<0&&(l=0),p>t.blockPositions.length/2&&(p=t.blockPositions.length/2);for(var f=l;f<p;f++){var d=t.blockPositions[2*f+0]-c.x,m=t.blockPositions[2*f+1]-c.y,g=d*d+m*m;g<s&&(s=g,t.closestHeight=f)}}for(var v in t.blockGeoDataObject)t.blockGeoDataObject.hasOwnProperty(v)&&(v<t.closestHeight-t.blocksToLoadEitherSide||v>t.closestHeight+t.blocksToLoadEitherSide)&&delete t.blockGeoDataObject[v];for(var y in t.loadedBaseGeoHeights)t.loadedBaseGeoHeights.hasOwnProperty(y)&&(y<t.closestHeight-t.baseGeoToLoadEitherSide||y>t.closestHeight+t.baseGeoToLoadEitherSide)&&delete t.loadedBaseGeoHeights[y];var b=[];b.push(t.closestHeight);for(var _=1;_<=t.baseGeoToLoadEitherSide;_++){var x=t.closestHeight+_,w=t.closestHeight-_;x<=t.maxHeight&&x>=0&&b.push(x),w<=t.maxHeight&&w>=0&&b.push(w)}b.forEach(function(e){if("undefined"===typeof t.loadedBaseGeoHeights[e]){t.loadedBaseGeoHeights[e]=e;var n={};n.blockData={},n.blockData.height=e,n.blockData.pos={},n.blockData.pos.x=t.blockPositions[2*e+0],n.blockData.pos.z=t.blockPositions[2*e+1],t.planeGenerator.updateGeometry(n),t.config.detector.isMobile||t.occlusionGenerator.updateGeometry(n),t.treeGenerator.updateGeometry(n)}}),t.nearestBlocksWorker.onmessage=function(){var n=r(u.a.mark(function n(r){var i,o,a=r.data;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"undefined"!==typeof a.closestBlocksData&&(i=a.closestBlocksData,a.blockHeightIndexes.forEach(function(e,t){"undefined"!==typeof i[e]&&(i[e].txValues=a["txValues"+t],i[e].txIndexes=a["txIndexes"+t],i[e].txSpentRatios=a["txSpentRatios"+t])}),o={},a.geoBlockHeightIndexes.forEach(function(e,t){"undefined"!==typeof i[e]&&(o[e]={},o[e].height=e,o[e].offsets=a["offsets"+t],o[e].scales=a["scales"+t])}),Object.keys(o).forEach(function(e){var n=o[e];"undefined"===typeof t.blockGeoDataObject[n.height]&&"undefined"!==typeof i[e]&&(n.height<t.closestHeight-2*t.blocksToLoadEitherSide||n.height>t.closestHeight+2*t.blocksToLoadEitherSide?console.log("moved too far away from block at height: "+n.height):(n.blockData=i[e],n.blockData.pos={},n.blockData.pos.x=t.blockPositions[2*n.height+0],n.blockData.pos.z=t.blockPositions[2*n.height+1],n.blockData.healthRatio=n.blockData.fee/n.blockData.outputTotal*2e3,t.blockGeoDataObject[n.height]={},t.blockGeoDataObject[n.height].blockData={bits:n.blockData.bits,block_index:n.blockData.block_index,fee:n.blockData.fee,hash:n.blockData.hash,healthRatio:n.blockData.healthRatio,height:n.blockData.height,main_chain:n.blockData.main_chain,mrkl_root:n.blockData.mrkl_root,n_tx:n.blockData.n_tx,next_block:n.blockData.next_block,nonce:n.blockData.nonce,outputTotal:n.blockData.outputTotal,pos:n.blockData.pos,prev_block:n.blockData.prev_block,received_time:n.blockData.received_time,relayed_by:n.blockData.relayed_by,size:n.blockData.size,time:n.blockData.time,ver:n.blockData.ver,txIndexes:n.blockData.txIndexes},t.crystalGenerator.updateGeometry(n),t.crystalAOGenerator.updateGeometry(n)))}),t.loadingNearestBlocks=!1,e());case 1:case"end":return n.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}();var T={cmd:"get",closestHeight:t.closestHeight,blocksToLoadEitherSide:t.blocksToLoadEitherSide,config:t.config,maxHeight:t.maxHeight,blockHeightIndexes:new Int32Array(9).fill(-1),geoBlockHeightIndexes:new Int32Array(9).fill(-1),scales0:new Float32Array(t.txCountBufferSize),scales1:new Float32Array(t.txCountBufferSize),scales2:new Float32Array(t.txCountBufferSize),scales3:new Float32Array(t.txCountBufferSize),scales4:new Float32Array(t.txCountBufferSize),scales5:new Float32Array(t.txCountBufferSize),scales6:new Float32Array(t.txCountBufferSize),scales7:new Float32Array(t.txCountBufferSize),scales8:new Float32Array(t.txCountBufferSize),offsets0:new Float32Array(2*t.txCountBufferSize),offsets1:new Float32Array(2*t.txCountBufferSize),offsets2:new Float32Array(2*t.txCountBufferSize),offsets3:new Float32Array(2*t.txCountBufferSize),offsets4:new Float32Array(2*t.txCountBufferSize),offsets5:new Float32Array(2*t.txCountBufferSize),offsets6:new Float32Array(2*t.txCountBufferSize),offsets7:new Float32Array(2*t.txCountBufferSize),offsets8:new Float32Array(2*t.txCountBufferSize),txValues0:new Float32Array(t.txCountBufferSize),txValues1:new Float32Array(t.txCountBufferSize),txValues2:new Float32Array(t.txCountBufferSize),txValues3:new Float32Array(t.txCountBufferSize),txValues4:new Float32Array(t.txCountBufferSize),txValues5:new Float32Array(t.txCountBufferSize),txValues6:new Float32Array(t.txCountBufferSize),txValues7:new Float32Array(t.txCountBufferSize),txValues8:new Float32Array(t.txCountBufferSize),txIndexes0:new Uint32Array(t.txCountBufferSize),txIndexes1:new Uint32Array(t.txCountBufferSize),txIndexes2:new Uint32Array(t.txCountBufferSize),txIndexes3:new Uint32Array(t.txCountBufferSize),txIndexes4:new Uint32Array(t.txCountBufferSize),txIndexes5:new Uint32Array(t.txCountBufferSize),txIndexes6:new Uint32Array(t.txCountBufferSize),txIndexes7:new Uint32Array(t.txCountBufferSize),txIndexes8:new Uint32Array(t.txCountBufferSize),txSpentRatios0:new Float32Array(t.txCountBufferSize),txSpentRatios1:new Float32Array(t.txCountBufferSize),txSpentRatios2:new Float32Array(t.txCountBufferSize),txSpentRatios3:new Float32Array(t.txCountBufferSize),txSpentRatios4:new Float32Array(t.txCountBufferSize),txSpentRatios5:new Float32Array(t.txCountBufferSize),txSpentRatios6:new Float32Array(t.txCountBufferSize),txSpentRatios7:new Float32Array(t.txCountBufferSize),txSpentRatios8:new Float32Array(t.txCountBufferSize)};t.nearestBlocksWorker.postMessage(T,[T.blockHeightIndexes.buffer,T.geoBlockHeightIndexes.buffer,T.scales0.buffer,T.scales1.buffer,T.scales2.buffer,T.scales3.buffer,T.scales4.buffer,T.scales5.buffer,T.scales6.buffer,T.scales7.buffer,T.scales8.buffer,T.offsets0.buffer,T.offsets1.buffer,T.offsets2.buffer,T.offsets3.buffer,T.offsets4.buffer,T.offsets5.buffer,T.offsets6.buffer,T.offsets7.buffer,T.offsets8.buffer,T.txValues0.buffer,T.txValues1.buffer,T.txValues2.buffer,T.txValues3.buffer,T.txValues4.buffer,T.txValues5.buffer,T.txValues6.buffer,T.txValues7.buffer,T.txValues8.buffer,T.txIndexes0.buffer,T.txIndexes1.buffer,T.txIndexes2.buffer,T.txIndexes3.buffer,T.txIndexes4.buffer,T.txIndexes5.buffer,T.txIndexes6.buffer,T.txIndexes7.buffer,T.txIndexes8.buffer,T.txSpentRatios0.buffer,T.txSpentRatios1.buffer,T.txSpentRatios2.buffer,T.txSpentRatios3.buffer,T.txSpentRatios4.buffer,T.txSpentRatios5.buffer,T.txSpentRatios6.buffer,T.txSpentRatios7.buffer,T.txSpentRatios8.buffer])}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeSearch",value:function(){this.setState({dateSearchOpen:!1,blockSearchOpen:!1,txSearchOpen:!1,showInfoOverlay:!1})}},{key:"toggleTxSearch",value:function(){this.setState({dateSearchOpen:!1,blockSearchOpen:!1,txSearchOpen:!0,showInfoOverlay:!1})}},{key:"toggleBlockSearch",value:function(){this.setState({dateSearchOpen:!1,txSearchOpen:!1,blockSearchOpen:!0,showInfoOverlay:!1})}},{key:"toggleDateSearch",value:function(){this.setState({blockSearchOpen:!1,txSearchOpen:!1,dateSearchOpen:!0,showInfoOverlay:!1})}},{key:"hideMerkleDetail",value:function(){this.underside&&(this.underside.visible=!1,this.underside.position.x=0,this.underside.position.z=0),this.undersideL&&(this.undersideL.visible=!1,this.undersideL.position.x=0,this.undersideL.position.z=0),this.undersideR&&(this.undersideR.visible=!1,this.undersideR.position.x=0,this.undersideR.position.z=0)}},{key:"prepareCamNavigation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stopAudio:!0};this.deselectTx(),!0===e.stopAudio&&(this.audioManager.stopNotes(),this.audioManager.fadeOutBlockAudio()),this.exitAutoPilot(),this.hideMerkleDetail(),this.hideVRText(),this.closeSidebar()}},{key:"goToRandomBlock",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.prepareCamNavigation(),this.setState({controlType:"top"}),this.closestHeight=Math.round(Math.random()*this.maxHeight),this.goToBlock();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"goToDate",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({currentDate:t}),n=parseInt(_()(t).startOf("day").valueOf()/1e3,10),r=parseInt(_()(t).endOf("day").valueOf()/1e3,10),i=this.FBDocRefData.where("time",">",n).where("time","<",r).orderBy("time","asc").limit(1),e.next=6,i.get();case 6:o=e.sent,o.forEach(function(e){var t=e.data();a.goToBlock(t.height)});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"goToBlock",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(r){var s,c,l,p,f,d,m,g;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.isNavigating=!0,n&&i.setState({showInfoOverlay:!1}),i.setState({controlType:"top"}),i.prepareCamNavigation(),null!==t?i.closestHeight=t:null===i.closestHeight&&(i.closestHeight=i.maxHeight),i.loadNearestBlocks(!0,i.closestHeight),s=i.blockPositions[2*i.closestHeight+0],c=i.blockPositions[2*i.closestHeight+1],l=new h.Vector3(s,0,c),p=new h.Vector3(s,i.topViewYPos,c).add(l.normalize().multiplyScalar(.01)),f=new h.Vector3(s,1e6,c),i.prepareCamAnim(p,new h.Vector3(f.x,0,f.z)),d=i.camera.position.clone(),d.y=1e6,m=i.vrActive?20:i.topViewYPos,g=i,new M.a.Tween(i.camera.position).to(d,1e4).onUpdate(function(){g.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){new M.a.Tween(g.camera.position).to(f,5e3).onUpdate(function(){g.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){new M.a.Tween(i.camera.position).to(new h.Vector3(f.x,2e3,f.z),"normal"===o?1e4:2e4).onUpdate(function(){g.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){new M.a.Tween(i.camera.position).to(new h.Vector3(g.camPosTo.x,m,g.camPosTo.z),1e4).onUpdate(function(){g.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){if(i.VRInteractionReady=!0,i.isNavigating=!1,i.setState({animatingCamera:!1}),null!==a){var e=0;i.closestBlock.blockData.txIndexes.forEach(function(t,n){t===a&&(e=n)}),i.selectTX(e,i.state.searchTXHash)}i.toggleMapControls(new h.Vector3(f.x,0,f.z),"positive"),r(!0)}).easing(M.a.Easing.Quadratic.Out).start()}).easing(i.defaultCamEasing).start()}).easing(i.defaultCamEasing).start()}).easing(i.defaultCamEasing).start(),i.animateCamRotation("normal"===o?2e4:25e3);case 18:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"exitAutoPilot",value:function(){this.autoPilotDirection=!1,this.autoPilot=!1}},{key:"stopAutoPilot",value:function(){this.state.animatingCamera&&(this.setState({animatingCamera:!1}),this.toggleTopView())}},{key:"toggleAutoPilotDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"backward";this.isNavigating||(this.setState({showInfoOverlay:!1}),"undefined"!==typeof this.autoPilotTween&&this.autoPilotTween.stop(),"undefined"!==typeof this.cameraMainRotationTween&&this.cameraMainRotationTween.stop(),this.autoPilot=!1,this.autoPilotDirection=e,this.startAutoPilot())}},{key:"startAutoPilot",value:function(){this.audioManager.stopNotes(),this.setAutoPilotState(),this.setState({animatingCamera:!0}),this.vrActive?this.autoPilotAnimLoopVR():this.autoPilotAnimLoop()}},{key:"setAutoPilotState",value:function(){this.setState({sidebarOpen:!1,controlType:"autopilot"}),this.autoPilot=!0}},{key:"autoPilotAnimLoop",value:function(){var e=this;if(this.autoPilot){var t=void 0,n=void 0;if("backward"===this.autoPilotDirection?(t=this.blockPositions[2*(this.closestBlock.blockData.height-1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height-1)+1]):(t=this.blockPositions[2*(this.closestBlock.blockData.height+1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height+1)+1]),"undefined"!==typeof t){var r=!1;if(Math.random()>.63&&(r=!0),r){var i=new h.Vector3(t,this.autoPilotYPos,n).sub(new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1])).normalize().multiplyScalar(200),o=new h.Vector3(t,this.autoPilotYPos,n).sub(new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1])).normalize().multiplyScalar(500),a=new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1]).add(i),s=new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1]).add(o);!0===this.prevPosUnderneath&&(a.y=-50),s.y=-50;new h.Vector3(t,-50,n);Math.random()>.75&&new h.Vector3(0,0,0);var u=this,c={x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z};this.autoPilotTween=new M.a.Tween(c).to(a,1e4).onUpdate(function(){u.autoPilot&&u.camera.position.set(c.x,c.y,c.z)}).onComplete(function(){u.autoPilotTween=new M.a.Tween(c).to(s,1e4).onUpdate(function(){u.autoPilot&&u.camera.position.set(c.x,c.y,c.z)}).onComplete(function(){setTimeout(function(){e.autoPilot&&e.autoPilotAnimLoop()},10)}).start()}).start()}else{var l=new h.Vector3(t,this.autoPilotYPos,n).sub(new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1])).normalize().multiplyScalar(500),p=new h.Vector3(this.blockPositions[2*this.closestBlock.blockData.height+0],this.autoPilotYPos,this.blockPositions[2*this.closestBlock.blockData.height+1]).add(l);new h.Vector3(t,this.autoPilotYPos+20,n);Math.random()>.75&&new h.Vector3(0,0,0);var f=this,d={x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z};this.autoPilotTween=new M.a.Tween(d).to(p,2e4).onUpdate(function(){f.autoPilot&&f.camera.position.set(d.x,d.y,d.z)}).onComplete(function(){setTimeout(function(){e.autoPilot&&e.autoPilotAnimLoop()},10)}).start()}this.prevPosUnderneath=r}}}},{key:"cameraFollowTarget",value:function(){"undefined"!==typeof this.movementX&&(this.camEuler.setFromQuaternion(this.camera.quaternion),this.camEuler.y-=.01*this.movementX,this.camEuler.x-=.01*this.movementY,this.camEuler.x=Math.max(.25*-Math.PI,Math.min(.25*Math.PI,this.camEuler.x)),this.camera.quaternion.setFromEuler(this.camEuler))}},{key:"autoPilotAnimLoopVR",value:function(){var e=this;if(this.autoPilot){var t=void 0,n=void 0;if("backward"===this.autoPilotDirection?(t=this.blockPositions[2*(this.closestBlock.blockData.height-1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height-1)+1]):(t=this.blockPositions[2*(this.closestBlock.blockData.height+1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height+1)+1]),"undefined"!==typeof t){var r=new h.Vector2(t,n).sub(new h.Vector2(this.blockPositions[2*this.closestBlock.blockData.height+0],this.blockPositions[2*this.closestBlock.blockData.height+1])).normalize().multiplyScalar(500),i=new h.Vector2(this.blockPositions[2*this.closestBlock.blockData.height+0],this.blockPositions[2*this.closestBlock.blockData.height+1]).add(r),o={x:this.camera.position.x,y:this.camera.position.z},a=this;this.autoPilotTween=new M.a.Tween(o).to(i,2e4).onUpdate(function(){a.autoPilot&&(a.camera.position.x=o.x,a.camera.position.z=o.y)}).onComplete(function(){setTimeout(function(){e.autoPilot&&e.autoPilotAnimLoopVR()},10)}).start()}}}},{key:"renderFrame",value:function(){var e=this;this.frame++;var t=this.clock.getDelta();if(M.a.update(),this.controls&&this.controls.update(t),this.updatePicker(),this.getClosestBlock(),this.blockReady){if(!this.vrActive&&this.audioManager.analyser&&window.oscilloscope&&!this.config.detector.isMobile&&window.oscilloscope.drawScope(this.audioManager.analyser,window.oscilloscope.refs.scope),this.frame%250===0){if(this.vrActive&&(this.bindVRGamepadEvents(),!0===this.VRReadyToEnd&&!1===this.state.animatingCamera&&!1===this.audioManager.narrationPlaying)){var n=this;n.showVRTitleText("... AUTOPILOT ENGAGED, INITIATING FLIGHT SEQUENCE TO MEMPOOL ..."),setTimeout(function(){n.prepareCamNavigation();var t=new h.Vector3(1e4,2e4,1e4);n.prepareCamAnim(new h.Vector3(t.x,t.y,t.z)),new M.a.Tween(n.camera.position).to(t,5e4).onUpdate(function(){n.camera.position.set(this.x,this.y,this.z)}).onComplete(r(u.a.mark(function t(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.showVRTitleText("YOU CAN ACCESS SYMPHONY AT ANY TIME IN A WEB BROWSER AT SYMPHONY.IOHK.IO"),e.next=3,n.audioManager.playNarrationFile("end","1");case 3:window.location.reload();case 4:case"end":return e.stop()}},t,e)}))).easing(n.defaultCamEasing).start(),n.audioManager.playNarrationFile("mempool","1")},4e3)}this.loadNearestBlocks()}this.setRenderOrder(),this.geoUpdateLoop(t)}this.VRControlsUpdate(),this.updateCamPosUI(),this.cameraSideViewInteraction(),this.sceneRenderLogic(),this.cameraFollowTarget()}},{key:"geoUpdateLoop",value:function(e){this.diskGenerator.update({time:window.performance.now(),camPos:this.camera.position,maxHeight:this.maxHeight}),this.glowGenerator.update({time:window.performance.now(),camPos:this.camera.position}),this.bgGenerator.update({time:window.performance.now(),camPos:this.camera.position}),this.config.detector.isMobile||this.txGenerator.update({time:window.performance.now()}),this.particlesGenerator.update({time:window.performance.now(),deltaTime:e}),this.undersideGenerator.update({time:window.performance.now()}),this.crystalGenerator.update({time:window.performance.now(),camPos:this.camera.position,autoPilot:this.autoPilot}),this.crystalAOGenerator.update(window.performance.now())}},{key:"VRControlsUpdate",value:function(){this.vrActive&&(this.viveController1Buttons.update(),this.viveController2Buttons.update(),this.viveTriggerPressed1&&this.viveTriggerPressed2?this.camera.position.y<2e3&&(this.camera.position.y+=.25):this.camera.position.y>20&&(this.camera.position.y-=.1))}},{key:"sceneRenderLogic",value:function(){this.config.detector.isMobile?(this.WebVRLib.VRSupported&&(this.renderer.vr.enabled=!0),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.cameraMain)):this.particlesGenerator&&this.particlesGenerator.positionScene&&(this.config.debug.debugPicker&&this.pickingScene?(this.WebVRLib.VRSupported&&(this.renderer.vr.enabled=!0),this.renderer.setRenderTarget(null),this.renderer.render(this.pickingScene,this.cameraMain)):(this.WebVRLib.VRSupported&&(this.renderer.vr.enabled=!0),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.cameraMain)))}},{key:"updateCamPosUI",value:function(){"fly"===this.state.controlType&&this.setState({posX:this.camera.position.x.toFixed(3),posY:this.camera.position.y.toFixed(3),posZ:this.camera.position.z.toFixed(3)})}},{key:"cameraSideViewInteraction",value:function(){if("side"===this.state.controlType&&!this.state.animatingCamera){var e=this.renderer.domElement.getBoundingClientRect(),t=this.camera.position.y+.001*(.5*e.height-this.mousePos.y);t>-200&&t<200&&(this.camera.position.y=t,this.camera.lookAt(new h.Vector3(this.originOffset.x,0,this.originOffset.y)))}}},{key:"playTutorial",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.audioManager.playNarrationFile("tutorial","1");case 2:return e.next=4,this.audioManager.playNarrationFile("tutorial","2");case 4:return e.next=6,this.audioManager.playNarrationFile("tutorial","3");case 6:return e.next=8,this.audioManager.playNarrationFile("tutorial","4");case 8:return e.next=10,this.audioManager.playNarrationFile("tutorial","5");case 10:return e.next=12,this.audioManager.playNarrationFile("tutorial","6");case 12:return e.next=14,this.audioManager.playNarrationFile("tutorial","7");case 14:return e.next=16,this.audioManager.playNarrationFile("tutorial","8");case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVRTitleText",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={text:"",position:{x:-3.3,y:-2,z:-9},width:700,align:"center",scale:.0095,lineHeight:48},t.text=i,e.next=4,this.textGenerator.create(t);case 4:n=e.sent,this.cameraMain.remove(this.introTextMesh),this.introTextMesh=n,this.cameraMain.add(this.introTextMesh),r=this,new M.a.Tween({opacity:1}).to({opacity:0},o).onUpdate(function(){r.introTextMesh.material.uniforms.opacity.value=this.opacity}).easing(r.defaultCamEasing).start();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"startStory",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.currentChapter=1,this.advanceToNextChapter();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"advanceToNextChapter",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioManager.narrationPlaying&&!this.isNavigating){e.next=2;break}return e.abrupt("return");case 2:this.currentChapter++,this.audioManager.masterBus.gain.setTargetAtTime(.1,this.audioManager.audioContext.currentTime,2),e.t0=this.currentChapter,e.next=2===e.t0?7:3===e.t0?16:4===e.t0?24:5===e.t0?30:39;break;case 7:return e.next=9,this.goToBlock(this.chapters[3].height);case 9:return this.toggleUndersideView(),this.showVRTitleText(this.chapters[3].title),e.next=13,this.audioManager.playNarrationFile("merkle-tree","1");case 13:return e.next=15,this.audioManager.playNarrationFile("merkle-tree","2");case 15:return e.abrupt("break",40);case 16:return e.next=18,this.goToBlock(this.chapters[4].height);case 18:return this.showVRTitleText(this.chapters[4].title),e.next=21,this.audioManager.playNarrationFile("congestion","1");case 21:return e.next=23,this.audioManager.playNarrationFile("congestion","2");case 23:return e.abrupt("break",40);case 24:return e.next=26,this.goToBlock(this.maxHeight);case 26:return this.showVRTitleText(this.chapters[5].title),e.next=29,this.audioManager.playNarrationFile("latest","1");case 29:return e.abrupt("break",40);case 30:return this.prepareCamNavigation(),t=new h.Vector3(1e4,2e4,1e4),this.prepareCamAnim(new h.Vector3(t.x,t.y,t.z)),n=this,new M.a.Tween(this.camera.position).to(t,5e4).onUpdate(function(){n.camera.position.set(this.x,this.y,this.z)}).onComplete(r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.showVRTitleText("YOU CAN ACCESS SYMPHONY AT ANY TIME IN A WEB BROWSER AT SYMPHONY.IOHK.IO"),e.next=3,n.audioManager.playNarrationFile("end","1");case 3:window.location.reload();case 4:case"end":return e.stop()}},e,i)}))).easing(this.defaultCamEasing).start(),this.showVRTitleText(this.chapters[6].title),e.next=38,this.audioManager.playNarrationFile("mempool","1");case 38:case 39:return e.abrupt("break",40);case 40:this.audioManager.masterBus.gain.setTargetAtTime(.8,this.audioManager.audioContext.currentTime,2);case 41:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadSpiralAnim",value:function(){if("lite"!==this.config.scene.mode)this.disk.material.uniforms.uSpiralStart.value=154387;else{var e=this;new M.a.Tween({uSpiralStart:725e3}).to({uSpiralStart:154387},3e4).onUpdate(function(){e.disk.material.uniforms.uSpiralStart.value=this.uSpiralStart}).onComplete(function(){e.startUnconfirmed()}).easing(this.defaultCamEasing).start()}}},{key:"startIntro",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({started:!0}),this.startScene(),this.config.scene.showIntro){e.next=7;break}"full"===this.config.scene.mode&&this.goToBlock(),"lite"===this.config.scene.mode&&this.on("closestBlockLoaded",function(){t.toggleAutoPilotDirection("backward")}),e.next=30;break;case 7:if(!this.vrActive){e.next=27;break}return e.next=10,this.playTutorial();case 10:return this.goToBlock(),this.showVRTitleText("THIS IS THE BITCOIN BLOCKCHAIN",5e3),e.next=14,this.audioManager.playNarrationFile("intro","1",3e3);case 14:return this.showVRTitleText("BLOCKS SPIRAL OUTWARD FROM THE CENTER, STARTING WITH THE LATEST BLOCK",6e3),e.next=17,this.audioManager.playNarrationFile("intro","2",3e3);case 17:return this.showVRTitleText("A NEW BLOCK IS CREATED AROUND EVERY 10 MINUTES",6e3),e.next=20,this.audioManager.playNarrationFile("intro","3",3e3);case 20:return this.showVRTitleText("THE MEMPOOL SITS AT THE CENTER, UNCONFIRMED TRANSACTIONS GATHER HERE",6e3),e.next=23,this.audioManager.playNarrationFile("intro","4",3e3);case 23:this.showVRTitleText("THERE ARE "+this.maxHeight.toLocaleString("en")+" BLOCKS SO FAR...",6e3),setTimeout(function(){t.VRReadyToEnd=!0},this.config.VR.experienceLength),e.next=30;break;case 27:this.goToBlock(this.maxHeight,!1,"slow"),this.setState({showIntro:!0}),setTimeout(function(){t.setState({activeIntro:1}),setTimeout(function(){t.setState({activeIntro:2}),setTimeout(function(){t.setState({activeIntro:3}),setTimeout(function(){t.setState({activeIntro:4}),setTimeout(function(){t.setState({activeIntro:5}),setTimeout(function(){t.setState({activeIntro:6}),setTimeout(function(){t.setState({showIntro:!1,activeIntro:7})},t.config.scene.introTextTime)},t.config.scene.introTextTime)},t.config.scene.introTextTime)},t.config.scene.introTextTime)},t.config.scene.introTextTime)},t.config.scene.introTextTime)},2e3);case 30:case"end":return e.stop()}},e,this)}));return e}()},{key:"addEvents",value:function(){var e=this;window.addEventListener("resize",this.resize.bind(this),!1),this.on("blockChanged",function(){e.addClosestBlockDetail()}),this.resize(),this.audioManager.on("loopend",function(t){e.crystalGenerator.updateBlockStartTimes(t),e.crystalAOGenerator.updateBlockStartTimes(t)}),document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",function(t){e.onMouseUp(t)}),document.addEventListener("mousedown",function(t){e.onMouseDown()}),document.addEventListener("touchmove",function(t){e.onMouseMove()},!1),document.addEventListener("touchstart",function(t){e.onMouseMove(t)}),document.addEventListener("touchend",function(t){e.onMouseMove(t),e.onMouseUp(t)}),document.addEventListener("keydown",function(t){"fly"===e.state.controlType&&t.shiftKey&&e.controls&&e.controls.movementSpeed<1e3&&(e.controls.movementSpeed+=10)}),document.addEventListener("keyup",function(t){"fly"===e.state.controlType&&(t.shiftKey||e.controls&&(e.controls.movementSpeed=100))})}},{key:"setupViveControllers",value:function(){this.viveController1&&!this.VRController1EventsBound&&"undefined"!==typeof this.viveController1.userData.inputSource&&("right"===this.viveController1.userData.inputSource.handedness&&(this.VRRightControllerSetup?(this.setupLeftViveController(this.viveController1,this.viveController1MeshGroup),this.VRLeftControllerSetup=!0):(this.setupRightViveController(this.viveController1,this.viveController1MeshGroup),this.VRRightControllerSetup=!0),console.log("vive 1 setup"),this.VRController1EventsBound=!0),"left"===this.viveController1.userData.inputSource.handedness&&(this.VRLeftControllerSetup?(this.setupRightViveController(this.viveController1,this.viveController1MeshGroup),this.VRRightControllerSetup=!0):(this.setupLeftViveController(this.viveController1,this.viveController1MeshGroup),this.VRLeftControllerSetup=!0),console.log("vive 1 setup"),this.VRController1EventsBound=!0)),this.viveController2&&!this.VRController2EventsBound&&"undefined"!==typeof this.viveController2.userData.inputSource&&("right"===this.viveController2.userData.inputSource.handedness&&(this.VRRightControllerSetup?(this.setupLeftViveController(this.viveController2,this.viveController2MeshGroup),this.VRLeftControllerSetup=!0):(this.setupRightViveController(this.viveController2,this.viveController2MeshGroup),this.VRRightControllerSetup=!0),console.log("vive 2 setup"),this.VRController2EventsBound=!0),"left"===this.viveController2.userData.inputSource.handedness&&(this.VRLeftControllerSetup?(this.setupRightViveController(this.viveController2,this.viveController2MeshGroup),this.VRRightControllerSetup=!0):(this.setupLeftViveController(this.viveController2,this.viveController2MeshGroup),this.VRLeftControllerSetup=!0),console.log("vive 2 setup"),this.VRController2EventsBound=!0))}},{key:"setupRightViveController",value:function(e,t){e.addEventListener("select",this.onVRControllerSelect.bind(this)),this.controllerCam=new h.PerspectiveCamera(this.config.camera.fov,window.innerWidth/window.innerHeight,1,5e6),t.add(this.controllerCam);var n=(new h.BufferGeometry).setFromPoints([new h.Vector3(0,0,0),new h.Vector3(0,0,-1)]),r=new h.LineBasicMaterial({color:7000426}),i=new h.Line(n,r);i.scale.z=5,t.add(i);var o=new h.PlaneBufferGeometry(.018,.018,1);o.rotateX(-Math.PI/2),this.textureLoader.setPath("assets/images/textures/vr-ui/"),this.buttonPrevMap=this.textureLoader.load("prev.png"),this.buttonPrevMapPressed=this.textureLoader.load("prev-pressed.png"),this.buttonNextMap=this.textureLoader.load("next.png"),this.buttonNextMapPressed=this.textureLoader.load("next-pressed.png"),this.buttonUpMap=this.textureLoader.load("up.png"),this.buttonUpMapPressed=this.textureLoader.load("up-pressed.png"),this.buttonDownMap=this.textureLoader.load("down.png"),this.buttonDownMapPressed=this.textureLoader.load("down-pressed.png"),this.buttonInfoMap=this.textureLoader.load("info.png"),this.buttonInfoMapPressed=this.textureLoader.load("info-pressed.png"),this.buttonPrevMat=new h.MeshBasicMaterial({map:this.buttonPrevMap,transparent:!0,alphaTest:.5});var a=new h.Mesh(o,this.buttonPrevMat);a.position.x=-.015,a.position.y=.009,a.position.z=.05,t.add(a),this.buttonNextMat=new h.MeshBasicMaterial({map:this.buttonNextMap,transparent:!0,alphaTest:.5});var s=new h.Mesh(o,this.buttonNextMat);s.position.x=.015,s.position.y=.009,s.position.z=.05,t.add(s),this.buttonUpMat=new h.MeshBasicMaterial({map:this.buttonUpMap,transparent:!0,alphaTest:.5,color:new h.Color(16777215)});var u=new h.Mesh(o,this.buttonUpMat);u.position.y=.009,u.position.z=.035,t.add(u),this.buttonDownMat=new h.MeshBasicMaterial({map:this.buttonDownMap,transparent:!0,alphaTest:.5});var c=new h.Mesh(o,this.buttonDownMat);c.position.y=.009,c.position.z=.065,t.add(c),this.buttonInfoMat=new h.MeshBasicMaterial({map:this.buttonInfoMap,transparent:!0,alphaTest:.5});var l=new h.Mesh(o,this.buttonInfoMat);l.position.y=.009,l.position.z=.01,t.add(l)}},{key:"setupLeftViveController",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var r,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new h.PlaneBufferGeometry(.018,.018,1),r.rotateX(-Math.PI/2),this.textureLoader.setPath("assets/images/textures/vr-ui/"),this.buttonRandomMap=this.textureLoader.load("random.png"),this.buttonRandomMapPressed=this.textureLoader.load("random-pressed.png"),this.buttonLatestMap=this.textureLoader.load("latest.png"),this.buttonLatestMapPressed=this.textureLoader.load("latest-pressed.png"),this.buttonLatestMat=new h.MeshBasicMaterial({map:this.buttonLatestMap,transparent:!0,alphaTest:.5}),i=new h.Mesh(r,this.buttonLatestMat),i.position.y=.009,i.position.z=.035,n.add(i),this.buttonRandomMat=new h.MeshBasicMaterial({map:this.buttonRandomMap,transparent:!0,alphaTest:.5}),o=new h.Mesh(r,this.buttonRandomMat),o.position.y=.009,o.position.z=.065,n.add(o);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"bindVRGamepadEvents",value:function(){if(this.setupViveControllers(),!this.VRGamepad1EventsBound){var e=this;if(e.viveController1Buttons.gamepad&&("left"===e.viveController1Buttons.gamepad.hand||"right"===e.viveController1Buttons.gamepad.hand)){switch(e.viveController1Buttons.addEventListener("triggerdown",function(t){e.viveTriggerPressed1=!0}),e.viveController1Buttons.addEventListener("triggerup",function(t){e.viveTriggerPressed1=!1}),e.viveController1Buttons.gamepad.hand){case"right":e.viveController1Buttons.addEventListener("thumbpadup",function(t){e.viveControllerRightDPadEventsUp(t)});break;case"left":e.viveController1Buttons.addEventListener("thumbpadup",function(t){e.viveControllerLeftDPadEventsUp(t)})}switch(e.viveController1Buttons.gamepad.hand){case"right":e.viveController1Buttons.addEventListener("thumbpaddown",function(t){e.viveController1Buttons.interactionTimeout=setTimeout(function(){console.log(e.viveController1Buttons.gamepad.hand),e.viveControllerRightDPadEvents(t)},e.config.VR.interactionTimeout)});break;case"left":e.viveController1Buttons.addEventListener("thumbpaddown",function(t){e.viveController1Buttons.interactionTimeout=setTimeout(function(){console.log(e.viveController1Buttons.gamepad.hand),e.viveControllerLeftDPadEvents(t)},e.config.VR.interactionTimeout)})}switch(e.viveController1Buttons.gamepad.hand){case"right":e.viveController1Buttons.addEventListener("menuup",function(t){e.viveControllerRightMenuEventsUp(t)});break;case"left":e.viveController1Buttons.addEventListener("menuup",function(t){e.viveControllerLeftMenuEventsUp(t)})}switch(e.viveController1Buttons.gamepad.hand){case"right":e.viveController1Buttons.addEventListener("menudown",function(t){console.log("menudown"),e.viveController1Buttons.interactionTimeout=setTimeout(function(){console.log(e.viveController1Buttons.gamepad.hand),e.viveControllerRightMenuEvents(t)},e.config.VR.interactionTimeout)});break;case"left":e.viveController1Buttons.addEventListener("menudown",function(t){console.log("menudown"),e.viveController1Buttons.interactionTimeout=setTimeout(function(){console.log(e.viveController1Buttons.gamepad.hand),e.viveControllerLeftMenuEvents(t)},e.config.VR.interactionTimeout)})}e.viveController1Buttons.addEventListener("thumbpadup",function(t){clearTimeout(e.viveController1Buttons.interactionTimeout)}),e.VRGamepad1EventsBound=!0}}if(!this.VRGamepad2EventsBound){var t=this;if(t.viveController2Buttons.gamepad&&("left"===t.viveController2Buttons.gamepad.hand||"right"===t.viveController2Buttons.gamepad.hand)){switch(t.viveController2Buttons.addEventListener("triggerdown",function(e){t.viveTriggerPressed2=!0}),t.viveController2Buttons.addEventListener("triggerup",function(e){t.viveTriggerPressed2=!1}),t.viveController2Buttons.gamepad.hand){case"right":t.viveController2Buttons.addEventListener("thumbpadup",function(e){t.viveControllerRightDPadEventsUp(e)});break;case"left":t.viveController2Buttons.addEventListener("thumbpadup",function(e){t.viveControllerLeftDPadEventsUp(e)})}switch(t.viveController2Buttons.gamepad.hand){case"right":t.viveController2Buttons.addEventListener("thumbpaddown",function(e){t.viveController2Buttons.interactionTimeout=setTimeout(function(){console.log(t.viveController2Buttons.gamepad.hand),t.viveControllerRightDPadEvents(e)},t.config.VR.interactionTimeout)});break;case"left":t.viveController2Buttons.addEventListener("thumbpaddown",function(e){t.viveController2Buttons.interactionTimeout=setTimeout(function(){console.log(t.viveController2Buttons.gamepad.hand),t.viveControllerLeftDPadEvents(e)},t.config.VR.interactionTimeout)})}switch(t.viveController2Buttons.gamepad.hand){case"right":t.viveController2Buttons.addEventListener("menuup",function(e){t.viveControllerRightMenuEventsUp(e)});break;case"left":t.viveController2Buttons.addEventListener("menuup",function(e){t.viveControllerLeftMenuEventsUp(e)})}switch(t.viveController2Buttons.gamepad.hand){case"right":t.viveController2Buttons.addEventListener("menudown",function(e){console.log("menudown"),t.viveController2Buttons.interactionTimeout=setTimeout(function(){console.log(t.viveController2Buttons.gamepad.hand),t.viveControllerRightMenuEvents(e)},t.config.VR.interactionTimeout)});break;case"left":t.viveController2Buttons.addEventListener("menudown",function(e){console.log("menudown"),t.viveController2Buttons.interactionTimeout=setTimeout(function(){console.log(t.viveController2Buttons.gamepad.hand)},t.config.VR.interactionTimeout),t.viveControllerLeftMenuEvents(e)})}t.viveController2Buttons.addEventListener("thumbpadup",function(e){clearTimeout(t.viveController2Buttons.interactionTimeout)}),t.VRGamepad2EventsBound=!0}}}},{key:"viveControllerRightDPadEventsUp",value:function(e){this.VRInteractionReady&&(this.buttonPrevMat.map=this.buttonPrevMap,this.buttonPrevMat.needsUpdate=!0,this.buttonNextMat.map=this.buttonNextMap,this.buttonNextMat.needsUpdate=!0,this.buttonUpMat.map=this.buttonUpMap,this.buttonUpMat.needsUpdate=!0,this.buttonDownMat.map=this.buttonDownMap,this.buttonDownMat.needsUpdate=!0,this.buttonInfoMat.map=this.buttonInfoMap,this.buttonInfoMat.needsUpdate=!0)}},{key:"viveControllerLeftDPadEventsUp",value:function(e){this.VRInteractionReady&&(this.buttonLatestMat.map=this.buttonLatestMap,this.buttonLatestMat.needsUpdate=!0,this.buttonRandomMat.map=this.buttonRandomMap,this.buttonRandomMat.needsUpdate=!0)}},{key:"viveControllerRightDPadEvents",value:function(e){this.VRInteractionReady&&(this.state.animatingCamera||(e.axes[0]<0&&e.axes[1]<.5&&e.axes[1]>-.5&&(this.buttonPrevMat.map=this.buttonPrevMapPressed,this.buttonPrevMat.needsUpdate=!0,this.closestBlock&&this.toggleAutoPilotDirection("backward")),e.axes[0]>0&&e.axes[1]<.5&&e.axes[1]>-.5&&(this.buttonNextMat.map=this.buttonNextMapPressed,this.buttonNextMat.needsUpdate=!0,this.closestBlock&&this.toggleAutoPilotDirection("forward")),e.axes[1]>0&&e.axes[0]<.5&&e.axes[0]>-.5&&(this.buttonUpMat.map=this.buttonUpMapPressed,this.buttonUpMat.needsUpdate=!0,this.toggleTopView()),e.axes[1]<0&&e.axes[0]<.5&&e.axes[0]>-.5&&(this.buttonDownMat.map=this.buttonDownMapPressed,this.buttonDownMat.needsUpdate=!0,this.toggleUndersideView())))}},{key:"viveControllerLeftDPadEvents",value:function(e){this.VRInteractionReady&&(this.state.animatingCamera||(e.axes[1]>0&&e.axes[0]<.5&&e.axes[0]>-.5&&(this.buttonLatestMat.map=this.buttonLatestMapPressed,this.buttonLatestMat.needsUpdate=!0,this.goToBlock(this.maxHeight)),e.axes[1]<0&&e.axes[0]<.5&&e.axes[0]>-.5&&(this.buttonRandomMat.map=this.buttonRandomMapPressed,this.buttonRandomMat.needsUpdate=!0,this.goToRandomBlock())))}},{key:"viveControllerRightMenuEventsUp",value:function(e){this.VRInteractionReady&&(this.buttonInfoMat.map=this.buttonInfoMap,this.buttonInfoMat.needsUpdate=!0)}},{key:"viveControllerLeftMenuEventsUp",value:function(e){}},{key:"viveControllerLeftMenuEvents",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"viveControllerRightMenuEvents",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.VRInteractionReady){e.next=2;break}return e.abrupt("return");case 2:if(!this.state.animatingCamera){e.next=4;break}return e.abrupt("return");case 4:if(!this.audioManager.narrationPlaying){e.next=8;break}this.audioManager.stopNarration(),e.next=35;break;case 8:this.audioManager.masterBus.gain.setTargetAtTime(.1,this.audioManager.audioContext.currentTime,2),this.buttonInfoMat.map=this.buttonInfoMapPressed,this.buttonInfoMat.needsUpdate=!0,e.t0=this.state.controlType,e.next="underside"===e.t0?14:"top"===e.t0?19:33;break;case 14:return e.next=16,this.audioManager.playNarrationFile("merkle-tree","1");case 16:return e.next=18,this.audioManager.playNarrationFile("merkle-tree","2");case 18:return e.abrupt("break",34);case 19:if(this.closestHeight!==this.maxHeight){e.next=24;break}return e.next=22,this.audioManager.playNarrationFile("latest","1");case 22:e.next=32;break;case 24:return e.next=26,this.audioManager.playNarrationFile("transactions","1");case 26:return e.next=28,this.audioManager.playNarrationFile("transactions","2");case 28:return e.next=30,this.audioManager.playNarrationFile("transactions","3");case 30:return e.next=32,this.audioManager.playNarrationFile("transactions","4");case 32:case 33:return e.abrupt("break",34);case 34:this.audioManager.masterBus.gain.setTargetAtTime(.8,this.audioManager.audioContext.currentTime,2);case 35:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendWsMessage",value:function(e){this.ws.send(JSON.stringify({op:e}))}},{key:"receiveWsMessage",value:function(e){var t=JSON.parse(e.data);"utx"===t.op&&console.log(t.x)}},{key:"addClosestBlockDetail",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o,a,s,c,l,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closestBlock){e.next=2;break}return e.abrupt("return");case 2:if(this.setState({closestBlock:this.closestBlock}),this.deselectTx(),this.addBlockHeightVRText(this.closestBlock.blockData),this.addBlockDetailsVRText(this.closestBlock.blockData),t=this.planeGenerator.blockHeightIndex[this.closestBlock.blockData.height],this.originOffset=new h.Vector2(this.plane.geometry.attributes.planeOffset.array[t+0],this.plane.geometry.attributes.planeOffset.array[t+1]),!this.controls||"top"!==this.state.controlType&&"underside"!==this.state.controlType||(this.controls.currentBlockPos=new h.Vector3(this.plane.geometry.attributes.planeOffset.array[t+0],0,this.plane.geometry.attributes.planeOffset.array[t+1])),"undefined"!==typeof(n=this.crystalGenerator.txIndexOffsets[this.closestBlock.blockData.height])){e.next=13;break}return console.log({txIndexOffset:n}),e.abrupt("return");case 13:for(r=new h.Quaternion(this.crystal.geometry.attributes.quaternion.array[4*n+0],this.crystal.geometry.attributes.quaternion.array[4*n+1],this.crystal.geometry.attributes.quaternion.array[4*n+2],this.crystal.geometry.attributes.quaternion.array[4*n+3]),this.closestBlockOffsets=new Float32Array(3*this.closestBlock.blockData.n_tx),this.closestBlockOffsets2D=new Float32Array(2*this.closestBlock.blockData.n_tx),this.closestBlockScales=new Float32Array(this.closestBlock.blockData.n_tx),this.closestBlockTXValues=new Float32Array(this.closestBlock.blockData.n_tx),this.closestBlockSpentRatios=new Float32Array(this.closestBlock.blockData.n_tx),i=0;i<this.closestBlock.blockData.n_tx;i++)this.closestBlockOffsets[3*i+0]=this.crystal.geometry.attributes.offset.array[3*n+(3*i+0)],this.closestBlockOffsets[3*i+1]=this.crystal.geometry.attributes.offset.array[3*n+(3*i+1)],this.closestBlockOffsets[3*i+2]=this.crystal.geometry.attributes.offset.array[3*n+(3*i+2)],this.closestBlockOffsets2D[2*i+0]=this.crystalGenerator.offsetsArray2D[2*n+(2*i+0)],this.closestBlockOffsets2D[2*i+1]=this.crystalGenerator.offsetsArray2D[2*n+(2*i+1)];for(o=0;o<this.closestBlock.blockData.n_tx;o++)this.closestBlockTXValues[o]=this.crystalGenerator.txValuesArray[n+o],this.closestBlockScales[o]=this.crystal.geometry.attributes.scale.array[n+o],this.closestBlockSpentRatios[o]=this.crystal.geometry.attributes.spentRatio.array[n+o];this.pickerGenerator.updateGeometry(this.closestBlock,this.closestBlockOffsets,this.closestBlockScales),this.updateCollisionBox(r);for(a in this.audioManager.audioSources)this.audioManager.audioSources.hasOwnProperty(a)&&((a<this.closestBlock.blockData.height-3||a>this.closestBlock.blockData.height+3)&&(this.audioManager.audioSources[a].stop(),delete this.audioManager.audioSources[a],delete this.audioManager.buffers[a],delete this.audioManager.gainNodes[a]),clearTimeout(this.audioManager.loops[a]));return this.config.detector.isMobile||this.createCubeMap(new h.Vector3(this.plane.geometry.attributes.planeOffset.array[t+0],100,this.plane.geometry.attributes.planeOffset.array[t+1])),this.updateClosestTrees(),"undefined"===typeof this.audioManager.buffers[this.closestBlock.blockData.height]&&(this.audioEnabled&&this.audioManager.generate(this.closestBlock.blockData,this.closestBlockTXValues,this.closestBlockSpentRatios),this.crystalGenerator.updateBlockStartTimes(this.closestBlock.blockData),this.crystalAOGenerator.updateBlockStartTimes(this.closestBlock.blockData)),this.group.position.x=this.originOffset.x,this.group.position.z=this.originOffset.y,this.updateOriginOffsets(),s=null,c=this.blockGeoDataObject[this.closestBlock.blockData.height-1],l=this.blockGeoDataObject[this.closestBlock.blockData.height+1],p=this.closestBlock.blockData.n_tx,e.next=36,this.circuit.draw(p,this.closestBlock,this.closestBlockOffsets2D);case 36:s=e.sent,"undefined"!==typeof c?"undefined"===typeof this.audioManager.buffers[c.blockData.height]&&(this.crystalGenerator.updateBlockStartTimes(c.blockData),this.crystalAOGenerator.updateBlockStartTimes(c.blockData)):this.undersideL.visible=!1,"undefined"!==typeof l?"undefined"===typeof this.audioManager.buffers[l.blockData.height]&&(this.crystalGenerator.updateBlockStartTimes(l.blockData),this.crystalAOGenerator.updateBlockStartTimes(l.blockData)):this.undersideR.visible=!1,s&&this.updateMerkleDetail(this.closestBlock,0,s);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateCollisionBox",value:function(e){this.boundingBoxObj.rotation.x=0,this.boundingBoxObj.rotation.y=0,this.boundingBoxObj.rotation.z=0,this.boundingBoxObj.updateMatrix(!0),this.boundingBoxObj.updateMatrixWorld(!0);var t=this.blockPositions[2*this.closestBlock.blockData.height+0],n=this.blockPositions[2*this.closestBlock.blockData.height+1];this.boundingBoxObj.position.x=t,this.boundingBoxObj.position.z=n,this.boundingBoxObj.applyQuaternion(e),this.boundingBoxObj.rotateX(Math.PI/2),this.boundingBoxObj.updateMatrix(!0),this.boundingBoxObj.updateMatrixWorld(!0),this.boundingBoxObj.geometry.computeBoundingBox(),this.boundingBoxObj.updateMatrixWorld(!0),this.boxMatrixInverse=(new h.Matrix4).getInverse(this.boundingBoxObj.matrixWorld);var r=this.boundingBoxObj.clone();r.applyMatrix(this.boxMatrixInverse),this.boundingBox=(new h.Box3).setFromObject(r),this.boundingBoxOuter=this.boundingBox.clone(),this.boundingBoxOuter.expandByVector(new h.Vector3(100,300,500)),this.controls&&this.controls.updateClosestBlockBBox(this.boundingBox,this.boxMatrixInverse,this.boundingBoxOuter)}},{key:"updateOriginOffsets",value:function(){this.planeGenerator.updateOriginOffset(this.originOffset),this.crystalGenerator.updateOriginOffset(this.originOffset),this.crystalAOGenerator.updateOriginOffset(this.originOffset),this.diskGenerator.updateOriginOffset(this.originOffset),this.config.detector.isMobile||(this.occlusionGenerator.updateOriginOffset(this.originOffset),this.txGenerator.updateOriginOffset(this.originOffset)),this.treeGenerator.updateOriginOffset(this.originOffset)}},{key:"updateClosestTrees",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.treeGenerator.get(this.closestBlock.blockData,0);case 2:if(t=e.sent,this.centerTree&&this.group.remove(this.centerTree),this.centerTree=t,this.centerTree.material=this.treeGenerator.materialC,this.centerTree.renderOrder=0,this.group.add(t),"undefined"===typeof this.blockGeoDataObject[this.closestBlock.blockData.height-1]){e.next=17;break}return e.next=11,this.treeGenerator.get(this.blockGeoDataObject[this.closestBlock.blockData.height-1].blockData,1);case 11:n=e.sent,this.lTree&&this.group.remove(this.lTree),this.lTree=n,this.lTree.material=this.treeGenerator.materialL,this.lTree.renderOrder=0,this.group.add(this.lTree);case 17:if("undefined"===typeof this.blockGeoDataObject[this.closestBlock.blockData.height+1]){e.next=26;break}return e.next=20,this.treeGenerator.get(this.blockGeoDataObject[this.closestBlock.blockData.height+1].blockData,2);case 20:r=e.sent,this.rTree&&this.group.remove(this.rTree),this.rTree=r,this.rTree.material=this.treeGenerator.materialR,this.rTree.renderOrder=0,this.group.add(this.rTree);case 26:for(i=0;i<this.trees.geometry.attributes.display.array.length;i++)this.trees.geometry.attributes.display.array[i]=1;o=this.treeGenerator.indexHeightMap[this.closestBlock.blockData.height],this.trees.geometry.attributes.display.array[o]=0,"undefined"!==typeof this.blockGeoDataObject[this.closestBlock.blockData.height-1]&&"undefined"!==typeof this.treeGenerator.indexHeightMap[this.closestBlock.blockData.height-1]&&(o=this.treeGenerator.indexHeightMap[this.closestBlock.blockData.height-1],this.trees.geometry.attributes.display.array[o]=0),"undefined"!==typeof this.blockGeoDataObject[this.closestBlock.blockData.height+1]&&"undefined"!==typeof this.treeGenerator.indexHeightMap[this.closestBlock.blockData.height+1]&&(o=this.treeGenerator.indexHeightMap[this.closestBlock.blockData.height+1],this.trees.geometry.attributes.display.array[o]=0),this.trees.geometry.attributes.display.needsUpdate=!0;case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateMerkleDetail",value:function(e,t,n){var r=void 0;switch(t){case 0:r=this.underside;break;case 1:r=this.undersideL;break;case 2:r=this.undersideR}var i=this.crystalGenerator.txIndexOffsets[e.blockData.height],o=new h.Quaternion(this.crystal.geometry.attributes.quaternion.array[4*i+0],this.crystal.geometry.attributes.quaternion.array[4*i+1],this.crystal.geometry.attributes.quaternion.array[4*i+2],this.crystal.geometry.attributes.quaternion.array[4*i+3]);n.minFilter=h.LinearMipMapLinearFilter,n.magFilter=h.LinearFilter,n.generateMipmaps=!0,n.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),r.material.map=n,r.rotation.x=0,r.rotation.y=0,r.rotation.z=0,r.position.x=e.blockData.pos.x-this.originOffset.x,r.position.z=e.blockData.pos.z-this.originOffset.y,r.applyQuaternion(o),r.rotateX(Math.PI/2),r.updateMatrix(),r.visible=!0}},{key:"initScene",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.group=new h.Group,t.scene=new h.Scene,t.scene.add(t.group),t.scene.fog=new h.FogExp2(H.a.scene.bgColor,H.a.scene.fogDensity),t.cubeMap=(new h.CubeTextureLoader).setPath("assets/images/textures/cubemaps/space/").load(["rt.png","lf.png","up.png","dn.png","ft.png","bk.png"],function(){t.scene.background=t.cubeMap,e()})}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"onVRControllerSelect",value:function(){if(this.lastSelectedID===this.lastHoveredID)this.deselectTx();else if(this.txIsHovered){if(this.viveTriggerPressed1&&this.viveTriggerPressed2)return;this.lastSelectedID=this.lastHoveredID,"undefined"!==typeof this.pickerGenerator.txMap[this.lastHoveredID]&&(this.selectedTXHash=this.pickerGenerator.txMap[this.lastHoveredID],this.selectTX(this.lastSelectedID,this.selectedTXHash))}else this.deselectTx()}},{key:"initViveControllers",value:function(){this.camera.remove(this.viveController1),this.camera.remove(this.viveController2),this.viveController1=this.renderer.vr.getController(0),this.viveController1.frustumCulled=!1,this.viveController1.renderOrder=-1,this.camera.add(this.viveController1),this.viveController2=this.renderer.vr.getController(1),this.viveController2.frustumCulled=!1,this.viveController2.renderOrder=-1,this.camera.add(this.viveController2),this.OBJLoader.setPath("assets/models/obj/vive-controller/"),this.OBJLoader.load("vr_controller_vive_1_5.obj",function(e){this.textureLoader.setPath("assets/models/obj/vive-controller/");var t=e.children[0];t.material.map=this.textureLoader.load("onepointfive_texture.png"),t.material.specularMap=this.textureLoader.load("onepointfive_spec.png"),t.frustumCulled=!1,t.renderOrder=-1,this.viveController1MeshGroup.rotateX(Math.PI/4.4),this.viveController1MeshGroup.translateZ(-.08),this.viveController2MeshGroup.rotateX(Math.PI/4.4),this.viveController2MeshGroup.translateZ(-.08),this.viveController1MeshGroup.add(t.clone()),this.viveController2MeshGroup.add(t.clone()),this.viveController1.renderOrder=-1,this.viveController2.renderOrder=-1,this.viveController1.add(this.viveController1MeshGroup),this.viveController2.add(this.viveController2MeshGroup)}.bind(this))}},{key:"initCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.vrActive=e,this.camera&&this.scene.remove(this.camera),this.cameraMain&&this.scene.remove(this.cameraMain),this.cameraMain=new h.PerspectiveCamera(this.config.camera.fov,window.innerWidth/window.innerHeight,1,5e6),e?(this.camera=new h.PerspectiveCamera,this.camera.add(this.cameraMain),this.initViveControllers()):(this.camera=this.cameraMain,this.camera.remove(this.viveController1),this.camera.remove(this.viveController2)),window.camera=this.camera,"lite"===this.config.scene.mode?(this.camera.position.x=this.blockPositions[2*this.maxHeight+0],this.camera.position.y=this.autoPilotYPos,this.camera.position.z=this.blockPositions[2*this.maxHeight+1],this.camera.lookAt(new h.Vector3(this.blockPositions[2*(this.maxHeight-1)+0],this.autoPilotYPos,this.blockPositions[2*(this.maxHeight-1)+1]))):(this.camera.position.x=this.config.camera.initPos.x,this.camera.position.y=this.config.camera.initPos.y,this.camera.position.z=this.config.camera.initPos.z,this.camera.lookAt(this.config.camera.initTarget)),this.cameraMain.fov=this.config.camera.fov,this.cameraMain.updateMatrixWorld(),this.camera.updateMatrixWorld()}},{key:"addBlockHeightVRText",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.vrActive){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.textGenerator.create({text:"// BLOCK "+t.height+" "+t.hash,position:{x:-10,y:-5,z:-10},width:1400,align:"left",scale:.0095,lineHeight:48});case 4:n=e.sent,n.renderOrder=0,this.camera.remove(this.blockHeightTextMesh),this.blockHeightTextMesh=n,this.camera.add(this.blockHeightTextMesh);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"addBlockDetailsVRText",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.vrActive){e.next=2;break}return e.abrupt("return");case 2:return n=t.healthRatio>1?1:t.healthRatio,r=(1-n).toFixed(1),e.next=6,this.textGenerator.create({text:"\n      // BLOCK "+t.height+"\n      \n      HEALTH: "+r+" / 1.0\n      NO. OF TX: "+t.n_tx+"\n      OUTPUT TOTAL: "+(t.outputTotal/1e8).toFixed(2)+" BTC\n      FEES: "+(t.fee/1e8).toFixed(2)+" BTC\n      DATE: "+_.a.unix(t.time).format("YYYY-MM-DD HH:mm:ss")+"\n      BITS: "+t.bits+"\n      SIZE: "+t.size/1e3+" KB\n      HEIGHT: "+t.height+"\n      MERKLE ROOT: "+t.mrkl_root.substring(0,10)+"...\n      NONCE: "+t.nonce+"\n      VERSION: "+t.ver+"\n      ",position:{x:7,y:4,z:-10},width:600,align:"left",scale:.008,lineHeight:48});case 6:i=e.sent,i.renderOrder=0,this.camera.remove(this.blockDetailsTextMesh),this.blockDetailsTextMesh=i,this.camera.add(this.blockDetailsTextMesh);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"addTXDetailsVRText",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.vrActive){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.textGenerator.create({text:"\n      TX-"+t.hash.substring(0,24)+"\n      "+_.a.unix(t.time).format("YYYY-MM-DD HH:mm:ss")+"\n      "+t.size+" BYTES\n      FEE: "+t.fee+" BTC\n      OUTPUT TOTAL: "+t.outTotal.toFixed(2)+" BTC\n      ",position:{x:-2.5,y:-2,z:-9},width:1400,align:"left",scale:.0085,lineHeight:48});case 4:n=e.sent,n.renderOrder=0,this.cameraMain.remove(this.txDetailsTextMesh),this.txDetailsTextMesh=n,this.cameraMain.add(this.txDetailsTextMesh),r=this,r.txDetailsTextMesh.material.uniforms.opacity.value=1,new M.a.Tween({opacity:1}).to({opacity:0},6e3).onUpdate(function(){r.txDetailsTextMesh.material.uniforms.opacity.value=this.opacity}).easing(this.defaultCamEasing).start();case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"hideVRText",value:function(){this.camera.remove(this.blockHeightTextMesh),this.camera.remove(this.blockDetailsTextMesh),this.cameraMain.remove(this.txDetailsTextMesh)}},{key:"initRenderer",value:function(e){this.canvas=document.getElementById(this.config.scene.canvasID);var t="high"===e;this.renderer=new h.WebGLRenderer({antialias:t,logarithmicDepthBuffer:!0,canvas:this.canvas}),this.renderer.toneMapping=h.Uncharted2ToneMapping,this.renderer.powerPreference="high-performance",this.WebVRLib.setRenderer(this.renderer)}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.cameraMain.aspect=this.width/this.height,this.cameraMain.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height,!1),this.controllerCam&&(this.controllerCam.aspect=this.width/this.height,this.controllerCam.updateProjectionMatrix()),this.pickingTexture&&this.pickingTexture.setSize(this.width,this.height);var e="symphony";this.width>this.height?e+=" landscape":e+=" portrait",this.setState({UIClass:e})}},{key:"toggleSidebar",value:function(){this.setState({sidebarOpen:!this.state.sidebarOpen})}},{key:"closeSidebar",value:function(){this.setState({sidebarOpen:!1,txSearchOpen:!1,blockSearchOpen:!1,dateSearchOpen:!1})}},{key:"openSidebar",value:function(){this.setState({sidebarOpen:!0})}},{key:"searchFocus",value:function(e){e.target.focus()}},{key:"gotoPrevBlock",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o,a,s,c=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.animatingCamera){e.next=2;break}return e.abrupt("return");case 2:if(!(this.closestBlock.blockData.height-1<0)){e.next=4;break}return e.abrupt("return");case 4:this.loadNearestBlocks(!0,this.closestBlock.blockData.height-1),this.prepareCamNavigation({stopAudio:!1}),t=this.blockPositions[2*(this.closestBlock.blockData.height-1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height-1)+1],r=void 0,i=void 0,o=new h.Vector3(t,this.topViewYPos,n),e.t0=this.state.controlType,e.next="top"===e.t0?14:"underside"===e.t0?18:"side"===e.t0?22:28;break;case 14:return i=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),r=new h.Vector3(o.x,this.topViewYPos,o.z).add(i.normalize().multiplyScalar(.01)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",29);case 18:return i=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),r=new h.Vector3(o.x,this.undersideViewYPos,o.z).add(i.normalize().multiplyScalar(20)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",29);case 22:return i=new h.Vector3(o.x,-15,o.z),a=500,this.config.detector.isMobile&&(a=800),r=new h.Vector3(o.x,-15,o.z).add(i.normalize().multiplyScalar(a)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:s=this,new M.a.Tween(this.camera.position).to(this.camPosTo,2500).onUpdate(function(){s.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){switch(c.setState({animatingCamera:!1}),c.state.controlType){case"top":c.toggleMapControls(new h.Vector3(t,0,n),"positive");break;case"underside":c.toggleMapControls(new h.Vector3(t,0,n),"negative")}}).easing(this.defaultCamEasing).start(),this.animateCamRotation(2500);case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"gotoNextBlock",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i,o,a,s,c=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.animatingCamera){e.next=2;break}return e.abrupt("return");case 2:if(!(this.closestBlock.blockData.height+1>this.maxHeight)){e.next=4;break}return e.abrupt("return");case 4:this.loadNearestBlocks(!0,this.closestBlock.blockData.height+1),this.hideMerkleDetail(),this.prepareCamNavigation({stopAudio:!1}),t=this.blockPositions[2*(this.closestBlock.blockData.height+1)+0],n=this.blockPositions[2*(this.closestBlock.blockData.height+1)+1],r=void 0,i=void 0,o=new h.Vector3(t,this.topViewYPos,n),e.t0=this.state.controlType,e.next="top"===e.t0?15:"underside"===e.t0?19:"side"===e.t0?23:29;break;case 15:return i=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),r=new h.Vector3(o.x,this.topViewYPos,o.z).add(i.normalize().multiplyScalar(.01)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",30);case 19:return i=new h.Vector3(this.closestBlock.blockData.pos.x,0,this.closestBlock.blockData.pos.z),r=new h.Vector3(o.x,this.undersideViewYPos,o.z).add(i.normalize().multiplyScalar(20)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",30);case 23:return i=new h.Vector3(o.x,-15,o.z),a=500,this.config.detector.isMobile&&(a=800),r=new h.Vector3(o.x,-15,o.z).add(i.normalize().multiplyScalar(a)),this.prepareCamAnim(r,new h.Vector3(t,0,n)),e.abrupt("break",30);case 29:return e.abrupt("break",30);case 30:s=this,new M.a.Tween(this.camera.position).to(this.camPosTo,2500).onUpdate(function(){s.camera.position.set(this.x,this.y,this.z)}).onComplete(function(){switch(c.setState({animatingCamera:!1}),c.state.controlType){case"top":c.toggleMapControls(new h.Vector3(t,0,n),"positive");break;case"underside":c.toggleMapControls(new h.Vector3(t,0,n),"negative")}}).easing(this.defaultCamEasing).start(),this.animateCamRotation(2500);case 33:case"end":return e.stop()}},e,this)}));return e}()},{key:"lookupTXFromHash",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.prepareCamNavigation(),this.setState({controlType:"top"}),e.prev=2,e.next=5,window.fetch("https://blockchain.info/rawtx/"+this.state.searchTXHash+"?cors=true&format=json&apiCode="+this.config.blockchainInfo.apiCode);case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,this.goToBlock(n.block_height,!1,"normal",n.tx_index),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[2,12]])}));return e}()},{key:"animateCamRotation",value:function(e){var t={t:0};this.cameraMainRotationTween=new M.a.Tween(t).to({t:1},e).onUpdate(function(){h.Quaternion.slerp(this.camFromQuaternion,this.camToQuaternion,this.camMoveQuaternion,t.t),this.camera.quaternion.set(this.camMoveQuaternion.x,this.camMoveQuaternion.y,this.camMoveQuaternion.z,this.camMoveQuaternion.w)}.bind(this)).easing(this.defaultCamEasing).start()}},{key:"updateSearchTXHash",value:function(e){var t=e.target.value.trim();t&&this.setState({searchTXHash:t})}},{key:"updateSearchBlockHash",value:function(e){var t=e.target.value.trim();t&&this.setState({searchBlockHash:t})}},{key:"lookupBlockFromHash",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.prepareCamNavigation(),this.setState({controlType:"top"}),t=!0,32!==this.state.searchBlockHash.length&&64!==this.state.searchBlockHash.length&&128!==this.state.searchBlockHash.length&&256!==this.state.searchBlockHash.length&&(t=!1),n=void 0,e.prev=5,r=void 0,i=void 0,!t){e.next=18;break}return e.next=11,window.fetch("https://blockchain.info/rawblock/"+this.state.searchBlockHash+"?cors=true&apiCode="+this.config.blockchainInfo.apiCode);case 11:return r=e.sent,e.next=14,r.json();case 14:i=e.sent,n=i.height,e.next=19;break;case 18:n=parseInt(this.state.searchBlockHash,10);case 19:if(!(n<0||n>this.maxHeight||n===this.closestHeight)){e.next=23;break}return e.abrupt("return");case 23:this.goToBlock(n);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5),console.log(e.t0);case 29:case"end":return e.stop()}},e,this,[[5,26]])}));return e}()},{key:"playButtonSound",value:function(){Math.random()>.5?this.audioManager.playAudioFile("io"):this.audioManager.playAudioFile("io2")}},{key:"muteAudio",value:function(){this.setState({audioMuted:!0}),this.audioManager.muteMaster()}},{key:"unMuteAudio",value:function(){this.setState({audioMuted:!1}),this.audioManager.unMuteMaster()}},{key:"setLoadingState",value:function(){this.setState({loading:!0,qualitySelected:!0})}},{key:"toggleInfoOverlay",value:function(){this.setState({showInfoOverlay:!1})}},{key:"closeFlyInfo",value:function(){this.setState({flyControlsInteractionCount:this.state.flyControlsInteractionCount+1})}},{key:"UITXSearchBox",value:function(){var e=this;if(this.state.txSearchOpen)return l.a.createElement("div",{className:"search-container"},l.a.createElement("h2",null,"Enter Transaction Hash"),l.a.createElement("button",{className:"search-box-close",onClick:this.closeSearch.bind(this)},"X"),l.a.createElement("input",{autoFocus:"true",className:"search-box",onChange:this.updateSearchTXHash.bind(this),onClick:function(t){e.searchFocus(t)}}),l.a.createElement("button",{className:"search-action",onClick:this.lookupTXFromHash.bind(this)}))}},{key:"UIBlockSearchBox",value:function(){var e=this;if(this.state.blockSearchOpen)return l.a.createElement("div",{className:"search-container"},l.a.createElement("h2",null,"Enter Block Hash/Height"),l.a.createElement("button",{className:"search-box-close",onClick:this.closeSearch.bind(this)},"X"),l.a.createElement("input",{autoFocus:"true",className:"search-box",onChange:this.updateSearchBlockHash.bind(this),onClick:function(t){e.searchFocus(t)}}),l.a.createElement("button",{className:"search-action",onClick:this.lookupBlockFromHash.bind(this)}))}},{key:"UIDateSearchBox",value:function(){if(this.state.dateSearchOpen)return l.a.createElement("div",{className:"search-container"},l.a.createElement("h2",null,"Enter Date"),l.a.createElement("button",{className:"search-box-close",onClick:this.closeSearch.bind(this)},"X"),l.a.createElement(R.a,{selected:this.state.currentDate,onChange:this.goToDate.bind(this),minDate:new Date("3 January 2009"),maxDate:new Date}))}},{key:"UIRotateMessage",value:function(){return l.a.createElement("div",{className:"rotate-message"},l.a.createElement("div",{className:"phone"}),l.a.createElement("div",{className:"message"},"Please rotate your device!"))}},{key:"UI",value:function(){return l.a.createElement("div",{className:"symphony-ui"},l.a.createElement(U.a,{toggleSidebar:this.toggleSidebar.bind(this),toggleBlockSearch:this.toggleBlockSearch.bind(this),toggleTxSearch:this.toggleTxSearch.bind(this),goToRandomBlock:this.goToRandomBlock.bind(this),toggleDateSearch:this.toggleDateSearch.bind(this),goToBlock:this.goToBlock.bind(this),goToDate:this.goToDate.bind(this),sidebarOpen:this.state.sidebarOpen,maxHeight:this.maxHeight,animatingCamera:this.state.animatingCamera}),this.UITXSearchBox(),this.UIBlockSearchBox(),this.UIDateSearchBox(),l.a.createElement(L.a,{config:this.config,posX:this.state.posX,posY:this.state.posY,posZ:this.state.posZ,closestBlock:this.state.closestBlock,controlType:this.state.controlType,txSelected:this.state.txSelected,toggleAutoPilotDirection:this.toggleAutoPilotDirection.bind(this),toggleTopView:this.toggleTopView.bind(this),toggleUndersideView:this.toggleUndersideView.bind(this),toggleSideView:this.toggleSideView.bind(this),toggleFlyControls:this.toggleFlyControls.bind(this),stopAutoPilot:this.stopAutoPilot.bind(this),gotoPrevBlock:this.gotoPrevBlock.bind(this),gotoNextBlock:this.gotoNextBlock.bind(this),maxHeight:this.maxHeight,flyControlsInteractionCount:this.state.flyControlsInteractionCount,closeFlyInfo:this.closeFlyInfo.bind(this),showInfoOverlay:this.state.showInfoOverlay,toggleInfoOverlay:this.toggleInfoOverlay.bind(this),playButtonSound:this.playButtonSound.bind(this),muteAudio:this.muteAudio.bind(this),unMuteAudio:this.unMuteAudio.bind(this),audioMuted:this.state.audioMuted}))}},{key:"UIQualityScreen",value:function(){var e=this;if(!this.state.qualitySelected){var t="loading-container";return this.state.loading||(t+=" loaded"),l.a.createElement("div",{className:t},l.a.createElement("video",{className:"video-bg",autoPlay:!0,loop:!0,muted:!0},l.a.createElement("source",{src:"./assets/video/loop.mp4",type:"video/mp4"})),l.a.createElement("div",{className:"logo-container"},l.a.createElement("img",{className:"symphony-logo",src:ae.a,alt:"Symphony Logo",onClick:function(){e.initStage("high")}}),l.a.createElement("h1",null,"Symphony"),l.a.createElement("h2",null,"3D Blockchain Explorer"),l.a.createElement("p",{className:"headphone-hint"},"Headphones",l.a.createElement("br",null),"Recommended"),l.a.createElement("i",{className:"fas fa-headphones-alt"}),l.a.createElement("p",{className:"choose-quality"},"Choose Quality:"),l.a.createElement("a",{className:"quality-select",onClick:function(){e.initStage("high")},tooltip:"For computers with modern graphics cards"},"HIGH"),l.a.createElement("a",{className:"quality-select",onClick:function(){e.initStage("low")},tooltip:"For Computers with low power graphics cards"},"MEDIUM")))}}},{key:"UILogo",value:function(){for(var e=[],t=1;t<=30;t++){var n="logo-"+t;100/30*t<=100-this.state.loadProgress&&(n+=" hidden"),e.push(l.a.createElement("span",{className:n,key:t}))}return e}},{key:"UILoadingScreen",value:function(){if(this.state.qualitySelected){var e="loading-container";return this.state.loading||(e+=" loaded"),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"logo-container"},l.a.createElement("div",{className:"loading-logo"},this.UILogo()),l.a.createElement("h1",null,"LOADING")))}}},{key:"UIStart",value:function(){return this.state.loading||this.state.started?l.a.createElement("div",null):l.a.createElement("div",{className:"start-container"},l.a.createElement("h1",{onClick:this.startIntro.bind(this)},"ENTER"))}},{key:"UIIntro",value:function(){if(this.state.showIntro)return l.a.createElement("div",{className:"intro-container"},l.a.createElement("h1",{className:1===this.state.activeIntro?"show":""},"This is the Bitcoin Blockchain"),l.a.createElement("h1",{className:2===this.state.activeIntro?"show":""},"Blocks spiral outward from the center, starting with the latest block"),l.a.createElement("h1",{className:3===this.state.activeIntro?"show":""},"A new block is created roughly every 10 minutes"),l.a.createElement("h1",{className:4===this.state.activeIntro?"show":""},"The mempool sits at the center, unconfirmed transactions gather here"),l.a.createElement("h1",{className:5===this.state.activeIntro?"show":""},"There are currently ",this.unconfirmedCount.toLocaleString("en")," unconfirmed transactions"),l.a.createElement("h1",{className:6===this.state.activeIntro?"show":""},"There are ",this.maxHeight.toLocaleString("en")," blocks so far..."))}},{key:"render",value:function(){return l.a.createElement("div",{className:this.state.UIClass},this.UIRotateMessage(),this.UIIntro(),this.UIQualityScreen(),this.UILoadingScreen(),l.a.createElement("canvas",{className:"symphony-stage",id:this.config.scene.canvasID}),this.UI(),l.a.createElement(N.a,{initCamera:this.initCamera.bind(this),startVRSession:this.WebVRLib.startVRSession.bind(this.WebVRLib),endVRSession:this.WebVRLib.endVRSession.bind(this.WebVRLib),VRSupported:this.WebVRLib.VRSupported}))}}]),t}(v()(m.a,c.Component));t.a=ue},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function i(e,t,n){var r=t[n];if(void 0!==r&&null!==r){if(s.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");s.call(e,n)&&a(r)?e[n]=o(Object(e[n]),t[n]):e[n]=r}}function o(e,t){if(e===t)return e;t=Object(t);for(var n in t)s.call(t,n)&&i(e,t,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++)u.call(t,r[o])&&i(e,t,r[o]);return e}var a=n(112),s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=function(e){e=r(e);for(var t=1;t<arguments.length;t++)o(e,arguments[t]);return e}},function(e,t,n){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(module,exports,__webpack_require__){function mixin(e,t){var n=e;if(e.constructors){for(var r in e.constructors)if(e.constructors[r]===t)return e;e.constructors.unshift(t)}else e.constructors=[t,e],n=e.prototype.constructor=mixin_constructor(e.name,e),n.__proto__=e;if(n.prototype=insert_proto(e.prototype,t.prototype),insert_proto(n.__proto__,t),t.hasOwnProperty("included")){var i=t.included.call(t,n);i&&(n=i)}return n}function mixin_constructor(name,ctor){var str="function __ctor() { var c = ctor.constructors; for (var i in c) { c[i].apply(this, arguments); } }";return eval(str.replace(/__ctor/,name)),eval(name)}function insert_proto(e,t){var n=copyInto({},t);n.__mixed_in=!0;for(var r=e,i=e;r.__mixed_in;i=r,r=r.__proto__);return r==e&&(r.__mixed_in=!0),n.__proto__=i.__proto__,i.__proto__=n,e}function copyInto(e,t){var n=Object.getOwnPropertyNames(t);for(var r in n){var i=n[r];if("prototype"!==i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,o)}}return e}function inspect_protos(e,t){console.log(t+" = "+util.inspect(e));for(var n=0;e.__proto__;)e=e.__proto__,console.log("  __proto__["+n+"] = "+util.inspect(e)),++n}function alias(e,t,n,r){if(e[t+"_without_"+n])throw t+"_without_"+n+" already defined.";var i=e[t];e[t+"_without_"+n]=i,e[t+"_with_"+n]=e[t]=r}var util=__webpack_require__(114);mixin.copyInto=copyInto,mixin.alias=alias,module.exports=mixin},function(e,t,n){(function(e){function r(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,e,r.depth)}function i(e,t){var n=r.styles[t];return n?"\x1b["+r.colors[n][0]+"m"+e+"\x1b["+r.colors[n][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=s(e,i,r)),i}var o=u(e,n);if(o)return o;var d=Object.keys(n),m=a(d);if(e.showHidden&&(d=Object.getOwnPropertyNames(n)),E(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return c(n)}var v="",b=!1,_=["{","}"];if(f(n)&&(b=!0,_=["[","]"]),S(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(x(n)&&(v=" "+RegExp.prototype.toString.call(n)),T(n)&&(v=" "+Date.prototype.toUTCString.call(n)),E(n)&&(v=" "+c(n)),0===d.length&&(!b||0==n.length))return _[0]+v+_[1];if(r<0)return x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=b?l(e,n,r,m,d):d.map(function(t){return h(e,n,r,m,t,b)}),e.seen.pop(),p(w,v,_)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=m(n)?s(e,c.value,null):s(e,c.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function d(e){return"boolean"===typeof e}function m(e){return null===e}function g(e){return null==e}function v(e){return"number"===typeof e}function y(e){return"string"===typeof e}function b(e){return"symbol"===typeof e}function _(e){return void 0===e}function x(e){return w(e)&&"[object RegExp]"===C(e)}function w(e){return"object"===typeof e&&null!==e}function T(e){return w(e)&&"[object Date]"===C(e)}function E(e){return w(e)&&("[object Error]"===C(e)||e instanceof Error)}function S(e){return"function"===typeof e}function k(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function C(e){return Object.prototype.toString.call(e)}function M(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[M(e.getHours()),M(e.getMinutes()),M(e.getSeconds())].join(":");return[e.getDate(),U[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function I(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(D,t,a)})}if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,R(t)),n}var R=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},P=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(P,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];n<o;s=i[++n])m(s)||!w(s)?a+=" "+s:a+=" "+r(s);return a},t.deprecate=function(n,r){function i(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var L,N={};t.debuglog=function(n){if(_(L)&&(L=Object({NODE_ENV:"production",PUBLIC_URL:"/symphony-2"}).NODE_DEBUG||""),n=n.toUpperCase(),!N[n])if(new RegExp("\\b"+n+"\\b","i").test(L)){var r=e.pid;N[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else N[n]=function(){};return N[n]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=d,t.isNull=m,t.isNullOrUndefined=g,t.isNumber=v,t.isString=y,t.isSymbol=b,t.isUndefined=_,t.isRegExp=x,t.isObject=w,t.isDate=T,t.isError=E,t.isFunction=S,t.isPrimitive=k,t.isBuffer=n(115);var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(116),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var F="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(F&&e[F]){var t=e[F];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,F,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),F&&Object.defineProperty(t,F,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,R(e))},t.promisify.custom=F,t.callbackify=I}).call(t,n(42))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(13));e.exports=r},function(e,t,n){"use strict";var r=n(119);n.n(r)},function(e,t,n){"use strict";function r(){return Lt.logLevel===Ot.LogLevel.DEBUG?Mt.DEBUG:Lt.logLevel===Ot.LogLevel.SILENT?Mt.SILENT:Mt.ERROR}function i(e){switch(e){case Mt.DEBUG:Lt.logLevel=Ot.LogLevel.DEBUG;break;case Mt.ERROR:Lt.logLevel=Ot.LogLevel.ERROR;break;case Mt.SILENT:Lt.logLevel=Ot.LogLevel.SILENT;break;default:Lt.error("Firestore ("+Pt+"): Invalid value passed to `setLogLevel`")}}function o(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Lt.logLevel<=Ot.LogLevel.DEBUG){var i=n.map(s);Lt.debug.apply(Lt,["Firestore ("+Pt+") ["+e+"]: "+t].concat(i))}}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Lt.logLevel<=Ot.LogLevel.ERROR){var r=t.map(s);Lt.error.apply(Lt,["Firestore ("+Pt+"): "+e].concat(r))}}function s(e){if("string"===typeof e)return e;var t=Ut.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function u(e){var t="FIRESTORE ("+Pt+") INTERNAL ASSERTION FAILED: "+e;throw a(t),new Error(t)}function c(e,t){e||u(t)}function l(){return Ut.getPlatform().emptyByteString}function h(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Bt(Ft.INVALID_ARGUMENT,e)}n.prototype=e.prototype;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){return void 0!==e?e:t}function d(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function m(e){var t=[];return g(e,function(e,n){return t.push(n)}),t}function g(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function v(e){c(null!=e&&"object"===typeof e,"isEmpty() expects object parameter.");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function y(e){c(e&&"object"===typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function b(e,t){if(0!==t.length)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+G(t.length,"argument")+".")}function _(e,t,n){if(t.length!==n)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires "+G(n,"argument")+", but was called with "+G(t.length,"argument")+".")}function x(e,t,n){if(t.length<n)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires at least "+G(n,"argument")+", but was called with "+G(t.length,"argument")+".")}function w(e,t,n,r){if(t.length<n||t.length>r)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+G(t.length,"argument")+".")}function T(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+G(r,"element")+".")}function E(e,t,n,r){R(e,t,j(n)+" argument",r)}function S(e,t,n,r){void 0!==r&&E(e,t,n,r)}function k(e,t,n,r){R(e,t,n+" option",r)}function C(e,t,n,r){void 0!==r&&k(e,t,n,r)}function M(e,t,n,r,i){if(!(r instanceof Array))throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+L(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+L(r[o]))}function A(e,t,n,r,i){void 0!==r&&M(e,t,n,r,i)}function O(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(L(u))}var c=L(r);throw new Bt(Ft.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function D(e,t,n,r,i){void 0!==r&&O(e,t,n,r,i)}function I(e,t,n,r){if(!t.some(function(e){return e===r}))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid value "+L(r)+" provided to function "+e+"() for its "+j(n)+" argument. Acceptable values: "+t.join(", "))}function R(e,t,n,r){if(!("object"===t?P(r):"non-empty string"===t?"string"===typeof r&&""!==r:typeof r===t)){var i=L(r);throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function P(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function L(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"===typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"===typeof e||"boolean"===typeof e)return""+e;if("object"===typeof e){if(e instanceof Array)return"an array";var t=N(e);return t?"a custom "+t+" object":"an object"}return"function"===typeof e?"a function":u("Unknown wrong type: "+typeof e)}function N(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/,n=t.exec(e.constructor.toString());if(n&&n.length>1)return n[1]}return null}function U(e,t,n){if(void 0===n)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+j(t)+" argument, but it was undefined.")}function F(e,t,n){g(t,function(t,r){if(n.indexOf(t)<0)throw new Bt(Ft.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function B(e,t,n,r){var i=L(r);return new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+j(n)+" argument to be a "+t+", but it was: "+i)}function j(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function G(e,t){return e+" "+t+(1===e?"":"s")}function V(e,t){return e<t?-1:e>t?1:0}function z(e,t){return null!==e&&void 0!==e?!(!t||!e.isEqual(t)):e===t}function H(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function W(e){return e+"\0"}function q(){if("undefined"===typeof Uint8Array)throw new Bt(Ft.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Y(){if(!Ut.getPlatform().base64Available)throw new Bt(Ft.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function X(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Q(t)),t=K(e.get(n),t);return Q(t)}function K(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=tn+rn;break;case tn:n+=tn+on;break;default:n+=o}}return n}function Q(e){return e+tn+nn}function J(e){var t=e.length;if(c(t>=2,"Invalid path "+e),2===t)return c(e.charAt(0)===tn&&e.charAt(1)===nn,"Non-empty path "+e+" had length 2"),Xt.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(tn,o);(a<0||a>n)&&u('Invalid encoded resource path: "'+e+'"');switch(e.charAt(a+1)){case nn:var s=e.substring(o,a),l=void 0;0===i.length?l=s:(i+=s,l=i,i=""),r.push(l);break;case rn:i+=e.substring(o,a),i+="\0";break;case on:i+=e.substring(o,a+1);break;default:u('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Xt(r)}function Z(){return mn}function $(){return Z()}function ee(){return gn}function te(){return vn}function ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=yn,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function re(){return bn}function ie(e,t,n){var r=Jn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ce(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function oe(e,t){var n=!1;return le(e).iterateSerial(function(r){return ie(e,r,t).next(function(e){return e&&(n=!0),wn.resolve(!e)})}).next(function(){return n})}function ae(e,t,n){var r=e.store(Qn.store),i=e.store(Jn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){c(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],h=0,p=n.mutations;h<p.length;h++){var f=p[h],d=Jn.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return wn.waitFor(o).next(function(){return l})}function se(e){return e instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/symphony-2"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ue(e){return Ar.getStore(e,Qn.store)}function ce(e){return Ar.getStore(e,Jn.store)}function le(e){return Ar.getStore(e,Kn.store)}function he(e){return new wn(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=pe(e.target.error);n(t)}})}function pe(e){var t=Mn.getIOSVersion(It.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Bt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return In||(In=!0,setTimeout(function(){throw r},0)),r}}return e}function fe(e){return Ar.getStore(e,nr.store)}function de(e){return Ar.getStore(e,ir.store)}function me(e){return Mn.getStore(e,ir.store).get(ir.key).next(function(e){return c(null!==e,"Missing metadata row."),e})}function ge(e){return me(e).next(function(e){return e.highestListenSequenceNumber})}function ve(e){return Ar.getStore(e,rr.store)}function ye(e){return Ar.getStore(e,tr.store)}function be(e){return e.code===Ft.DATA_LOSS&&e.message===jn}function _e(e){return Ar.getStore(e,er.store)}function xe(e){return Ar.getStore(e,ar.store)}function we(e){return e.path.toArray()}function Te(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw u("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}function Ee(e){return[0,X(e)]}function Se(e){e.createObjectStore(Xn.store)}function ke(e){e.createObjectStore(Kn.store,{keyPath:Kn.keyPath}),e.createObjectStore(Qn.store,{keyPath:Qn.keyPath,autoIncrement:!0}).createIndex(Qn.userMutationsIndex,Qn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Jn.store)}function Ce(e,t){return t.store(Qn.store).loadAll().next(function(n){e.deleteObjectStore(Qn.store),e.createObjectStore(Qn.store,{keyPath:Qn.keyPath,autoIncrement:!0}).createIndex(Qn.userMutationsIndex,Qn.userMutationsKeyPath,{unique:!0});var r=t.store(Qn.store),i=n.map(function(e){return r.put(e)});return wn.waitFor(i)})}function Me(e){e.createObjectStore(er.store)}function Ae(e){e.createObjectStore(tr.store)}function Oe(e){e.createObjectStore(rr.store,{keyPath:rr.keyPath}).createIndex(rr.documentTargetsIndex,rr.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(nr.store,{keyPath:nr.keyPath}).createIndex(nr.queryTargetsIndexName,nr.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ir.store)}function De(e){e.deleteObjectStore(rr.store),e.deleteObjectStore(nr.store),e.deleteObjectStore(ir.store)}function Ie(e){var t=e.store(ir.store),n=new ir(0,0,sn.MIN.toTimestamp(),0);return t.put(ir.key,n)}function Re(e){e.createObjectStore(ar.store,{keyPath:"id",autoIncrement:!0})}function Pe(e){e.createObjectStore(sr.store,{keyPath:sr.keyPath})}function Le(e){return Ar.getStore(e,or.store)}function Ne(e){return void 0!==e.documents}function Ue(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=V(n,i);return 0===a?V(r,o):a}function Fe(e){return e.code===Ft.FAILED_PRECONDITION&&e.message===Sr}function Be(e){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(t){if(!Fe(e))throw e;return o(Er,"Unexpectedly lost primary lease"),[2]})})}function je(e){return e.store(Xn.store)}function Ge(e){return e.store(sr.store)}function Ve(e){return[0,X(e.path)]}function ze(e,t){return new rr(0,X(e.path),t)}function He(e,t){return ve(e).put(ze(t,e.currentSequenceNumber))}function We(e,t){return e<t?-1:e>t?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}function qe(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function Ye(){return new un(Jt.comparator)}function Xe(e){return null===e||void 0===e}function Ke(e){return bi(e)&&e<=yi&&e>=vi}function Qe(e){switch(e){case Ft.OK:return u("Treated status OK as error");case Ft.CANCELLED:case Ft.UNKNOWN:case Ft.DEADLINE_EXCEEDED:case Ft.RESOURCE_EXHAUSTED:case Ft.INTERNAL:case Ft.UNAVAILABLE:case Ft.UNAUTHENTICATED:return!1;case Ft.INVALID_ARGUMENT:case Ft.NOT_FOUND:case Ft.ALREADY_EXISTS:case Ft.PERMISSION_DENIED:case Ft.FAILED_PRECONDITION:case Ft.ABORTED:case Ft.OUT_OF_RANGE:case Ft.UNIMPLEMENTED:case Ft.DATA_LOSS:return!0;default:return u("Unknown status code: "+e)}}function Je(e){return Qe(e)&&e!==Ft.ABORTED}function Ze(e){var t=Di[e];if(void 0!==t)return $e(t)}function $e(e){if(void 0===e)return a("GRPC error has no .code"),Ft.UNKNOWN;switch(e){case Di.OK:return Ft.OK;case Di.CANCELLED:return Ft.CANCELLED;case Di.UNKNOWN:return Ft.UNKNOWN;case Di.DEADLINE_EXCEEDED:return Ft.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return Ft.RESOURCE_EXHAUSTED;case Di.INTERNAL:return Ft.INTERNAL;case Di.UNAVAILABLE:return Ft.UNAVAILABLE;case Di.UNAUTHENTICATED:return Ft.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return Ft.INVALID_ARGUMENT;case Di.NOT_FOUND:return Ft.NOT_FOUND;case Di.ALREADY_EXISTS:return Ft.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return Ft.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return Ft.FAILED_PRECONDITION;case Di.ABORTED:return Ft.ABORTED;case Di.OUT_OF_RANGE:return Ft.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return Ft.UNIMPLEMENTED;case Di.DATA_LOSS:return Ft.DATA_LOSS;default:return u("Unknown status code: "+e)}}function et(e){if(void 0===e)return Di.OK;switch(e){case Ft.OK:return Di.OK;case Ft.CANCELLED:return Di.CANCELLED;case Ft.UNKNOWN:return Di.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Di.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Di.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Di.INTERNAL;case Ft.UNAVAILABLE:return Di.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Di.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Di.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Di.NOT_FOUND;case Ft.ALREADY_EXISTS:return Di.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Di.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Di.FAILED_PRECONDITION;case Ft.ABORTED:return Di.ABORTED;case Ft.OUT_OF_RANGE:return Di.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Di.UNIMPLEMENTED;case Ft.DATA_LOSS:return Di.DATA_LOSS;default:return u("Unknown status code: "+e)}}function tt(e){var t=e.toLowerCase().replace("_","-");return Object.values(Ft).indexOf(t)>=0?t:Ft.UNKNOWN}function nt(){return new un(Jt.comparator)}function rt(){return new un(Jt.comparator)}function it(e){return e instanceof Yr?e.internalValue.slice():[]}function ot(e,t){c(!Xe(e),t+" is missing")}function at(e){return"number"===typeof e?e:"string"===typeof e?Number(e):u("can't parse "+e)}function st(e,t){var n=function(e){switch(e){case Ri.Added:return 1;case Ri.Modified:case Ri.Metadata:return 2;case Ri.Removed:return 0;default:return u("Unknown ChangeType: "+e)}};return n(e)-n(t)}function ut(e){var t=qt.INVALID;if(null!=e)try{var n=JSON.parse(e);c("number"===typeof n,"Found non-numeric sequence number"),t=n}catch(e){a(Do,"Failed to read sequence number from WebStorage",e)}return t}function ct(e){if(e.search(Ko)>=0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Xo.bind.apply(Xo,[void 0].concat(e.split("."))))}catch(t){throw new Bt(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function lt(e){if(!e)return new Jo;switch(e.type){case"gapi":var t=e.client;return c(!("object"!==typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ea(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Bt(Ft.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ht(e){return pt(e,["next","error","complete"])}function pt(e,t){if("object"!==typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}function ft(e){switch(e){case zi.Set:case zi.MergeSet:case zi.Update:return!0;case zi.Argument:return!1;default:throw u("Unexpected case for UserDataSource: "+e)}}function dt(e){return"object"===typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof an)&&!(e instanceof Ki)&&!(e instanceof Gt)&&!(e instanceof pa)&&!(e instanceof ta)}function mt(e,t,n){if(!dt(n)||!P(n)){var r=L(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function gt(e,t){if(t instanceof Xo)return t._internalPath;if("string"===typeof t)return vt(e,t);throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function vt(e,t){try{return ct(t)._internalPath}catch(t){var n=yt(t);throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function yt(e){return e instanceof Error?e.message:e.toString()}function bt(){throw new Bt(Ft.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function _t(e,t){if(void 0===t)return{merge:!1};if(F(e,t,["merge","mergeFields"]),C(e,"boolean","merge",t.merge),A(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"===typeof e||e instanceof Xo}),void 0!==t.mergeFields&&void 0!==t.merge)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function xt(e,t){return void 0===t?{}:(F(e,t,["serverTimestamps"]),D(e,"options","serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function wt(e,t){S(e,"object",1,t),t&&(F(e,t,["source"]),D(e,"options","source",t.source,["default","server","cache"]))}function Tt(e,t,n){if(t instanceof Ea){if(t.firestore!==n)throw new Bt(Ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw B(e,"DocumentReference",1,t)}function Et(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new Ca(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return c(t.type===Ri.Added,"Invalid event type for first snapshot"),c(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Ri.Metadata}).map(function(t){var r=new Ca(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==Ri.Added&&(i=o.indexOf(t.doc.key),c(i>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Ri.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:St(t.type),doc:r,oldIndex:i,newIndex:a}})}function St(e){switch(e){case Ri.Added:return"added";case Ri.Modified:case Ri.Metadata:return"modified";case Ri.Removed:return"removed";default:return u("Unknown change type: "+e)}}function kt(e){e.INTERNAL.registerService("firestore",function(e){return new xa(e)},y(ja))}function Ct(e){kt(e)}Object.defineProperty(t,"__esModule",{value:!0});var Mt,At=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(13)),Ot=n(44),Dt=n(14),It=n(43),Rt=n(120),Pt=At.SDK_VERSION,Lt=new Ot.Logger("@firebase/firestore");!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(Mt||(Mt={}));var Nt,Ut=function(){function e(){}return e.setPlatform=function(t){e.platform&&u("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||u("Platform not set"),e.platform},e}(),Ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bt=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Dt.__extends(t,e),t}(Error),jt=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return c(20===t.length,"Invalid auto ID: "+t),t},e}(),Gt=function(){function e(e){Y(),this._binaryString=e}return e.fromBase64String=function(t){_("Blob.fromBase64String",arguments,1),E("Blob.fromBase64String","string",1,t),Y();try{return new e(Ut.getPlatform().atob(t))}catch(e){throw new Bt(Ft.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(_("Blob.fromUint8Array",arguments,1),q(),!(t instanceof Uint8Array))throw B("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return _("Blob.toBase64",arguments,0),Y(),Ut.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){_("Blob.toUint8Array",arguments,0),q();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return V(this._binaryString,e._binaryString)},e}(),Vt=h(Gt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),zt=function(){function e(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}return e}(),Ht="(default)",Wt=function(){function e(e,t){this.projectId=e,this.database=t||Ht}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===Ht},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return V(this.projectId,e.projectId)||V(this.database,e.database)},e}(),qt=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),Yt=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&u("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&u("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):"string"===typeof t?n.push(t):u("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,c(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return c(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return c(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return c(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(Yt),Kt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.isValidIdentifier=function(e){return Kt.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Bt(Ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Bt(Ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Bt(Ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(Yt),Jt=function(){function e(t){this.path=t,c(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===Xt.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return Xt.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new Xt(t.slice()))},e.fromPathString=function(t){return new e(Xt.fromString(t))},e.EMPTY=new e(new Xt([])),e}(),Zt=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection"}(Nt||(Nt={}));var $t=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=Date.now()+r,s=new e(t,n,a,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bt(Ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),en=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw a("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),c(t>=0,"Attempted to schedule an operation with a negative delay of "+t),c(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=$t.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&u("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){c(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){c(e===Nt.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Nt.All&&i.timerId===e)break}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);c(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),tn="\x01",nn="\x01",rn="\x10",on="\x11",an=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bt(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bt(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bt(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bt(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?V(this.nanoseconds,e.nanoseconds):V(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),sn=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new an(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new an(0,0)),e}(),un=function(){function e(e,t){this.comparator=e,this.root=t||ln.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ln.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ln.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new cn(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new cn(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new cn(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new cn(this.root,e,this.comparator,!0)},e}(),cn=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){c(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ln=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw u("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw u("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw u("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),hn=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ln(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();ln.EMPTY=new hn;var pn,fn=function(){function e(e){this.comparator=e,this.data=new un(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new dn(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new dn(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),dn=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),mn=new un(Jt.comparator),gn=new un(Jt.comparator),vn=new un(Jt.comparator),yn=new fn(Jt.comparator),bn=new fn(V),_n=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,c(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&c(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;c(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&c(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=i.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var i=s[a];i.key.isEqual(e)&&(t=i.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},ne())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&H(this.mutations,e.mutations)&&H(this.baseMutations,e.baseMutations)},e}(),xn=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){c(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=te(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),wn=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&u("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=0,i=t;r<i.length;r++){var o=i[r];!function(t){n=n.next(function(n){return n?e.resolve(n):t()})}(o)}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),Tn=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return c(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ue(e).iterate({index:Qn.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=se(n),le(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=se(t),le(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=ce(e),a=ue(e);return a.add({}).next(function(s){c("number"===typeof s,"Auto-generated key is not a number");var u=new _n(s,t,n,r),l=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var h=[],p=0,f=r;p<f.length;p++){var d=f[p],m=Jn.key(i.userId,d.key.path,s);h.push(a.put(l)),h.push(o.put(m,Jn.PLACEHOLDER)),h.push(i.indexManager.addToCollectionParentIndex(e,d.key.path.popLast()))}return wn.waitFor(h).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ue(e).get(t).next(function(e){return e?(c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?wn.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ue(e).iterate({index:Qn.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(c(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ue(e).loadAll(Qn.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Jn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ce(e).iterate({range:i},function(r,i,a){var s=r[0],l=r[1],h=r[2],p=J(l);return s===n.userId&&t.path.isEqual(p)?ue(e).get(h).next(function(e){if(!e)throw u("Dangling document-mutation reference found: "+r+" which points to "+h);c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+h),o.push(n.serializer.fromDbMutationBatch(e))}):void a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new fn(V),i=[];return t.forEach(function(t){var o=Jn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=ce(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=J(s);if(a!==n.userId||!t.path.isEqual(c))return void o.done();r=r.add(u)});i.push(s)}),wn.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;c(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Jn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new fn(V);return ce(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=J(u);if(a!==n.userId||!r.isPrefixOf(l))return void o.done();l.length===i&&(s=s.add(c))}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(ue(e).get(t).next(function(e){if(null===e)throw u("Dangling document-mutation reference found, which points to "+t);c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),wn.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return ae(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),wn.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return wn.resolve();var r=IDBKeyRange.lowerBound(Jn.prefixForUser(t.userId)),i=[];return ce(e).iterate({range:r},function(e,n,r){if(e[0]!==t.userId)return void r.done();var o=J(e[1]);i.push(o)}).next(function(){c(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return ie(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return le(e).get(this.userId).next(function(e){return e||new Kn(t.userId,-1,"")})},e}(),En=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(pn||(pn={}));var Sn,kn=function(){function e(e,t){this.generatorId=e,c((e&En)===e,"Generator ID "+e+" contains more than "+En+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<En,e},e.prototype.after=function(e){return this.seek(e+(1<<En)),this.next()},e.prototype.seek=function(e){c((e&En)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(pn.QueryCache,2)},e.forSyncEngine=function(){return new e(pn.SyncEngine)},e}(),Cn="SimpleDb",Mn=function(){function e(t){this.db=t,12.2===e.getIOSVersion(It.getUA())&&a("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return c(e.isAvailable(),"IndexedDB not supported in current environment."),o(Cn,"Opening database:",t),new wn(function(i,a){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){var n=t.target.result;i(new e(n))},s.onblocked=function(){a(new Bt(Ft.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(e){var t=e.target.error;a("VersionError"===t.name?new Bt(Ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},s.onupgradeneeded=function(e){o(Cn,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new On(s.transaction);r.createOrUpgrade(n,i,e.oldVersion,Wn).next(function(){o(Cn,"Database upgrade to version "+Wn+" complete")})}}).toPromise()},e.delete=function(e){return o(Cn,"Removing database:",e),he(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/symphony-2"}).USE_MOCK_PERSISTENCE;var t=It.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var r=On.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),wn.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),An=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return he(this.dbCursor.delete())},e}(),On=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Zt,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=pe(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(o(Cn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return c(!!t,"Object store not part of transaction: "+e),new Dn(t)},e}(),Dn=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(o(Cn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(o(Cn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),he(n)},e.prototype.add=function(e){return o(Cn,"ADD",this.store.name,e,e),he(this.store.add(e))},e.prototype.get=function(e){var t=this;return he(this.store.get(e)).next(function(n){return void 0===n&&(n=null),o(Cn,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return o(Cn,"DELETE",this.store.name,e),he(this.store.delete(e))},e.prototype.count=function(){return o(Cn,"COUNT",this.store.name),he(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){o(Cn,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new wn(function(n,r){t.onerror=function(e){var t=pe(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;if(!r)return void n();e(r.primaryKey,r.value).next(function(e){e?r.continue():n()})}})},e.prototype.iterateCursor=function(e,t){var n=[];return new wn(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(!i)return void r();var o=new An(i),a=t(i.primaryKey,i.value,o);if(a instanceof wn){var s=a.catch(function(e){return o.done(),wn.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return wn.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"===typeof e?n=e:(c(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}(),In=!1,Rn=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=kn.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return sn.fromTimestamp(new an(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ge(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return fe(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return c(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return fe(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return wn.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return fe(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return me(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return de(e).put(ir.key,t)},e.prototype.saveQueryData=function(e,t){return fe(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fe(e).iterate({range:i,index:nr.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ve(e);return t.forEach(function(t){var a=X(t.path);i.push(o.put(new rr(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),wn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ve(e);return wn.forEach(t,function(t){var o=X(t.path);return wn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ve(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ve(e),i=ne();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=J(e[1]),o=new Jt(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=X(t.path),r=IDBKeyRange.bound([n],[W(n)],!1,!0),i=0;return ve(e).iterate({index:rr.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return fe(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}(),Pn=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return Jt.comparator(e.key,t.key)},e}(),Ln=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return Dt.__extends(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):u("Trying to compare documents on fields that don't exist")},t}(Pn),Nn=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Dt.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Pn),Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Pn),Fn=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[e,t]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){g(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return v(this.inner)},e}(),Bn=function(){function e(){this.changes=Z(),this.documentSizes=new Fn(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges(),i=r.get(t);return i?wn.resolve(i):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return c(null!==this.changes,"Changes have already been applied."),this.changes},e}(),jn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Gn=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Mn.getStore(e,ar.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(t.length>0){for(var i=_e(e),o=ne(),a=0,s=t;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(we(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(e,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(xe(e).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(e,n))}return wn.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=_e(e),r=we(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return Te(e)}):wn.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return _e(e).get(we(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return _e(e).get(we(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Te(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=$();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=$(),i=new un(Jt.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Te(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return wn.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return _e(e).iterate({range:r},function(e,t,r){for(var a=Jt.fromSegments(e);o&&Jt.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=ee(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return _e(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof Ln&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;c(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=ne(),r=Z(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=xe(e);return a.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return wn.reject(new Bt(Ft.DATA_LOSS,jn))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new Nn(n,sn.forDeletedDoc());r=r.insert(n,t)}))}),wn.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return xe(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new Vn(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return ye(e).get(tr.key).next(function(e){return c(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return ye(e).put(tr.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e}(),Vn=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return Dt.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentCache.serializer.toDbRemoteDocument(n),a=t.documentSizes.get(e);c(void 0!==a,"Attempting to change document "+e.toString()+" without having read it first");var s=Te(o);r+=s-a,i.push({key:e,doc:o})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Bn),zn=function(){function e(){this.collectionParentIndex=new Hn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),wn.resolve()},e.prototype.getCollectionParents=function(e,t){return wn.resolve(this.collectionParentIndex.getEntries(t))},e}(),Hn=function(){function e(){this.index={}}return e.prototype.add=function(e){c(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fn(Xt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new fn(Xt.comparator)).toArray()},e}(),Wn=8,qn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;c(n<r&&n>=0&&r<=Wn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(Se(e),ke(e),Oe(e),Me(e));var o=wn.resolve();return n<3&&r>=3&&(0!==n&&(De(e),Oe(e)),o=o.next(function(){return Ie(t)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return Ce(e,t)})),o=o.next(function(){Pe(e),Re(e)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(o=o.next(function(){return Ae(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(er.store).iterate(function(e,n){t+=Te(n)}).next(function(){var n=new tr(t);return e.store(tr.store).put(tr.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Kn.store),r=e.store(Qn.store);return n.loadAll().next(function(n){return wn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Qn.userMutationsIndex,i).next(function(r){return wn.forEach(r,function(r){c(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return ae(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(rr.store),n=e.store(er.store);return ge(e).next(function(e){var r=function(n){return t.put(new rr(0,X(n),e))},i=[];return n.iterate(function(e,n){var o=new Xt(e),a=Ee(o);i.push(t.get(a).next(function(e){return e?wn.resolve():r(o)}))}).next(function(){return wn.waitFor(i)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(or.store,{keyPath:or.keyPath});var n=t.store(or.store),r=new Hn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:X(i)})}};return t.store(er.store).iterate({keysOnly:!0},function(e,t){var n=new Xt(e);return i(n.popLast())}).next(function(){return t.store(Jn.store).iterate({keysOnly:!0},function(e,t){var n=(e[0],e[1]),r=(e[2],J(n));return i(r.popLast())})})},e}(),Yn=function(){function e(e,t){this.seconds=e,this.nanoseconds=t}return e}(),Xn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),Kn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),Qn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),Jn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,X(t)]},e.key=function(e,t,n){return[e,X(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),Zn=function(){function e(e,t){this.path=e,this.readTime=t}return e}(),$n=function(){function e(e,t){this.path=e,this.version=t}return e}(),er=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),tr=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),nr=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),rr=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,c(0===e===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),ir=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),or=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}(),ar=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),sr=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}(),ur=[Kn.store,Qn.store,Jn.store,er.store,nr.store,Xn.store,ir.store,rr.store],cr=ur,lr=cr.concat([sr.store,ar.store]),hr=lr.concat([tr.store]),pr=hr.concat([or.store]),fr=pr,dr=function(){function e(){this.collectionParentsCache=new Hn}return e.prototype.addToCollectionParentIndex=function(e,t){if(c(t.length%2===1,"Expected a collection path."),this.collectionParentsCache.add(t)){c(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return Le(e).put({collectionId:n,parent:X(r)})}return wn.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[W(t),""],!1,!0);return Le(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(J(o.parent))}return n})},e}();!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Sn||(Sn={}));var mr,gr=function(){function e(e,t,n,r,i,o){void 0===i&&(i=sn.MIN),void 0===o&&(o=l()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),vr=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Jt.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Nn(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var t=Jt.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Un(t,n)}return u("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Ln){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new er(null,null,t,n)}if(e instanceof Nn){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),n=e.hasCommittedMutations;return new er(null,new Zn(r,i),null,n)}if(e instanceof Un){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return new er(new $n(r,i),null,null,!0)}return u("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Yn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new an(e.seconds,e.nanoseconds);return sn.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Qn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=an.fromMillis(e.localWriteTimeMs);return new _n(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(X(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=ne(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Jt(J(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=Ne(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new gr(t,e.targetId,Sn.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){c(Sn.Listen===e.purpose,"Only queries with purpose "+Sn.Listen+" may be stored, got "+e.purpose);var t,n=this.toDbTimestamp(e.snapshotVersion);t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query);var r;return e.resumeToken instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/symphony-2"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=e.resumeToken.toString()):r=e.resumeToken,new nr(e.targetId,e.query.canonicalId(),n,r,e.sequenceNumber,t)},e}(),yr=function(){function e(e){this.maxElements=e,this.buffer=new fn(Ue),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ue(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),br={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_r=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),xr=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}return e.prototype.start=function(){c(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==_r.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;c(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;o("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Nt.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Be)})},e}(),wr=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wn.resolve(qt.INVALID);var r=new yr(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===_r.COLLECTION_DISABLED?(o("LruGarbageCollector","Garbage collection skipped; disabled"),wn.resolve(br)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),br):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,i,a,s,u,c,l,h=this,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>h.params.maximumSequenceNumbersToCollect?(o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),i=h.params.maximumSequenceNumbersToCollect):i=t,s=Date.now(),h.nthSequenceNumber(e,i)}).next(function(r){return n=r,u=Date.now(),h.removeTargets(e,n,t)}).next(function(t){return a=t,c=Date.now(),h.removeOrphanedDocuments(e,n)}).next(function(e){if(l=Date.now(),r()<=Mt.DEBUG){o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-p)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+a+" targets in "+(c-u)+"ms\n\tRemoved "+e+" documents in "+(l-c)+"ms\nTotal Duration: "+(l-p)+"ms")}return wn.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:e})})},e}(),Tr=function(){function e(){}return e}(),Er="IndexedDbPersistence",Sr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Cr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Mr=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return Dt.__extends(t,e),t}(Tr),Ar=function(){function e(t,n,r,i,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new Bt(Ft.UNIMPLEMENTED,Cr);if(this.referenceDelegate=new Or(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new vr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new Rn(this.referenceDelegate,this.serializer),this.indexManager=new dr,this.remoteDocumentCache=new Gn(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Bt(Ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Mr)return Mn.getStore(e.simpleDbTransaction,t);throw u("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,o,a){return Dt.__awaiter(this,void 0,void 0,function(){var s;return Dt.__generator(this,function(u){switch(u.label){case 0:return s=new e(t,n,r,i,o,a),[4,s.start()];case 1:return u.sent(),[2,s]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,o,a,s){return Dt.__awaiter(this,void 0,void 0,function(){var u;return Dt.__generator(this,function(c){switch(c.label){case 0:return u=new e(t,n,r,i,o,a,s),[4,u.start()];case 1:return c.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return c(!this.started,"IndexedDbPersistence double-started!"),c(null!==this.window,"Expected 'window' to be defined"),Mn.openOrCreate(this.dbName,Wn,new qn(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[ir.store],function(t){return ge(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new qt(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",fr,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return Dt.__awaiter(t,void 0,void 0,function(){return Dt.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return Dt.__awaiter(t,void 0,void 0,function(){return Dt.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Dt.__awaiter(t,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",fr,function(t){return Ge(t).put(new sr(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return je(e).get(Xn.key).next(function(e){return wn.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Ge(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Dt.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=e.getStore(i,sr.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return wn.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if(t=t.filter(function(e){return e.clientId!==r.clientId}),t.length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Nt.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return je(e).get(Xn.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Bt(Ft.FAILED_PRECONDITION,kr);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ge(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&o(Er,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e=this;return Dt.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Xn.store,sr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[sr.store],function(t){return Ge(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return Dt.__awaiter(this,void 0,void 0,function(){var n;return Dt.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,Mn.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return c(this.started,"Cannot initialize MutationQueue before persistence is started."),Tn.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return c(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return c(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return c(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return o(Er,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",fr,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw a("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Bt(Ft.FAILED_PRECONDITION,Sr);return n(new Mr(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Mr(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return je(e).get(Xn.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Bt(Ft.FAILED_PRECONDITION,kr)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Xn(this.clientId,this.allowTabSynchronization,Date.now());return je(e).put(Xn.key,t)},e.isAvailable=function(){return Mn.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=je(e);return n.get(Xn.key).next(function(e){return t.isLocalClient(e)?(o(Er,"Releasing primary lease."),n.delete(Xn.key)):wn.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now(),r=n-t,i=n;return!(e<r)&&(!(e>i)||(a("Detected an update time that is in the future: "+e+" > "+i),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(c(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(c("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return o(Er,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return a(Er,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){a("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}(),Or=function(){function e(e,t){this.db=e,this.garbageCollector=new wr(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return He(e,t)},e.prototype.removeReference=function(e,t){return He(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return He(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?wn.resolve(!0):oe(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return r++,n.removeOrphanedDocument(e,a).next(function(e){i+=e})});o.push(u)}}).next(function(){return wn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-i)}).next(function(){return r})},e.prototype.removeOrphanedDocument=function(e,t){var n=0,r=this.db.getRemoteDocumentCache();return wn.waitFor([ve(e).delete(Ve(t)),r.removeEntry(e,t).next(function(e){n+=e})]).next(function(){return n})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return He(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=ve(e),i=qt.INVALID;return r.iterate({index:rr.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==qt.INVALID&&t(new Jt(J(n)),i),i=s,n=a):i=qt.INVALID}).next(function(){i!==qt.INVALID&&t(new Jt(J(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(mr||(mr={}));var Dr;!function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Dr||(Dr={}));var Ir,Rr=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Dr.Estimate,n);case"previous":return new e(Dr.Previous,n);case"none":case void 0:return new e(Dr.Default,n);default:return u("fromSnapshotOptions() called with invalid options.")}},e}(),Pr=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return c(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),V(this.typeOrder,e.typeOrder)},e}(),Lr=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=mr.NullValue,t.internalValue=null,t}return Dt.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Pr),Nr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.BooleanValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?V(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Pr),Ur=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.NumberValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?We(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Pr),Fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&qe(this.internalValue,e.internalValue)},t}(Ur),Br=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&qe(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Ur),jr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.StringValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?V(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Pr),Gr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.TimestampValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Vr?-1:this.defaultCompareTo(e)},t}(Pr),Vr=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=mr.TimestampValue,r}return Dt.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Dr.Estimate?new Gr(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Dr.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Gr?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Pr),zr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.BlobValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Pr),Hr=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=mr.RefValue,r}return Dt.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:Jt.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Pr),Wr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.GeoPointValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Pr),qr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.ObjectValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=V(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return V(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(c(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(c(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){c(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new fn(Qt.comparator);return this.internalValue.forEach(function(n,r){var i=new Qt([n]);if(r instanceof t){var o=r.fieldMask(),a=o.fields;a.isEmpty()?e=e.add(i):a.forEach(function(t){e=e.add(i.child(t))})}else e=e.add(i)}),Xr.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new un(V)),t}(Pr),Yr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mr.ArrayValue,n}return Dt.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return V(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(Pr),Xr=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new fn(Qt.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),Kr=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),Qr=function(){function e(e,t){this.version=e,this.transformResults=t}return e}();!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(Ir||(Ir={}));var Jr,Zr=function(){function e(e,t){this.updateTime=e,this.exists=t,c(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Ln&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Ln:(c(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return z(this.updateTime,e.updateTime)&&this.exists===e.exists},e.NONE=new e,e}(),$r=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&c(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Ln?e.version:sn.MIN},e}(),ei=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=Ir.Set,i}return Dt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Ln(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=$r.getPostMutationVersion(e);return new Ln(this.key,r,this.value,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}($r),ti=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Ir.Patch,o}return Dt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Un(this.key,t.version);var n=this.patchDocument(e);return new Ln(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=$r.getPostMutationVersion(e),i=this.patchDocument(e);return new Ln(this.key,r,i,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Ln?e.data:qr.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}($r),ni=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=Ir.Transform,r.precondition=Zr.exists(!0),r}return Dt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),c(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Un(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new Ln(this.key,i,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data,i);return new Ln(this.key,r.version,o,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Ln?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?qr.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&H(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){c(e instanceof Ln,"Unknown MaybeDocument type "+e);var t=e;return c(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];c(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Ln&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Ln&&(u=t.field(a.field)),null===u&&n instanceof Ln&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){c(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;e=e.set(i,t[n])}return e},t}($r),ri=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=Ir.Delete,r}return Dt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by DeleteMutation."),new Nn(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&c(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Nn(this.key,sn.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}($r),ii=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=$();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Z();return i.forEach(function(e,t){t||(t=new Nn(e,sn.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Jt(t)).next(function(e){var t=ee();return e instanceof Ln&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;c(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=ee();return this.indexManager.getCollectionParents(e,r).next(function(o){return wn.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,i.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof Ln?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=ne(),i=0,o=t;i<o.length;i++)for(var a=o[i],s=0,u=a.mutations;s<u.length;s++){var c=u[s];c instanceof ti&&null===n.get(c.key)&&(r=r.add(c.key))}var l=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Ln&&(l=l.insert(e,t))}),l})},e}(),oi=function(){function e(){this.refsByKey=new fn(ai.compareByKey),this.refsByTarget=new fn(ai.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new ai(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new ai(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=Jt.EMPTY,r=new ai(n,e),i=new ai(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=Jt.EMPTY,n=new ai(t,e),r=new ai(t,e+1),i=ne();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new ai(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),ai=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return Jt.comparator(e.key,t.key)||V(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return V(e.targetOrBatchId,t.targetOrBatchId)||Jt.comparator(e.key,t.key)},e}(),si=function(){function e(e,t){this.persistence=e,this.localViewReferences=new oi,this.queryDataByTarget={},c(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new ii(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new ii(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=ne(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var p=h[l];a=a.add(p.key)}}for(var f=0,d=e;f<d.length;f++){var c=d[f];o.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){var p=g[m];a=a.add(p.key)}}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=an.now(),r=e.reduce(function(e,t){return e.add(t.key)},ne());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new ti(u.key,c,c.fieldMask(),Zr.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):wn.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return c(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var a=[],s=ne();d(t.targetChanges,function(r,o){var u=n.queryDataByTarget[r];if(u){o.addedDocuments.forEach(function(e){s=s.add(e)}),o.modifiedDocuments.forEach(function(e){s=s.add(e)}),a.push(n.queryCache.removeMatchingKeys(i,o.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,o.addedDocuments,r)}));var c=o.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=u,e.shouldPersistQueryData(l,u,o)&&a.push(n.queryCache.updateQueryData(i,u))}}});var u=Z(),l=ne();t.documentUpdates.forEach(function(e,t){l=l.add(e)}),a.push(r.getEntries(i,l).next(function(e){t.documentUpdates.forEach(function(c,l){var h=e.get(c);null==h||l.version.isEqual(sn.MIN)||s.has(l.key)&&!h.hasPendingWrites||l.version.compareTo(h.version)>=0?(r.addEntry(l),u=u.insert(c,l)):o("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version),t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))})}));var h=t.snapshotVersion;if(!h.isEqual(sn.MIN)){var p=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return c(h.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+h+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,h)});a.push(p)}return wn.waitFor(a).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,u)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return wn.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),wn.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,wn.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new gr(e,i,Sn.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return c(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){c(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?wn.resolve():wn.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=wn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);c(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(r,o,t),o?n.addEntry(o):c(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),ui=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=l(),this.batchesByDocumentKey=new fn(ai.compareByKey)}return e.prototype.checkEmpty=function(e){return wn.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");c(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return c(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,wn.resolve()},e.prototype.getLastStreamToken=function(e){return wn.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,wn.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){c(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){c(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order")}var o=new _n(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new ai(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return wn.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return wn.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return c(null!=n,"Failed to find local mutation batch."),wn.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return wn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getAllMutationBatches=function(e){return wn.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new ai(t,0),i=new ai(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){c(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);c(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),wn.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new fn(V);return t.forEach(function(e){var t=new ai(e,0),i=new ai(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){c(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),wn.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Jt.isDocumentKey(i)||(i=i.child(""));var o=new ai(new Jt(i),0),a=new fn(V);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),wn.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;c(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wn.forEach(t.mutations,function(i){var o=new ai(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new ai(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wn.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&c(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wn.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return c(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return c(n.batchId===e,"If found batch must match"),n},e}(),ci=function(){function e(e){this.persistence=e,this.queries=new Fn(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=sn.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new oi,this.targetCount=0,this.targetIdGenerator=kn.forQueryCache()}return e.prototype.getTargetCount=function(e){return wn.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),wn.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return wn.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return wn.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,wn.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),wn.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return c(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,wn.resolve()},e.prototype.updateQueryData=function(e,t){return c(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),wn.resolve()},e.prototype.removeQueryData=function(e,t){return c(this.targetCount>0,"Removing a target from an empty cache"),c(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,wn.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),wn.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return wn.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return wn.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return u("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),wn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),wn.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),wn.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return wn.resolve(n)},e.prototype.containsKey=function(e,t){return wn.resolve(this.references.containsKey(t))},e}(),li=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=Ye(),this.newDocumentChanges=ne(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(e,s.path.popLast()))}return this.size+=n,wn.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,wn.resolve(n.size)):wn.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wn.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return wn.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,r=$();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),wn.resolve(r)},e.prototype.getSizedEntries=function(e,t){var n=this,r=$(),i=new un(Jt.comparator);return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),i=i.insert(e,t?t.size:0)}),wn.resolve({maybeDocuments:r,sizeMap:i})},e.prototype.getDocumentsMatchingQuery=function(e,t){c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=ee(),r=new Jt(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof Ln&&t.matches(s)&&(n=n.insert(s.key,s))}return wn.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return wn.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=Z();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new Nn(e,sn.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=ne(),wn.resolve(n)},e.prototype.newChangeBuffer=function(){return new hi(this.sizer,this)},e.prototype.getSize=function(e){return wn.resolve(this.size)},e}(),hi=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return Dt.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentSizes.get(e);c(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=t.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Bn),pi=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new qt(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new ci(this);var r=function(e){return n.referenceDelegate.documentSize(e)};this.indexManager=new zn,this.remoteDocumentCache=new li(this.indexManager,r)}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new mi(e,new vr(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new di(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new ui(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;o("MemoryPersistence","Starting transaction:",e);var i=new fi(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return wn.or(m(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),fi=function(){function e(e){this.currentSequenceNumber=e}return e}(),di=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),wn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),wn.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),wn.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return wn.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(t){return t?wn.resolve():n.removeEntry(e,r).next(function(){})})})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return wn.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return wn.resolve(n.inMemoryPins.containsKey(t))}])},e}(),mi=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new Fn(function(e){return X(e.path)}),this.garbageCollector=new wr(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return wn.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return wn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?wn.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(e,function(o){return n.isPinned(e,o,t).next(function(t){return t?wn.resolve():(r++,i.removeEntry(e,o).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw u("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return wn.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return wn.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return wn.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),gi=Number,vi=gi.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),yi=gi.MAX_SAFE_INTEGER||Math.pow(2,53)-1,bi=gi.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},_i=function(){function e(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Jr||(Jr={}));var xi,wi=1e3,Ti=6e4,Ei=1.5,Si=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Jr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new _i(e,t,wi,Ei,Ti)}return e.prototype.isStarted=function(){return this.state===Jr.Starting||this.state===Jr.Open||this.state===Jr.Backoff},e.prototype.isOpen=function(){return this.state===Jr.Open},e.prototype.start=function(){if(this.state===Jr.Error)return void this.performBackoff();c(this.state===Jr.Initial,"Already started"),this.auth()},e.prototype.stop=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Jr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){c(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Jr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){return this.isOpen()?[2,this.close(Jr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(n){switch(n.label){case 0:return c(this.isStarted(),"Only started streams should be closed."),c(e===Jr.Error||Xe(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Jr.Error?this.backoff.reset():t&&t.code===Ft.RESOURCE_EXHAUSTED?(a(t.toString()),a("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Ft.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;c(this.state===Jr.Initial,"Must be in initial state to auth"),this.state=Jr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new Bt(Ft.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;c(this.state===Jr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return c(t.state===Jr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Jr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;c(this.state===Jr.Error,"Should only perform backoff when in Error state"),this.state=Jr.Backoff,this.backoff.backoffAndRun(function(){return Dt.__awaiter(e,void 0,void 0,function(){return Dt.__generator(this,function(e){return c(this.state===Jr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Jr.Initial,this.start(),c(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return c(this.isStarted(),"Can't handle server close on non-started stream"),o("PersistentStream","close with error: "+e),this.stream=null,this.close(Jr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),ki=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Nt.ListenStreamConnectionBackoff,Nt.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return Dt.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Si),Ci=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Nt.WriteStreamConnectionBackoff,Nt.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return Dt.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(c(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return c(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){c(this.isOpen(),"Writing handshake requires an opened stream"),c(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;c(this.isOpen(),"Writing mutations requires an opened stream"),c(this.handshakeComplete_,"Handshake must be complete before writing mutations"),c(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Si),Mi=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Ci(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new ki(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Z();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);c(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===Ft.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===Ft.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Ai=function(){function e(e){this.datastore=e,this.readVersions=te(),this.mutations=[],this.committed=!1,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Dt.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Bt(Ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return t=r.sent(),t.forEach(function(e){e instanceof Nn||e instanceof Ln?n.recordVersion(e):u("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new ri(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e;return Dt.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new Bt(Ft.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Ln)t=e.version;else{if(!(e instanceof Nn))throw u("Document in a transaction was a "+e.constructor.name);t=sn.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Bt(Ft.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Zr.updateTime(t):Zr.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(sn.forDeletedDoc()))throw new Bt(Ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zr.updateTime(t)}return Zr.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){c(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(xi||(xi={}));var Oi;!function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Oi||(Oi={}));var Di,Ii=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=xi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(xi.Unknown),c(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Nt.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,c(e.state===xi.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(xi.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===xi.Online?(this.setAndBroadcast(xi.Unknown),c(0===this.watchStreamFailures,"watchStreamFailures must be 0"),c(null===this.onlineStateTimer,"onlineStateTimer must be null")):++this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(xi.Offline))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===xi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(a(t),this.shouldWarnClientIsOffline=!1):o("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Di||(Di={}));var Ri,Pi=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Jt.comparator(t.key,n.key)}:function(e,t){return Jt.comparator(e.key,t.key)},this.keyedMap=ee(),this.sortedSet=new un(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Ri||(Ri={}));var Li;!function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Li||(Li={}));var Ni,Ui=function(){function e(){this.changeMap=new un(Jt.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);if(!n)return void(this.changeMap=this.changeMap.insert(t,e));e.type!==Ri.Added&&n.type===Ri.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Ri.Metadata&&n.type!==Ri.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Ri.Modified&&n.type===Ri.Modified?this.changeMap=this.changeMap.insert(t,{type:Ri.Modified,doc:e.doc}):e.type===Ri.Modified&&n.type===Ri.Added?this.changeMap=this.changeMap.insert(t,{type:Ri.Added,doc:e.doc}):e.type===Ri.Removed&&n.type===Ri.Added?this.changeMap=this.changeMap.remove(t):e.type===Ri.Removed&&n.type===Ri.Modified?this.changeMap=this.changeMap.insert(t,{type:Ri.Removed,doc:n.doc}):e.type===Ri.Added&&n.type===Ri.Removed?this.changeMap=this.changeMap.insert(t,{type:Ri.Modified,doc:e.doc}):u("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n))},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Fi=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:Ri.Added,doc:e})}),new e(t,n,Pi.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(this.fromCache!==e.fromCache||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!this.query.isEqual(e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Bi=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=(r={},r[t]=ji.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(sn.MIN,i,re(),Z(),ne())},e}(),ji=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(l(),n,ne(),ne(),ne())},e}(),Gi=function(){function e(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}return e}(),Vi=function(){function e(e,t){this.targetId=e,this.existenceFilter=t}return e}();!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Ni||(Ni={}));var zi,Hi=function(){function e(e,t,n,r){void 0===n&&(n=l()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}return e}(),Wi=function(){function e(){this.pendingResponses=0,this.documentChanges=rt(),this._resumeToken=l(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=ne(),t=ne(),n=ne();return this.documentChanges.forEach(function(r,i){switch(i){case Ri.Added:e=e.add(r);break;case Ri.Modified:t=t.add(r);break;case Ri.Removed:n=n.add(r);break;default:u("Encountered invalid change type: "+i)}}),new ji(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=rt()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),qi=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Z(),this.pendingDocumentTargetMapping=nt(),this.pendingTargetResets=new fn(V)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Ln?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Nn&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case Ni.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Ni.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Ni.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),c(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Ni.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Ni.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:u("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):d(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Jt(i.path);this.removeDocumentFromTarget(t,o,new Nn(o,sn.forDeletedDoc()))}else c(1===n,"Single document existence filter with count: "+n);else{this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}}},e.prototype.createRemoteEvent=function(e){var t=this,n={};d(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Jt(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Nn(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=ne();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Sn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Bi(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Z(),this.pendingDocumentTargetMapping=nt(),this.pendingTargetResets=new fn(V),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Ri.Modified:Ri.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Ri.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e),n=t.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Wi),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new fn(V),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;c(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Wi,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}(),Yi="RemoteStore",Xi=function(){function e(e,t,n,r,i){var a=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return Dt.__awaiter(a,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(o(Yi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Ii(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e;return Dt.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(xi.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(xi.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(o(Yi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return o(Yi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(xi.Unknown),[2]}})})},e.prototype.listen=function(e){c(!p(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){c(p(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),v(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(xi.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){c(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new qi(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!v(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e=this;return Dt.__generator(this,function(t){return d(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(t){return void 0===e&&c(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(xi.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n;return Dt.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(xi.Online),e instanceof Hi&&e.state===Ni.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Gi?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Vi?this.watchChangeAggregator.handleExistenceFilter(e):(c(e instanceof Hi,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(sn.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;c(!e.isEqual(sn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return d(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:l()}),t.sendUnwatchRequest(e);var r=new gr(n.query,e,Sn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;c(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return Dt.__awaiter(t,void 0,void 0,function(){return Dt.__generator(this,function(t){return p(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e,t;return Dt.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){c(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){c(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(Be)},e.prototype.onMutationResult=function(e,t){var n=this;c(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=xn.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Dt.__generator(this,function(r){return void 0===e&&c(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(t=void 0,t=this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e),[2,t.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(t){return Qe(e.code)?(o(Yi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=l(),[2,this.localStore.setLastStreamToken(l()).catch(Be)]):[2]})})},e.prototype.handleWriteError=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Dt.__generator(this,function(r){return Je(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},e.prototype.createTransaction=function(){return new Ai(this.datastore)},e.prototype.restartNetwork=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(xi.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(o(Yi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(xi.Unknown),t.label=4;case 4:return[2]}})})},e}(),Ki=function(){function e(e,t){if(_("GeoPoint",arguments,2),E("GeoPoint","number",1,e),E("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new Bt(Ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bt(Ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return V(this._lat,e._lat)||V(this._long,e._long)},e}(),Qi=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[uo]:this.memoizedOrderBy=[new so(e),uo];else{c(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:oo.ASCENDING;this.memoizedOrderBy.push(a===oo.ASCENDING?uo:co)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){c(null==this.getInequalityFilterField()||!(t instanceof $i)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),c(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){c(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Xe(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xe(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(var t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return c(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Xe(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof $i&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof $i&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return Jt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Jt.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){c(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Ji=function(){function e(){}return e}(),Zi=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return u("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),$i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return Dt.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===Zi.IN?(c(r instanceof Yr,"Comparing on key with IN, but filter value not an ArrayValue"),c(r.internalValue.every(function(e){return e instanceof Hr}),"Comparing on key with IN, but an array value was not a RefValue"),new to(e,r)):(c(r instanceof Hr,"Comparing on key, but filter value not a RefValue"),c(n!==Zi.ARRAY_CONTAINS&&n!==Zi.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new eo(e,n,r));if(r.isEqual(Lr.INSTANCE)){if(n!==Zi.EQUAL)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Br.NAN)){if(n!==Zi.EQUAL)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===Zi.ARRAY_CONTAINS?new no(e,r):n===Zi.IN?(c(r instanceof Yr,"IN filter has invalid value: "+r.toString()),new ro(e,r)):n===Zi.ARRAY_CONTAINS_ANY?(c(r instanceof Yr,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new io(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Zi.LESS_THAN:return e<0;case Zi.LESS_THAN_OR_EQUAL:return e<=0;case Zi.EQUAL:return 0===e;case Zi.GREATER_THAN:return e>0;case Zi.GREATER_THAN_OR_EQUAL:return e>=0;default:return u("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[Zi.LESS_THAN,Zi.LESS_THAN_OR_EQUAL,Zi.GREATER_THAN,Zi.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Ji),eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=Jt.comparator(e.key,t.key);return this.matchesComparison(n)},t}($i),to=function(e){function t(t,n){var r=e.call(this,t,Zi.IN,n)||this;return r.value=n,r}return Dt.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}($i),no=function(e){function t(t,n){return e.call(this,t,Zi.ARRAY_CONTAINS,n)||this}return Dt.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Yr&&t.contains(this.value)},t}($i),ro=function(e){function t(t,n){var r=e.call(this,t,Zi.IN,n)||this;return r.value=n,r}return Dt.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}($i),io=function(e){function t(t,n){var r=e.call(this,t,Zi.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return Dt.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Yr&&n.internalValue.some(function(e){return t.value.contains(e)})},t}($i),oo=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),ao=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){c(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())c(o instanceof Hr,"Bound has a non-key value where the key path is being used."),n=Jt.comparator(o.key,t.key);else{var a=t.field(i.field);c(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===oo.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),so=function(){function e(e,t){this.field=e,void 0===t&&(t=oo.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Ln.compareByKey(e,t):Ln.compareByField(this.field,e,t);switch(this.dir){case oo.ASCENDING:return n;case oo.DESCENDING:return-1*n;default:return u("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),uo=new so(Qt.keyField(),oo.ASCENDING),co=new so(Qt.keyField(),oo.DESCENDING),lo=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Vr(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ho=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=it(e),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)}(i)}return new Yr(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&H(t.elements,this.elements)},e}(),po=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=it(e),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(e){t=t.filter(function(t){return!t.isEqual(e)})}(i)}return new Yr(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&H(t.elements,this.elements)},e}(),fo=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Fr&&this.operand instanceof Fr){var r=n.internalValue+this.operand.internalValue;return new Fr(r)}var r=n.internalValue+this.operand.internalValue;return new Br(r)},e.prototype.applyToRemoteDocument=function(e,t){return c(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Ur?e:new Fr(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}(),mo=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),go=function(){var e={};return e[oo.ASCENDING.name]="ASCENDING",e[oo.DESCENDING.name]="DESCENDING",e}(),vo=function(){var e={};return e[Zi.LESS_THAN.name]="LESS_THAN",e[Zi.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[Zi.GREATER_THAN.name]="GREATER_THAN",e[Zi.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[Zi.EQUAL.name]="EQUAL",e[Zi.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e[Zi.IN.name]="IN",e[Zi.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",e}(),yo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),bo=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Ft.UNKNOWN:$e(e.code);return new Bt(t,e.message||"")},e.prototype.toInt32Value=function(e){return Xe(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return t="object"===typeof e?e.value:e,Xe(t)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"===typeof e)return this.fromIso8601String(e);c(!!e,"Cannot deserialize null or undefined timestamp.");var t=at(e.seconds||"0"),n=e.nanos||0;return new an(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=yo.exec(e);if(c(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new an(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"===typeof e?(c(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Gt.fromBase64String(e)):(c(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Gt.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return c(!!e,"Trying to deserialize version that isn't set"),sn.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=Xt.fromString(e);return c(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return c(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),c(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Jt(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Xt.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new Xt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new Xt(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return c(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Lr)return{nullValue:"NULL_VALUE"};if(e instanceof Nr)return{booleanValue:e.value()};if(e instanceof Fr)return{integerValue:""+e.value()};if(e instanceof Br){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof jr?{stringValue:e.value()}:e instanceof qr?{mapValue:this.toMapValue(e)}:e instanceof Yr?{arrayValue:this.toArrayValue(e)}:e instanceof Gr?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Wr?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof zr?{bytesValue:this.toBytes(e.value())}:e instanceof Hr?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:u("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Lr.INSTANCE;if("booleanValue"in e)return Nr.of(e.booleanValue);if("integerValue"in e)return new Fr(at(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Br.NAN;if("Infinity"===e.doubleValue)return Br.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Br.NEGATIVE_INFINITY}return new Br(e.doubleValue)}if("stringValue"in e)return new jr(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){ot(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Yr(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return ot(e.timestampValue,"timestampValue"),new Gr(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){ot(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new Wr(new Ki(r,i))}if("bytesValue"in e){ot(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new zr(o)}if("referenceValue"in e){ot(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Wt(a.get(1),a.get(3)),c=new Jt(this.extractLocalPathFromResourceName(a));return new Hr(s,c)}return u("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return c(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new Ln(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=qr.EMPTY;return g(n,function(e,n){r=r.set(new Qt([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){c(!!e.found,"Tried to deserialize a found document from a missing document."),ot(e.found.name,"doc.found.name"),ot(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Ln(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){c(!!e.missing,"Tried to deserialize a missing document from a found document."),c(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Nn(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):u("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Ni.Added:return"ADD";case Ni.Current:return"CURRENT";case Ni.NoChange:return"NO_CHANGE";case Ni.Removed:return"REMOVE";case Ni.Reset:return"RESET";default:return u("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Vi)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Gi){if(e.newDoc instanceof Ln){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Nn){var t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Hi){var n=void 0;return e.cause&&(n={code:et(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return u("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t;if("targetChange"in e){ot(e.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=e.targetChange.resumeToken||this.emptyByteString(),o=e.targetChange.cause,a=o&&this.fromRpcStatus(o);t=new Hi(n,r,i,a||null)}else if("documentChange"in e){ot(e.documentChange,"documentChange"),ot(e.documentChange.document,"documentChange.name"),ot(e.documentChange.document.name,"documentChange.document.name"),ot(e.documentChange.document.updateTime,"documentChange.document.updateTime");var s=e.documentChange,c=this.fromName(s.document.name),l=this.fromVersion(s.document.updateTime),h=this.fromFields(s.document.fields||{}),p=new Ln(c,l,h,{},s.document),f=s.targetIds||[],d=s.removedTargetIds||[];t=new Gi(f,d,p.key,p)}else if("documentDelete"in e){ot(e.documentDelete,"documentDelete"),ot(e.documentDelete.document,"documentDelete.document");var m=e.documentDelete,c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):sn.forDeletedDoc(),p=new Nn(c,l),d=m.removedTargetIds||[];t=new Gi([],d,p.key,p)}else if("documentRemove"in e){ot(e.documentRemove,"documentRemove"),ot(e.documentRemove.document,"documentRemove");var g=e.documentRemove,c=this.fromName(g.document),d=g.removedTargetIds||[];t=new Gi([],d,c,null)}else{if(!("filter"in e))return u("Unknown change type "+JSON.stringify(e));ot(e.filter,"filter"),ot(e.filter.targetId,"filter.targetId");var v=e.filter,y=v.count||0,b=new mo(y),_=v.targetId;t=new Vi(_,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Ni.NoChange:"ADD"===e?Ni.Added:"REMOVE"===e?Ni.Removed:"CURRENT"===e?Ni.Current:"RESET"===e?Ni.Reset:u("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return sn.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?sn.MIN:t.readTime?this.fromVersion(t.readTime):sn.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof ei)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof ri)t={delete:this.toName(e.key)};else if(e instanceof ti)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof ni))return u("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Zr.NONE;if(e.update){ot(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new ti(r,i,o,n)}return new ei(r,i,n)}if(e.delete){var r=this.fromName(e.delete);return new ri(r,n)}if(e.transform){var r=this.fromName(e.transform.document),a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return c(!0===n.exists,'Transforms only support precondition "exists == true"'),new ni(r,a)}return u("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return c(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:u("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Zr.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Zr.exists(e.exists):Zr.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new Qr(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(c(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof lo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ho)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof po)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof fo)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw u("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)c("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=lo.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ho(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e){var r=e.removeAllFromArray.values||[];n=new po(r.map(function(e){return t.fromValue(e)}))}else if("increment"in e){var i=this.fromValue(e.increment);c(i instanceof Ur,"NUMERIC_ADD transform requires a NumberValue"),n=new fo(i)}else u("Unknown transform proto: "+JSON.stringify(e));var o=Qt.fromServerFormat(e.fieldPath);return new Kr(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;c(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Qi.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(c(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){c(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var h=null;return n.endAt&&(h=this.fromCursor(n.endAt)),new Qi(t,i,s,a,u,l,h)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Sn.Listen:return null;case Sn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Sn.LimboResolution:return"limbo-document";default:return u("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},t.targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof $i?t.toUnaryOrFieldFilter(e):u("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):u("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new ao(r,n)},e.prototype.toDirection=function(e){return go[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return oo.ASCENDING;case"DESCENDING":return oo.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return vo[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Zi.EQUAL;case"GREATER_THAN":return Zi.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Zi.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Zi.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Zi.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Zi.ARRAY_CONTAINS;case"IN":return Zi.IN;case"ARRAY_CONTAINS_ANY":return Zi.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return u("Unspecified operator");default:return u("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return Qt.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new so(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return $i.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Zi.EQUAL){if(e.value.isEqual(Br.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Lr.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return $i.create(t,Zi.EQUAL,Br.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return $i.create(n,Zi.EQUAL,Lr.INSTANCE);case"OPERATOR_UNSPECIFIED":return u("Unspecified filter");default:return u("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=e.fieldPaths||[],n=t.map(function(e){return Qt.fromServerFormat(e)});return Xr.fromArray(n)},e}(),_o=function(){function e(){this.listeners=[]}return e}(),xo=function(){function e(e){this.syncEngine=e,this.queries=new Fn(function(e){return e.canonicalId()}),this.onlineState=xi.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new _o,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return Dt.__generator(this,function(o){return t=e.query,n=!1,r=this.queries.get(t),r&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(e)}})},e}(),wo=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=xi.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(c(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Ri.Metadata&&t.push(i)}e=new Fi(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(c(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==xi.Offline;return this.options.waitForSyncWhenOnline&&n?(c(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===xi.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){c(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),To=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=ne(),i=ne(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Ri.Added:r=r.add(s.doc.key);break;case Ri.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),Eo=function(){function e(e){this.key=e}return e}(),So=function(){function e(e){this.key=e}return e}(),ko=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=ne(),this.mutatedKeys=ne(),this.documentSet=new Pi(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Ui,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=t instanceof Ln?t:null;h&&(c(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var p=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;if(l&&h){l.data.isEqual(h.data)?p!==f&&(r.track({type:Ri.Metadata,doc:h}),d=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Ri.Modified,doc:h}),d=!0,u&&n.query.docComparator(h,u)>0&&(s=!0))}else!l&&h?(r.track({type:Ri.Added,doc:h}),d=!0):l&&!h&&(r.track({type:Ri.Removed,doc:l}),d=!0,u&&(s=!0));d&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var l=a.last();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Ri.Removed,doc:l})}return c(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;c(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return st(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current,u=s?Li.Synced:Li.Local,l=u!==this.syncState;if(this.syncState=u,0!==o.length||l){return{snapshot:new Fi(this.query,e.documentSet,i,o,e.mutatedKeys,u===Li.Local,l,!1),limboChanges:a}}return{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===xi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ui,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return c(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=ne(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new So(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new Eo(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=ne();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Fi.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Li.Local)},e}(),Co=function(){function e(e,t,n){this.query=e,this.targetId=t,this.view=n}return e}(),Mo=function(){function e(e){this.key=e}return e}(),Ao=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Fn(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new un(Jt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new oi,this.mutationUserCallbacks={},this.limboTargetIdGenerator=kn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=xi.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){c(null!==e,"SyncEngine listener cannot be null"),c(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return Dt.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l;return Dt.__generator(this,function(h){switch(h.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=h.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=h.sent(),o=new ko(n,i),a=o.computeDocChanges(r),s=ji.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==xi.Offline),u=o.applyChanges(a,!0===this.isPrimary,s),c(0===u.limboChanges.length,"View returned limbo docs before target ack from the server."),c(!!u.snapshot,"applyChanges for new view should always return a snapshot"),l=new Co(n,e.targetId,o),this.queryViewsByQuery.set(n,l),this.queryViewsByTarget[e.targetId]=l,[2,u.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r;return Dt.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Dt.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),(t=this.queryViewsByQuery.get(e),c(!!t,"Trying to unlisten on query not found:"+e),this.isPrimary)?(this.sharedClientState.removeLocalQueryTarget(t.targetId),n=this.sharedClientState.isActiveQueryTarget(t.targetId),n?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupQuery(t)}).catch(Be)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n;return Dt.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t){return void 0===t&&(t=5),Dt.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return Dt.__generator(this,function(a){switch(a.label){case 0:if(c(t>=0,"Got negative number of retries for transaction."),n=this.remoteStore.createTransaction(),r=e(n),Xe(r)||!r.catch||!r.then)return[2,Promise.reject(Error("Transaction callback must return a Promise"))];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,r];case 2:return i=a.sent(),[4,n.commit()];case 3:return a.sent(),[2,i];case 4:return o=a.sent(),t>0&&this.isRetryableTransactionError(o)?[2,this.runTransaction(e,t-1)]:[2,Promise.reject(o)];case 5:return[2]}})})},e.prototype.applyRemoteEvent=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Dt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=i.sent(),g(e.targetChanges,function(e,t){var n=r.limboResolutionsByTarget[Number(e)];n&&(c(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?n.receivedDocument=!0:t.modifiedDocuments.size>0?c(n.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(c(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return i.sent(),[3,6];case 4:return n=i.sent(),[4,Be(n)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Oi.RemoteStore||!this.isPrimary&&t===Oi.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);c(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return Dt.__generator(this,function(l){switch(l.label){case 0:return this.assertSubscribed("rejectListens()"),(this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=new un(Jt.comparator),i=i.insert(r,new Nn(r,sn.forDeletedDoc())),o=ne().add(r),a=new Bi(sn.MIN,{},new fn(V),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return s=this.queryViewsByTarget[e],c(!!s,"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(Be)];case 2:l.sent(),this.syncEngineListener.onWatchError(s.query,t),l.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return Dt.__awaiter(this,void 0,void 0,function(){var r;return Dt.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return r=i.sent(),null===r?(o("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):u("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r;return Dt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,Be(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n,r;return Dt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,Be(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new un(V)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(c(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof Eo)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof So){o("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e);var a=this.limboDocumentRefs.containsKey(i.key);a||this.removeLimboTarget(i.key)}else u("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){o("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Qi.atPath(t.path);this.limboResolutionsByTarget[n]=new Mo(t),this.remoteStore.listen(new gr(r,n,Sn.LimboResolution,qt.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return Dt.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=To.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){c(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n;return Dt.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return Dt.__generator(this,function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),d(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;d(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new un(Jt.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return Dt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,l;return Dt.__generator(this,function(h){switch(h.label){case 0:t=[],n=[],r=0,i=e,h.label=1;case 1:return r<i.length?(o=i[r],a=void 0,s=this.queryViewsByTarget[o],s?[4,this.localStore.releaseQuery(s.query,!0)]:[3,5]):[3,11];case 2:return h.sent(),[4,this.localStore.allocateQuery(s.query)];case 3:return a=h.sent(),[4,this.synchronizeViewAndComputeSnapshot(s)];case 4:return u=h.sent(),u.snapshot&&n.push(u.snapshot),[3,9];case 5:return c(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return l=h.sent(),c(!!l,"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return a=h.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:h.sent(),h.label=9;case 9:t.push(a),h.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Qe(t)}return!1},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return Dt.__awaiter(this,void 0,void 0,function(){var r,i,a,s,c,l;return Dt.__generator(this,function(h){switch(h.label){case 0:if(this.isPrimary)return o("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(r=t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return h.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return i=h.sent(),a=Bi.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(i,a)];case 3:return h.sent(),[3,11];case 4:return s=h.sent(),be(s)?(c=[],d(this.queryViewsByTarget,function(e){return c.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(c)]):[3,6];case 5:return h.sent(),[3,7];case 6:throw s;case 7:return[3,8];case 8:return l=this.queryViewsByTarget[e],this.removeAndCleanupQuery(l),[4,this.localStore.releaseQuery(l.query,!0)];case 9:return h.sent(),this.syncEngineListener.onWatchError(l.query,n),[3,11];case 10:u("Unexpected target state: "+t),h.label=11;case 11:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return Dt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,h,i,p=this;return Dt.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(i=r[n],c(!this.queryViewsByTarget[i],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(i)]):[3,6];case 2:return o=f.sent(),c(!!o,"Query data for active target "+i+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return a=f.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 4:f.sent(),this.remoteStore.listen(a),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return Dt.__generator(this,function(n){switch(n.label){case 0:return t=u.queryViewsByTarget[e],t?[4,u.localStore.releaseQuery(t.query,!1).then(function(){p.remoteStore.unlisten(e),p.removeAndCleanupQuery(t)}).catch(Be)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,h=t,f.label=7;case 7:return l<h.length?(i=h[l],[5,s(i)]):[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?ne().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:ne()},e}(),Oo=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Do="SharedClientState",Io="firestore_clients",Ro="firestore_mutations",Po="firestore_targets",Lo="firestore_online_state",No="firestore_sequence_number",Uo=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,c(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),s=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code)&&(s=new Bt(i.error.code,i.error.message)),o?new e(t,n,i.state,s):(a(Do,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Fo=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,c(void 0!==n===("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code)&&(o=new Bt(r.error.code,r.error.message)),i?new e(t,r.state,o):(a(Do,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Bo=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=re(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ke(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(a(Do,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),jo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"===typeof n&&n.onlineState in xi&&"string"===typeof n.clientId?new e(n.clientId,xi[n.onlineState]):(a(Do,"Failed to parse online state: "+t),null)},e}(),Go=function(){function e(){this.activeTargetIds=re()}return e.prototype.addQueryTarget=function(e){c(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Vo=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new Bt(Ft.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=No+"_"+r,this.activeClients[this.localClientId]=new Go,this.clientStateKeyRe=new RegExp("^"+Io+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ro+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Po+"_"+a+"_(\\d+)$"),this.onlineStateKey=Lo+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return Dt.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,l,h,p=this;return Dt.__generator(this,function(f){switch(f.label){case 0:return c(!this.started,"WebStorageSharedClientState already started"),c(null!==this.syncEngine,"syncEngine property must be set before calling start()"),c(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Bo.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),a=this.storage.getItem(this.onlineStateKey),a&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return p.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=re();return g(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Fo.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return o(Do,"READ",e,t),t},e.prototype.setItem=function(e,t){o(Do,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){o(Do,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(o(Do,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void a("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Dt.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,a;return Dt.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(c(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=ut(e.newValue))!==qt.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Uo(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:xi[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Fo(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return c(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Io+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Po+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Ro+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return c(null!==n,"Cannot parse client state key '"+e+"'"),Bo.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);c(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Uo.fromWebStorageEntry(new Oo(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);c(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Fo.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return jo.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(o(Do,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return Dt.__awaiter(n,void 0,void 0,function(){return Dt.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Dt.__awaiter(n,void 0,void 0,function(){return Dt.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),zo=function(){function e(){this.localState=new Go,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Go,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Ho=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return _r.withCacheSize(this.cacheSizeBytes)},e}(),Wo=function(){function e(){}return e}(),qo=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=jt.newId(),this._clientShutdown=!1}return e.prototype.start=function(e){var t=this;this.verifyNotShutdown();var n=new Zt,r=new Zt,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Ho?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof Bt?e.code===Ft.FAILED_PRECONDITION||e.code===Ft.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotShutdown=function(){if(this._clientShutdown)throw new Bt(Ft.FAILED_PRECONDITION,"The client has already been shutdown.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Ar.buildStoragePrefix(this.databaseInfo),i=new bo(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Dt.__awaiter(n,void 0,void 0,function(){var n,o;return Dt.__generator(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Vo.isAvailable(this.platform))throw new Bt(Ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.synchronizeTabs?(this.sharedClientState=new Vo(this.asyncQueue,this.platform,r,this.clientId,e),[4,Ar.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new zo,[4,Ar.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=pi.createEagerPersistence(this.clientId),this.sharedClientState=new zo,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return o("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return Dt.__awaiter(n,void 0,void 0,function(){var n,i,o,a,s,u=this;return Dt.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new si(this.persistence,e),t&&(this.lruScheduler=new xr(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new Mi(this.asyncQueue,r,this.credentials,i),a=function(e){return u.syncEngine.applyOnlineStateChange(e,Oi.RemoteStore)},s=function(e){return u.syncEngine.applyOnlineStateChange(e,Oi.SharedClientState)},this.remoteStore=new Xi(this.localStore,o,this.asyncQueue,a,n),this.syncEngine=new Ao(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new xo(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return Dt.__awaiter(u,void 0,void 0,function(){return Dt.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return Dt.__awaiter(u,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return[4,this.shutdown()];case 1:return e.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),o("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(){var e=this;return this.asyncQueue.enqueue(function(){return Dt.__awaiter(e,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this._clientShutdown?[3,4]:(this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()]);case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:e.sent(),this.credentials.removeChangeListener(),this._clientShutdown=!0,e.label=4;case 4:return[2]}})})})},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotShutdown();var i=new wo(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Ln)return e;if(e instanceof Nn)return null;throw new Bt(Ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=ne(),r=new ko(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotShutdown();var n=new Zt;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(e.prototype,"clientShutdown",{get:function(){return this._clientShutdown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return Dt.__awaiter(t,void 0,void 0,function(){return Dt.__generator(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),Yo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Xo=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];T("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(E("FieldPath","string",n,e[n]),0===e[n].length)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw B("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(Qt.keyField().canonicalString()),e}(),Ko=new RegExp("[~\\*/\\[\\]]"),Qo=function(){function e(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}return e}(),Jo=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Oo.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){c(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Zo=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;c(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new Bt(Ft.ABORTED,"getToken aborted due to token change.");return n?(c("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Qo(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){c(null!=this.tokenListener,"removeChangeListener() called twice"),c(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return c(null===e||"string"===typeof e,"Received invalid UID: "+e),new Oo(e)},e}(),$o=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Oo.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),ea=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new $o(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Oo.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}(),ta=function(){function e(e){this._methodName=e}return e.delete=function(){return b("FieldValue.delete",arguments),na.instance},e.serverTimestamp=function(){return b("FieldValue.serverTimestamp",arguments),ra.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x("FieldValue.arrayUnion",arguments,1),new ia(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x("FieldValue.arrayRemove",arguments,1),new oa(e)},e.increment=function(e){return E("FieldValue.increment","number",1,e),_("FieldValue.increment",arguments,1),new aa(e)},e.prototype.isEqual=function(e){return this===e},e}(),na=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return Dt.__extends(t,e),t.instance=new t,t}(ta),ra=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return Dt.__extends(t,e),t.instance=new t,t}(ta),ia=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return Dt.__extends(t,e),t}(ta),oa=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return Dt.__extends(t,e),t}(ta),aa=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return Dt.__extends(t,e),t}(ta),sa=h(ta,"Use FieldValue.<field>() instead."),ua=/^__.*__$/,ca=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new ti(e,this.data,this.fieldMask,t)):n.push(new ei(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new ni(e,this.fieldTransforms)),n},e}(),la=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new ti(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new ni(e,this.fieldTransforms)),n},e}();!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}(zi||(zi={}));var ha=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Bt(Ft.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(ft(this.dataSource)&&ua.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),pa=function(){function e(e,t){this.databaseId=e,this.key=t}return e}(),fa=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new ha(zi.Set,e,Qt.EMPTY_PATH);mt("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new ca(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new ha(zi.MergeSet,e,Qt.EMPTY_PATH);mt("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new fn(Qt.comparator),c=0,l=n;c<l.length;c++){var h=l[c],p=void 0;if(h instanceof Xo)p=h._internalPath;else{if("string"!==typeof h)throw u("Expected stringOrFieldPath to be a string or a FieldPath");p=vt(e,h)}if(!r.contains(p))throw new Bt(Ft.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");s=s.add(p)}i=Xr.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Xr.fromArray(r.fieldMask),o=r.fieldTransforms;return new ca(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new ha(zi.Update,e,Qt.EMPTY_PATH);mt("Data must be an object, but it was:",r,t);var i=new fn(Qt.comparator),o=qr.EMPTY;g(t,function(t,a){var s=vt(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof na)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Xr.fromSet(i);return new la(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new ha(zi.Update,e,Qt.EMPTY_PATH),o=[gt(e,t)],a=[n];if(r.length%2!==0)throw new Bt(Ft.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(gt(e,r[s])),a.push(r[s+1]);for(var u=new fn(Qt.comparator),c=qr.EMPTY,s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),p=this.runPreConverter(a[s],h);if(p instanceof na)u=u.add(l);else{var f=this.parseData(p,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var d=Xr.fromSet(u);return new la(c,d,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new ha(zi.Argument,e,Qt.EMPTY_PATH),r=this.parseData(t,n);return c(null!=r,"Parsed data should not be null."),c(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=yt(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(e=this.runPreConverter(e,t),dt(e))return mt("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ta)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new un(V);return v(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):g(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new qr(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Lr.INSTANCE),n.push(s),r++}return new Yr(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!ft(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof na){if(t.dataSource!==zi.MergeSet)throw t.dataSource===zi.Update?(c(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof ra)t.fieldTransforms.push(new Kr(t.path,lo.instance));else if(e instanceof ia){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ho(n);t.fieldTransforms.push(new Kr(t.path,r))}else if(e instanceof oa){var n=this.parseArrayTransformElements(e._methodName,e._elements),i=new po(n);t.fieldTransforms.push(new Kr(t.path,i))}else if(e instanceof aa){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new fo(o);t.fieldTransforms.push(new Kr(t.path,a))}else u("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Lr.INSTANCE;if("number"===typeof e)return Ke(e)?new Fr(e):new Br(e);if("boolean"===typeof e)return Nr.of(e);if("string"===typeof e)return new jr(e);if(e instanceof Date)return new Gr(an.fromDate(e));if(e instanceof an)return new Gr(new an(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Ki)return new Wr(e);if(e instanceof Gt)return new zr(e);if(e instanceof pa)return new Hr(e.databaseId,e.key);throw t.createError("Unsupported field value: "+L(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new ha(zi.Argument,e,Qt.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}(),da="firestore.googleapis.com",ma=!0,ga=!0,va=!1,ya=_r.COLLECTION_DISABLED,ba=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Bt(Ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=da,this.ssl=ma}else k("settings","non-empty string","host",e.host),this.host=e.host,C("settings","boolean","ssl",e.ssl),this.ssl=f(e.ssl,ma);if(F("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),C("settings","object","credentials",e.credentials),this.credentials=e.credentials,C("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?a("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&a("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=f(e.timestampsInSnapshots,ga),C("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=_r.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==ya&&e.cacheSizeBytes<_r.MINIMUM_CACHE_SIZE_BYTES)throw new Bt(Ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+_r.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}C("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?va:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),_a=function(){function e(){}return e}(),xa=function(){function e(t){var n=this;this._queue=new en,this.INTERNAL={delete:function(){return Dt.__awaiter(n,void 0,void 0,function(){return Dt.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return e.sent(),[2]}})})}};var r=new _a;if("object"===typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Zo(i)}else{var o=t;if(!o.projectId)throw new Bt(Ft.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Wt(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Jo}r.settings=new ba({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(_("Firestore.settings",arguments,1),E("Firestore.settings","object",1,e),p(e,"persistence"))throw new Bt(Ft.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new ba(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new Bt(Ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=lt(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Bt(Ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&a("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=f(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Ho(this._config.settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Ar.buildStoragePrefix(this.makeDatabaseInfo()),n=new Zt;return this._queue.enqueueAndForget(function(){return Dt.__awaiter(e,void 0,void 0,function(){var e;return Dt.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new Bt(Ft.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Ar.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Wo),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new zt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},e.prototype.configureClient=function(e){var t=this;c(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),c(!this._firestoreClient,"configureClient() called multiple times");var n=this.makeDatabaseInfo(),r=function(e){if(e instanceof Ea){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.isEqual(n))throw new Bt(Ft.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new pa(t._config.databaseId,e._key)}return e};return this._dataConverter=new fa(r),this._firestoreClient=new qo(Ut.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!p(t,"projectId"))throw new Bt(Ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!==typeof n)throw new Bt(Ft.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Wt(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Bt(Ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return _("Firestore.collection",arguments,1),E("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Oa(Xt.fromString(e),this)},e.prototype.doc=function(e){return _("Firestore.doc",arguments,1),E("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Ea.forPath(Xt.fromString(e),this)},e.prototype.collectionGroup=function(e){if(_("Firestore.collectionGroup",arguments,1),E("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Ma(new Qi(Xt.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return _("Firestore.runTransaction",arguments,1),E("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new wa(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Ta(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(r()){case Mt.DEBUG:return"debug";case Mt.ERROR:return"error";case Mt.SILENT:return"silent";default:return u("Unknown log level: "+r())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(_("Firestore.setLogLevel",arguments,1),E("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":i(Mt.DEBUG);break;case"error":i(Mt.ERROR);break;case"silent":i(Mt.SILENT);break;default:throw new Bt(Ft.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),wa=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;_("Transaction.get",arguments,1);var n=Tt("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return u("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Nn)return new ka(t._firestore,n._key,null,!1,!1);if(r instanceof Ln)return new ka(t._firestore,n._key,r,!1,!1);throw u("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){w("Transaction.set",arguments,2,3);var r=Tt("Transaction.set",e,this._firestore);n=_t("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a;return"string"===typeof t||t instanceof Xo?(x("Transaction.update",arguments,3),o=Tt("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,r)):(_("Transaction.update",arguments,2),o=Tt("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(o._key,a),this},e.prototype.delete=function(e){_("Transaction.delete",arguments,1);var t=Tt("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Ta=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){w("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Tt("WriteBatch.set",e,this._firestore);n=_t("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Zr.NONE)),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,a;return"string"===typeof t||t instanceof Xo?(x("WriteBatch.update",arguments,3),o=Tt("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,r)):(_("WriteBatch.update",arguments,2),o=Tt("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(a.toMutations(o._key,Zr.exists(!0))),this},e.prototype.delete=function(e){_("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Tt("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new ri(t._key,Zr.NONE)),this},e.prototype.commit=function(){return Dt.__awaiter(this,void 0,void 0,function(){return Dt.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new Bt(Ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Ea=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!==0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new Jt(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Oa(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(_("DocumentReference.collection",arguments,1),E("DocumentReference.collection","non-empty string",1,e),!e)throw new Bt(Ft.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Xt.fromString(e);return new Oa(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw B("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){w("DocumentReference.set",arguments,1,2),t=_t("DocumentReference.set",t);var n=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Zr.NONE))},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"===typeof e||e instanceof Xo?(x("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,n)):(_("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(i.toMutations(this._key,Zr.exists(!0)))},e.prototype.delete=function(){return _("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ri(this._key,Zr.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];w("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof e[i]||ht(e[i])||(r=e[i],F("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),C("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ht(e[i])?n=e[i]:(E("DocumentReference.onSnapshot","function",i,e[i]),S("DocumentReference.onSnapshot","function",i+1,e[i+1]),S("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Yo({next:function(e){if(t.next){c(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new ka(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Qi.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return w("DocumentReference.get",arguments,0,1),wt("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new ka(t.firestore,t._key,e,!0,e instanceof Ln&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Bt(Ft.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Bt(Ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Sa=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),ka=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return w("DocumentSnapshot.data",arguments,0,1),e=xt("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Rr.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(w("DocumentSnapshot.get",arguments,1,2),t=xt("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(gt("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Rr.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ea(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Sa(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw B("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof qr)return this.convertObject(e,t);if(e instanceof Yr)return this.convertArray(e,t);if(e instanceof Hr){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||a("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Ea(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return c("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(ka),Ma=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){if(_("Query.where",arguments,3),U("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){I("Query.where",["<","<=","==",">=",">","array-contains"],2,n)}var i,o=gt("Query.where",t),a=Zi.fromString(n);if(o.isKeyField()){if(a===Zi.ARRAY_CONTAINS||a===Zi.ARRAY_CONTAINS_ANY)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Zi.IN){this.validateDisjunctiveFilterElements(r,a);for(var s=[],u=0,c=r;u<c.length;u++){var l=c[u];s.push(this.parseDocumentIdValue(l))}i=new Yr(s)}else i=this.parseDocumentIdValue(r)}else a!==Zi.IN&&a!==Zi.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var h=$i.create(o,a,i);return this.validateNewFilter(h),new e(this._query.addFilter(h),this.firestore)},e.prototype.orderBy=function(t,n){w("Query.orderBy",arguments,1,2),S("Query.orderBy","non-empty string",2,n);var r;if(void 0===n||"asc"===n)r=oo.ASCENDING;else{if("desc"!==n)throw new Bt(Ft.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=oo.DESCENDING}if(null!==this._query.startAt)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=gt("Query.orderBy",t),o=new so(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(_("Query.limit",arguments,1),E("Query.limit","number",1,t),t<=0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw B("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(U(e,1,t),t instanceof ka){if(n.length>0)throw new Bt(Ft.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Bt(Ft.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Hr(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Vr)throw new Bt(Ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new ao(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Bt(Ft.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!==typeof a)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Xt.fromString(a));if(!Jt.isDocumentKey(s))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Jt(s);i.push(new Hr(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new ao(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];w("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof e[i]||ht(e[i])||(r=e[i],F("Query.onSnapshot",r,["includeMetadataChanges"]),C("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ht(e[i])?n=e[i]:(E("Query.onSnapshot","function",i,e[i]),S("Query.onSnapshot","function",i+1,e[i+1]),S("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Yo({next:function(e){t.next&&t.next(new Aa(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return w("Query.get",arguments,0,1),wt("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Aa(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Bt(Ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"===typeof e){if(""===e)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(Xt.fromString(e));if(!Jt.isDocumentKey(t))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Hr(this.firestore._databaseId,new Jt(t))}if(e instanceof Ea){var n=e;return new Hr(this.firestore._databaseId,n._key)}throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+L(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof $i){var t=[Zi.ARRAY_CONTAINS,Zi.ARRAY_CONTAINS_ANY],n=[Zi.IN,Zi.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Bt(Ft.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Aa=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Sa(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;w("QuerySnapshot.forEach",arguments,1,2),E("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Ma(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(F("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),C("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Bt(Ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=Et(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw B("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Ca(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!==typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Aa.prototype.docChanges,e,{get:function(){return bt()}})}catch(e){}});var Oa=function(e){function t(t,n){var r=e.call(this,Qi.atPath(t),n)||this;if(t.length%2!==1)throw new Bt(Ft.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return Dt.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Ea(new Jt(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(w("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=jt.newId()),E("CollectionReference.doc","non-empty string",1,e),""===e)throw new Bt(Ft.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Xt.fromString(e);return Ea.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){_("CollectionReference.add",arguments,1),E("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Ma),Da=h(xa,"Use firebase.firestore() instead."),Ia=h(wa,"Use firebase.firestore().runTransaction() instead."),Ra=h(Ta,"Use firebase.firestore().batch() instead."),Pa=h(Ea,"Use firebase.firestore().doc() instead."),La=h(ka),Na=h(Ca),Ua=h(Ma),Fa=h(Aa),Ba=h(Oa,"Use firebase.firestore().collection() instead."),ja={Firestore:Da,GeoPoint:Ki,Timestamp:an,Blob:Vt,Transaction:Ia,WriteBatch:Ra,DocumentReference:Pa,DocumentSnapshot:La,Query:Ua,QueryDocumentSnapshot:Na,QuerySnapshot:Fa,CollectionReference:Ba,FieldPath:Xo,FieldValue:sa,setLogLevel:xa.setLogLevel,CACHE_SIZE_UNLIMITED:ya},Ga=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Va=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){o("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){o("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!==typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),za=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){c(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){c(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){c(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){c(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){c(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){c(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),Ha="Connection",Wa={BatchGetDocuments:"batchGet",Commit:"commit"},qa="gl-js/ fire/"+Pt,Ya=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=qa},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(a,s){var c=new Rt.XhrIo;c.listenOnce(Rt.EventType.COMPLETE,function(){try{switch(c.getLastErrorCode()){case Rt.ErrorCode.NO_ERROR:var t=c.getResponseJson();o(Ha,"XHR received:",JSON.stringify(t)),a(t);break;case Rt.ErrorCode.TIMEOUT:o(Ha,'RPC "'+e+'" timed out'),s(new Bt(Ft.DEADLINE_EXCEEDED,"Request time out"));break;case Rt.ErrorCode.HTTP_ERROR:var n=c.getStatus();if(o(Ha,'RPC "'+e+'" failed with status:',n,"response text:",c.getResponseText()),n>0){var r=c.getResponseJson().error;if(r&&r.status&&r.message){var i=tt(r.status);s(new Bt(i,r.message))}else s(new Bt(Ft.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(Ha,'RPC "'+e+'" failed'),s(new Bt(Ft.UNAVAILABLE,"Connection failed."));break;default:u('RPC "'+e+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{o(Ha,'RPC "'+e+'" completed.')}});var l=JSON.stringify(t);o(Ha,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),c.send(i,"POST",l,h,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Rt.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),It.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");o(Ha,"Creating WebChannel: "+a+" "+i);var s=r.createWebChannel(a,i),u=!1,l=!1,h=new za({sendFn:function(e){l?o(Ha,"Not sending because WebChannel is closed:",e):(u||(o(Ha,"Opening WebChannel transport."),s.open(),u=!0),o(Ha,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}}),p=function(e,t){s.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return p(Rt.WebChannel.EventType.OPEN,function(){l||o(Ha,"WebChannel transport opened.")}),p(Rt.WebChannel.EventType.CLOSE,function(){l||(l=!0,o(Ha,"WebChannel transport closed"),h.callOnClose())}),p(Rt.WebChannel.EventType.ERROR,function(e){l||(l=!0,o(Ha,"WebChannel transport errored:",e),h.callOnClose(new Bt(Ft.UNAVAILABLE,"The operation could not be completed")))}),p(Rt.WebChannel.EventType.MESSAGE,function(e){if(!l){var t=e.data[0];c(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){o(Ha,"WebChannel received error:",r);var i=r.status,a=Ze(i),u=r.message;void 0===a&&(a=Ft.INTERNAL,u="Unknown error status: "+i+" with message "+r.message),l=!0,h.callOnClose(new Bt(a,u)),s.close()}else o(Ha,"WebChannel received:",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},e.prototype.makeUrl=function(e){var t=Wa[e];c(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),Xa=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Ya(e))},e.prototype.newConnectivityMonitor=function(){return Va.isAvailable()?new Va:new Ga},e.prototype.newSerializer=function(e){return new bo(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();Ut.setPlatform(new Xa),Ct(At),t.registerFirestore=Ct},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e){return"string"==typeof e}function i(e){return"number"==typeof e}function o(e,t){e=e.split("."),t=t||_n;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function a(){}function s(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function u(e){return"array"==s(e)}function c(e){var t=s(e);return"array"==t||"object"==t&&"number"==typeof e.length}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function h(e,t,n){return e.call.apply(e.bind,arguments)}function p(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function f(e,t,n){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:p,f.apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function g(){this.j=this.j,this.i=this.i}function v(e){e:{for(var t=Nt,n=e.length,i=r(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e)){t=o;break e}t=-1}return 0>t?null:r(e)?e.charAt(t):e[t]}function y(e){return Array.prototype.concat.apply([],arguments)}function b(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function _(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){return-1!=e.indexOf(t)}function w(e,t){return e<t?-1:e>t?1:0}function T(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function E(e){var t,n={};for(t in e)n[t]=e[t];return n}function S(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<On.length;o++)n=On[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){return k[" "](e),e}function C(e,t){var n=Vn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function M(){var e=_n.document;return e?e.documentMode:void 0}function A(e){return C(e,function(){for(var t=0,n=Cn(String(Dn)).split("."),r=Cn(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=w(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||w(0==a[2].length,0==s[2].length)||w(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function O(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function D(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Nn){e:{try{k(t.nodeName);var o=!0;break e}catch(e){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=r(e.pointerType)?e.pointerType:Yn[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}function I(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Kn,this.X=this.Z=!1}function R(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function P(e){this.src=e,this.a={},this.b=0}function L(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Sn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(R(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function N(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}function U(e,t,n,r,i){if(r&&r.once)return j(e,t,n,r,i);if(u(t)){for(var o=0;o<t.length;o++)U(e,t[o],n,r,i);return null}return n=Y(n),e&&e[Xn]?e.Aa(t,n,l(r)?!!r.capture:!!r,i):F(e,t,n,!1,r,i)}function F(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=l(i)?!!i.capture:!!i;if(a&&!Hn)return null;var s=q(e);if(s||(e[Qn]=s=new P(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=B(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)qn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(z(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function B(){var e=W,t=Hn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function j(e,t,n,r,i){if(u(t)){for(var o=0;o<t.length;o++)j(e,t[o],n,r,i);return null}return n=Y(n),e&&e[Xn]?e.Ba(t,n,l(r)?!!r.capture:!!r,i):F(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(u(t))for(var o=0;o<t.length;o++)G(e,t[o],n,r,i);else r=l(r)?!!r.capture:!!r,n=Y(n),e&&e[Xn]?(e=e.c,(t=String(t).toString())in e.a&&(o=e.a[t],-1<(n=N(o,n,r,i))&&(R(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=q(e))&&(t=e.a[t.toString()],e=-1,t&&(e=N(t,n,r,i)),(n=-1<e?t[e]:null)&&V(n))}function V(e){if(!i(e)&&e&&!e.X){var t=e.src;if(t&&t[Xn])L(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(z(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=q(t))?(L(n,e),0==n.b&&(n.src=null,t[Qn]=null)):R(e)}}}function z(e){return e in Jn?Jn[e]:Jn[e]="on"+e}function H(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&V(e),n.call(r,t)}function W(e,t){return!!e.X||(Hn?H(e,new D(t,this)):(t=new D(t||o("window.event"),this),H(e,t)))}function q(e){return e=e[Qn],e instanceof P?e:null}function Y(e){return"function"==s(e)?e:(e[Zn]||(e[Zn]=function(t){return e.handleEvent(t)}),e[Zn])}function X(){g.call(this),this.c=new P(this),this.J=this,this.B=null}function K(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&L(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}function Q(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function J(){this.b=this.a=null}function Z(){var e=rr,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function $(){this.next=this.b=this.a=null}function ee(e){_n.setTimeout(function(){throw e},0)}function te(e,t){tr||ne(),nr||(tr(),nr=!0),rr.add(e,t)}function ne(){var e=_n.Promise.resolve(void 0);tr=function(){e.then(re)}}function re(){for(var e;e=Z();){try{e.a.call(e.b)}catch(e){ee(e)}var t=er;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}nr=!1}function ie(e,t){X.call(this),this.b=e||1,this.a=t||_n,this.f=f(this.gb,this),this.g=Tn()}function oe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ae(e,t,n){if("function"==s(e))n&&(e=f(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=f(e.handleEvent,e)}return 2147483647<Number(t)?-1:_n.setTimeout(e,t||0)}function se(e,t,n){g.call(this),this.f=null!=n?f(e,n):e,this.c=t,this.b=f(this.ab,this),this.a=[]}function ue(e){e.U=ae(e.b,e.c),e.f.apply(null,e.a)}function ce(e){g.call(this),this.b=e,this.a={}}function le(e,t,n,r){u(n)||(n&&(ir[0]=n.toString()),n=ir);for(var i=0;i<n.length;i++){var o=U(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function he(e){T(e.a,function(e,t){this.a.hasOwnProperty(t)&&V(e)},e),e.a={}}function pe(){}function fe(e){O.call(this,"serverreachability",e)}function de(e){or.dispatchEvent(new fe(or,e))}function me(e){O.call(this,"statevent",e)}function ge(e){or.dispatchEvent(new me(or,e))}function ve(e){O.call(this,"timingevent",e)}function ye(e,t){if("function"!=s(e))throw Error("Fn must not be null and must be a function");return _n.setTimeout(function(){e()},t)}function be(){}function _e(e){var t;return(t=e.a)||(t=e.a={}),t}function xe(){}function we(){O.call(this,"d")}function Te(){O.call(this,"c")}function Ee(){}function Se(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ce(this),this.O=lr,e=Ln?125:void 0,this.P=new ie(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}function ke(e,t,n){e.F=1,e.f=$e(qe(t)),e.l=n,e.H=!0,Me(e,null)}function Ce(e,t,n,r){e.F=1,e.f=$e(qe(t)),e.l=null,e.H=n,Me(e,r)}function Me(e,t){e.v=Tn(),De(e),e.D=qe(e.f),Ze(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new se(f(e.Ka,e,e.a),e.J)),le(e.I,e.a,"readystatechange",e.eb),t=e.h?E(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),de(1)}function Ae(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Oe(e,n);if(i==pr){4==t&&(e.c=4,ge(14),r=!1);break}if(i==hr){e.c=4,ge(15),r=!1;break}Ne(e,i)}4==t&&0==n.length&&(e.c=1,ge(16),r=!1),e.b=e.b&&r,r||(Le(e),Pe(e))}function Oe(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?pr:(n=Number(t.substring(n,r)),isNaN(n)?hr:(r+=1)+n>t.length?pr:(t=t.substr(r,n),e.A=r+n,t))}function De(e){e.R=Tn()+e.O,Ie(e,e.O)}function Ie(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ye(f(e.bb,e),t)}function Re(e){e.i&&(_n.clearTimeout(e.i),e.i=null)}function Pe(e){e.g.Da()||e.m||e.g.na(e)}function Le(e){Re(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,oe(e.P),he(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Ne(e,t){try{e.g.Ga(e,t),de(4)}catch(e){}}function Ue(e){if(e.C&&"function"==typeof e.C)return e.C();if(r(e))return e.split("");if(c(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function Fe(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(c(e)||r(e))kn(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(c(e)||r(e)){n=[];for(var i=e.length,o=0;o<i;o++)n.push(o)}else for(o in n=[],i=0,e)n[i++]=o;i=Ue(e),o=i.length;for(var a=0;a<o;a++)t.call(void 0,i[a],n&&n[a],e)}}function Be(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Be)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function je(e){e.b={},e.a.length=0,e.c=0}function Ge(e,t){ze(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Ve(e))}function Ve(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];ze(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],ze(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function He(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function We(e,t){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;e instanceof We?(this.h=void 0!==t?t:e.h,Ye(this,e.f),this.j=e.j,Xe(this,e.b),Ke(this,e.i),this.a=e.a,Qe(this,lt(e.c)),this.g=e.g):e&&(n=String(e).match(fr))?(this.h=!!t,Ye(this,n[1]||"",!0),this.j=nt(n[2]||""),Xe(this,n[3]||"",!0),Ke(this,n[4]),this.a=nt(n[5]||"",!0),Qe(this,n[6]||"",!0),this.g=nt(n[7]||"")):(this.h=!!t,this.c=new ot(null,this.h))}function qe(e){return new We(e)}function Ye(e,t,n){e.f=n?nt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Xe(e,t,n){e.b=n?nt(t,!0):t}function Ke(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Qe(e,t,n){t instanceof ot?(e.c=t,pt(e.c,e.h)):(n||(t=rt(t,vr)),e.c=new ot(t,e.h))}function Je(e,t,n){e.c.set(t,n)}function Ze(e,t,n){u(n)||(n=[String(n)]),ct(e.c,t,n)}function $e(e){return Je(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Tn()).toString(36)),e}function et(e){return e instanceof We?qe(e):new We(e,void 0)}function tt(e,t,n,r){var i=new We(null,void 0);return e&&Ye(i,e),t&&Xe(i,t),n&&Ke(i,n),r&&(i.a=r),i}function nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rt(e,t,n){return r(e)?(e=encodeURI(e).replace(t,it),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function it(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function ot(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function at(e){e.a||(e.a=new Be,e.b=0,e.c&&He(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function st(e,t){at(e),t=ht(e,t),ze(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ge(e.a,t))}function ut(e,t){return at(e),t=ht(e,t),ze(e.a.b,t)}function ct(e,t,n){st(e,t),0<n.length&&(e.c=null,e.a.set(ht(e,t),b(n)),e.b+=n.length)}function lt(e){var t=new ot;return t.c=e.c,e.a&&(t.a=new Be(e.a),t.b=e.b),t}function ht(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function pt(e,t){t&&!e.f&&(at(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(st(this,t),ct(this,n,e))},e)),e.f=t}function ft(){}function dt(){}function mt(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function gt(e){var t=e.a.F.a;if(null!=t)ge(4),t?(ge(10),rn(e.a,e,!1)):(ge(11),rn(e.a,e,!0));else{e.b=new Se(e,void 0,void 0),e.b.h=e.h,t=e.a,t=cn(t,t.Y()?e.f:null,e.i),ge(4),Ze(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Je(t,n,r),Ce(e.b,t,!1,e.f)}}function vt(){this.a=this.b=null}function yt(){this.a=new Be}function bt(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[xn]||(e[xn]=++wn)):t.charAt(0)+e}function _t(e,t){this.b=e,this.a=t}function xt(e){this.g=e||br,_n.PerformanceNavigationTiming?(e=_n.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(_n.ka&&_n.ka.Ea&&_n.ka.Ea()&&_n.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new yt),this.b=null,this.c=[]}function wt(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new yt,e.b&&(kt(e,e.b),e.b=null))}function Tt(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function Et(e){return e.b?1:e.a?e.a.a.c:0}function St(e,t){return e.b?e=e.b==t:e.a?(t=bt(t),e=ze(e.a.a.b,t)):e=!1,e}function kt(e,t){e.a?e.a.add(t):e.b=t}function Ct(e,t){if(e.b&&e.b==t)e.b=null;else{var n;(n=e.a)&&(n=bt(t),n=ze(e.a.a.b,n)),n&&Ge(e.a.a,bt(t))}}function Mt(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return kn(e.a.C(),function(e){t=t.concat(e.j)}),t}return b(e.c)}function At(){}function Ot(){this.a=new At}function Dt(e,t,n){var r=n||"";try{Fe(e,function(e,n){var i=e;l(e)&&(i=$n(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function It(e,t){var n=new pe;if(_n.Image){var r=new Image;r.onload=d(Rt,n,r,"TestLoadImage: loaded",!0,t),r.onerror=d(Rt,n,r,"TestLoadImage: error",!1,t),r.onabort=d(Rt,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=d(Rt,n,r,"TestLoadImage: timeout",!1,t),_n.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Rt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Pt(e){X.call(this),this.headers=new Be,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=xr,this.D=this.F=!1}function Lt(e){return Rn&&A(9)&&i(e.timeout)&&void 0!==e.ontimeout}function Nt(e){return"content-type"==e.toLowerCase()}function Ut(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Ft(e),jt(e)}function Ft(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Bt(e){if(e.b&&"undefined"!=typeof bn&&(!e.s[1]||4!=Vt(e)||2!=e.T()))if(e.l&&4==Vt(e))ae(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Vt(e)){e.b=!1;try{var t=e.T();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.A).match(fr)[1]||null;if(!o&&_n.self&&_n.self.location){var a=_n.self.location.protocol;o=a.substr(0,a.length-1)}i=!wr.test(o?o.toLowerCase():"")}r=i}r?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Ft(e))}finally{jt(e)}}}function jt(e,t){if(e.a){Gt(e);var n=e.a,r=e.s[0]?a:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Gt(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(_n.clearTimeout(e.m),e.m=null)}function Vt(e){return e.a?e.a.readyState:0}function zt(e,t){return e.a?e.a.getResponseHeader(t):null}function Ht(e){var t="";return T(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}if(i)return e;if(n=Ht(n),r(e)){if(t=encodeURIComponent(String(t)),n=null!=n?"="+encodeURIComponent(String(n)):"",t+=n){if(n=e.indexOf("#"),0>n&&(n=e.length),0>(i=e.indexOf("?"))||i>n){i=n;var o=""}else o=e.substring(i+1,n);e=[e.substr(0,i),o,e.substr(n)],n=e[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Je(e,t,n),e}function qt(e){this.f=[],this.F=new vt,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!o("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=o("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=o("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=o("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=o("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new xt(e&&e.concurrentRequestLimit),this.ja=new Ot,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Yt(e){if(Xt(e),3==e.u){var t=e.P++,n=qe(e.B);Je(n,"SID",e.H),Je(n,"RID",t),Je(n,"TYPE","terminate"),$t(e,n),t=new Se(e,t,void 0),t.F=2,t.f=$e(qe(n)),n=!1,_n.navigator&&_n.navigator.sendBeacon&&(n=_n.navigator.sendBeacon(t.f.toString(),"")),!n&&_n.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=Tn(),De(t)}un(e)}function Xt(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(_n.clearTimeout(e.l),e.l=null),on(e),e.b.cancel(),e.h&&(i(e.h)&&_n.clearTimeout(e.h),e.h=null)}function Kt(e,t){e.f.push(new _t(e.Ra++,t)),3==e.u&&Qt(e)}function Qt(e){Tt(e.b)||e.h||(e.h=!0,te(e.Ia,e),e.A=0)}function Jt(e,t){return!(Et(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=ye(f(e.Ia,e,t),an(e,e.A)),e.A++,!0))}function Zt(e,t){var n;n=t?t.W:e.P++;var r=qe(e.B);Je(r,"SID",e.H),Je(r,"RID",n),Je(r,"AID",e.O),$t(e,r),e.g&&e.i&&Wt(r,e.g,e.i),n=new Se(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=en(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),kt(e.b,n),ke(n,r,t)}function $t(e,t){e.c&&Fe({},function(e,n){Je(t,n,e)})}function en(e,t,n){n=Math.min(e.f.length,n);var r=e.c?f(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Dt(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function tn(e){e.a||e.l||(e.S=1,te(e.Ha,e),e.v=0)}function nn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=ye(f(e.Ha,e),an(e,e.v)),e.v++,!0)}function rn(e,t,n){var r=t.l;r&&wt(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=cn(e,null,e.ha),Qt(e)}function on(e){null!=e.s&&(_n.clearTimeout(e.s),e.s=null)}function an(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function sn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=f(e.fb,e);n||(n=new We("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||Ye(n,"https"),$e(n)),It(n.toString(),r)}else ge(2);e.u=0,e.c&&e.c.ta(t),un(e),Xt(e)}function un(e){e.u=0,e.m=-1,e.c&&(0==Mt(e.b).length&&0==e.f.length||(e.b.c.length=0,b(e.f),e.f.length=0),e.c.sa())}function cn(e,t,n){var r=et(n);if(""!=r.b)t&&Xe(r,t+"."+r.b),Ke(r,r.i);else{var i,o=_n.location;i=t?t+"."+o.hostname:o.hostname,r=tt(o.protocol,i,+o.port,n)}return e.V&&T(e.V,function(e,t){Je(r,t,e)}),t=e.j,n=e.I,t&&n&&Je(r,t,n),Je(r,"VER",e.wa),$t(e,r),r}function ln(){}function hn(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))t=r;else{var i;(i=""==t)||(i=t.length-1,i=0<=i&&t.indexOf("/",i)==i),t+=i?r:"/"+r}}return t}function pn(){if(Rn&&!(10<=Number(Gn)))throw Error("Environmental error: no available transport.")}function fn(e,t){X.call(this),this.a=new qt(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:hn(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!_(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new gn(this)}function dn(e){we.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function mn(){Te.call(this),this.status=1}function gn(e){this.a=e}n.d(t,"ErrorCode",function(){return Cr}),n.d(t,"EventType",function(){return Mr}),n.d(t,"WebChannel",function(){return Ar}),n.d(t,"XhrIo",function(){return Or}),n.d(t,"createWebChannelTransport",function(){return kr});var vn,yn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},bn=bn||{},_n=yn,xn="closure_uid_"+(1e9*Math.random()>>>0),wn=0,Tn=Date.now||function(){return+new Date};g.prototype.j=!1,g.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),!1)){this[xn]||(this[xn]=++wn)}},g.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var En,Sn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(r(e))return r(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},kn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=r(e)?e.split(""):e,a=0;a<i;a++)a in o&&t.call(n,o[a],a,e)},Cn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};e:{var Mn=_n.navigator;if(Mn){var An=Mn.userAgent;if(An){En=An;break e}}En=""}var On="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");k[" "]=a;var Dn,In=x(En,"Opera"),Rn=x(En,"Trident")||x(En,"MSIE"),Pn=x(En,"Edge"),Ln=Pn||Rn,Nn=x(En,"Gecko")&&!(x(En.toLowerCase(),"webkit")&&!x(En,"Edge"))&&!(x(En,"Trident")||x(En,"MSIE"))&&!x(En,"Edge"),Un=x(En.toLowerCase(),"webkit")&&!x(En,"Edge");e:{var Fn="",Bn=function(){var e=En;return Nn?/rv:([^\);]+)(\)|;)/.exec(e):Pn?/Edge\/([\d\.]+)/.exec(e):Rn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Un?/WebKit\/(\S+)/.exec(e):In?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Bn&&(Fn=Bn?Bn[1]:""),Rn){var jn=M();if(null!=jn&&jn>parseFloat(Fn)){Dn=String(jn);break e}}Dn=Fn}var Gn,Vn={},zn=_n.document;Gn=zn&&Rn?M()||("CSS1Compat"==zn.compatMode?parseInt(Dn,10):5):void 0;var Hn=!Rn||9<=Number(Gn),Wn=Rn&&!A("9"),qn=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_n.addEventListener("test",a,t),_n.removeEventListener("test",a,t)}catch(e){}return e}();O.prototype.b=function(){this.Ja=!1},m(D,O);var Yn={2:"touch",3:"pen",4:"mouse"};D.prototype.b=function(){D.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Wn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var Xn="closure_listenable_"+(1e6*Math.random()|0),Kn=0;P.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=N(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new I(t,this.src,o,!!r,i),t.Z=n,e.push(t)),t};var Qn="closure_lm_"+(1e6*Math.random()|0),Jn={},Zn="__closure_events_fn_"+(1e9*Math.random()>>>0);m(X,g),X.prototype[Xn]=!0,vn=X.prototype,vn.addEventListener=function(e,t,n,r){U(this,e,t,n,r)},vn.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},vn.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var i=e.type||e;if(r(e))e=new O(e,n);else if(e instanceof O)e.target=e.target||n;else{var o=e;e=new O(i,n),S(e,o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.a=t[a];o=K(s,i,!0,e)&&o}if(s=e.a=n,o=K(s,i,!0,e)&&o,o=K(s,i,!1,e)&&o,t)for(a=0;a<t.length;a++)s=e.a=t[a],o=K(s,i,!1,e)&&o;return o},vn.G=function(){if(X.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)R(n[r]);delete t.a[e],t.b--}}this.B=null},vn.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},vn.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var $n=_n.JSON.stringify;Q.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var er=new Q(function(){return new $},function(e){e.reset()});J.prototype.add=function(e,t){var n=er.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},$.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},$.prototype.reset=function(){this.next=this.b=this.a=null};var tr,nr=!1,rr=new J;m(ie,X),vn=ie.prototype,vn.ba=!1,vn.L=null,vn.gb=function(){if(this.ba){var e=Tn()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(oe(this),this.start()))}},vn.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Tn())},vn.G=function(){ie.N.G.call(this),oe(this),delete this.a},m(se,g),vn=se.prototype,vn.ea=!1,vn.U=null,vn.Ua=function(e){this.a=arguments,this.U?this.ea=!0:ue(this)},vn.G=function(){se.N.G.call(this),this.U&&(_n.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},vn.ab=function(){this.U=null,this.ea&&(this.ea=!1,ue(this))},m(ce,g);var ir=[];ce.prototype.G=function(){ce.N.G.call(this),he(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var or=new X;m(fe,O),m(me,O),m(ve,O);var ar={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},sr={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};be.prototype.a=null;var ur={OPEN:"a",ib:"b",Na:"c",rb:"d"};m(we,O),m(Te,O);var cr;m(Ee,be),cr=new Ee;var lr=45e3,hr={},pr={};vn=Se.prototype,vn.setTimeout=function(e){this.O=e},vn.eb=function(e){e=e.target;var t=this.B;t&&3==Vt(e)?t.Ua():this.Ka(e)},vn.Ka=function(e){try{if(e==this.a)e:{var t=Vt(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!Ln&&!this.a.aa())){this.m||4!=t||7==n||de(8==n||0>=r?3:2),Re(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=zt(this.a,"X-HTTP-Initial-Response");if(a&&!_(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,ge(12),Le(this),Pe(this);break e}this.s=!0,Ne(this,s)}this.H?(Ae(this,t,o),Ln&&this.b&&3==t&&(le(this.I,this.P,"tick",this.cb),this.P.start())):Ne(this,o),4==t&&Le(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,De(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ge(12)):(this.c=0,ge(13)),Le(this),Pe(this)}}}catch(e){}},vn.cb=function(){if(this.a){var e=Vt(this.a),t=this.a.aa();this.A<t.length&&(Re(this),Ae(this,e,t),this.b&&4!=e&&De(this))}},vn.cancel=function(){this.m=!0,Le(this)},vn.bb=function(){this.i=null;var e=Tn();0<=e-this.R?(2!=this.F&&(de(3),ge(17)),Le(this),this.c=2,Pe(this)):Ie(this,this.R-e)},vn=Be.prototype,vn.C=function(){Ve(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},vn.K=function(){return Ve(this),this.a.concat()},vn.get=function(e,t){return ze(this.b,e)?this.b[e]:t},vn.set=function(e,t){ze(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},vn.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var fr=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;We.prototype.toString=function(){var e=[],t=this.f;t&&e.push(rt(t,dr,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(rt(t,dr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(rt(n,"/"==n.charAt(0)?gr:mr,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",rt(n,yr)),e.join("")},We.prototype.resolve=function(e){var t=qe(this),n=!!e.f;n?Ye(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Xe(t,e.b):n=null!=e.i;var r=e.a;if(n)Ke(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Qe(t,lt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var dr=/[#\/\?@]/g,mr=/[#\?:]/g,gr=/[#\?]/g,vr=/[#\?@]/g,yr=/#/g;vn=ot.prototype,vn.add=function(e,t){at(this),this.c=null,e=ht(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},vn.forEach=function(e,t){at(this),this.a.forEach(function(n,r){kn(n,function(n){e.call(t,n,r,this)},this)},this)},vn.K=function(){at(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},vn.C=function(e){at(this);var t=[];if(r(e))ut(this,e)&&(t=y(t,this.a.get(ht(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=y(t,e[n])}return t},vn.set=function(e,t){return at(this),this.c=null,e=ht(this,e),ut(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},vn.get=function(e,t){return e?(e=this.C(e),0<e.length?String(e[0]):t):t},vn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},m(dt,ft),vn=mt.prototype,vn.M=null,vn.$=function(e){return this.a.$(e)},vn.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},vn.Da=function(){return!1},vn.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=zt(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=zt(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return t=this.a,t.m=this.c,void sn(t,2)}this.f=r[0]}else t=this.a,t.m=this.c,sn(t,2)}else 1==this.M&&(this.g?ge(6):"11111"==t?(ge(5),this.g=!0,(!Rn||10<=Number(Gn))&&(this.c=200,this.b.cancel(),ge(11),rn(this.a,this,!0))):(ge(7),this.g=!1))},vn.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,gt(this)):1==this.M&&(this.g?(ge(11),rn(this.a,this,!0)):(ge(10),rn(this.a,this,!1)));else{0==this.M?ge(8):1==this.M&&ge(9);var e=this.a;e.m=this.c,sn(e,2)}},vn.Y=function(){return this.a.Y()},vn.ma=function(){return this.a.ma()},yt.prototype.add=function(e){this.a.set(bt(e),e)},yt.prototype.C=function(){return this.a.C()};var br=10;xt.prototype.cancel=function(){this.c=Mt(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(kn(this.a.C(),function(e){e.cancel()}),je(this.a.a))},At.prototype.stringify=function(e){return _n.JSON.stringify(e,void 0)},At.prototype.parse=function(e){return _n.JSON.parse(e,void 0)};var _r=_n.JSON.parse;m(Pt,X);var xr="",wr=/^https?$/i,Tr=["POST","PUT"];vn=Pt.prototype,vn.ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=_e(this.H?this.H:cr),this.a.onreadystatechange=f(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Ut(this,e)}e=n||"";var i=new Be(this.headers);r&&Fe(r,function(e,t){i.set(t,e)}),r=v(i.K()),n=_n.FormData&&e instanceof _n.FormData,!(0<=Sn(Tr,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Gt(this),0<this.o&&((this.D=Lt(this.a))?(this.a.timeout=this.o,this.a.ontimeout=f(this.Ca,this)):this.m=ae(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Ut(this,e)}},vn.Ca=function(){"undefined"!=typeof bn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},vn.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jt(this))},vn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),jt(this,!0)),Pt.N.G.call(this)},vn.Fa=function(){this.j||(this.w||this.l||this.g?Bt(this):this.$a())},vn.$a=function(){Bt(this)},vn.T=function(){try{return 2<Vt(this)?this.a.status:-1}catch(e){return-1}},vn.za=function(){try{return 2<Vt(this)?this.a.statusText:""}catch(e){return""}},vn.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},vn.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_r(t)}},vn.ya=function(){return this.h},vn.Ya=function(){return r(this.f)?this.f:String(this.f)},vn=qt.prototype,vn.wa=8,vn.u=1,vn.Da=function(){return 0==this.u},vn.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var t=new Se(this,e,void 0),n=this.i;this.J&&(n?(n=E(n),S(n,this.J)):n=this.J),null===this.g&&(t.h=n);var i;if(this.W)e:{for(var o=i=0;o<this.f.length;o++){var a=this.f[o];if(void 0===(a="__data__"in a.a&&(a=a.a.__data__,r(a))?a.length:void 0))break;if(4096<(i+=a)){i=o;break e}if(4096===i||o===this.f.length-1){i=o+1;break e}}i=1e3}else i=1e3;i=en(this,t,i),o=qe(this.B),Je(o,"RID",e),Je(o,"CVER",22),this.o&&this.j&&Je(o,"X-HTTP-Session-Id",this.j),$t(this,o),this.g&&n&&Wt(o,this.g,n),kt(this.b,t),this.W?(Je(o,"$req",i),Je(o,"SID","null"),t.S=!0,ke(t,o,null)):ke(t,o,i),this.u=2}}else 3==this.u&&(e?Zt(this,e):0==this.f.length||Tt(this.b)||Zt(this))},vn.Ha=function(){this.l=null,this.a=new Se(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=qe(this.pa);Je(e,"RID","rpc"),Je(e,"SID",this.H),Je(e,"CI",this.ia?"0":"1"),Je(e,"AID",this.O),$t(this,e),Je(e,"TYPE","xmlhttp"),this.g&&this.i&&Wt(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ce(this.a,e,!0,this.ga)},vn.Ga=function(e,t){if(0!=this.u&&(this.a==e||St(this.b,e)))if(this.m=e.o,!e.s&&St(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(u(n)&&3==n.length){if(t=n,0==t[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;on(this),this.a.cancel(),this.a=null}nn(this),ge(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ye(f(this.Za,this),6e3));if(1>=Et(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else sn(this,11)}else if((e.s||this.a==e)&&on(this),!_(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var o=r[3];null!=o&&(this.wa=o),r=r[5],null!=r&&i(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((o=zt(r,"X-Client-Wire-Protocol"))&&wt(this.b,o),this.j&&(r=zt(r,"X-HTTP-Session-Id")))&&(this.I=r,Je(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=cn(this,this.Y()?this.ga:null,this.ha),r.s?(Ct(this.b,r),(o=this.D)&&r.setTimeout(o),r.i&&(Re(r),De(r)),this.a=r):tn(this),0<this.f.length&&Qt(this)}else"stop"!=r[0]&&"close"!=r[0]||sn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?sn(this,7):Yt(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},vn.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,nn(this),ge(19))},vn.na=function(e){var t=null;if(this.a==e){on(this),this.a=null;var n=2}else{if(!St(this.b,e))return;t=e.j,Ct(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=Tn()-e.v,or.dispatchEvent(new ve(or,e.l?e.l.length:0,t,this.A)),Qt(this)):tn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&Jt(this,e)||2==n&&nn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:sn(this,5);break;case 4:sn(this,10);break;case 3:sn(this,6);break;default:sn(this,2)}}},vn.fb=function(e){ge(e?2:1)},vn.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Pt(this.La),e.F=this.R,e},vn.ma=function(){return!!this.c&&!0},vn.Y=function(){return this.R},vn=ln.prototype,vn.va=function(){},vn.ua=function(){},vn.ta=function(){},vn.sa=function(){},vn.Ta=function(){},pn.prototype.a=function(e,t){return new fn(e,t)},m(fn,X),vn=fn.prototype,vn.addEventListener=function(e,t,n,r){fn.N.addEventListener.call(this,e,t,n,r)},vn.removeEventListener=function(e,t,n,r){fn.N.removeEventListener.call(this,e,t,n,r)},vn.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;ge(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new mt(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Wt(t,e.g,e.i)),e=e.w,e.i=n,t=cn(e.a,null,e.i),ge(3),n=e.a.F.b,null!=n?(e.f=n[0],e.M=1,gt(e)):(Ze(t,"MODE","init"),!e.a.o&&e.a.j&&Ze(t,"X-HTTP-Session-Id",e.a.j),e.b=new Se(e,void 0,void 0),e.b.h=e.h,Ce(e.b,t,!1,null),e.M=0)},vn.close=function(){Yt(this.a)},vn.Xa=function(e){if(r(e)){var t={};t.__data__=e,Kt(this.a,t)}else this.h?(t={},t.__data__=$n(e),Kt(this.a,t)):Kt(this.a,e)},vn.G=function(){this.a.c=null,delete this.f,Yt(this.a),delete this.a,fn.N.G.call(this)},m(dn,we),m(mn,Te),m(gn,ln),gn.prototype.va=function(){this.a.dispatchEvent("a")},gn.prototype.ua=function(e){this.a.dispatchEvent(new dn(e))},gn.prototype.ta=function(e){this.a.dispatchEvent(new mn(e))},gn.prototype.sa=function(){this.a.dispatchEvent("b")};var Er=d(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},pn);pn.prototype.createWebChannel=pn.prototype.a,fn.prototype.send=fn.prototype.Xa,fn.prototype.open=fn.prototype.Wa,fn.prototype.close=fn.prototype.close,ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,sr.COMPLETE="complete",xe.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",X.prototype.listen=X.prototype.Aa,Pt.prototype.listenOnce=Pt.prototype.Ba,Pt.prototype.getLastError=Pt.prototype.Ya,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.T,Pt.prototype.getStatusText=Pt.prototype.za,Pt.prototype.getResponseJson=Pt.prototype.Va,Pt.prototype.getResponseText=Pt.prototype.aa,Pt.prototype.send=Pt.prototype.ca;var Sr={createWebChannelTransport:Er,ErrorCode:ar,EventType:sr,WebChannel:xe,XhrIo:Pt},kr=Sr.createWebChannelTransport,Cr=Sr.ErrorCode,Mr=Sr.EventType,Ar=Sr.WebChannel,Or=Sr.XhrIo;t.default=Sr}.call(t,n(7))},function(e,t,n){"use strict";n(122)},function(e,t,n){"use strict";(function(e){var t=n(13),r=n.n(t);(function(){function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function n(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function i(e){return"string"==typeof e}function o(e){return"boolean"==typeof e}function a(){}function s(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function u(e){return null===e}function c(e){return"array"==s(e)}function l(e){var t=s(e);return"array"==t||"object"==t&&"number"==typeof e.length}function h(e){return"function"==s(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function f(e,t,n){return e.call.apply(e.bind,arguments)}function d(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,n){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:d,m.apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function v(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.cd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function y(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function b(e){if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function _(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");b.call(this,n+e[r])}function x(e,t){throw new _("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function w(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function T(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function E(){this.b=this.a=null}function S(){var e=Pc,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function k(){this.next=this.b=this.a=null}function C(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||Zu,r.Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(p(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function M(e,t){for(var n=i(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}function A(e){e:{for(var t=ci,n=e.length,r=i(e)?e.split(""):e,o=0;o<n;o++)if(o in r&&t.call(void 0,r[o],o,e)){t=o;break e}t=-1}return 0>t?null:i(e)?e.charAt(t):e[t]}function O(e,t){return 0<=oc(e,t)}function D(e,t){t=oc(e,t);var n;return(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function I(e,t){var n=0;M(e,function(r,i){t.call(void 0,r,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&n++})}function R(e){return Array.prototype.concat.apply([],arguments)}function P(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function L(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function N(e){for(var t in e)return!1;return!0}function U(e){var t,n={};for(t in e)n[t]=e[t];return n}function F(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<cc.length;o++)n=cc[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function B(e,t){this.a=e===hc&&t||"",this.b=lc}function j(e){return e instanceof B&&e.constructor===B&&e.b===lc?e.a:(x("expected object of type Const, got '"+e+"'"),"type_error:Const")}function G(){this.a="",this.b=mc}function V(e){return e instanceof G&&e.constructor===G&&e.b===mc?e.a:(x("expected object of type TrustedResourceUrl, got '"+e+"' of type "+s(e)),"type_error:TrustedResourceUrl")}function z(e,t){var n=j(e);if(!dc.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(fc,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof B?j(e):encodeURIComponent(String(e))}),H(e)}function H(e){var t=new G;return t.a=e,t}function W(e,t){return-1!=e.indexOf(t)}function q(e,t){return e<t?-1:e>t?1:0}function Y(){this.a="",this.b=Sc}function X(e){return e instanceof Y&&e.constructor===Y&&e.b===Sc?e.a:(x("expected object of type SafeUrl, got '"+e+"' of type "+s(e)),"type_error:SafeUrl")}function K(e){return e instanceof Y?e:(e="object"==typeof e&&e.na?e.ma():String(e),Ec.test(e)||(e="about:invalid#zClosurez"),Q(e))}function Q(e){var t=new Y;return t.a=e,t}function J(e){return W(kc,e)}function Z(){this.a="",this.b=Ac}function $(e){return e instanceof Z&&e.constructor===Z&&e.b===Ac?e.a:(x("expected object of type SafeHtml, got '"+e+"' of type "+s(e)),"type_error:SafeHtml")}function ee(e){var t=new Z;return t.a=e,t}function te(e){var t=H(j(pc));C(e,"HTMLIFrameElement"),e.src=V(t).toString()}function ne(e,t){C(e,"HTMLScriptElement"),e.src=V(t),null===ec&&(t=Zu.document,ec=(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&$u.test(t)?t:""),(t=ec)&&e.setAttribute("nonce",t)}function re(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function ie(e){return Tc.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(vc,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(yc,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(bc,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(_c,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(xc,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(wc,"&#0;"))),e}function oe(e){Zu.setTimeout(function(){throw e},0)}function ae(){var e=Zu.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!J("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",te(e),document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.write($(Oc)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=m(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!J("Trident")&&!J("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){Zu.setTimeout(e,0)}}function se(e,t){Ic||ue(),Rc||(Ic(),Rc=!0),Pc.add(e,t)}function ue(){if(Zu.Promise&&Zu.Promise.resolve){var e=Zu.Promise.resolve(void 0);Ic=function(){e.then(ce)}}else Ic=function(){var e=ce;!h(Zu.setImmediate)||Zu.Window&&Zu.Window.prototype&&!J("Edge")&&Zu.Window.prototype.setImmediate==Zu.setImmediate?(Dc||(Dc=ae()),Dc(e)):Zu.setImmediate(e)}}function ce(){for(var e;e=S();){try{e.a.call(e.b)}catch(e){oe(e)}T(ic,e)}Rc=!1}function le(e,t){if(this.a=Lc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=a)try{var n=this;e.call(t,function(e){xe(n,Nc,e)},function(e){if(!(e instanceof Ae))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}xe(n,Uc,e)})}catch(e){xe(this,Uc,e)}}function he(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function pe(e,t,n){var r=Fc.get();return r.g=e,r.b=t,r.f=n,r}function fe(e){if(e instanceof le)return e;var t=new le(a);return xe(t,Nc,e),t}function de(e){return new le(function(t,n){n(e)})}function me(e,t,n){we(e,t,n,null)||se(g(t,e))}function ge(e){return new le(function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],me(o,g(a,u),s);else t(i)})}function ve(e){return new le(function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],me(i,g(o,a,!0),g(o,a,!1));else t(r)})}function ye(e,t){if(e.a==Lc)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Lc&&1==r?ye(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Se(n),ke(n,i,Uc,t)))}e.c=null}else xe(e,Uc,t)}function be(e,t){e.b||e.a!=Nc&&e.a!=Uc||Ee(e),e.f?e.f.next=t:e.b=t,e.f=t}function _e(e,t,n,r){var i=pe(null,null,null);return i.a=new le(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Ae?o(t):e(i)}catch(e){o(e)}}:o}),i.a.c=e,be(e,i),i.a}function xe(e,t,n){e.a==Lc&&(e===n&&(t=Uc,n=new TypeError("Promise cannot resolve to itself")),e.a=1,we(n,e.Lc,e.Mc,e)||(e.i=n,e.a=t,e.c=null,Ee(e),t!=Uc||n instanceof Ae||Me(e,n)))}function we(e,t,n,r){if(e instanceof le)return be(e,pe(t||a,n||null,r)),!0;if(y(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(h(i))return Te(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function Te(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}function Ee(e){e.h||(e.h=!0,se(e.Wb,e))}function Se(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ke(e,t,n,r){if(n==Uc&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ce(t,n,r);else try{t.c?t.g.call(t.f):Ce(t,n,r)}catch(e){Bc.call(null,e)}T(Fc,t)}function Ce(e,t,n){t==Nc?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function Me(e,t){e.g=!0,se(function(){e.g&&Bc.call(null,t)})}function Ae(e){b.call(this,e)}function Oe(){0!=jc&&(Gc[this[tc]||(this[tc]=++nc)]=this),this.qa=this.qa,this.ja=this.ja}function De(e){if(!e.qa&&(e.qa=!0,e.va(),0!=jc)){var t=e[tc]||(e[tc]=++nc);if(0!=jc&&e.ja&&0<e.ja.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Gc[t]}}function Ie(e){return Ie[" "](e),e}function Re(e,t){var n=$c;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function Pe(){var e=Zu.document;return e?e.documentMode:void 0}function Le(e){return Re(e,function(){for(var t=0,n=gc(String(Vc)).split("."),r=gc(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=q(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||q(0==a[2].length,0==s[2].length)||q(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function Ne(e,t){this.type=e,this.b=this.target=t,this.Kb=!0}function Ue(e,t){if(Ne.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Yc){e:{try{Ie(t.nodeName);var o=!0;break e}catch(e){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=i(e.pointerType)?e.pointerType:il[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}function Fe(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Na=i,this.key=++al,this.oa=this.Ia=!1}function Be(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function je(e){this.src=e,this.a={},this.b=0}function Ge(e,t){var n=t.type;n in e.a&&D(e.a[n],t)&&(Be(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Ve(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.Na==r)return i}return-1}function ze(e,t,n,r,i){if(r&&r.once)qe(e,t,n,r,i);else if(c(t))for(var o=0;o<t.length;o++)ze(e,t[o],n,r,i);else n=et(n),e&&e[ol]?nt(e,t,n,p(r)?!!r.capture:!!r,i):He(e,t,n,!1,r,i)}function He(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=$e(e);if(s||(e[sl]=s=new je(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=We(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rl||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ke(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}cl++}}function We(){var e=Ze,t=tl?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function qe(e,t,n,r,i){if(c(t))for(var o=0;o<t.length;o++)qe(e,t[o],n,r,i);else n=et(n),e&&e[ol]?rt(e,t,n,p(r)?!!r.capture:!!r,i):He(e,t,n,!0,r,i)}function Ye(e,t,n,r,i){if(c(t))for(var o=0;o<t.length;o++)Ye(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=et(n),e&&e[ol]?(e=e.m,(t=String(t).toString())in e.a&&(o=e.a[t],-1<(n=Ve(o,n,r,i))&&(Be(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=$e(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Ve(t,n,r,i)),(n=-1<e?t[e]:null)&&Xe(n))}function Xe(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[ol])Ge(t.m,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ke(n),r):t.addListener&&t.removeListener&&t.removeListener(r),cl--,(n=$e(t))?(Ge(n,e),0==n.b&&(n.src=null,t[sl]=null)):Be(e)}}}function Ke(e){return e in ul?ul[e]:ul[e]="on"+e}function Qe(e,t,n,r){var i=!0;if((e=$e(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=Je(o,r),i=i&&!1!==o)}return i}function Je(e,t){var n=e.listener,r=e.Na||e.src;return e.Ia&&Xe(e),n.call(r,t)}function Ze(e,t){if(e.oa)return!0;if(!tl){if(!t)e:{t=["window","event"];for(var n=Zu,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(r=t,t=new Ue(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Qe(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Qe(r[i],e,!1,t),n=n&&o}return n}return Je(e,new Ue(t,this))}function $e(e){return e=e[sl],e instanceof je?e:null}function et(e){return h(e)?e:(e[ll]||(e[ll]=function(t){return e.handleEvent(t)}),e[ll])}function tt(){Oe.call(this),this.m=new je(this),this.Pb=this,this.Wa=null}function nt(e,t,n,r,i){e.m.add(String(t),n,!1,r,i)}function rt(e,t,n,r,i){e.m.add(String(t),n,!0,r,i)}function it(e,t,n,r){if(!(t=e.m.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&Ge(e.m,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function ot(e,t,n){if(h(e))n&&(e=m(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=m(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zu.setTimeout(e,t||0)}function at(e){var t=null;return new le(function(n,r){-1==(t=ot(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).s(function(e){throw Zu.clearTimeout(t),e})}function st(e){if(e.S&&"function"==typeof e.S)return e.S();if(i(e))return e.split("");if(l(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function ut(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(l(e)||i(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(var r in e)t[n++]=r;return t}}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(l(e)||i(e))ac(e,t,void 0);else for(var n=ut(e),r=st(e),o=r.length,a=0;a<o;a++)t.call(void 0,r[a],n&&n[a],e)}function lt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof lt)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ht(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];pt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],pt(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function pt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function dt(e,t){this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1;var n;e instanceof dt?(this.h=void 0!==t?t:e.h,mt(this,e.f),this.i=e.i,this.b=e.b,gt(this,e.m),this.c=e.c,vt(this,Dt(e.a)),this.g=e.g):e&&(n=String(e).match(hl))?(this.h=!!t,mt(this,n[1]||"",!0),this.i=wt(n[2]||""),this.b=wt(n[3]||"",!0),gt(this,n[4]),this.c=wt(n[5]||"",!0),vt(this,n[6]||"",!0),this.g=wt(n[7]||"")):(this.h=!!t,this.a=new St(null,this.h))}function mt(e,t,n){e.f=n?wt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function gt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vt(e,t,n){t instanceof St?(e.a=t,Rt(e.a,e.h)):(n||(t=Tt(t,ml)),e.a=new St(t,e.h))}function yt(e,t,n){e.a.set(t,n)}function bt(e,t){return e.a.get(t)}function _t(e){return e instanceof dt?new dt(e):new dt(e,void 0)}function xt(e,t){var n=new dt(null,void 0);return mt(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tt(e,t,n){return i(e)?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function St(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function kt(e){e.a||(e.a=new lt,e.b=0,e.c&&ft(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ct(e){var t=ut(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new St(null,void 0);e=st(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];c(o)?Ot(n,i,o):n.add(i,o)}return n}function Mt(e,t){kt(e),t=It(e,t),pt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,pt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&ht(e)))}function At(e,t){return kt(e),t=It(e,t),pt(e.a.b,t)}function Ot(e,t,n){Mt(e,t),0<n.length&&(e.c=null,e.a.set(It(e,t),P(n)),e.b+=n.length)}function Dt(e){var t=new St;return t.c=e.c,e.a&&(t.a=new lt(e.a),t.b=e.b),t}function It(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Rt(e,t){t&&!e.f&&(kt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Mt(this,t),Ot(this,n,e))},e)),e.f=t}function Pt(e){var t=document;return i(e)?t.getElementById(e):e}function Lt(e,t){L(t,function(t,n){t&&"object"==typeof t&&t.na&&(t=t.ma()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:yl.hasOwnProperty(n)?e.setAttribute(yl[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function Nt(e,t,n){var r=arguments,o=document,a=String(r[0]),s=r[1];if(!vl&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',ie(s.name),'"'),s.type){a.push(' type="',ie(s.type),'"');var u={};F(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(i(s)?a.className=s:c(s)?a.className=s.join(" "):Lt(a,s)),2<r.length&&Ut(o,a,r),a}function Ut(e,t,n){function r(n){n&&t.appendChild(i(n)?e.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!l(a)||p(a)&&0<a.nodeType?r(a):ac(Ft(a)?P(a):a,r)}}function Ft(e){if(e&&"number"==typeof e.length){if(p(e))return"function"==typeof e.item||"string"==typeof e.item;if(h(e))return"function"==typeof e.item}return!1}function Bt(e){var t=[];return Gt(new jt,e,t),t.join("")}function jt(){}function Gt(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(c(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Gt(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),i="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(o=t[r])&&(n.push(i),Vt(r,n),n.push(":"),Gt(e,o,n),i=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Vt(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Vt(e,t){t.push('"',e.replace(_l,function(e){var t=bl[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),bl[e]=t),t}),'"')}function zt(){var e=cn();return Hc&&!!Zc&&11==Zc||/Edge\/\d+/.test(e)}function Ht(){return Zu.window&&Zu.window.location.href||self&&self.location&&self.location.href||""}function Wt(e,t){t=t||Zu.window;var n="about:blank";e&&(n=X(K(e)).toString()),t.location.href=n}function qt(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<qt(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Yt(){var e=cn();return!((e=sn(e)!=El?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Hc||!Zc||9<Zc)}function Xt(e){return e=(e||cn()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Kt(e){e=e||Zu.window;try{e.close()}catch(e){}}function Qt(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=cn().toLowerCase(),r&&(t.target=r,W(n,"crios/")&&(t.target="_blank")),sn(cn())==Tl&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Y?n:K("undefined"!=typeof n.href?n.href:String(n)),n=e.target||n.target,i=[];for(a in e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((J("iPhone")&&!J("iPod")&&!J("iPad")||J("iPad")||J("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),C(a,"HTMLAnchorElement"),t instanceof Y||t instanceof Y||(t="object"==typeof t&&t.na?t.ma():String(t),Ec.test(t)||(t="about:invalid#zClosurez"),t=Q(t)),a.href=X(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=X(t).toString(),a&&(qc&&W(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=ee('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ie(e)+'">'),a.document.write($(e)),a.document.close())):(a=r.open(X(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}function Jt(e){return new le(function(t){function n(){at(2e3).then(function(){if(e&&!e.closed)return n();t()})}return n()})}function Zt(){var e=null;return new le(function(t){"complete"==Zu.document.readyState?t():(e=function(){t()},qe(window,"load",e))}).s(function(t){throw Ye(window,"load",e),t})}function $t(){return en(void 0)?Zt().then(function(){return new le(function(e,t){var n=Zu.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):de(Error("Cordova must run in an Android or iOS file scheme."))}function en(e){return e=e||cn(),!("file:"!==dn()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function tn(){var e=Zu.window;try{return!(!e||e==e.top)}catch(e){return!1}}function nn(){return"undefined"!==typeof Zu.WorkerGlobalScope&&"function"===typeof Zu.importScripts}function rn(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":nn()?"Worker":"Browser"}function on(){var e=rn();return"ReactNative"===e||"Node"===e}function an(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function sn(e){var t=e.toLowerCase();return W(t,"opera/")||W(t,"opr/")||W(t,"opios/")?"Opera":W(t,"iemobile")?"IEMobile":W(t,"msie")||W(t,"trident/")?"IE":W(t,"edge/")?"Edge":W(t,"firefox/")?Tl:W(t,"silk/")?"Silk":W(t,"blackberry")?"Blackberry":W(t,"webos")?"Webos":!W(t,"safari/")||W(t,"chrome/")||W(t,"crios/")||W(t,"android")?!W(t,"chrome/")&&!W(t,"crios/")||W(t,"edge/")?W(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":El:"Safari"}function un(e,t){t=t||[];var n,r=[],i={};for(n in Sl)i[Sl[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=rn(),"Browser"===r?(i=cn(),r=sn(i)):"Worker"===r&&(i=cn(),r=sn(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function cn(){return Zu.navigator&&Zu.navigator.userAgent||""}function ln(e,t){e=e.split("."),t=t||Zu;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function hn(){try{var e=Zu.localStorage,t=bn();if(e)return e.setItem(t,"1"),e.removeItem(t),!zt()||!!Zu.indexedDB}catch(e){return nn()&&!!Zu.indexedDB}return!1}function pn(){return(fn()||"chrome-extension:"===dn()||en())&&!on()&&hn()&&!nn()}function fn(){return"http:"===dn()||"https:"===dn()}function dn(){return Zu.location&&Zu.location.protocol||null}function mn(e){return e=e||cn(),!Xt(e)&&sn(e)!=Tl}function gn(e){return"undefined"===typeof e?null:Bt(e)}function vn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function yn(e){if(null!==e)return JSON.parse(e)}function bn(e){return e||Math.floor(1e9*Math.random()).toString()}function _n(e){return e=e||cn(),"Safari"!=sn(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function xn(){var e=Zu.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function wn(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=cn(),t=rn(),this.b=Xt(e)||"ReactNative"===t}function Tn(){var e=Zu.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function En(){var e=Zu.document,t=null;return Tn()||!e?fe():new le(function(n){t=function(){Tn()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}function Sn(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function kn(){return!(!ln("fireauth.oauthhelper",Zu)&&!ln("fireauth.iframe",Zu))}function Cn(){var e=Zu.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function Mn(){var e=Zu.navigator;return e&&e.serviceWorker?fe().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):fe(null)}function An(e){Cl[e]||(Cl[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}function On(e,t,n){kl?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Dn(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&On(e,n,t[n])}function In(e){var t={};return Dn(t,e),t}function Rn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Pn(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Ln(e){var t=e;if("object"==typeof e&&null!=e){t="length"in e?[]:{};for(var n in e)On(t,n,Ln(e[n]))}return t}function Nn(e){var t={},n=e[Ol],r=e[Dl];if(!(e=e[Il])||e!=Al&&!n)throw Error("Invalid provider user info!");t[Pl]=r||null,t[Rl]=n||null,On(this,Nl,e),On(this,Ll,Ln(t))}function Un(e,t){this.code=Ul+e,this.message=t||Fl[e]||""}function Fn(e){var t=e&&e.code;return t?new Un(t.substring(Ul.length),e.message):null}function Bn(e){var t=e[zl];if("undefined"===typeof t)throw new Un("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new Un("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Bl];if(n&&"object"===typeof n){t=n[ql];var r=n[Hl];if(n=n[Wl],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new Un("argument-error",Hl+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new Un("argument-error",Wl+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new Un("argument-error",ql+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new Un("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new Un("argument-error",Bl+" property must be a non null object when specified.");if(this.f=null,(t=e[Vl])&&"object"===typeof t){if("string"===typeof(t=t[Yl])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new Un("argument-error",Yl+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new Un("argument-error",Vl+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Gl])&&"boolean"!==typeof t)throw new Un("argument-error",Gl+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[jl])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new Un("argument-error",jl+" property must be a non empty string when specified.");this.i=e||null}function jn(e){var t={};t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i;for(var n in t)null===t[n]&&delete t[n];return t}function Gn(e){return sc(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}function Vn(e){var t="";return zn(e,function(e){t+=String.fromCharCode(e)}),t}function zn(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Kl[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Hn();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function Hn(){if(!Xl){Xl={},Kl={};for(var e=0;65>e;e++)Xl[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Kl[Xl[e]]=e,62<=e&&(Kl["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}function Wn(e){this.c=e.sub,rc(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function qn(e){return(e=Yn(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Wn(e):null}function Yn(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Vn(e))}catch(e){}return null}function Xn(e){for(var t in Jl)if(Jl[t].id===e)return e=Jl[t],{firebaseEndpoint:e.bb,secureTokenEndpoint:e.jb};return null}function Kn(e){for(var t in eh)if(eh[t].Pa==e)return eh[t];return null}function Qn(e){var t={};t["facebook.com"]=$n,t["google.com"]=tr,t["github.com"]=er,t["twitter.com"]=nr;var n=e&&e[nh];try{if(n)return t[n]?new t[n](e):new Zn(e);if("undefined"!==typeof e[th])return new Jn(e)}catch(e){}return null}function Jn(e){var t=e[nh];if(!t&&e[th]){var n=qn(e[th]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),On(this,"providerId",t),On(this,"isNewUser",n)}function Zn(e){Jn.call(this,e),e=yn(e.rawUserInfo||"{}"),On(this,"profile",Ln(e||{}))}function $n(e){if(Zn.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function er(e){if(Zn.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");On(this,"username",this.profile&&this.profile.login||null)}function tr(e){if(Zn.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function nr(e){if(Zn.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");On(this,"username",e.screenName||null)}function rr(e){this.a=_t(e)}function ir(e){var t=_t(e),n=bt(t,"link"),r=bt(_t(n),"link");return t=bt(t,"deep_link_id"),bt(_t(t),"link")||t||r||n||e}function or(){}function ar(e,t){return e.then(function(e){if(e[_h]){var n=qn(e[_h]);if(!n||t!=n.c)throw new Un("user-mismatch");return e}throw new Un("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==Ul+"user-not-found"?new Un("user-mismatch"):e})}function sr(e,t){if(!t)throw new Un("internal-error","failed to construct a credential");this.a=t,On(this,"providerId",e),On(this,"signInMethod",e)}function ur(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function cr(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new sr(e.providerId,e.pendingToken)}catch(e){}return null}function lr(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&On(this,"idToken",t.idToken),t.accessToken&&On(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&On(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Un("internal-error","failed to construct a credential");On(this,"accessToken",t.oauthToken),On(this,"secret",t.oauthTokenSecret)}On(this,"providerId",e),On(this,"signInMethod",n)}function hr(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Ct(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function pr(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new lr(e.providerId,t,e.signInMethod)}catch(e){}}return null}function fr(e,t){this.Cc=t||[],Dn(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(Kn(e)||{}).Oa||null,this.ab=null}function dr(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new Un("argument-error",'SAML provider IDs must be prefixed with "saml."');fr.call(this,e,[])}function mr(e){fr.call(this,e,$l),this.a=[]}function gr(){mr.call(this,"facebook.com")}function vr(e){if(!e)throw new Un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new gr).credential({accessToken:t})}function yr(){mr.call(this,"github.com")}function br(e){if(!e)throw new Un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new yr).credential({accessToken:t})}function _r(){mr.call(this,"google.com"),this.ua("profile")}function xr(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new _r).credential({idToken:n,accessToken:t})}function wr(){fr.call(this,"twitter.com",Zl)}function Tr(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Un("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lr("twitter.com",n,"twitter.com")}function Er(e,t,n){this.a=e,this.c=t,On(this,"providerId","password"),On(this,"signInMethod",n===kr.EMAIL_LINK_SIGN_IN_METHOD?kr.EMAIL_LINK_SIGN_IN_METHOD:kr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Sr(e){return e&&e.email&&e.password?new Er(e.email,e.password,e.signInMethod):null}function kr(){Dn(this,{providerId:"password",isOAuthProvider:!1})}function Cr(e,t){if(!(t=Mr(t)))throw new Un("argument-error","Invalid email link!");return new Er(e,t,kr.EMAIL_LINK_SIGN_IN_METHOD)}function Mr(e){e=ir(e),e=new rr(e);var t=bt(e.a,"oobCode")||null;return"signIn"===(bt(e.a,"mode")||null)&&t?t:null}function Ar(e){if(!(e.Ua&&e.Ta||e.Fa&&e.$))throw new Un("internal-error");this.a=e,On(this,"providerId","phone"),On(this,"signInMethod","phone")}function Or(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return ac(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new Ar(t)}return null}function Dr(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function Ir(e){try{this.a=e||r.a.auth()}catch(e){throw new Un("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Dn(this,{providerId:"phone",isOAuthProvider:!1})}function Rr(e,t){if(!e)throw new Un("missing-verification-id");if(!t)throw new Un("missing-verification-code");return new Ar({Ua:e,Ta:t})}function Pr(e){if(e.temporaryProof&&e.phoneNumber)return new Ar({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return xr(o,n);case"facebook.com":return vr(n);case"github.com":return br(n);case"twitter.com":return Tr(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new sr(t,a):new lr(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new mr(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function Lr(e){if(!e.isOAuthProvider)throw new Un("invalid-oauth-provider")}function Nr(e,t,n,r,i,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new Un("invalid-auth-event");if(this.g&&this.a)throw new Un("invalid-auth-event");if(this.g&&!this.f)throw new Un("invalid-auth-event")}function Ur(e){return e=e||{},e.type?new Nr(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Fn(e.error),e.postBody):null}function Fr(){this.b=null,this.a=[]}function Br(e){var t="unauthorized-domain",n=void 0,r=_t(e);e=r.b,r=r.f,"chrome-extension"==r?n=re("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=re("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Un.call(this,t,n)}function jr(e,t,n){Un.call(this,e,n),e=t||{},e.Ab&&On(this,"email",e.Ab),e.$&&On(this,"phoneNumber",e.$),e.credential&&On(this,"credential",e.credential)}function Gr(e){if(e.code){var t=e.code||"";0==t.indexOf(Ul)&&(t=t.substring(Ul.length));var n={credential:Pr(e)};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new Un(t,e.message||void 0);return new jr(t,n,e.message)}return null}function Vr(){}function zr(e){return e.c||(e.c=e.b())}function Hr(){}function Wr(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function qr(){}function Yr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.cc,this),this.a.onerror=m(this.Gb,this),this.a.onprogress=m(this.dc,this),this.a.ontimeout=m(this.hc,this)}function Xr(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Kr(e,t,n){this.reset(e,t,n,void 0,void 0)}function Qr(e){this.f=e,this.b=this.c=this.a=null}function Jr(e,t){this.name=e,this.value=t}function Zr(e){return e.c?e.c:e.a?Zr(e.a):(x("Root logger has no level set."),null)}function $r(e){hh||(hh=new Qr(""),lh[""]=hh,hh.c=uh);var t;if(!(t=lh[e])){t=new Qr(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=$r(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,lh[e]=t}return t}function ei(e,t){e&&e.log(ch,t,void 0)}function ti(e){this.f=e}function ni(e){tt.call(this),this.u=e,this.readyState=ph,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=$r("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function ri(e){e.c.read().then(e.bc.bind(e)).catch(e.Ma.bind(e))}function ii(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,oi(e)}function oi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ai(e){tt.call(this),this.headers=new lt,this.D=e||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=fh,this.v=this.O=!1}function si(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():ih.a(),e.A=zr(e.D?e.D:ih),e.a.onreadystatechange=m(e.Jb,e);try{ei(e.b,yi(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return ei(e.b,yi(e,"Error opening Xhr: "+t.message)),void li(e,t)}t=r||"";var o=new lt(e.headers);i&&ct(i,function(e,t){o.set(t,e)}),i=A(o.U()),r=Zu.FormData&&t instanceof Zu.FormData,!O(mh,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{di(e),0<e.g&&(e.v=ui(e.a),ei(e.b,yi(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ga,e)):e.u=ot(e.Ga,e.g,e)),ei(e.b,yi(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ei(e.b,yi(e,"Send error: "+t.message)),li(e,t)}}function ui(e){return Hc&&Le(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function ci(e){return"content-type"==e.toLowerCase()}function li(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,hi(e),fi(e)}function hi(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function pi(e){if(e.c&&"undefined"!=typeof Ju)if(e.A[1]&&4==mi(e)&&2==gi(e))ei(e.b,yi(e,"Local request error detected and ignored"));else if(e.i&&4==mi(e))ot(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==mi(e)){ei(e.b,yi(e,"Request complete")),e.c=!1;try{var t=gi(e);e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.l).match(hl)[1]||null;if(!o&&Zu.self&&Zu.self.location){var a=Zu.self.location.protocol;o=a.substr(0,a.length-1)}i=!dh.test(o?o.toLowerCase():"")}r=i}if(r)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<mi(e)?e.a.statusText:""}catch(t){ei(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+gi(e)+"]",hi(e)}}finally{fi(e)}}}function fi(e,t){if(e.a){di(e);var n=e.a,r=e.A[0]?a:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(ah,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function di(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(Zu.clearTimeout(e.u),e.u=null)}function mi(e){return e.a?e.a.readyState:0}function gi(e){try{return 2<mi(e)?e.a.status:-1}catch(e){return-1}}function vi(e){try{return e.a?e.a.responseText:""}catch(t){return ei(e.b,"Can not get responseText: "+t.message),""}}function yi(e,t){return t+" ["+e.N+" "+e.l+" "+gi(e)+"]"}function bi(e){var t=Di;this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.m=0}function _i(e,t,n){e.a=!0,e.c=n,e.f=!t,Si(e)}function xi(e){if(e.a){if(!e.l)throw new ki(e);e.l=!1}}function wi(e,t){Ti(e,null,t,void 0)}function Ti(e,t,n,r){e.g.push([t,n,r]),e.a&&Si(e)}function Ei(e){return uc(e.g,function(e){return h(e[1])})}function Si(e){if(e.h&&e.a&&Ei(e)){var t=e.h,n=gh[t];n&&(Zu.clearTimeout(n.a),delete gh[t]),e.h=0}e.b&&(e.b.m--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.u,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(y(t)||"function"===typeof Zu.Promise&&t instanceof Zu.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Ei(e)||(n=!0)}}e.c=t,r&&(s=m(e.o,e,!0),r=m(e.o,e,!1),t instanceof bi?(Ti(t,s,r),t.A=!0):t.then(s,r)),n&&(t=new Mi(t),gh[t.a]=t,e.h=t.a)}function ki(){b.call(this)}function Ci(){b.call(this)}function Mi(e){this.a=Zu.setTimeout(m(this.c,this),0),this.b=e}function Ai(e){var t={},n=t.document||document,r=V(e).toString(),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new bi(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ii(i,!0);var e=new Ri(yh,"Timeout reached for loading script "+r);xi(a),_i(a,!1,e)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ii(i,t.dd||!1,s),xi(a),_i(a,!0,null))},i.onerror=function(){Ii(i,!0,s);var e=new Ri(vh,"Error while loading script "+r);xi(a),_i(a,!1,e)},o=t.attributes||{},F(o,{type:"text/javascript",charset:"UTF-8"}),Lt(i,o),ne(i,e),Oi(n).appendChild(i),a}function Oi(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Di(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&Ii(e,!0,this.Ga)}}function Ii(e,t,n){null!=n&&Zu.clearTimeout(n),e.onload=a,e.onerror=a,e.onreadystatechange=a,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Ri(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),b.call(this,n),this.code=e}function Pi(e){this.f=e}function Li(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||xh,this.f=U(e.secureTokenHeaders||wh),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||Th,this.a=U(e.firebaseHeaders||Eh),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==rn(),!(n=Zu.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!nn())throw new Un("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,nn()?this.c=new ti(self):on()?this.c=new Pi(n):this.c=new qr}function Ni(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Ui(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function Fi(e,t,n,r,i,o,a){Yt()||nn()?e=m(e.o,e):(bh||(bh=new le(function(e,t){Bi(e,t)})),e=m(e.l,e)),e(t,n,r,i,o,a)}function Bi(e,t){if(((window.gapi||{}).client||{}).request)e();else{Zu[kh]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};wi(Ai(z(Sh,{onload:kh})),function(){t(Error("CORS_UNSUPPORTED"))})}}function ji(e,t){return new le(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Fi(e,e.i+"?key="+encodeURIComponent(e.b),function(e){e?e.error?r(oo(e)):e.access_token&&e.refresh_token?n(e):r(new Un("internal-error")):r(new Un("network-request-failed"))},"POST",Ct(t).toString(),e.f,e.m.get()):r(new Un("internal-error"))})}function Gi(e,t,n,r,i,o){var a=_t(e.g+t);yt(a,"key",e.b),o&&yt(a,"cb",rc().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&yt(a,u,r[u]);return new le(function(t,o){Fi(e,a.toString(),function(e){e?e.error?o(oo(e,i||{})):t(e):o(new Un("network-request-failed"))},n,s?void 0:Bt(vn(r)),e.a,e.h.get())})}function Vi(e){if(e=e.email,!i(e)||!wl.test(e))throw new Un("invalid-email")}function zi(e){"email"in e&&Vi(e)}function Hi(e,t){return ro(e,Dh,{identifier:t,continueUri:fn()?Ht():"http://localhost"}).then(function(e){return e.signinMethods||[]})}function Wi(e){return ro(e,jh,{}).then(function(e){return e.authorizedDomains||[]})}function qi(e){if(!e[_h])throw new Un("internal-error")}function Yi(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Un("internal-error")}else{if(!e.sessionInfo)throw new Un("missing-verification-id");if(!e.code)throw new Un("missing-verification-code")}}function Xi(e,t){return ro(e,zh,t)}function Ki(e,t,n){return ro(e,Rh,{idToken:t,deleteProvider:n})}function Qi(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Un("internal-error")}function Ji(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new St(e.postBody),At(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function Zi(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Gr(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Gr(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Gr(e)):e.errorMessage&&(t=io(e.errorMessage)),t)throw t;if(!e[_h])throw new Un("internal-error")}function $i(e,t){return t.returnIdpCredential=!0,ro(e,Yh,t)}function eo(e,t){return t.returnIdpCredential=!0,ro(e,Kh,t)}function to(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,ro(e,Xh,t)}function no(e){if(!e.oobCode)throw new Un("invalid-action-code")}function ro(e,t,n){if(!Pn(n,t.T))return de(new Un("internal-error"));var r,i=t.Ib||"POST";return fe(n).then(t.C).then(function(){return t.R&&(n.returnSecureToken=!0),Gi(e,t.endpoint,i,n,t.Vb,t.wb||!1)}).then(function(e){return r=e,t.Qa?t.Qa(n,r):r}).then(t.J).then(function(){if(!t.da)return r;if(!(t.da in r))throw new Un("internal-error");return r[t.da]})}function io(e){return oo({error:{errors:[{message:e}],code:400,message:e}})}function oo(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Un(r[n]):null)return n;n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},F(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new Un(r[i],t);return!t&&e&&(t=gn(e)),new Un("internal-error",t)}function ao(e){this.b=e,this.a=null,this.gb=so(this)}function so(e){return lo().then(function(){return new le(function(t,n){ln("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ln("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},rp.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function uo(e,t){return e.gb.then(function(){return new le(function(n){e.a.send(t.type,t,n,ln("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function co(e,t){e.gb.then(function(){e.a.register("authEvent",t,ln("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function lo(){return ip||(ip=new le(function(e,t){function n(){xn(),ln("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){xn(),t(Error("Network Error"))},timeout:np.get()})}if(ln("gapi.iframes.Iframe"))e();else if(ln("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();Zu[r]=function(){ln("gapi.load")?n():t(Error("Network Error"))},r=z(tp,{onload:r}),fe(Ai(r)).s(function(){t(Error("Network Error"))})}}).s(function(e){throw ip=null,e}))}function ho(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=xt(this.i,"/__/auth/iframe"),yt(this.a,"apiKey",this.g),yt(this.a,"appName",this.h),this.b=null,this.c=[]}function po(e,t,n,r,i){this.o=e,this.l=t,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function fo(e){try{return r.a.app(e).auth().ya()}catch(e){return[]}}function mo(e,t,n,r,i){this.l=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function go(e){var t=Ht();return Wi(e).then(function(e){e:{var n=_t(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=_t(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:xl.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Br(Ht())})}function vo(e){return e.m?e.m:(e.m=Zt().then(function(){if(!e.u){var t=e.c,n=e.h,r=fo(e.b),i=new ho(e.l,e.f,e.b);i.f=t,i.b=n,i.c=P(r||[]),e.u=i.toString()}e.i=new ao(e.u),_o(e)}),e.m)}function yo(e){return e.o||(e.v=e.c?un(e.c,fo(e.b)):null,e.o=new Li(e.f,Xn(e.h),e.v)),e.o}function bo(e,t,n,r,i,o,a,s,u,c){return e=new po(e,t,n,r,i),e.i=o,e.g=a,e.h=s,e.b=U(u||null),e.f=c,e.toString()}function _o(e){if(!e.i)throw Error("IfcHandler must be initialized!");co(e.i,function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Ur(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return n={},n.status=r?"ACK":"ERROR",fe(n)}return n.status="ERROR",fe(n)})}function xo(e){var t={type:"webStorageSupport"};return vo(e).then(function(){return uo(e.i,t)}).then(function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function wo(e){if(this.a=e||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Un("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function To(e){this.b=e,this.a={},this.c=m(this.f,this)}function Eo(){var e=nn()?self:null;if(ac(op,function(n){n.b==e&&(t=n)}),!t){var t=new To(e);op.push(t)}return t}function So(e){this.a=e}function ko(e){this.c=e,this.b=!1,this.a=[]}function Co(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return de(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new le(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return Mo(e,c),t}).s(function(t){throw Mo(e,c),t})}function Mo(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),I(e.a,function(e){return e==t})}}function Ao(){if(!Ro())throw new Un("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=Zu.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var e=this;nn()&&self?(this.m=Eo(),this.m.subscribe("keyChanged",function(t,n){return Fo(e).then(function(t){return 0<t.length&&ac(e.a,function(e){e(t)}),{keyProcessed:O(t,n.key)}})}),this.m.subscribe("ping",function(){return fe(["keyChanged"])})):Mn().then(function(t){(e.h=t)&&(e.g=new ko(new So(t)),Co(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&O(t[0].value,"keyChanged")&&(e.u=!0)}).s(function(){}))})}function Oo(e){return new le(function(t,n){var r=e.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}})}function Do(e){return new le(function(t,n){var r=e.l.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):Oo(e).then(function(){return Do(e)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function Io(e){return e.o||(e.o=Do(e)),e.o}function Ro(){try{return!!Zu.indexedDB}catch(e){return!1}}function Po(e){return e.objectStore("firebaseLocalStorage")}function Lo(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function No(e){return new le(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function Uo(e,t){return e.g&&e.h&&Cn()===e.h?Co(e.g,"keyChanged",{key:t},e.u).then(function(){}).s(function(){}):fe()}function Fo(e){return Io(e).then(function(e){var t=Po(Lo(e,!1));return t.getAll?No(t.getAll()):new le(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=qt(e.c,n),e.c=n}return r})}function Bo(e){function t(){e.f=setTimeout(function(){e.i=Fo(e).then(function(t){0<t.length&&ac(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}jo(e),t()}function jo(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Go(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=fe().then(function(){if(Ro()){var e=bn(),r="__sak"+e;return ap||(ap=new Ao),n=ap,n.set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.Y(function(e){ac(t.a,function(t){t(e)})}),e})}function Vo(){this.a={},this.type="inMemory"}function zo(){if(!Wo()){if("Node"==rn())throw new Un("internal-error","The LocalStorage compatibility library was not found.");throw new Un("web-storage-unsupported")}this.a=Ho()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ho(){try{var e=Zu.localStorage,t=bn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Wo(){var e="Node"==rn();if(!(e=Ho()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function qo(){this.type="nullStorage"}function Yo(){if(!Ko()){if("Node"==rn())throw new Un("internal-error","The SessionStorage compatibility library was not found.");throw new Un("web-storage-unsupported")}this.a=Xo()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xo(){try{var e=Zu.sessionStorage,t=bn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Ko(){var e="Node"==rn();if(!(e=Xo()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function Qo(){var e={};e.Browser=cp,e.Node=lp,e.ReactNative=hp,e.Worker=pp,this.a=e[rn()]}function Jo(e){var t=new Un("invalid-persistence-type"),n=new Un("unsupported-persistence-type");e:{for(r in fp)if(fp[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(rn()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!hn()&&"none"!==e)throw n}}function Zo(){var e=!(_n(cn())||!tn()),t=mn(),n=hn();this.o=e,this.h=t,this.m=n,this.a={},sp||(sp=new Qo),e=sp;try{this.g=!zt()&&kn()||!Zu.indexedDB?new e.a.B:new Go(nn()?new Vo:new e.a.B)}catch(e){this.g=new Vo,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new Vo}this.l=new Vo,this.f=m(this.Nb,this),this.b={}}function $o(){return up||(up=new Zo),up}function ea(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function ta(e,t){return"firebase:"+e.name+(t?":"+t:"")}function na(e,t,n){var r=ta(t,n),i=ea(e,t.B);return e.get(t,n).then(function(o){var a=null;try{a=yn(Zu.localStorage.getItem(r))}catch(e){}if(a&&!o)return Zu.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&Zu.localStorage.removeItem(r)})}function ra(e,t,n){return n=ta(t,n),"local"==t.B&&(e.b[n]=null),ea(e,t.B).P(n)}function ia(e){oa(e),e.c=setInterval(function(){for(var t in e.a){var n=Zu.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Ue({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Nb(n))}},1e3)}function oa(e){e.c&&(clearInterval(e.c),e.c=null)}function aa(e){this.a=e,this.b=$o()}function sa(e){return e.b.get(mp,e.a).then(function(e){return Ur(e)})}function ua(){this.a=$o()}function ca(){this.b=-1}function la(e,t){this.b=gp,this.f=Zu.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.m=Zu.Int32Array?new Int32Array(64):Array(64),void 0!==dp||(dp=Zu.Int32Array?new Int32Array(xp):xp),this.reset()}function ha(e){for(var t=e.f,n=e.m,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|dp[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+p|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function pa(e,t,n){void 0===n&&(n=t.length);var r=0,o=e.c;if(i(t))for(;r<n;)e.f[o++]=t.charCodeAt(r++),o==e.b&&(ha(e),o=0);else{if(!l(t))throw Error("message must be string or array");for(;r<n;){var a=t[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[o++]=a,o==e.b&&(ha(e),o=0)}}e.c=o,e.g+=n}function fa(){la.call(this,8,wp)}function da(e,t,n,r,i){this.l=e,this.i=t,this.m=n,this.o=r||null,this.u=i||null,this.h=t+":"+n,this.v=new ua,this.g=new aa(this.h),this.f=null,this.b=[],this.a=this.c=null}function ma(e){return new Un("invalid-cordova-configuration",e)}function ga(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function va(e){var t=new fa;pa(t,e),e=[];var n=8*t.g;56>t.c?pa(t,_p,56-t.c):pa(t,_p,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(ha(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return Gn(e)}function ya(e,t,n,r){var i=ga(),o=new Nr(t,r,null,i,new Un("no-auth-event")),a=ln("BuildInfo.packageName",Zu);if("string"!==typeof a)throw new Un("invalid-cordova-configuration");var s=ln("BuildInfo.displayName",Zu),u={};if(cn().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!cn().toLowerCase().match(/android/))return de(new Un("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=va(i),u.sessionId=i;var c=bo(e.l,e.i,e.m,t,n,null,r,e.o,u,e.u);return e.ga().then(function(){var t=e.h;return e.v.a.set(mp,o.w(),t)}).then(function(){var t=ln("cordova.plugins.browsertab.isAvailable",Zu);if("function"!==typeof t)throw new Un("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!==typeof(n=ln("cordova.plugins.browsertab.openUrl",Zu)))throw new Un("invalid-cordova-configuration");n(c)}else{if("function"!==typeof(n=ln("cordova.InAppBrowser.open",Zu)))throw new Un("invalid-cordova-configuration");t=cn(),e.a=n(c,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function ba(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function _a(e){return e.f||(e.f=e.ga().then(function(){return new le(function(t){function n(r){return t(r),e.La(n),!1}e.wa(n),wa(e)})})),e.f}function xa(e){var t=null;return sa(e.g).then(function(n){return t=n,n=e.g,ra(n.b,mp,n.a)}).then(function(){return t})}function wa(e){function t(t){r=!0,i&&i.cancel(),xa(e).then(function(r){var i=n;if(r&&t&&t.url){var o=null;i=ir(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=_t(i),o=yn(bt(o,"firebaseError")||null),o=(o="object"===typeof o?Fn(o):null)?new Nr(r.c,r.b,null,null,o):new Nr(r.c,r.b,i,r.f)),i=o||n}ba(e,i)})}var n=new Nr("unknown",null,null,null,new Un("no-auth-event")),r=!1,i=at(500).then(function(){return xa(e).then(function(){r||ba(e,n)})}),o=Zu.handleOpenURL;Zu.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ln("BuildInfo.packageName",Zu).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(e){console.error(e)}},rh||(rh=new Fr),rh.subscribe(t)}function Ta(e){this.a=e,this.b=$o()}function Ea(e){return e.b.set(Tp,"pending",e.a)}function Sa(e){return ra(e.b,Tp,e.a)}function ka(e){return e.b.get(Tp,e.a).then(function(e){return"pending"==e})}function Ca(e,t,n){this.i={},this.u=0,this.A=e,this.l=t,this.o=n,this.h=[],this.f=!1,this.m=m(this.cb,this),this.b=new Pa,this.v=new Ga,this.g=new Ta(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=Ma(this.A,this.l,this.o,Ql)}function Ma(e,t,n,i){var o=r.a.SDK_VERSION||null;return en()?new da(e,t,n,o,i):new mo(e,t,n,o,i)}function Aa(e){e.f||(e.f=!0,e.a.wa(e.m));var t=e.a;return e.a.ga().s(function(n){throw e.a==t&&e.reset(),n})}function Oa(e){e.a.Mb()&&Aa(e).s(function(t){var n=new Nr("unknown",null,null,null,new Un("operation-not-supported-in-this-environment"));Ia(t)&&e.cb(n)}),e.a.Hb()||La(e.b)}function Da(e,t,n,r,i,o){return e.a.Db(t,n,r,function(){e.f||(e.f=!0,e.a.wa(e.m))},function(){e.reset()},i,o)}function Ia(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Ra(e,t,n){var r=t+":"+n;return kp[r]||(kp[r]=new Ca(e,t,n)),kp[r]}function Pa(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function La(e){e.g||(e.g=!0,Ba(e,!1,null,null))}function Na(e,t,n){n=n.xa(t.c,t.b);var r=t.g,i=t.f,o=t.h,a=!!t.c.match(/Redirect$/);n(r,i,o).then(function(t){Ba(e,a,t,null)}).s(function(t){Ba(e,a,null,t)})}function Ua(e,t){if(e.b=function(){return de(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function Fa(e,t){if(e.b=function(){return fe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Ba(e,t,n,r){t?r?Ua(e,r):Fa(e,n):Fa(e,{user:null}),e.f=[],e.c=[]}function ja(e){var t=new Un("timeout");e.a&&e.a.cancel(),e.a=at(Sp.get()).then(function(){e.b||(e.g=!0,Ba(e,!0,null,t))})}function Ga(){}function Va(e,t){var n=e.b,r=e.c;t.xa(r,n)(e.g,e.f,e.h).then(function(e){t.ha(r,e,null,n)}).s(function(e){t.ha(r,null,e,n)})}function za(){this.ub=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ub},set:function(e){this.ub=e},enumerable:!1})}function Ha(e,t){this.a=t,On(this,"verificationId",e)}function Wa(e,t,n,r){return new Ir(e).Va(t,n).then(function(e){return new Ha(e,r)})}function qa(e){var t=Yn(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Un("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Dn(this,{token:e,expirationTime:Sn(1e3*t.exp),authTime:Sn(1e3*t.auth_time),issuedAtTime:Sn(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function Ya(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Xa(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Ka(e,t){e.stop(),e.b=at(Xa(e,t)).then(function(){return En()}).then(function(){return e.h()}).then(function(){Ka(e,!0)}).s(function(t){e.i(t)&&Ka(e,!1)})}function Qa(e){this.f=e,this.b=this.a=null,this.c=0}function Ja(e,t){var n=t[_h],r=t.refreshToken;t=$a(t.expiresIn),e.b=n,e.c=t,e.a=r}function Za(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function $a(e){return rc()+1e3*parseInt(e,10)}function es(e,t){return ji(e.f,t).then(function(t){return e.b=t.access_token,e.c=$a(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function ts(e,t){this.a=e||null,this.b=t||null,Dn(this,{lastSignInTime:Sn(t||null),creationTime:Sn(e||null)})}function ns(e){return new ts(e.a,e.b)}function rs(e,t,n,r,i,o){Dn(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function is(e,t){Ne.call(this,e);for(var n in t)this[n]=t[n]}function os(e,t,n){this.G=[],this.l=e.apiKey,this.o=e.appName,this.u=e.authDomain||null,e=r.a.SDK_VERSION?un(r.a.SDK_VERSION):null,this.c=new Li(this.l,Xn(Ql),e),this.h=new Qa(this.c),fs(this,t[_h]),Ja(this.h,t),On(this,"refreshToken",this.h.a),vs(this,n||{}),tt.call(this),this.I=!1,this.u&&pn()&&(this.a=Ra(this.u,this.l,this.o)),this.N=[],this.i=null,this.A=ls(this),this.V=m(this.Ha,this);var i=this;this.ka=null,this.ta=function(e){i.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){ss(i,e.c)},this.W=null}function as(e,t){e.X&&Ye(e.X,"languageCodeChanged",e.ta),(e.X=t)&&ze(t,"languageCodeChanged",e.ta)}function ss(e,t){e.O=t,Ui(e.c,r.a.SDK_VERSION?un(r.a.SDK_VERSION,e.O):null)}function us(e,t){e.W&&Ye(e.W,"frameworkChanged",e.sa),(e.W=t)&&ze(t,"frameworkChanged",e.sa)}function cs(e){try{return r.a.app(e.o).auth()}catch(t){throw new Un("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function ls(e){return new Ya(function(){return e.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.h.c-rc()-3e5;return 0<t?t:0})}function hs(e){e.D||e.A.b||(e.A.start(),Ye(e,"tokenChanged",e.V),ze(e,"tokenChanged",e.V))}function ps(e){Ye(e,"tokenChanged",e.V),e.A.stop()}function fs(e,t){e.ra=t,On(e,"_lat",t)}function ds(e,t){I(e.N,function(e){return e==t})}function ms(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return ve(t).then(function(){return e})}function gs(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function vs(e,t){Dn(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new ts(t.createdAt,t.lastLoginAt),providerData:[]})}function ys(){}function bs(e){return fe().then(function(){if(e.D)throw new Un("app-deleted")})}function _s(e){return sc(e.providerData,function(e){return e.providerId})}function xs(e,t){t&&(ws(e,t.providerId),e.providerData.push(t))}function ws(e,t){I(e.providerData,function(e){return e.providerId==t})}function Ts(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&On(e,t,n)}function Es(e,t){e!=t&&(Dn(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?On(e,"metadata",ns(t.metadata)):On(e,"metadata",new ts),ac(t.providerData,function(t){xs(e,t)}),Za(e.h,t.h),On(e,"refreshToken",e.h.a))}function Ss(e){return e.F().then(function(t){var n=e.isAnonymous;return Cs(e,t).then(function(){return n||Ts(e,"isAnonymous",!1),t})})}function ks(e,t){t[_h]&&e.ra!=t[_h]&&(Ja(e.h,t),e.dispatchEvent(new is("tokenChanged")),fs(e,t[_h]),Ts(e,"refreshToken",e.h.a))}function Cs(e,t){return ro(e.c,Nh,{idToken:t}).then(m(e.wc,e))}function Ms(e){return(e=e.providerUserInfo)&&e.length?sc(e,function(e){return new rs(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}function As(e,t){return Ss(e).then(function(){if(O(_s(e),t))return ms(e).then(function(){throw new Un("provider-already-linked")})})}function Os(e,t,n){var r=Pr(t);return t=Qn(t),In({user:e,credential:r,additionalUserInfo:t,operationType:n})}function Ds(e,t){return ks(e,t),e.reload().then(function(){return e})}function Is(e,t,n,i,o){if(!pn())return de(new Un("operation-not-supported-in-this-environment"));if(e.i&&!o)return de(e.i);var a=Kn(n.providerId),s=bn(e.uid+":::"),u=null;(!mn()||tn())&&e.u&&n.isOAuthProvider&&(u=bo(e.u,e.l,e.o,t,n,null,s,r.a.SDK_VERSION||null));var c=Qt(u,a&&a.Ba,a&&a.Aa);return i=i().then(function(){if(Ps(e),!o)return e.F().then(function(){})}).then(function(){return Da(e.a,c,t,n,s,!!u)}).then(function(){return new le(function(n,r){e.ha(t,null,new Un("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.b=e.a.Ea(e,t,c,s)})}).then(function(e){return c&&Kt(c),e?In(e):null}).s(function(e){throw c&&Kt(c),e}),Ls(e,i,o)}function Rs(e,t,n,r,i){if(!pn())return de(new Un("operation-not-supported-in-this-environment"));if(e.i&&!i)return de(e.i);var o=null,a=bn(e.uid+":::");return r=r().then(function(){if(Ps(e),!i)return e.F().then(function(){})}).then(function(){return e.aa=a,ms(e)}).then(function(t){return e.ba&&(t=e.ba,t=t.b.set(Cp,e.w(),t.a)),t}).then(function(){return e.a.Ca(t,n,a)}).s(function(t){if(o=t,e.ba)return Gs(e.ba);throw o}).then(function(){if(o)throw o}),Ls(e,r,i)}function Ps(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new Un("internal-error");throw new Un("auth-domain-config-required")}}function Ls(e,t,n){var r=Ns(e,t,n);return e.G.push(r),r.ia(function(){D(e.G,r)}),r}function Ns(e,t,n){return e.i&&!n?(t.cancel(),de(e.i)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new is("userInvalidated")),e.i=t),t})}function Us(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[_h]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-rc())/1e3;var r=new os(t,n,e);return e.providerData&&ac(e.providerData,function(e){e&&xs(r,In(e))}),e.redirectEventId&&(r.aa=e.redirectEventId),r}function Fs(e,t,n,r){var i=new os(e,t);return n&&(i.ba=n),r&&ss(i,r),i.reload().then(function(){return i})}function Bs(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.u,appName:e.o};var i=e.h,o={};return o[_h]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-rc())/1e3,t=new os(t,o),n&&(t.ba=n),r&&ss(t,r),Es(t,e),t}function js(e){this.a=e,this.b=$o()}function Gs(e){return ra(e.b,Cp,e.a)}function Vs(e,t){return e.b.get(Cp,e.a).then(function(e){return e&&t&&(e.authDomain=t),Us(e||{})})}function zs(e){this.a=e,this.b=$o(),this.c=null,this.f=Ws(this),this.b.addListener(qs("local"),this.a,m(this.g,this))}function Hs(e,t){var n,r=[];for(n in fp)fp[n]!==t&&r.push(ra(e.b,qs(fp[n]),e.a));return r.push(ra(e.b,Mp,e.a)),ge(r)}function Ws(e){var t=qs("local"),n=qs("session"),r=qs("none");return na(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(i){return i?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Mp,e.a).then(function(e){return e?qs(e):t})})})}).then(function(t){return e.c=t,Hs(e,t.B)}).s(function(){e.c||(e.c=t)})}function qs(e){return{name:"authUser",B:e}}function Ys(e){return Js(e,function(){return e.b.set(Mp,e.c.B,e.a)})}function Xs(e,t){return Js(e,function(){return e.b.set(e.c,t.w(),e.a)})}function Ks(e){return Js(e,function(){return ra(e.b,e.c,e.a)})}function Qs(e,t){return Js(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),Us(e||{})})})}function Js(e,t){return e.f=e.f.then(t,t),e.f}function Zs(e){if(this.l=!1,On(this,"settings",new za),On(this,"app",e),!lu(this).options||!lu(this).options.apiKey)throw new Un("invalid-api-key");e=r.a.SDK_VERSION?un(r.a.SDK_VERSION):null,this.c=new Li(lu(this).options&&lu(this).options.apiKey,Xn(Ql),e),this.N=[],this.o=[],this.I=[],this.Rb=r.a.INTERNAL.createSubscribe(m(this.kc,this)),this.O=void 0,this.Sb=r.a.INTERNAL.createSubscribe(m(this.mc,this)),ou(this,null),this.h=new zs(lu(this).options.apiKey+":"+lu(this).name),this.A=new js(lu(this).options.apiKey+":"+lu(this).name),this.V=mu(this,su(this)),this.i=mu(this,uu(this)),this.X=!1,this.ka=m(this.Kc,this),this.Ha=m(this.Z,this),this.ra=m(this.Zb,this),this.sa=m(this.ic,this),this.ta=m(this.jc,this),ru(this),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.sc,this),this.u=0,tt.call(this),tu(this),this.G=[]}function $s(e){Ne.call(this,"languageCodeChanged"),this.g=e}function eu(e){Ne.call(this,"frameworkChanged"),this.c=e}function tu(e){Object.defineProperty(e,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),e.W=null}function nu(e){return e.Qb||de(new Un("auth-domain-config-required"))}function ru(e){var t=lu(e).options.authDomain,n=lu(e).options.apiKey;t&&pn()&&(e.Qb=e.V.then(function(){if(!e.l){if(e.a=Ra(t,n,lu(e).name),e.a.subscribe(e),hu(e)&&gs(hu(e)),e.D){gs(e.D);var r=e.D;r.pa(e.ea()),as(r,e),r=e.D,ss(r,e.G),us(r,e),e.D=null}return e.a}}))}function iu(e,t){var n={};return n.apiKey=lu(e).options.apiKey,n.authDomain=lu(e).options.authDomain,n.appName=lu(e).name,e.V.then(function(){return Fs(n,t,e.A,e.ya())}).then(function(t){return hu(e)&&t.uid==hu(e).uid?(Es(hu(e),t),e.Z(t)):(ou(e,t),gs(t),e.Z(t))}).then(function(){fu(e)})}function ou(e,t){hu(e)&&(ds(hu(e),e.Ha),Ye(hu(e),"tokenChanged",e.ra),Ye(hu(e),"userDeleted",e.sa),Ye(hu(e),"userInvalidated",e.ta),ps(hu(e))),t&&(t.N.push(e.Ha),ze(t,"tokenChanged",e.ra),ze(t,"userDeleted",e.sa),ze(t,"userInvalidated",e.ta),0<e.u&&hs(t)),On(e,"currentUser",t),t&&(t.pa(e.ea()),as(t,e),ss(t,e.G),us(t,e))}function au(e){var t=Vs(e.A,lu(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ba=e.A),Gs(e.A)});return mu(e,t)}function su(e){var t=lu(e).options.authDomain,n=au(e).then(function(){return Qs(e.h,t)}).then(function(t){return t?(t.ba=e.A,e.D&&(e.D.aa||null)==(t.aa||null)?t:t.reload().then(function(){return Xs(e.h,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:Ks(e.h)})):null}).then(function(t){ou(e,t||null)});return mu(e,n)}function uu(e){return e.V.then(function(){return e.fa()}).s(function(){}).then(function(){if(!e.l)return e.ka()}).s(function(){}).then(function(){if(!e.l){e.X=!0;var t=e.h;t.b.addListener(qs("local"),t.a,e.ka)}})}function cu(e,t){var n=null,r=null;return mu(e,t.then(function(t){return n=Pr(t),r=Qn(t),iu(e,t)}).then(function(){return In({user:hu(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function lu(e){return e.app}function hu(e){return e.currentUser}function pu(e){return hu(e)&&hu(e)._lat||null}function fu(e){if(e.X){for(var t=0;t<e.o.length;t++)e.o[t]&&e.o[t](pu(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](pu(e))}}function du(e,t){e.I.push(t),mu(e,e.i.then(function(){!e.l&&O(e.I,t)&&e.O!==e.getUid()&&(e.O=e.getUid(),t(pu(e)))}))}function mu(e,t){return e.N.push(t),t.ia(function(){D(e.N,t)}),t}function gu(){}function vu(){this.a={},this.b=1e12}function yu(e,t){return(t=bu(t))?e.a[t]||null:null}function bu(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function _u(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Pt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():ze(this.f,"click",this.i)}function xu(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function wu(){}function Tu(){this.b=Zu.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function Eu(e,t,n,r,i,o,a){if(On(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=t,this.g=null,a?(Op||(Op=new wu),a=Op):(Rp||(Rp=new Tu),a=Rp),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Np])throw new Un("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Up],!Zu.document)throw new Un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Pt(t)||!this.i&&Pt(t).hasChildNodes())throw new Un("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Li(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.m=[];var u=this.a[Pp];this.a[Pp]=function(e){if(Su(s,e),"function"===typeof u)u(e);else if("string"===typeof u){var t=ln(u,Zu);"function"===typeof t&&t(e)}};var c=this.a[Lp];this.a[Lp]=function(){if(Su(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=ln(c,Zu);"function"===typeof e&&e()}}}function Su(e,t){for(var n=0;n<e.m.length;n++)try{e.m[n](t)}catch(e){}}function ku(e,t){I(e.m,function(e){return e==t})}function Cu(e,t){return e.h.push(t),t.ia(function(){D(e.h,t)}),t}function Mu(e){if(e.D)throw new Un("internal-error","RecaptchaVerifier instance has been destroyed.")}function Au(e,t,n){var i=!1;try{this.b=n||r.a.app()}catch(e){throw new Un("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Un("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().ya()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=r.a.SDK_VERSION?un(r.a.SDK_VERSION,a):null,Eu.call(this,n,e,t,function(){try{var e=o.b.auth().ea()}catch(t){e=null}return e},a,Xn(Ql),i)}function Ou(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Un("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Fp.length)throw new Un("internal-error","Argument validator received an unsupported number of arguments.");n=Fp[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new Un("argument-error",e+" failed: "+r)}function Du(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:i}}function Iu(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:o}}function Ru(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Pu(e,t){return{name:e||"",K:"a function",optional:!!t,M:h}}function Lu(e,t){return{name:e||"",K:"null",optional:!!t,M:u}}function Nu(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function Uu(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Zs)}}}function Fu(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof r.a.app.App)}}}function Bu(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.la||!n)}}}function ju(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Gu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&i(e.type)&&h(e.verify))}}}function Vu(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function zu(e,t){for(var n in t){var r=t[n].name;e[r]=qu(r,e[n],t[n].j)}}function Hu(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:g(function(e){return this[e]},n),set:g(function(e,t,n,r){Ou(e,[n],[r],!0),this[t]=r},r,n,t[n].vb),enumerable:!0})}}function Wu(e,t,n,r){e[t]=qu(t,n,r)}function qu(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Ou(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=Yu(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function Yu(e){return e=e.split("."),e[e.length-1]}var Xu,Ku="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},Qu="undefined"!=typeof window&&window===this?this:"undefined"!=typeof e&&null!=e?e:this;!function(e,t){if(t){var n=Qu;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],(t=t(r))!=r&&null!=t&&Ku(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.a=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var o=Qu.setTimeout;r.prototype.c=function(e){o(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},r.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.o),reject:e(this.g)}},t.prototype.o=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.u(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.l(e):this.h(e)}},t.prototype.l=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.m()},t.prototype.m=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new r;return t.prototype.u=function(e){var t=this.f();e.Ja(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Ja(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ja=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,r){for(var o=n(e),a=o.next();!a.done;a=o.next())i(a.value).Ja(t,r)})},t.all=function(e){var r=n(e),o=r.next();return o.done?i([]):new t(function(e,t){var n=[],a=0;do{n.push(void 0),a++,i(o.value).Ja(function(t){return function(r){n[t]=r,0==--a&&e(n)}}(n.length-1),t),o=r.next()}while(!o.done)})},t});var Ju=Ju||{},Zu=this||self,$u=/^[\w+\/_-]+[=]{0,2}$/,ec=null,tc="closure_uid_"+(1e9*Math.random()>>>0),nc=0,rc=Date.now||function(){return+new Date};v(b,Error),b.prototype.name="CustomError",v(_,b),_.prototype.name="AssertionError",w.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var ic=new w(function(){return new k},function(e){e.reset()});E.prototype.add=function(e,t){var n=ic.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},k.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},k.prototype.reset=function(){this.next=this.b=this.a=null};var oc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(i(e))return i(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ac=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=i(e)?e.split(""):e,a=0;a<r;a++)a in o&&t.call(n,o[a],a,e)},sc=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),o=i(e)?e.split(""):e,a=0;a<n;a++)a in o&&(r[a]=t.call(void 0,o[a],a,e));return r},uc=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=i(e)?e.split(""):e,o=0;o<n;o++)if(o in r&&t.call(void 0,r[o],o,e))return!0;return!1},cc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");B.prototype.na=!0,B.prototype.ma=function(){return this.a},B.prototype.toString=function(){return"Const{"+this.a+"}"};var lc={},hc={},pc=new B(hc,"");G.prototype.na=!0,G.prototype.ma=function(){return this.a.toString()},G.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var fc=/%{(\w+)}/g,dc=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,mc={},gc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},vc=/&/g,yc=/</g,bc=/>/g,_c=/"/g,xc=/'/g,wc=/\x00/g,Tc=/[\x00&<>"']/;Y.prototype.na=!0,Y.prototype.ma=function(){return this.a.toString()},Y.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ec=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Sc={};Q("about:blank");var kc;e:{var Cc=Zu.navigator;if(Cc){var Mc=Cc.userAgent;if(Mc){kc=Mc;break e}}kc=""}Z.prototype.na=!0,Z.prototype.ma=function(){return this.a.toString()},Z.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ac={};ee("<!DOCTYPE html>");var Oc=ee("");ee("<br>");var Dc,Ic,Rc=!1,Pc=new E,Lc=0,Nc=2,Uc=3;he.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Fc=new w(function(){return new he},function(e){e.reset()});le.prototype.then=function(e,t,n){return _e(this,h(e)?e:null,h(t)?t:null,n)},le.prototype.$goog_Thenable=!0,Xu=le.prototype,Xu.ia=function(e,t){return e=pe(e,e,t),e.c=!0,be(this,e),this},Xu.s=function(e,t){return _e(this,null,e,t)},Xu.cancel=function(e){this.a==Lc&&se(function(){ye(this,new Ae(e))},this)},Xu.Lc=function(e){this.a=Lc,xe(this,Nc,e)},Xu.Mc=function(e){this.a=Lc,xe(this,Uc,e)},Xu.Wb=function(){for(var e;e=Se(this);)ke(this,e,this.a,this.i);this.h=!1};var Bc=oe;v(Ae,b),Ae.prototype.name="cancel";var jc=0,Gc={};Oe.prototype.qa=!1,Oe.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Ie[" "]=a;var Vc,zc=J("Opera"),Hc=J("Trident")||J("MSIE"),Wc=J("Edge"),qc=Wc||Hc,Yc=J("Gecko")&&!(W(kc.toLowerCase(),"webkit")&&!J("Edge"))&&!(J("Trident")||J("MSIE"))&&!J("Edge"),Xc=W(kc.toLowerCase(),"webkit")&&!J("Edge");e:{var Kc="",Qc=function(){var e=kc;return Yc?/rv:([^\);]+)(\)|;)/.exec(e):Wc?/Edge\/([\d\.]+)/.exec(e):Hc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Xc?/WebKit\/(\S+)/.exec(e):zc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Qc&&(Kc=Qc?Qc[1]:""),Hc){var Jc=Pe();if(null!=Jc&&Jc>parseFloat(Kc)){Vc=String(Jc);break e}}Vc=Kc}var Zc,$c={};Zc=Zu.document&&Hc?Pe():void 0;var el=Object.freeze||function(e){return e},tl=!Hc||9<=Number(Zc),nl=Hc&&!Le("9"),rl=function(){if(!Zu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zu.addEventListener("test",a,t),Zu.removeEventListener("test",a,t)}catch(e){}return e}();Ne.prototype.preventDefault=function(){this.Kb=!1},v(Ue,Ne);var il=el({2:"touch",3:"pen",4:"mouse"});Ue.prototype.preventDefault=function(){Ue.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,nl)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Ue.prototype.f=function(){return this.a};var ol="closure_listenable_"+(1e6*Math.random()|0),al=0;je.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Ve(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):(t=new Fe(t,this.src,o,!!r,i),t.Ia=n,e.push(t)),t};var sl="closure_lm_"+(1e6*Math.random()|0),ul={},cl=0,ll="__closure_events_fn_"+(1e9*Math.random()>>>0);v(tt,Oe),tt.prototype[ol]=!0,tt.prototype.addEventListener=function(e,t,n,r){ze(this,e,t,n,r)},tt.prototype.removeEventListener=function(e,t,n,r){Ye(this,e,t,n,r)},tt.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Pb;var r=e.type||e;if(i(e))e=new Ne(e,n);else if(e instanceof Ne)e.target=e.target||n;else{var o=e;e=new Ne(r,n),F(e,o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.b=t[a];o=it(s,r,!0,e)&&o}if(s=e.b=n,o=it(s,r,!0,e)&&o,o=it(s,r,!1,e)&&o,t)for(a=0;a<t.length;a++)s=e.b=t[a],o=it(s,r,!1,e)&&o;return o},tt.prototype.va=function(){if(tt.qb.va.call(this),this.m){var e,t=this.m,n=0;for(e in t.a){for(var r=t.a[e],i=0;i<r.length;i++)++n,Be(r[i]);delete t.a[e],t.b--}}this.Wa=null},Xu=lt.prototype,Xu.S=function(){ht(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},Xu.U=function(){return ht(this),this.a.concat()},Xu.clear=function(){this.b={},this.c=this.a.length=0},Xu.get=function(e,t){return pt(this.b,e)?this.b[e]:t},Xu.set=function(e,t){pt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},Xu.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var hl=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;dt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Tt(t,pl,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Tt(t,pl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Tt(n,"/"==n.charAt(0)?dl:fl,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Tt(n,gl)),e.join("")},dt.prototype.resolve=function(e){var t=new dt(this),n=!!e.f;n?mt(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.m;var r=e.c;if(n)gt(t,e.m);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(W(i,"./")||W(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?vt(t,Dt(e.a)):n=!!e.g,n&&(t.g=e.g),t};var pl=/[#\/\?@]/g,fl=/[#\?:]/g,dl=/[#\?]/g,ml=/[#\?@]/g,gl=/#/g;Xu=St.prototype,Xu.add=function(e,t){kt(this),this.c=null,e=It(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},Xu.clear=function(){this.a=this.c=null,this.b=0},Xu.forEach=function(e,t){kt(this),this.a.forEach(function(n,r){ac(n,function(n){e.call(t,n,r,this)},this)},this)},Xu.U=function(){kt(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Xu.S=function(e){kt(this);var t=[];if(i(e))At(this,e)&&(t=R(t,this.a.get(It(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=R(t,e[n])}return t},Xu.set=function(e,t){return kt(this),this.c=null,e=It(this,e),At(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},Xu.get=function(e,t){return e?(e=this.S(e),0<e.length?String(e[0]):t):t},Xu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var vl=!Hc||9<=Number(Zc),yl={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},bl={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},_l=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,xl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wl=/^[^@]+@[^@]+$/,Tl="Firefox",El="Chrome",Sl={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};wn.prototype.get=function(){var e=Zu.navigator;return(e&&"boolean"===typeof e.onLine&&(fn()||"chrome-extension:"===dn()||"undefined"!==typeof e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var kl,Cl={};try{var Ml={};Object.defineProperty(Ml,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ml,"abcd",{configurable:!0,enumerable:!0,value:2}),kl=2==Ml.abcd}catch(e){kl=!1}var Al="EMAIL_SIGNIN",Ol="email",Dl="newEmail",Il="requestType",Rl="email",Pl="fromEmail",Ll="data",Nl="operation";v(Un,Error),Un.prototype.w=function(){return{code:this.code,message:this.message}},Un.prototype.toJSON=function(){return this.w()};var Ul="auth/",Fl={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Bl="android",jl="dynamicLinkDomain",Gl="handleCodeInApp",Vl="iOS",zl="url",Hl="installApp",Wl="minimumVersion",ql="packageName",Yl="bundleId",Xl=null,Kl=null;Wn.prototype.f=function(){return this.b};var Ql,Jl={Yc:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Ql=Xn("__EID__")?"__EID__":void 0;var Zl="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$l=["client_id","response_type","scope","redirect_uri","state"],eh={Tc:{Oa:"locale",Ba:500,Aa:600,Pa:"facebook.com",ib:$l},Vc:{Oa:null,Ba:500,Aa:620,Pa:"github.com",ib:$l},Wc:{Oa:"hl",Ba:515,Aa:680,Pa:"google.com",ib:$l},bd:{Oa:"lang",Ba:485,Aa:705,Pa:"twitter.com",ib:Zl}},th="idToken",nh="providerId";v(Zn,Jn),v($n,Zn),v(er,Zn),v(tr,Zn),v(nr,Zn),sr.prototype.la=function(e){return $i(e,ur(this))},sr.prototype.b=function(e,t){var n=ur(this);return n.idToken=t,eo(e,n)},sr.prototype.f=function(e,t){return ar(to(e,ur(this)),t)},sr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lr.prototype.la=function(e){return $i(e,hr(this))},lr.prototype.b=function(e,t){var n=hr(this);return n.idToken=t,eo(e,n)},lr.prototype.f=function(e,t){return ar(to(e,hr(this)),t)},lr.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},fr.prototype.Da=function(e){return this.zb=U(e),this},v(dr,fr),v(mr,fr),mr.prototype.ua=function(e){return O(this.a,e)||this.a.push(e),this},mr.prototype.Fb=function(){return P(this.a)},mr.prototype.credential=function(e,t){var n;if(n=p(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new Un("argument-error","credential failed: must provide the ID token and/or the access token.");return new lr(this.providerId,n,this.providerId)},v(gr,mr),On(gr,"PROVIDER_ID","facebook.com"),On(gr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),v(yr,mr),On(yr,"PROVIDER_ID","github.com"),On(yr,"GITHUB_SIGN_IN_METHOD","github.com"),v(_r,mr),On(_r,"PROVIDER_ID","google.com"),On(_r,"GOOGLE_SIGN_IN_METHOD","google.com"),v(wr,fr),On(wr,"PROVIDER_ID","twitter.com"),On(wr,"TWITTER_SIGN_IN_METHOD","twitter.com"),Er.prototype.la=function(e){return this.signInMethod==kr.EMAIL_LINK_SIGN_IN_METHOD?ro(e,Ph,{email:this.a,oobCode:this.c}):ro(e,Jh,{email:this.a,password:this.c})},Er.prototype.b=function(e,t){return this.signInMethod==kr.EMAIL_LINK_SIGN_IN_METHOD?ro(e,Lh,{idToken:t,email:this.a,oobCode:this.c}):ro(e,Wh,{idToken:t,email:this.a,password:this.c})},Er.prototype.f=function(e,t){return ar(this.la(e),t)},Er.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Dn(kr,{PROVIDER_ID:"password"}),Dn(kr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Dn(kr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ar.prototype.la=function(e){return e.Va(Dr(this))},Ar.prototype.b=function(e,t){var n=Dr(this);return n.idToken=t,ro(e,$h,n)},Ar.prototype.f=function(e,t){var n=Dr(this);return n.operation="REAUTH",e=ro(e,ep,n),ar(e,t)},Ar.prototype.w=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},Ir.prototype.Va=function(e,t){var n=this.a.c;return fe(t.verify()).then(function(r){if(!i(r))throw new Un("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return Xi(n,{phoneNumber:e,recaptchaToken:r}).then(function(e){return"function"===typeof t.reset&&t.reset(),e},function(e){throw"function"===typeof t.reset&&t.reset(),e});default:throw new Un("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Dn(Ir,{PROVIDER_ID:"phone"}),Dn(Ir,{PHONE_SIGN_IN_METHOD:"phone"}),Nr.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.i&&e.push(this.i),e.join("-")},Nr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var rh=null;Fr.prototype.subscribe=function(e){var t=this;this.a.push(e),this.b||(this.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=ln("universalLinks.subscribe",Zu))&&e(null,this.b))},Fr.prototype.unsubscribe=function(e){I(this.a,function(t){return t==e})},v(Br,Un),v(jr,Un),jr.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.w();return t&&F(e,t),e},jr.prototype.toJSON=function(){return this.w()},Vr.prototype.c=null;var ih;v(Hr,Vr),Hr.prototype.a=function(){var e=Wr(this);return e?new ActiveXObject(e):new XMLHttpRequest},Hr.prototype.b=function(){var e={};return Wr(this)&&(e[0]=!0,e[1]=!0),e},ih=new Hr,v(qr,Vr),qr.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Yr;throw Error("Unsupported browser")},qr.prototype.b=function(){return{}},Xu=Yr.prototype,Xu.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},Xu.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},Xu.abort=function(){this.a.abort()},Xu.setRequestHeader=function(){},Xu.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},Xu.cc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xr(this,4)},Xu.Gb=function(){this.status=500,this.response=this.responseText="",Xr(this,4)},Xu.hc=function(){this.Gb()},Xu.dc=function(){this.status=200,Xr(this,1)},Xu.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Kr.prototype.a=null;var oh=0;Kr.prototype.reset=function(e,t,n,r,i){"number"==typeof i||oh++,r||rc(),delete this.a},Jr.prototype.toString=function(){return this.name};var ah=new Jr("SEVERE",1e3),sh=new Jr("WARNING",900),uh=new Jr("CONFIG",700),ch=new Jr("FINE",500);Qr.prototype.log=function(e,t,n){if(e.value>=Zr(this).value)for(h(t)&&(t=t()),e=new Kr(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var lh={},hh=null;v(ti,Vr),ti.prototype.a=function(){return new ni(this.f)},ti.prototype.b=function(e){return function(){return e}}({}),v(ni,tt);var ph=0;Xu=ni.prototype,Xu.open=function(e,t){if(this.readyState!=ph)throw this.abort(),Error("Error reopening a connection");this.o=e,this.g=t,this.readyState=1,oi(this)},Xu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.o,credentials:void 0,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.g,t)).then(this.gc.bind(this),this.Ma.bind(this))},Xu.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ii(this,!1)),this.readyState=ph},Xu.gc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,oi(this)),this.a&&(this.readyState=3,oi(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.ec.bind(this),this.Ma.bind(this)):"undefined"!==typeof Zu.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,ri(this)):e.text().then(this.fc.bind(this),this.Ma.bind(this)))))},Xu.bc=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ii(this,!0):oi(this),3==this.readyState&&ri(this)}},Xu.fc=function(e){this.a&&(this.response=this.responseText=e,ii(this,!0))},Xu.ec=function(e){this.a&&(this.response=e,ii(this,!0))},Xu.Ma=function(e){var t=this.h;t&&t.log(sh,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ii(this,!0)},Xu.setRequestHeader=function(e,t){this.i.append(e,t)},Xu.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(sh,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},Xu.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(sh,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},v(ai,tt);var fh="";ai.prototype.b=$r("goog.net.XhrIo");var dh=/^https?$/i,mh=["POST","PUT"];Xu=ai.prototype,Xu.Ga=function(){"undefined"!=typeof Ju&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ei(this.b,yi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},Xu.abort=function(){this.a&&this.c&&(ei(this.b,yi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fi(this))},Xu.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),fi(this,!0)),ai.qb.va.call(this)},Xu.Jb=function(){this.qa||(this.I||this.i||this.f?pi(this):this.vc())},Xu.vc=function(){pi(this)},Xu.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case fh:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ah,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return ei(this.b,"Can not get response: "+e.message),null}},bi.prototype.cancel=function(e){if(this.a)this.c instanceof bi&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):0>=--t.m&&t.cancel()}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new Ci(this),xi(this),_i(this,!1,e))}},bi.prototype.o=function(e,t){this.i=!1,_i(this,e,t)},bi.prototype.then=function(e,t,n){var r,i,o=new le(function(e,t){r=e,i=t});return Ti(this,r,function(e){e instanceof Ci?o.cancel():i(e)}),o.then(e,t,n)},bi.prototype.$goog_Thenable=!0,v(ki,b),ki.prototype.message="Deferred has already fired",ki.prototype.name="AlreadyCalledError",v(Ci,b),Ci.prototype.message="Deferred was canceled",Ci.prototype.name="CanceledError",Mi.prototype.c=function(){throw delete gh[this.a],this.b};var gh={},vh=0,yh=1;v(Ri,b),v(Pi,Vr),Pi.prototype.a=function(){return new this.f},Pi.prototype.b=function(){return{}};var bh,_h="idToken",xh=new wn(3e4,6e4),wh={"Content-Type":"application/x-www-form-urlencoded"},Th=new wn(3e4,6e4),Eh={"Content-Type":"application/json"};Li.prototype.o=function(e,t,n,r,i,o){if(nn()&&("undefined"===typeof Zu.fetch||"undefined"===typeof Zu.Headers||"undefined"===typeof Zu.Request))throw new Un("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ai(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}nt(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(vi(this))||null}catch(t){e=null}t&&t(e)}),rt(a,"ready",function(){s&&clearTimeout(s),De(this)}),rt(a,"timeout",function(){s&&clearTimeout(s),De(this),t&&t(null)}),si(a,e,n,r,i)};var Sh=new B(hc,"https://apis.google.com/js/client.js?onload=%{onload}"),kh="__fcb"+Math.floor(1e6*Math.random()).toString();Li.prototype.l=function(e,t,n,r,i){var o=this;bh.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},Li.prototype.ob=function(){return ro(this,qh,{})},Li.prototype.rb=function(e,t){return ro(this,Hh,{idToken:e,email:t})},Li.prototype.sb=function(e,t){return ro(this,Wh,{idToken:e,password:t})};var Ch={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Xu=Li.prototype,Xu.tb=function(e,t){var n={idToken:e},r=[];return L(Ch,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),ro(this,Hh,n)},Xu.lb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},F(e,t),ro(this,Bh,e)},Xu.mb=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},F(e,t),ro(this,Uh,e)},Xu.kb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},F(e,t),ro(this,Fh,e)},Xu.Va=function(e){return ro(this,Zh,e)},Xu.$a=function(e,t){return ro(this,Vh,{oobCode:e,newPassword:t})},Xu.Ka=function(e){return ro(this,Ah,{oobCode:e})},Xu.Xa=function(e){return ro(this,Mh,{oobCode:e})};var Mh={endpoint:"setAccountInfo",C:no,da:"email"},Ah={endpoint:"resetPassword",C:no,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Un("internal-error")}},Oh={endpoint:"signupNewUser",C:function(e){if(Vi(e),!e.password)throw new Un("weak-password")},J:qi,R:!0},Dh={endpoint:"createAuthUri"},Ih={endpoint:"deleteAccount",T:["idToken"]},Rh={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(e){if(!c(e.deleteProvider))throw new Un("internal-error")}},Ph={endpoint:"emailLinkSignin",T:["email","oobCode"],C:Vi,J:qi,R:!0},Lh={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:Vi,J:qi,R:!0},Nh={endpoint:"getAccountInfo"},Uh={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Un("internal-error");Vi(e)},da:"email"},Fh={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Un("internal-error")},da:"email"},Bh={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Un("internal-error");Vi(e)},da:"email"},jh={wb:!0,endpoint:"getProjectConfig",Ib:"GET"},Gh={wb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new Un("internal-error")}},Vh={endpoint:"resetPassword",C:no,da:"email"},zh={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Hh={endpoint:"setAccountInfo",T:["idToken"],C:zi,R:!0},Wh={endpoint:"setAccountInfo",T:["idToken"],C:function(e){if(zi(e),!e.password)throw new Un("weak-password")},J:qi,R:!0},qh={endpoint:"signupNewUser",J:qi,R:!0},Yh={endpoint:"verifyAssertion",C:Qi,Qa:Ji,J:Zi,R:!0},Xh={endpoint:"verifyAssertion",C:Qi,Qa:Ji,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Un("user-not-found");if(e.errorMessage)throw io(e.errorMessage);if(!e[_h])throw new Un("internal-error")},R:!0},Kh={endpoint:"verifyAssertion",C:function(e){if(Qi(e),!e.idToken)throw new Un("internal-error")},Qa:Ji,J:Zi,R:!0},Qh={endpoint:"verifyCustomToken",C:function(e){if(!e.token)throw new Un("invalid-custom-token")},J:qi,R:!0},Jh={endpoint:"verifyPassword",C:function(e){if(Vi(e),!e.password)throw new Un("wrong-password")},J:qi,R:!0},Zh={endpoint:"verifyPhoneNumber",C:Yi,J:qi},$h={endpoint:"verifyPhoneNumber",C:function(e){if(!e.idToken)throw new Un("internal-error");Yi(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Gr(e);qi(e)}},ep={Vb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:Yi,J:qi},tp=new B(hc,"https://apis.google.com/js/api.js?onload=%{onload}"),np=new wn(3e4,6e4),rp=new wn(5e3,15e3),ip=null;ho.prototype.toString=function(){return this.f?yt(this.a,"v",this.f):Mt(this.a.a,"v"),this.b?yt(this.a,"eid",this.b):Mt(this.a.a,"eid"),this.c.length?yt(this.a,"fw",this.c.join(",")):Mt(this.a.a,"fw"),this.a.toString()},po.prototype.toString=function(){var e=xt(this.o,"/__/auth/handler");if(yt(e,"apiKey",this.l),yt(e,"appName",this.c),yt(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=r.a.app(this.c).auth().ea()}catch(e){n=null}t.ab=n,yt(e,"providerId",this.a.providerId),t=this.a,n=vn(t.zb);for(var i in n)n[i]=n[i].toString();i=t.Cc,n=U(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.eb&&t.ab&&!n[t.eb]&&(n[t.eb]=t.ab),N(n)||yt(e,"customParameters",gn(n))}if("function"===typeof this.a.Fb&&(t=this.a.Fb(),t.length&&yt(e,"scopes",t.join(","))),this.i?yt(e,"redirectUrl",this.i):Mt(e.a,"redirectUrl"),this.g?yt(e,"eventId",this.g):Mt(e.a,"eventId"),this.h?yt(e,"v",this.h):Mt(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!bt(e,s)&&yt(e,s,this.b[s]);return this.f?yt(e,"eid",this.f):Mt(e.a,"eid"),s=fo(this.c),s.length&&yt(e,"fw",s.join(",")),e.toString()},Xu=mo.prototype,Xu.Ea=function(e,t,n){var r=new Un("popup-closed-by-user"),i=new Un("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){xo(o).then(function(n){n||(e&&Kt(e),t(i),a=!0)})}).s(function(){}).then(function(){if(!a)return Jt(e)}).then(function(){if(!a)return at(n).then(function(){t(r)})})},Xu.Mb=function(){var e=cn();return!mn(e)&&!_n(e)},Xu.Hb=function(){return!1},Xu.Db=function(e,t,n,r,i,o,a){if(!e)return de(new Un("popup-blocked"));if(a&&!mn())return this.ga().s(function(t){Kt(e),i(t)}),r(),fe();this.a||(this.a=go(yo(this)));var s=this;return this.a.then(function(){var t=s.ga().s(function(t){throw Kt(e),i(t),t});return r(),t}).then(function(){if(Lr(n),!a){Wt(bo(s.l,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},Xu.Ca=function(e,t,n){this.a||(this.a=go(yo(this)));var r=this;return this.a.then(function(){Lr(t),Wt(bo(r.l,r.f,r.b,e,t,Ht(),n,r.c,void 0,r.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},Xu.ga=function(){var e=this;return vo(this).then(function(){return e.i.gb}).s(function(){throw e.a=null,new Un("network-request-failed")})},Xu.Ob=function(){return!0},Xu.wa=function(e){this.g.push(e)},Xu.La=function(e){I(this.g,function(t){return t==e})},Xu=wo.prototype,Xu.get=function(e){return fe(this.a.getItem(e)).then(function(e){return e&&yn(e)})},Xu.set=function(e,t){return fe(this.a.setItem(e,gn(t)))},Xu.P=function(e){return fe(this.a.removeItem(e))},Xu.Y=function(){},Xu.ca=function(){};var op=[];To.prototype.f=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];ac(r,function(t){i.push(fe().then(function(){return t(e.origin,e.data.data)}))}),ve(i).then(function(r){var i=[];ac(r,function(e){i.push({fulfilled:e.Eb,value:e.value,reason:e.reason?e.reason.message:void 0})}),ac(i,function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},To.prototype.subscribe=function(e,t){N(this.a)&&this.b.addEventListener("message",this.c),"undefined"===typeof this.a[e]&&(this.a[e]=[]),this.a[e].push(t)},To.prototype.unsubscribe=function(e,t){"undefined"!==typeof this.a[e]&&t?(I(this.a[e],function(e){return e==t}),0==this.a[e].length&&delete this.a[e]):t||delete this.a[e],N(this.a)&&this.b.removeEventListener("message",this.c)},So.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},ko.prototype.close=function(){for(;0<this.a.length;)Mo(this,this.a[0]);this.b=!0};var ap;Xu=Ao.prototype,Xu.set=function(e,t){var n,r=!1,i=this;return Io(this).then(function(t){return n=t,t=Po(Lo(n,!0)),No(t.get(e))}).then(function(o){var a=Po(Lo(n,!0));return o?(o.value=t,No(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=e,o.value=t,No(a.add(o)))}).then(function(){return i.c[e]=t,Uo(i,e)}).ia(function(){r&&i.b--})},Xu.get=function(e){return Io(this).then(function(t){return No(Po(Lo(t,!1)).get(e))}).then(function(e){return e&&e.value})},Xu.P=function(e){var t=!1,n=this;return Io(this).then(function(r){return t=!0,n.b++,No(Po(Lo(r,!0)).delete(e))}).then(function(){return delete n.c[e],Uo(n,e)}).ia(function(){t&&n.b--})},Xu.Y=function(e){0==this.a.length&&Bo(this),this.a.push(e)},Xu.ca=function(e){I(this.a,function(t){return t==e}),0==this.a.length&&jo(this)},Xu=Go.prototype,Xu.get=function(e){return this.b.then(function(t){return t.get(e)})},Xu.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},Xu.P=function(e){return this.b.then(function(t){return t.P(e)})},Xu.Y=function(e){this.a.push(e)},Xu.ca=function(e){I(this.a,function(t){return t==e})},Xu=Vo.prototype,Xu.get=function(e){return fe(this.a[e])},Xu.set=function(e,t){return this.a[e]=t,fe()},Xu.P=function(e){return delete this.a[e],fe()},Xu.Y=function(){},Xu.ca=function(){},Xu=zo.prototype,Xu.get=function(e){var t=this;return fe().then(function(){return yn(t.a.getItem(e))})},Xu.set=function(e,t){var n=this;return fe().then(function(){var r=gn(t);null===r?n.P(e):n.a.setItem(e,r)})},Xu.P=function(e){var t=this;return fe().then(function(){t.a.removeItem(e)})},Xu.Y=function(e){Zu.window&&ze(Zu.window,"storage",e)},Xu.ca=function(e){Zu.window&&Ye(Zu.window,"storage",e)},Xu=qo.prototype,Xu.get=function(){return fe(null)},Xu.set=function(){return fe()},Xu.P=function(){return fe()},Xu.Y=function(){},Xu.ca=function(){},Xu=Yo.prototype,Xu.get=function(e){var t=this;return fe().then(function(){return yn(t.a.getItem(e))})},Xu.set=function(e,t){var n=this;return fe().then(function(){var r=gn(t);null===r?n.P(e):n.a.setItem(e,r)})},Xu.P=function(e){var t=this;return fe().then(function(){t.a.removeItem(e)})},Xu.Y=function(){},Xu.ca=function(){};var sp,up,cp={B:zo,Sa:Yo},lp={B:zo,Sa:Yo},hp={B:wo,Sa:qo},pp={B:zo,Sa:qo},fp={Xc:"local",NONE:"none",Zc:"session"};Xu=Zo.prototype,Xu.get=function(e,t){return ea(this,e.B).get(ta(e,t))},Xu.set=function(e,t,n){var r=ta(e,n),i=this,o=ea(this,e.B);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.B&&(i.b[r]=t)})},Xu.addListener=function(e,t,n){e=ta(e,t),this.m&&(this.b[e]=Zu.localStorage.getItem(e)),N(this.a)&&(ea(this,"local").Y(this.f),this.h||(zt()||!kn())&&Zu.indexedDB||!this.m||ia(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},Xu.removeListener=function(e,t,n){e=ta(e,t),this.a[e]&&(I(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),N(this.a)&&(ea(this,"local").ca(this.f),oa(this))},Xu.Nb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=Zu.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Ya(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?ea(this,"local").ca(this.f):oa(this),this.o)if(n=Zu.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?Zu.localStorage.setItem(t,r):Zu.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===Zu.localStorage.getItem(t)||(o.b[t]=Zu.localStorage.getItem(t),o.Ya(t))},Hc&&Zc&&10==Zc&&Zu.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else ac(e,m(this.Ya,this))},Xu.Ya=function(e){this.a[e]&&ac(this.a[e],function(e){e()})};var dp,mp={name:"authEvent",B:"local"};v(la,ca);for(var gp=64,vp=gp-1,yp=[],bp=0;bp<vp;bp++)yp[bp]=0;var _p=R(128,yp);la.prototype.reset=function(){this.g=this.c=0,this.a=Zu.Int32Array?new Int32Array(this.h):P(this.h)};var xp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];v(fa,la);var wp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Xu=da.prototype,Xu.ga=function(){return this.za?this.za:this.za=$t().then(function(){if("function"!==typeof ln("universalLinks.subscribe",Zu))throw ma("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ln("BuildInfo.packageName",Zu))throw ma("cordova-plugin-buildinfo is not installed");if("function"!==typeof ln("cordova.plugins.browsertab.openUrl",Zu))throw ma("cordova-plugin-browsertab is not installed");if("function"!==typeof ln("cordova.InAppBrowser.open",Zu))throw ma("cordova-plugin-inappbrowser is not installed")},function(){throw new Un("cordova-not-ready")})},Xu.Ea=function(e,t){return t(new Un("operation-not-supported-in-this-environment")),fe()},Xu.Db=function(){return de(new Un("operation-not-supported-in-this-environment"))},Xu.Ob=function(){return!1},Xu.Mb=function(){return!0},Xu.Hb=function(){return!0},Xu.Ca=function(e,t,n){if(this.c)return de(new Un("redirect-operation-pending"));var r=this,i=Zu.document,o=null,a=null,s=null,u=null;return this.c=fe().then(function(){return Lr(t),_a(r)}).then(function(){return ya(r,e,t,n)}).then(function(){return new le(function(e,t){a=function(){var t=ln("cordova.plugins.browsertab.close",Zu);return e(),"function"===typeof t&&t(),r.a&&"function"===typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),s=function(){o||(o=at(2e3).then(function(){t(new Un("redirect-cancelled-by-user"))}))},u=function(){Tn()&&s()},i.addEventListener("resume",s,!1),cn().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(e){return xa(r).then(function(){throw e})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.La(a),r.c=null})},Xu.wa=function(e){this.b.push(e),_a(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Nr("unknown",null,null,null,new Un("no-auth-event")),e(t))})},Xu.La=function(e){I(this.b,function(t){return t==e})};var Tp={name:"pendingRedirect",B:"session"};Xu=Ca.prototype,Xu.reset=function(){this.f=!1,this.a.La(this.m),this.a=Ma(this.A,this.l,this.o),this.i={}},Xu.Za=function(){this.b.Za()},Xu.subscribe=function(e){if(O(this.h,e)||this.h.push(e),!this.f){var t=this;ka(this.g).then(function(e){e?Sa(t.g).then(function(){Aa(t).s(function(e){var n=new Nr("unknown",null,null,null,new Un("operation-not-supported-in-this-environment"));Ia(e)&&t.cb(n)})}):Oa(t)}).s(function(){Oa(t)})}},Xu.unsubscribe=function(e){I(this.h,function(t){return t==e})},Xu.cb=function(e){if(!e)throw new Un("invalid-auth-event");if(6e5<=rc()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=rc())),t=!0;break}}return La(this.b),t};var Ep=new wn(2e3,1e4),Sp=new wn(3e4,6e4);Ca.prototype.fa=function(){return this.b.fa()},Ca.prototype.Ca=function(e,t,n){var r,i=this;return Ea(this.g).then(function(){return i.a.Ca(e,t,n).s(function(e){if(Ia(e))throw new Un("operation-not-supported-in-this-environment");return r=e,Sa(i.g).then(function(){throw r})}).then(function(){return i.a.Ob()?new le(function(){}):Sa(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},Ca.prototype.Ea=function(e,t,n,r){return this.a.Ea(n,function(n){e.ha(t,null,n,r)},Ep.get())};var kp={};Pa.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Pa.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Ba(this,!0,null,e.a),fe()):t.xa(n,r)?Na(this,e,t):de(new Un("invalid-auth-event")):(Ba(this,!1,null,null),fe())}else de(new Un("invalid-auth-event"))},Pa.prototype.Za=function(){this.g&&!this.i&&Ba(this,!1,null,null)},Pa.prototype.fa=function(){var e=this;return new le(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),ja(e))})},Ga.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ha(e.c,null,e.a,e.b),fe()):t.xa(n,r)?Va(e,t):de(new Un("invalid-auth-event"))}else de(new Un("invalid-auth-event"))},Ha.prototype.confirm=function(e){return e=Rr(this.verificationId,e),this.a(e)},Ya.prototype.start=function(){this.a=this.c,Ka(this,!0)},Ya.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Qa.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Qa.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?de(new Un("user-token-expired")):e||!this.b||rc()>this.c-3e4?this.a?es(this,{grant_type:"refresh_token",refresh_token:this.a}):fe(null):fe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},ts.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},v(is,Ne),v(os,tt),os.prototype.pa=function(e){this.ka=e,Ni(this.c,e)},os.prototype.ea=function(){return this.ka},os.prototype.ya=function(){return P(this.O)},os.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},On(os.prototype,"providerId","firebase"),Xu=os.prototype,Xu.reload=function(){var e=this;return Ls(this,bs(this).then(function(){return Ss(e).then(function(){return ms(e)}).then(ys)}))},Xu.ac=function(e){return this.F(e).then(function(e){return new qa(e)})},Xu.F=function(e){var t=this;return Ls(this,bs(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new Un("internal-error");return e.accessToken!=t.ra&&(fs(t,e.accessToken),t.dispatchEvent(new is("tokenChanged"))),Ts(t,"refreshToken",e.refreshToken),e.accessToken}))},Xu.wc=function(e){if(!(e=e.users)||!e.length)throw new Un("internal-error");e=e[0],vs(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=Ms(e),n=0;n<t.length;n++)xs(this,t[n]);Ts(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length))},Xu.xc=function(e){return An("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},Xu.hb=function(e){var t=this,n=null;return Ls(this,e.f(this.c,this.uid).then(function(e){return ks(t,e),n=Os(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},Xu.oc=function(e){return An("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},Xu.fb=function(e){var t=this,n=null;return Ls(this,As(this,e.providerId).then(function(){return t.F()}).then(function(n){return e.b(t.c,n)}).then(function(e){return n=Os(t,e,"link"),Ds(t,e)}).then(function(){return n}))},Xu.pc=function(e,t){var n=this;return Ls(this,As(this,"phone").then(function(){return Wa(cs(n),e,t,m(n.fb,n))}))},Xu.yc=function(e,t){var n=this;return Ls(this,fe().then(function(){return Wa(cs(n),e,t,m(n.hb,n))}),!0)},Xu.rb=function(e){var t=this;return Ls(this,this.F().then(function(n){return t.c.rb(n,e)}).then(function(e){return ks(t,e),t.reload()}))},Xu.Pc=function(e){var t=this;return Ls(this,this.F().then(function(n){return e.b(t.c,n)}).then(function(e){return ks(t,e),t.reload()}))},Xu.sb=function(e){var t=this;return Ls(this,this.F().then(function(n){return t.c.sb(n,e)}).then(function(e){return ks(t,e),t.reload()}))},Xu.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return bs(this);var t=this;return Ls(this,this.F().then(function(n){return t.c.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return ks(t,e),Ts(t,"displayName",e.displayName||null),Ts(t,"photoURL",e.photoUrl||null),ac(t.providerData,function(e){"password"===e.providerId&&(On(e,"displayName",t.displayName),On(e,"photoURL",t.photoURL))}),ms(t)}).then(ys))},Xu.Nc=function(e){var t=this;return Ls(this,Ss(this).then(function(n){return O(_s(t),e)?Ki(t.c,n,[e]).then(function(e){var n={};return ac(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),ac(_s(t),function(e){n[e]||ws(t,e)}),n[Ir.PROVIDER_ID]||On(t,"phoneNumber",null),ms(t)}):ms(t).then(function(){throw new Un("no-such-provider")})}))},Xu.delete=function(){var e=this;return Ls(this,this.F().then(function(t){return ro(e.c,Ih,{idToken:t})}).then(function(){e.dispatchEvent(new is("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");as(e,null),us(e,null),e.G=[],e.D=!0,ps(e),On(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},Xu.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},Xu.ha=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},Xu.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?m(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?m(this.Cb,this):"linkViaRedirect"==e&&(this.aa||null)==t?m(this.Bb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?m(this.Cb,this):null},Xu.qc=function(e){var t=this;return Is(this,"linkViaPopup",e,function(){return As(t,e.providerId).then(function(){return ms(t)})},!1)},Xu.zc=function(e){return Is(this,"reauthViaPopup",e,function(){return fe()},!0)},Xu.rc=function(e){var t=this;return Rs(this,"linkViaRedirect",e,function(){return As(t,e.providerId)},!1)},Xu.Ac=function(e){return Rs(this,"reauthViaRedirect",e,function(){return fe()},!0)},Xu.Bb=function(e,t,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Ls(this,this.F().then(function(i){return eo(r.c,{requestUri:e,postBody:n,sessionId:t,idToken:i})}).then(function(e){return i=Os(r,e,"link"),Ds(r,e)}).then(function(){return i}))},Xu.Cb=function(e,t,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Ls(this,fe().then(function(){return ar(to(r.c,{requestUri:e,sessionId:t,postBody:n}),r.uid)}).then(function(e){return i=Os(r,e,"reauthenticate"),ks(r,e),r.i=null,r.reload()}).then(function(){return i}),!0)},Xu.kb=function(e){var t=this,n=null;return Ls(this,this.F().then(function(t){return n=t,"undefined"===typeof e||N(e)?{}:jn(new Bn(e))}).then(function(e){return t.c.kb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},Xu.toJSON=function(){return this.w()},Xu.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&F(e,this.metadata.w()),ac(this.providerData,function(t){e.providerData.push(Rn(t))}),e};var Cp={name:"redirectUser",B:"session"};zs.prototype.g=function(){var e=this,t=qs("local");Js(this,function(){return fe().then(function(){return e.c&&"local"!=e.c.B?e.b.get(t,e.a):null}).then(function(n){if(n)return Hs(e,"local").then(function(){e.c=t})})})};var Mp={name:"persistence",B:"session"};zs.prototype.nb=function(e){var t=null,n=this;return Jo(e),Js(this,function(){return e!=n.c.B?n.b.get(n.c,n.a).then(function(r){return t=r,Hs(n,e)}).then(function(){if(n.c=qs(e),t)return n.b.set(n.c,t,n.a)}):fe()})},v(Zs,tt),v($s,Ne),v(eu,Ne),Xu=Zs.prototype,Xu.nb=function(e){return e=this.h.nb(e),mu(this,e)},Xu.pa=function(e){this.W===e||this.l||(this.W=e,Ni(this.c,this.W),this.dispatchEvent(new $s(this.ea())))},Xu.ea=function(){return this.W},Xu.Qc=function(){var e=Zu.navigator;this.pa(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)},Xu.sc=function(e){this.G.push(e),Ui(this.c,r.a.SDK_VERSION?un(r.a.SDK_VERSION,this.G):null),this.dispatchEvent(new eu(this.G))},Xu.ya=function(){return P(this.G)},Xu.toJSON=function(){return{apiKey:lu(this).options.apiKey,authDomain:lu(this).options.authDomain,appName:lu(this).name,currentUser:hu(this)&&hu(this).w()}},Xu.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},Xu.ha=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},Xu.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?m(this.Yb,this):null},Xu.Yb=function(e,t,n){var r=this;e={requestUri:e,postBody:n,sessionId:t},this.b&&(this.b.cancel(),this.b=null);var i=null,o=null,a=$i(r.c,e).then(function(e){return i=Pr(e),o=Qn(e),e});return e=r.V.then(function(){return a}).then(function(e){return iu(r,e)}).then(function(){return In({user:hu(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}),mu(this,e)},Xu.Ic=function(e){if(!pn())return de(new Un("operation-not-supported-in-this-environment"));var t=this,n=Kn(e.providerId),i=bn(),o=null;(!mn()||tn())&&lu(this).options.authDomain&&e.isOAuthProvider&&(o=bo(lu(this).options.authDomain,lu(this).options.apiKey,lu(this).name,"signInViaPopup",e,null,i,r.a.SDK_VERSION||null));var a=Qt(o,n&&n.Ba,n&&n.Aa);return n=nu(this).then(function(t){return Da(t,a,"signInViaPopup",e,i,!!o)}).then(function(){return new le(function(e,n){t.ha("signInViaPopup",null,new Un("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.b=t.a.Ea(t,"signInViaPopup",a,i)})}).then(function(e){return a&&Kt(a),e?In(e):null}).s(function(e){throw a&&Kt(a),e}),mu(this,n)},Xu.Jc=function(e){if(!pn())return de(new Un("operation-not-supported-in-this-environment"));var t=this;return mu(this,nu(this).then(function(){return Ys(t.h)}).then(function(){return t.a.Ca("signInViaRedirect",e)}))},Xu.fa=function(){if(!pn())return de(new Un("operation-not-supported-in-this-environment"));var e=this;return mu(this,nu(this).then(function(){return e.a.fa()}).then(function(e){return e?In(e):null}))},Xu.Oc=function(e){if(!e)return de(new Un("null-user"));var t=this,n={};n.apiKey=lu(this).options.apiKey,n.authDomain=lu(this).options.authDomain,n.appName=lu(this).name;var r=Bs(e,n,t.A,t.ya());return mu(this,this.i.then(function(){if(lu(t).options.apiKey!=e.l)return r.reload()}).then(function(){return hu(t)&&e.uid==hu(t).uid?(Es(hu(t),e),t.Z(e)):(ou(t,r),gs(r),t.Z(r))}).then(function(){fu(t)}))},Xu.pb=function(){var e=this;return mu(this,this.i.then(function(){return hu(e)?(ou(e,null),Ks(e.h).then(function(){fu(e)})):fe()}))},Xu.Kc=function(){var e=this;return Qs(this.h,lu(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=hu(e)&&t){n=hu(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Es(hu(e),t),hu(e).F();(hu(e)||t)&&(ou(e,t),t&&(gs(t),t.ba=e.A),e.a&&e.a.subscribe(e),fu(e))}})},Xu.Z=function(e){return Xs(this.h,e)},Xu.Zb=function(){fu(this),this.Z(hu(this))},Xu.ic=function(){this.pb()},Xu.jc=function(){this.pb()},Xu.kc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(hu(t))})},Xu.mc=function(e){var t=this;du(this,function(){e.next(hu(t))})},Xu.uc=function(e,t,n){var r=this;return this.X&&Promise.resolve().then(function(){h(e)?e(hu(r)):h(e.next)&&e.next(hu(r))}),this.Rb(e,t,n)},Xu.tc=function(e,t,n){var r=this;return this.X&&Promise.resolve().then(function(){r.O=r.getUid(),h(e)?e(hu(r)):h(e.next)&&e.next(hu(r))}),this.Sb(e,t,n)},Xu.$b=function(e){var t=this;return mu(this,this.i.then(function(){return hu(t)?hu(t).F(e).then(function(e){return{accessToken:e}}):null}))},Xu.Ec=function(e){var t=this;return this.i.then(function(){return cu(t,ro(t.c,Qh,{token:e}))}).then(function(e){var n=e.user;return Ts(n,"isAnonymous",!1),t.Z(n),e})},Xu.Fc=function(e,t){var n=this;return this.i.then(function(){return cu(n,ro(n.c,Jh,{email:e,password:t}))})},Xu.Ub=function(e,t){var n=this;return this.i.then(function(){return cu(n,ro(n.c,Oh,{email:e,password:t}))})},Xu.Ra=function(e){var t=this;return this.i.then(function(){return cu(t,e.la(t.c))})},Xu.Dc=function(e){return An("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(e)},Xu.ob=function(){var e=this;return this.i.then(function(){var t=hu(e);if(t&&t.isAnonymous){return In({user:t,credential:null,additionalUserInfo:In({providerId:null,isNewUser:!1}),operationType:"signIn"})}return cu(e,e.c.ob()).then(function(t){var n=t.user;return Ts(n,"isAnonymous",!0),e.Z(n),t})})},Xu.getUid=function(){return hu(this)&&hu(this).uid||null},Xu.Tb=function(e){this.addAuthTokenListener(e),0<++this.u&&hu(this)&&hs(hu(this))},Xu.Bc=function(e){var t=this;ac(this.o,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&hu(this)&&ps(hu(this)),this.removeAuthTokenListener(e)},Xu.addAuthTokenListener=function(e){var t=this;this.o.push(e),mu(this,this.i.then(function(){t.l||O(t.o,e)&&e(pu(t))}))},Xu.removeAuthTokenListener=function(e){I(this.o,function(t){return t==e})},Xu.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h,e.b.removeListener(qs("local"),e.a,this.ka)),this.a&&(this.a.unsubscribe(this),this.a.Za()),Promise.resolve()},Xu.Xb=function(e){return mu(this,Hi(this.c,e))},Xu.nc=function(e){return!!Mr(e)},Xu.mb=function(e,t){var n=this;return mu(this,fe().then(function(){var e=new Bn(t);if(!e.c)throw new Un("argument-error",Gl+" must be true when sending sign in link to email");return jn(e)}).then(function(t){return n.c.mb(e,t)}).then(function(){}))},Xu.Rc=function(e){return this.Ka(e).then(function(e){return e.data.email})},Xu.$a=function(e,t){return mu(this,this.c.$a(e,t).then(function(){}))},Xu.Ka=function(e){return mu(this,this.c.Ka(e).then(function(e){return new Nn(e)}))},Xu.Xa=function(e){return mu(this,this.c.Xa(e).then(function(){}))},Xu.lb=function(e,t){var n=this;return mu(this,fe().then(function(){return"undefined"===typeof t||N(t)?{}:jn(new Bn(t))}).then(function(t){return n.c.lb(e,t)}).then(function(){}))},Xu.Hc=function(e,t){return mu(this,Wa(this,e,t,m(this.Ra,this)))},Xu.Gc=function(e,t){var n=this;return mu(this,fe().then(function(){var r=Cr(e,t||Ht());return n.Ra(r)}))},gu.prototype.render=function(){},gu.prototype.reset=function(){},gu.prototype.getResponse=function(){},gu.prototype.execute=function(){};var Ap=null;vu.prototype.render=function(e,t){return this.a[this.b.toString()]=new _u(e,t),this.b++},vu.prototype.reset=function(e){var t=yu(this,e);e=bu(e),t&&e&&(t.delete(),delete this.a[e])},vu.prototype.getResponse=function(e){return(e=yu(this,e))?e.getResponse():null},vu.prototype.execute=function(e){(e=yu(this,e))&&e.execute()},_u.prototype.getResponse=function(){return xu(this),this.b},_u.prototype.execute=function(){xu(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=an();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},_u.prototype.delete=function(){xu(this),this.g=!0,clearTimeout(this.a),this.a=null,Ye(this.f,"click",this.i)},wu.prototype.g=function(){return Ap||(Ap=new vu),fe(Ap)},wu.prototype.c=function(){};var Op=null,Dp=new B(hc,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ip=new wn(3e4,6e4);Tu.prototype.g=function(e){var t=this;return new le(function(n,r){var i=setTimeout(function(){r(new Un("network-request-failed"))},Ip.get());if(!Zu.grecaptcha||e!==t.f&&!t.b){Zu[t.a]=function(){if(Zu.grecaptcha){t.f=e;var o=Zu.grecaptcha.render;Zu.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(Zu.grecaptcha)}else clearTimeout(i),r(new Un("internal-error"));delete Zu[t.a]};fe(Ai(z(Dp,{onload:t.a,hl:e||""}))).s(function(){clearTimeout(i),r(new Un("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(Zu.grecaptcha)})},Tu.prototype.c=function(){this.b--};var Rp=null,Pp="callback",Lp="expired-callback",Np="sitekey",Up="size";Xu=Eu.prototype,Xu.za=function(){var e=this;return this.f?this.f:this.f=Cu(this,fe().then(function(){if(fn()&&!nn())return Zt();throw new Un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.o.g(e.v())}).then(function(t){return e.g=t,ro(e.u,Gh,{})}).then(function(t){e.a[Np]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},Xu.render=function(){Mu(this);var e=this;return Cu(this,this.za().then(function(){if(null===e.c){var t=e.l;if(!e.i){var n=Pt(t);t=Nt("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},Xu.verify=function(){Mu(this);var e=this;return Cu(this,this.render().then(function(t){return new le(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(ku(e,i),n(t))};e.m.push(i),e.i&&e.g.execute(e.c)}})}))},Xu.reset=function(){Mu(this),null!==this.c&&this.g.reset(this.c)},Xu.clear=function(){Mu(this),this.D=!0,this.o.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Pt(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},v(Au,Eu);var Fp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");zu(Zs.prototype,{Xa:{name:"applyActionCode",j:[Du("code")]},Ka:{name:"checkActionCode",j:[Du("code")]},$a:{name:"confirmPasswordReset",j:[Du("code"),Du("newPassword")]},Ub:{name:"createUserWithEmailAndPassword",j:[Du("email"),Du("password")]},Xb:{name:"fetchSignInMethodsForEmail",j:[Du("email")]},fa:{name:"getRedirectResult",j:[]},nc:{name:"isSignInWithEmailLink",j:[Du("emailLink")]},tc:{name:"onAuthStateChanged",j:[Vu(Ru(),Pu(),"nextOrObserver"),Pu("opt_error",!0),Pu("opt_completed",!0)]},uc:{name:"onIdTokenChanged",j:[Vu(Ru(),Pu(),"nextOrObserver"),Pu("opt_error",!0),Pu("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[Du("email"),Vu(Ru("opt_actionCodeSettings",!0),Lu(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[Du("email"),Ru("actionCodeSettings")]},nb:{name:"setPersistence",j:[Du("persistence")]},Dc:{name:"signInAndRetrieveDataWithCredential",j:[Bu()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[Bu()]},Ec:{name:"signInWithCustomToken",j:[Du("token")]},Fc:{name:"signInWithEmailAndPassword",j:[Du("email"),Du("password")]},Gc:{name:"signInWithEmailLink",j:[Du("email"),Du("emailLink",!0)]},Hc:{name:"signInWithPhoneNumber",j:[Du("phoneNumber"),Gu()]},Ic:{name:"signInWithPopup",j:[ju()]},Jc:{name:"signInWithRedirect",j:[ju()]},Oc:{name:"updateCurrentUser",j:[Vu(function(e){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof os)}}}(),Lu(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Du(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[Du("code")]}}),Hu(Zs.prototype,{lc:{name:"languageCode",vb:Vu(Du(),Lu(),"languageCode")}}),Zs.Persistence=fp,Zs.Persistence.LOCAL="local",Zs.Persistence.SESSION="session",Zs.Persistence.NONE="none",zu(os.prototype,{delete:{name:"delete",j:[]},ac:{name:"getIdTokenResult",j:[Iu("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Iu("opt_forceRefresh",!0)]},oc:{name:"linkAndRetrieveDataWithCredential",j:[Bu()]},fb:{name:"linkWithCredential",j:[Bu()]},pc:{name:"linkWithPhoneNumber",j:[Du("phoneNumber"),Gu()]},qc:{name:"linkWithPopup",j:[ju()]},rc:{name:"linkWithRedirect",j:[ju()]},xc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Bu()]},hb:{name:"reauthenticateWithCredential",j:[Bu()]},yc:{name:"reauthenticateWithPhoneNumber",j:[Du("phoneNumber"),Gu()]},zc:{name:"reauthenticateWithPopup",j:[ju()]},Ac:{name:"reauthenticateWithRedirect",j:[ju()]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Vu(Ru("opt_actionCodeSettings",!0),Lu(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Du(null,!0)]},Nc:{name:"unlink",j:[Du("provider")]},rb:{name:"updateEmail",j:[Du("email")]},sb:{name:"updatePassword",j:[Du("password")]},Pc:{name:"updatePhoneNumber",j:[Bu("phone")]},tb:{name:"updateProfile",j:[Ru("profile")]}}),zu(vu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zu(gu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zu(le.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Hu(za.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",vb:Iu("appVerificationDisabledForTesting")}}),zu(Ha.prototype,{confirm:{name:"confirm",j:[Du("verificationCode")]}}),Wu(or,"fromJSON",function(e){e=i(e)?JSON.parse(e):e;for(var t,n=[pr,Sr,Or,cr],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[Vu(Du(),Ru(),"json")]),Wu(kr,"credential",function(e,t){return new Er(e,t)},[Du("email"),Du("password")]),zu(Er.prototype,{w:{name:"toJSON",j:[Du(null,!0)]}}),zu(gr.prototype,{ua:{name:"addScope",j:[Du("scope")]},Da:{name:"setCustomParameters",j:[Ru("customOAuthParameters")]}}),Wu(gr,"credential",vr,[Vu(Du(),Ru(),"token")]),Wu(kr,"credentialWithLink",Cr,[Du("email"),Du("emailLink")]),zu(yr.prototype,{ua:{name:"addScope",j:[Du("scope")]},Da:{name:"setCustomParameters",j:[Ru("customOAuthParameters")]}}),Wu(yr,"credential",br,[Vu(Du(),Ru(),"token")]),zu(_r.prototype,{ua:{name:"addScope",j:[Du("scope")]},Da:{name:"setCustomParameters",j:[Ru("customOAuthParameters")]}}),Wu(_r,"credential",xr,[Vu(Du(),Vu(Ru(),Lu()),"idToken"),Vu(Du(),Lu(),"accessToken",!0)]),zu(wr.prototype,{Da:{name:"setCustomParameters",j:[Ru("customOAuthParameters")]}}),Wu(wr,"credential",Tr,[Vu(Du(),Ru(),"token"),Du("secret",!0)]),zu(mr.prototype,{ua:{name:"addScope",j:[Du("scope")]},credential:{name:"credential",j:[Vu(Du(),Vu(Ru(),Lu()),"optionsOrIdToken"),Vu(Du(),Lu(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[Ru("customOAuthParameters")]}}),zu(lr.prototype,{w:{name:"toJSON",j:[Du(null,!0)]}}),zu(sr.prototype,{w:{name:"toJSON",j:[Du(null,!0)]}}),Wu(Ir,"credential",Rr,[Du("verificationId"),Du("verificationCode")]),zu(Ir.prototype,{Va:{name:"verifyPhoneNumber",j:[Du("phoneNumber"),Gu()]}}),zu(Ar.prototype,{w:{name:"toJSON",j:[Du(null,!0)]}}),zu(Un.prototype,{toJSON:{name:"toJSON",j:[Du(null,!0)]}}),zu(jr.prototype,{toJSON:{name:"toJSON",j:[Du(null,!0)]}}),zu(Br.prototype,{toJSON:{name:"toJSON",j:[Du(null,!0)]}}),zu(Au.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"===typeof r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:Zs,AuthCredential:or,Error:Un};Wu(e,"EmailAuthProvider",kr,[]),Wu(e,"FacebookAuthProvider",gr,[]),Wu(e,"GithubAuthProvider",yr,[]),Wu(e,"GoogleAuthProvider",_r,[]),Wu(e,"TwitterAuthProvider",wr,[]),Wu(e,"OAuthProvider",mr,[Du("providerId")]),Wu(e,"SAMLAuthProvider",dr,[Du("providerId")]),Wu(e,"PhoneAuthProvider",Ir,[Uu()]),Wu(e,"RecaptchaVerifier",Au,[Vu(Du(),Nu(),"recaptchaContainer"),Ru("recaptchaParameters",!0),Fu()]),r.a.INTERNAL.registerService("auth",function(e,t){return e=new Zs(e),t({INTERNAL:{getUid:m(e.getUid,e),getToken:m(e.$b,e),addAuthTokenListener:m(e.Tb,e),removeAuthTokenListener:m(e.Bc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),r.a.INTERNAL.extendNamespace({User:os})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(t,n(7))},function(e,t,n){"use strict";n(124)},function(e,t,n){"use strict";function r(e){return"storage/"+e}function i(){return new $e(et.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function o(e){return new $e(et.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a(e){return new $e(et.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s(){return new $e(et.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function u(e){return new $e(et.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function c(){return new $e(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l(){return new $e(et.CANCELED,"User canceled the upload/download.")}function h(e){return new $e(et.INVALID_URL,"Invalid URL '"+e+"'.")}function p(e){return new $e(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function f(){return new $e(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ke+"' property when initializing the app?")}function d(){return new $e(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m(){return new $e(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function g(){return new $e(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(e,t,n){return new $e(et.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function y(e,t,n,r){var i,o;return e===t?(i=e,o=1===e?"argument":"arguments"):(i="between "+e+" and "+t,o="arguments"),new $e(et.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function b(){return new $e(et.APP_DELETED,"The Firebase app was deleted.")}function _(e){return new $e(et.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x(e,t){return new $e(et.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function w(e){throw new $e(et.INTERNAL_ERROR,"Internal error: "+e)}function T(e){switch(e){case tt.RAW:case tt.BASE64:case tt.BASE64URL:case tt.DATA_URL:return;default:throw"Expected one of the event types: ["+tt.RAW+", "+tt.BASE64+", "+tt.BASE64URL+", "+tt.DATA_URL+"]."}}function E(e,t){switch(e){case tt.RAW:return new nt(S(t));case tt.BASE64:case tt.BASE64URL:return new nt(C(e,t));case tt.DATA_URL:return new nt(M(t),A(t))}throw i()}function S(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function k(e){var t;try{t=decodeURIComponent(e)}catch(e){throw x(tt.DATA_URL,"Malformed data URL.")}return S(t)}function C(e,t){switch(e){case tt.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var i=n?"-":"_";throw x(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case tt.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a){var i=o?"+":"/";throw x(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw x(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}function M(e){var t=new rt(e);return t.base64?C(tt.BASE64,t.rest):k(t.rest)}function A(e){return new rt(e).contentType}function O(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}function D(e){switch(e){case ot.RUNNING:case ot.PAUSING:case ot.CANCELING:return at.RUNNING;case ot.PAUSED:return at.PAUSED;case ot.SUCCESS:return at.SUCCESS;case ot.CANCELED:return at.CANCELED;case ot.ERROR:default:return at.ERROR}}function I(e){return null!=e}function R(e){return void 0!==e}function P(e){return"function"===typeof e}function L(e){return"object"===typeof e}function N(e){return L(e)&&null!==e}function U(e){return L(e)&&!Array.isArray(e)}function F(e){return"string"===typeof e||e instanceof String}function B(e){return j(e)&&Number.isInteger(e)}function j(e){return"number"===typeof e||e instanceof Number}function G(e){return V()&&e instanceof Blob}function V(){return"undefined"!==typeof Blob}function z(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=z();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(V())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function W(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function q(e){var t;try{t=JSON.parse(e)}catch(e){return null}return U(t)?t:null}function Y(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function X(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function K(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Q(e){return"https://"+Xe+"/v0"+e}function J(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1)}function Z(e,t){return t}function $(e){return!F(e)||e.length<2?e:K(e)}function ee(){function e(e,t){return $(t)}function t(e,t){return I(t)?Number(t):t}if(pt)return pt;var n=[];n.push(new ht("bucket")),n.push(new ht("generation")),n.push(new ht("metageneration")),n.push(new ht("name","fullPath",!0));var r=new ht("name");r.xform=e,n.push(r);var i=new ht("size");return i.xform=t,n.push(i),n.push(new ht("timeCreated")),n.push(new ht("updated")),n.push(new ht("md5Hash",null,!0)),n.push(new ht("cacheControl",null,!0)),n.push(new ht("contentDisposition",null,!0)),n.push(new ht("contentEncoding",null,!0)),n.push(new ht("contentLanguage",null,!0)),n.push(new ht("contentType",null,!0)),n.push(new ht("metadata","customMetadata",!0)),pt=n}function te(e,t){function n(){var n=e.bucket,r=e.fullPath,i=new lt(n,r);return t.makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function ne(e,t,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return te(r,e),r}function re(e,t,n){var r=q(t);return null===r?null:ne(e,r,n)}function ie(e,t){var n=q(t);if(null===n)return null;if(!F(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(t){var n=e.bucket,r=e.fullPath;return Q("/b/"+i(n)+"/o/"+i(r))+J({alt:"media",token:t})})[0]}function oe(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function ae(e){if(!L(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!L(n))throw"Expected object for 'customMetadata' mapping."}else if(N(n))throw"Mapping for '"+t+"' cannot be an object."}}function se(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw f();if(t[gt])for(var i=0,o=t[gt];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=e.makeStorageReference(new lt(r,s));n.prefixes.push(u)}if(t[vt])for(var c=0,l=t[vt];c<l.length;c++){var h=l[c],u=e.makeStorageReference(new lt(r,h.name));n.items.push(u)}return n}function ue(e,t){var n=q(t);return null===n?null:se(e,n)}function ce(e){if(!L(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===ft){if(!B(e[ft])||e[ft]<=0)throw"Expected maxResults to be a positive number.";if(e[ft]>1e3)throw"Expected maxResults to be less than or equal to "+dt+"."}else{if(t!==mt)throw"Unknown option: "+t;if(e[mt]&&!F(e[mt]))throw"Expected pageToken to be string."}}function le(e){if(!e)throw i()}function he(e,t){function n(n,r){var i=re(e,r,t);return le(null!==i),i}return n}function pe(e){function t(t,n){var r=ue(e,n);return le(null!==r),r}return t}function fe(e,t){function n(n,r){var i=re(e,r,t);return le(null!==i),ie(i,r)}return n}function de(e){function t(t,n){var r;return r=401===t.getStatus()?s():402===t.getStatus()?a(e.bucket):403===t.getStatus()?u(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function me(e){function t(t,r){var i=n(t,r);return 404===t.getStatus()&&(i=o(e.path)),i.setServerResponseProp(r.serverResponseProp()),i}var n=de(e);return t}function ge(e,t,n){var r=t.fullServerUrl(),i=Q(r),o=e.maxOperationRetryTime(),a=new yt(i,"GET",he(e,n),o);return a.errorHandler=me(t),a}function ve(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=t.bucketOnlyServerUrl(),s=Q(a),u=e.maxOperationRetryTime(),c=new yt(s,"GET",pe(e),u);return c.urlParams=o,c.errorHandler=de(t),c}function ye(e,t,n){var r=t.fullServerUrl(),i=Q(r),o=e.maxOperationRetryTime(),a=new yt(i,"GET",fe(e,n),o);return a.errorHandler=me(t),a}function be(e,t,n,r){var i=t.fullServerUrl(),o=Q(i),a=oe(n,r),s={"Content-Type":"application/json; charset=utf-8"},u=e.maxOperationRetryTime(),c=new yt(o,"PATCH",he(e,r),u);return c.headers=s,c.body=a,c.errorHandler=me(t),c}function _e(e,t){function n(e,t){}var r=t.fullServerUrl(),i=Q(r),o=e.maxOperationRetryTime(),a=new yt(i,"DELETE",n,o);return a.successCodes=[200,204],a.errorHandler=me(t),a}function xe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function we(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=xe(null,t)),r}function Te(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=we(t,r,i),c=oe(u,n),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",p=ct.getBlob(l,r,h);if(null===p)throw d();var f={name:u.fullPath},m=Q(o),g=e.maxUploadRetryTime(),v=new yt(m,"POST",he(e,n),g);return v.urlParams=f,v.headers=a,v.body=p.uploadData(),v.errorHandler=de(t),v}function Ee(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){le(!1)}var r=t||["active"];return le(!!n&&-1!==r.indexOf(n)),n}function Se(e,t,n,r,i){function o(e){Ee(e);var t;try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){le(!1)}return le(F(t)),t}var a=t.bucketOnlyServerUrl(),s=we(t,r,i),u={name:s.fullPath},c=Q(a),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=oe(s,n),p=e.maxUploadRetryTime(),f=new yt(c,"POST",o,p);return f.urlParams=u,f.headers=l,f.body=h,f.errorHandler=de(t),f}function ke(e,t,n,r){function i(e){var t=Ee(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){le(!1)}n||le(!1);var i=Number(n);return le(!isNaN(i)),new bt(i,r.size(),"final"===t)}var o={"X-Goog-Upload-Command":"query"},a=e.maxUploadRetryTime(),s=new yt(n,"POST",i,a);return s.headers=o,s.errorHandler=de(t),s}function Ce(e,t,n,r,i,o,a,s){function u(e,n){var i,a=Ee(e,["active","final"]),s=c.current+h,u=r.size();return i="final"===a?he(t,o)(e,n):null,new bt(s,u,"final"===a,i)}var c=new bt(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw m();var l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));var p=c.current,f=p+h,g=h===l?"upload, finalize":"upload",v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":c.current},y=r.slice(p,f);if(null===y)throw d();var b=t.maxUploadRetryTime(),_=new yt(n,"POST",u,b);return _.headers=v,_.body=y.uploadData(),_.progressCallback=s||null,_.errorHandler=de(e),_}function Me(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw y(r,i,e,n.length);for(var o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?v(o,e,t.message):v(o,e,t)}}function Ae(e,t){return function(n){e(n),t(n)}}function Oe(e,t){function n(e){if(!F(e))throw"Expected string."}var r;return r=e?Ae(n,e):n,new wt(r,t)}function De(){function e(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||V()&&e instanceof Blob))throw"Expected Blob or File."}return new wt(e)}function Ie(e){return new wt(ae,e)}function Re(e){return new wt(ce,e)}function Pe(){function e(e){if(!(j(e)&&e>=0))throw"Expected a number 0 or greater."}return new wt(e)}function Le(e,t){function n(t){if(!(null===t||I(t)&&t instanceof Object))throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}return new wt(n,t)}function Ne(e){function t(e){if(null!==e&&!P(e))throw"Expected a Function."}return new wt(t,e)}function Ue(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}function Fe(e,t,n){function r(){return 2===h}function i(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];p||(p=!0,t.apply(null,e))}function o(t){c=setTimeout(function(){c=null,e(a,r())},t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!p){if(e)return void i.call.apply(i,[null,e].concat(t));if(r()||l)return void i.call.apply(i,[null,e].concat(t));u<64&&(u*=2);var a;1===h?(h=2,a=0):a=1e3*(u+Math.random()),o(a)}}function s(e){f||(f=!0,p||(null!==c?(e||(h=2),clearTimeout(c),o(0)):e||(h=1)))}var u=1,c=null,l=!1,h=0,p=!1,f=!1;return o(0),setTimeout(function(){l=!0,s(!0)},n),s}function Be(e){e(!1)}function je(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Ge(e){var t="undefined"!==typeof qe.a?qe.a.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function Ve(e,t,n){var r=J(e.urlParams),i=e.url+r,o=Object.assign({},e.headers);return je(o,t),Ge(o),new Mt(i,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}function ze(e,t,n){return new Ot(e,new ut,n)}var He,We=n(13),qe=n.n(We),Ye=n(14),Xe="firebasestorage.googleapis.com",Ke="storageBucket",Qe=12e4,Je=6e4,Ze=-9007199254740991,$e=function(){function e(e,t){this.code_=r(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return r(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),et={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},tt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nt=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}(),rt=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw x(tt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=O(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}(),it={STATE_CHANGED:"state_changed"},ot={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},at={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(He||(He={}));var st=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=He.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=He.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=He.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw w("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),I(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return I(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw w("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){I(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){I(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),ut=function(){function e(){}return e.prototype.createXhrIo=function(){return new st},e}(),ct=function(){function e(e,t){var n=0,r="";G(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(G(this.data_)){var r=this.data_,i=W(r,t,n);return null===i?null:new e(i)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(V()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(H.apply(null,r))}var i=t.map(function(e){return F(e)?E(tt.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),lt=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw p(t)},e.makeFromUrl=function(t){function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}function r(e){e.path_=decodeURIComponent(e.path)}for(var i=null,o=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),a={bucket:1,path:3},s=Xe.replace(/[.]/g,"\\."),u=new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),c={bucket:1,path:3},l=[{regex:o,indices:a,postModify:n},{regex:u,indices:c,postModify:r}],p=0;p<l.length;p++){var f=l[p],d=f.regex.exec(t);if(d){var m=d[f.indices.bucket],g=d[f.indices.path];g||(g=""),i=new e(m,g),f.postModify(i);break}}if(null==i)throw h(t);return i},e}(),ht=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Z}return e}(),pt=null,ft="maxResults",dt=1e3,mt="pageToken",gt="prefixes",vt="items",yt=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}(),bt=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}(),_t=function(){function e(e,t,n){if(P(e)||I(t)||I(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}return e}(),xt=function(){function e(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}return e}(),wt=function(){function e(e,t){var n=this;this.validator=function(t){n.optional&&!R(t)||e(t)},this.optional=!!t}return e}(),Tt=function(){function e(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=ot.RUNNING,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(et.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(ot.ERROR))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(et.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(ot.ERROR))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===ot.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case ot.RUNNING:e(n);break;case ot.CANCELING:t.transition_(ot.CANCELED);break;case ot.PAUSING:t.transition_(ot.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=Se(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=ke(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new bt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=Ce(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(ot.ERROR)}var a=e.authWrapper_.makeRequest(o,i);e.request_=a,a.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(ot.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=ge(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(ot.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=Te(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(ot.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case ot.CANCELING:case ot.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case ot.RUNNING:var t=this.state_===ot.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case ot.PAUSED:this.state_=e,this.notifyObservers_();break;case ot.CANCELED:this.error_=l(),this.state_=e,this.notifyObservers_();break;case ot.ERROR:case ot.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case ot.PAUSING:this.transition_(ot.PAUSED);break;case ot.CANCELING:this.transition_(ot.CANCELED);break;case ot.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=D(this.state_);return new xt(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(){if(e!==it.STATE_CHANGED)throw"Expected one of the event types: ["+it.STATE_CHANGED+"]."}function o(e){try{return void c(e)}catch(e){}try{l(e);if(!(R(e.next)||R(e.error)||R(e.complete)))throw"";return}catch(e){throw u}}function a(e){function t(t,n,i){null!==e&&Me("on",e,arguments);var o=new _t(t,n,r);return h.addObserver_(o),function(){h.removeObserver_(o)}}return t}function s(e){if(null===e)throw u;o(e)}var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=Ne(!0).validator,l=Le(null,!0).validator;Me("on",[Oe(i),Le(o,!0),Ne(!0),Ne(!0)],arguments);var h=this,p=[Le(s),Ne(!0),Ne(!0)];return R(t)||R(n)||R(r)?a(null)(t,n,r):a(p)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(D(this.state_)){case at.SUCCESS:Ue(this.resolve_.bind(null,this.snapshot))();break;case at.CANCELED:case at.ERROR:Ue(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(D(this.state_)){case at.RUNNING:case at.PAUSED:e.next&&Ue(e.next.bind(e,this.snapshot))();break;case at.SUCCESS:e.complete&&Ue(e.complete.bind(e))();break;case at.CANCELED:case at.ERROR:e.error&&Ue(e.error.bind(e,this.error_))();break;default:e.error&&Ue(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Me("resume",[],arguments);var e=this.state_===ot.PAUSED||this.state_===ot.PAUSING;return e&&this.transition_(ot.RUNNING),e},e.prototype.pause=function(){Me("pause",[],arguments);var e=this.state_===ot.RUNNING;return e&&this.transition_(ot.PAUSING),e},e.prototype.cancel=function(){Me("cancel",[],arguments);var e=this.state_===ot.RUNNING||this.state_===ot.PAUSING;return e&&this.transition_(ot.CANCELING),e},e}(),Et=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof lt?t:lt.makeFromUrl(t)}return e.prototype.toString=function(){return Me("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return ee()},e.prototype.child=function(e){Me("child",[Oe()],arguments);var t=X(this.location.path,e),n=new lt(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=Y(this.location.path);if(null===e)return null;var t=new lt(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new lt(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return K(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Me("put",[De(),Ie(!0)],arguments),this.throwIfRoot_("put"),new Tt(this,this.authWrapper,this.location,this.mappings(),new ct(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=tt.RAW),Me("putString",[Oe(),Oe(T,!0),Ie(!0)],arguments),this.throwIfRoot_("putString");var r=E(t,e),i=Object.assign({},n);return!I(i.contentType)&&I(r.contentType)&&(i.contentType=r.contentType),new Tt(this,this.authWrapper,this.location,this.mappings(),new ct(r.data,!0),i)},e.prototype.delete=function(){var e=this;return Me("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var n=_e(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.listAll=function(){Me("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},e.prototype.listAllHelper=function(e,t){return Object(Ye.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ye.__generator)(this,function(a){switch(a.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.list=function(e){Me("list",[Re(!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=e||{},i=ve(t.authWrapper,t.location,"/",r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()})},e.prototype.getMetadata=function(){var e=this;return Me("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var n=ge(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){var t=this;return Me("updateMetadata",[Ie()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=be(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){var e=this;return Me("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var n=ye(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw g();return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw _(e)},e}(),St=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),kt=function(){function e(){this.map=new Map,this.id=Ze}return e.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},e.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},e}(),Ct=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;I(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=Qe,this.maxUploadRetryTime_=Je,this.requestMap_=new kt}return e.extractBucket_=function(e){var t=e[Ke]||null;return null==t?null:lt.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&I(this.app_.INTERNAL)&&I(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw b();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new St(b());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),Mt=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){function e(e,t){function r(e){var t=e.loaded,r=e.lengthComputable?e.total:-1;null!==n.progressCallback_&&n.progressCallback_(t,r)}if(t)return void e(!1,new At(!1,null,!0));var i=n.pool_.createXhrIo();n.pendingXhr_=i,null!==n.progressCallback_&&i.addUploadProgressListener(r),i.send(n.url_,n.method_,n.body_,n.headers_).then(function(t){null!==n.progressCallback_&&t.removeUploadProgressListener(r),n.pendingXhr_=null,t=t;var i=t.getErrorCode()===He.NO_ERROR,o=t.getStatus();if(!i||n.isRetryStatusCode_(o)){var a=t.getErrorCode()===He.ABORT;return void e(!1,new At(!1,null,a))}var s=-1!==n.successCodes_.indexOf(o);e(!0,new At(s,t))})}function t(e,t){var r=n.resolve_,o=n.reject_,a=t.xhr;if(t.wasSuccessCode)try{var s=n.callback_(a,a.getResponseText());R(s)?r(s):r()}catch(e){o(e)}else if(null!==a){var u=i();u.setServerResponseProp(a.getResponseText()),o(n.errorCallback_?n.errorCallback_(a,u):u)}else if(t.canceled){var u=n.appDelete_?b():l();o(u)}else{var u=c();o(u)}}var n=this;this.canceled_?t(!1,new At(!1,null,!0)):this.backoffId_=Fe(e,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&Be(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=-1!==n.indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||i},e}(),At=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}(),Ot=function(){function e(e,t,n){function r(e,t){return new Et(e,t)}if(this.bucket_=null,this.authWrapper_=new Ct(e,r,Ve,this,t),this.app_=e,null!=n)this.bucket_=lt.makeFromBucketSpec(n);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new lt(i,""))}this.internals_=new Dt(this)}return e.prototype.ref=function(e){function t(e){if("string"!==typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Me("ref",[Oe(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Et(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if("string"!==typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{lt.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return Me("refFromURL",[Oe(t,!1)],arguments),new Et(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Me("setMaxUploadRetryTime",[Pe()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){Me("setMaxOperationRetryTime",[Pe()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),Dt=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}(),It="storage";!function(e){var t={TaskState:at,TaskEvent:it,StringFormat:tt,Storage:Ot,Reference:Et};e.INTERNAL.registerService(It,ze,t,void 0,!0)}(qe.a)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.object=t,this.closestBlockBBox=null,this.domElement=void 0!==n?n:document,n&&this.domElement.setAttribute("tabindex",-1),this.BBox=null,this.boxMatrixInverse=null,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.prevCamPos=new i.Vector3(0,0,0),this.tmpQuaternion=new i.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new i.Vector3(0,0,0),this.rotationVector=new i.Vector3(0,0,0),this.mousemove=this.bind(this,this.mousemove),this.mousedown=this.bind(this,this.mousedown),this.mouseup=this.bind(this,this.mouseup),this.keydown=this.bind(this,this.keydown),this.keyup=this.bind(this,this.keyup),this.domElement.addEventListener("contextmenu",this.contextmenu,!1),this.domElement.addEventListener("mousemove",this.mousemove,!1),window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1),this.updateMovementVector(),this.updateRotationVector()}return o(e,[{key:"updateClosestBlockBBox",value:function(e,t,n){this.BBox=e,this.BBoxOuter=n,this.boxMatrixInverse=t}},{key:"handleEvent",value:function(e){"function"===typeof this[e.type]&&this[e.type](e)}},{key:"keydown",value:function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}}},{key:"keyup",value:function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()}},{key:"mousedown",value:function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}}},{key:"mousemove",value:function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}}},{key:"mouseup",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()}},{key:"update",value:function(e){var t=e*this.movementSpeed,n=e*this.rollSpeed;if(this.prevCamPos=this.object.position.clone(),this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.BBox){var r=this.object.position.clone();r.applyMatrix4(this.boxMatrixInverse),this.BBoxOuter&&(this.BBoxOuter.containsPoint(r)||(this.object.position.x=this.prevCamPos.x,this.object.position.y=this.prevCamPos.y,this.object.position.z=this.prevCamPos.z)),this.BBox.containsPoint(r)&&(this.object.position.x=this.prevCamPos.x,this.object.position.y=this.prevCamPos.y,this.object.position.z=this.prevCamPos.z)}this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)}},{key:"updateMovementVector",value:function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back}},{key:"updateRotationVector",value:function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}},{key:"getContainerDimensions",value:function(){return this.domElement!==document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}},{key:"bind",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"contextmenu",value:function(e){e.preventDefault()}},{key:"dispose",value:function(){this.domElement.removeEventListener("contextmenu",this.contextmenu,!1),this.domElement.removeEventListener("mousedown",this.mousedown,!1),this.domElement.removeEventListener("mousemove",this.mousemove,!1),this.domElement.removeEventListener("mouseup",this.mouseup,!1),window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}}]),e}();t.a=a},function(e,t,n){"use strict";var r=n(2),i=function(e,t){function n(){return 2*Math.PI/60/60*L.autoRotateSpeed}function i(){return Math.pow(.95,L.zoomSpeed)}function o(e){z.theta-=e}function a(e){z.phi-=e}function s(e){L.object.isPerspectiveCamera?H/=e:L.object.isOrthographicCamera?(L.object.zoom=Math.max(L.minZoom,Math.min(L.maxZoom,L.object.zoom*e)),L.object.updateProjectionMatrix(),q=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),L.enableZoom=!1)}function u(e){L.object.isPerspectiveCamera?H*=e:L.object.isOrthographicCamera?(L.object.zoom=Math.max(L.minZoom,Math.min(L.maxZoom,L.object.zoom/e)),L.object.updateProjectionMatrix(),q=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),L.enableZoom=!1)}function c(e){Y.set(e.clientX,e.clientY)}function l(e){ie.set(e.clientX,e.clientY)}function h(e){te.set(e.clientX,e.clientY)}function p(e){K.set(e.clientX,e.clientY),J.subVectors(K,Y).multiplyScalar(L.rotateSpeed);var t=L.domElement===document?L.domElement.body:L.domElement;o(2*Math.PI*J.x/t.clientHeight),a(2*Math.PI*J.y/t.clientHeight),Y.copy(K),L.update()}function f(e){oe.set(e.clientX,e.clientY),ae.subVectors(oe,ie),ae.y>0?s(i()):ae.y<0&&u(i()),ie.copy(oe),L.update()}function d(e){ne.set(e.clientX,e.clientY),re.subVectors(ne,te).multiplyScalar(L.panSpeed),ce(re.x,re.y),te.copy(ne),L.update()}function m(e){}function g(e){e.deltaY<0?u(i()):e.deltaY>0&&s(i()),L.update()}function v(e){switch(e.keyCode){case L.keys.UP:ce(0,L.keyPanSpeed),L.update();break;case L.keys.BOTTOM:ce(0,-L.keyPanSpeed),L.update();break;case L.keys.LEFT:ce(L.keyPanSpeed,0),L.update();break;case L.keys.RIGHT:ce(-L.keyPanSpeed,0),L.update()}}function y(e){Y.set(e.touches[0].pageX,e.touches[0].pageY),X.set(e.touches[1].pageX,e.touches[1].pageY)}function b(e){if(L.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);ie.set(0,r)}}function _(e){L.enablePan&&te.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){if(!1!==L.enableRotate&&0!==(j&B.ROTATE)){if(K.set(e.touches[0].pageX,e.touches[0].pageY),Q.set(e.touches[1].pageX,e.touches[1].pageY),J.subVectors(K,Y),Z.subVectors(Q,X),$.subVectors(X,Y),ee.subVectors(Q,K),w()){var t=L.domElement===document?L.domElement.body:L.domElement;a(2*Math.PI*J.y/t.clientHeight),j=B.ROTATE_UP}else 0!==(j&B.ROTATE_LEFT)&&o(($.angle()-ee.angle())*L.rotateSpeed);Y.copy(K),X.copy(Q)}}function w(){return!!le($)&&(!!le(ee)&&(!!he(J)&&(!!he(Z)&&J.dot(Z)>0)))}function T(e){if(!1!==L.enableZoom&&0!==(j&B.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);oe.set(0,r),ae.set(0,Math.pow(oe.y/ie.y,L.zoomSpeed)),s(ae.y),ie.copy(oe)}}function E(e){!1!==L.enablePan&&0!==(j&B.PAN)&&(ne.set(e.touches[0].pageX,e.touches[0].pageY),re.subVectors(ne,te).multiplyScalar(L.panSpeed),ce(re.x,re.y),te.copy(ne))}function S(e){}function k(e){if(!1!==L.enabled){switch(e.preventDefault(),e.button){case L.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===L.enableRotate)return;c(e),j=B.ROTATE}else{if(!1===L.enablePan)return;h(e),j=B.PAN}break;case L.mouseButtons.MIDDLE:if(!1===L.enableZoom)return;l(e),j=B.DOLLY;break;case L.mouseButtons.RIGHT:if(!1===L.enableRotate)return;c(e),j=B.ROTATE}j!==B.NONE&&(document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",M,!1),L.dispatchEvent(U))}}function C(e){if(!1!==L.enabled)switch(e.preventDefault(),j){case B.ROTATE:if(!1===L.enableRotate)return;p(e);break;case B.DOLLY:if(!1===L.enableZoom)return;f(e);break;case B.PAN:if(!1===L.enablePan)return;d(e)}}function M(e){!1!==L.enabled&&(m(e),document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",M,!1),L.dispatchEvent(F),j=B.NONE)}function A(e){!1===L.enabled||!1===L.enableZoom||j!==B.NONE&&j!==B.ROTATE||(e.preventDefault(),e.stopPropagation(),L.dispatchEvent(U),g(e),L.dispatchEvent(F))}function O(e){!1!==L.enabled&&!1!==L.enableKeys&&!1!==L.enablePan&&v(e)}function D(e){if(!1!==L.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===L.enablePan)return;_(e),j=B.PAN;break;case 2:if(!1===L.enableZoom&&!1===L.enableRotate)return;y(e),b(e),j=B.DOLLY_ROTATE;break;default:j=B.NONE}j!==B.NONE&&L.dispatchEvent(U)}}function I(e){if(!1!==L.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===L.enablePan)return;if(j!==B.PAN)return;E(e),L.update();break;case 2:if(!1===L.enableZoom&&!1===L.enableRotate)return;if(0===(j&B.DOLLY_ROTATE))return;x(e),T(e),L.update();break;default:j=B.NONE}}function R(e){!1!==L.enabled&&(S(e),L.dispatchEvent(F),j=B.NONE)}function P(e){!1!==L.enabled&&e.preventDefault()}this.object=e,this.closestBlockBBox=null,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.LEFT,MIDDLE:r.MOUSE.MIDDLE,RIGHT:r.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.updateClosestBlockBBox=function(e){L.closestBlockBBox=e},this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.saveState=function(){L.target0.copy(L.target),L.position0.copy(L.object.position),L.zoom0=L.object.zoom},this.reset=function(){L.target.copy(L.target0),L.object.position.copy(L.position0),L.object.zoom=L.zoom0,L.object.updateProjectionMatrix(),L.dispatchEvent(N),L.update(),j=B.NONE},this.update=function(){var t=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=i.clone().inverse(),s=new r.Vector3,u=new r.Quaternion;return function(){var e=L.object.position;return t.copy(e).sub(L.target),t.applyQuaternion(i),V.setFromVector3(t),L.autoRotate&&j===B.NONE&&o(n()),V.theta+=z.theta,V.phi+=z.phi,V.theta=Math.max(L.minAzimuthAngle,Math.min(L.maxAzimuthAngle,V.theta)),V.phi=Math.max(L.minPolarAngle,Math.min(L.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=H,V.radius=Math.max(L.minDistance,Math.min(L.maxDistance,V.radius)),L.target.add(W),t.setFromSpherical(V),t.applyQuaternion(a),e.copy(L.target).add(t),L.object.lookAt(L.target),!0===L.enableDamping?(z.theta*=1-L.dampingFactor,z.phi*=1-L.dampingFactor,W.multiplyScalar(1-L.dampingFactor)):(z.set(0,0,0),W.set(0,0,0)),H=1,!!(q||s.distanceToSquared(L.object.position)>G||8*(1-u.dot(L.object.quaternion))>G)&&(L.dispatchEvent(N),s.copy(L.object.position),u.copy(L.object.quaternion),q=!1,!0)}}(),this.dispose=function(){L.domElement.removeEventListener("contextmenu",P,!1),document.removeEventListener("contextmenu",P,!1),L.domElement.removeEventListener("mousedown",k,!1),document.removeEventListener("mousedown",k,!1),L.domElement.removeEventListener("wheel",A,!1),document.removeEventListener("wheel",A,!1),L.domElement.removeEventListener("touchstart",D,!1),document.removeEventListener("touchstart",D,!1),L.domElement.removeEventListener("touchend",R,!1),document.removeEventListener("touchend",R,!1),L.domElement.removeEventListener("touchmove",I,!1),document.removeEventListener("touchmove",I,!1),document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",M,!1),window.removeEventListener("keydown",O,!1)};var L=this,N={type:"change"},U={type:"start"},F={type:"end"},B={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},j=B.NONE,G=1e-6,V=new r.Spherical,z=new r.Spherical,H=1,W=new r.Vector3,q=!1,Y=new r.Vector2,X=new r.Vector2,K=new r.Vector2,Q=new r.Vector2,J=new r.Vector2,Z=new r.Vector2,$=new r.Vector2,ee=new r.Vector2,te=new r.Vector2,ne=new r.Vector2,re=new r.Vector2,ie=new r.Vector2,oe=new r.Vector2,ae=new r.Vector2,se=function(){var e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),W.add(e)}}(),ue=function(){var e=new r.Vector3;return function(t,n){!0===L.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(L.object.up,e)),e.multiplyScalar(t),W.add(e)}}(),ce=function(){var e=new r.Vector3;return function(t,n){var r=L.domElement===document?L.domElement.body:L.domElement;if(L.object.isPerspectiveCamera){var i=L.object.position;e.copy(i).sub(L.target);var o=e.length();o*=Math.tan(L.object.fov/2*Math.PI/180),se(2*t*o/r.clientHeight,L.object.matrix),ue(2*n*o/r.clientHeight,L.object.matrix)}else L.object.isOrthographicCamera?(se(t*(L.object.right-L.object.left)/L.object.zoom/r.clientWidth,L.object.matrix),ue(n*(L.object.top-L.object.bottom)/L.object.zoom/r.clientHeight,L.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),L.enablePan=!1)}}(),le=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),he=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();L.domElement.addEventListener("contextmenu",P,!1),L.domElement.addEventListener("mousedown",k,!1),L.domElement.addEventListener("wheel",A,!1),L.domElement.addEventListener("touchstart",D,!1),L.domElement.addEventListener("touchend",R,!1),L.domElement.addEventListener("touchmove",I,!1),window.addEventListener("keydown",O,!1),this.update()};i.prototype=Object.create(r.EventDispatcher.prototype),i.prototype.constructor=i,Object.defineProperties(i.prototype,{center:{get:function(){return console.warn("MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t.a=i},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(12),l=n.n(c),h=n(15),p=n.n(h),f=n(141),d=n(58),m=n(142),g=n.n(m),v=n(143),y=n.n(v),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.sampleRate=e.sampleRate,n.soundDuration=e.soundDuration,n.noteDuration=e.noteDuration,n.config=e.config,n.narrationPlaying=!1,n.audioUtils=new f.a({sampleRate:n.sampleRate,soundDuration:n.soundDuration,noteDuration:n.noteDuration,config:n.config}),n.gpu=new p.a;var r=window.AudioContext||window.webkitAudioContext;n.audioContext=new r,n.blockAudioBus=n.audioContext.createGain(),n.blockAudioMaxLevel=.8,n.masterBus=n.audioContext.createGain(),n.masterBus.gain.setTargetAtTime(.8,n.audioContext.currentTime,.1),n.compressor=n.audioContext.createDynamicsCompressor(),n.compressor.threshold.setValueAtTime(-10,n.audioContext.currentTime),n.compressor.knee.setValueAtTime(0,n.audioContext.currentTime),n.compressor.ratio.setValueAtTime(5,n.audioContext.currentTime),n.compressor.attack.setValueAtTime(0,n.audioContext.currentTime),n.compressor.release.setValueAtTime(1,n.audioContext.currentTime),n.biquadFilter=n.audioContext.createBiquadFilter(),n.biquadFilter.type="notch",n.biquadFilter.frequency.setValueAtTime(800,n.audioContext.currentTime),n.biquadFilter.gain.setValueAtTime(-8,n.audioContext.currentTime),n.biquadFilter.Q.setValueAtTime(.7,n.audioContext.currentTime),n.biquadFilter2=n.audioContext.createBiquadFilter(),n.biquadFilter2.type="notch",n.biquadFilter2.frequency.setValueAtTime(188,n.audioContext.currentTime),n.biquadFilter2.gain.setValueAtTime(-10,n.audioContext.currentTime),n.biquadFilter2.Q.setValueAtTime(3,n.audioContext.currentTime),n.highShelf=n.audioContext.createBiquadFilter(),n.highShelf.type="highshelf",n.highShelf.gain.setValueAtTime(-7,n.audioContext.currentTime),n.highShelf.frequency.setValueAtTime(1200,n.audioContext.currentTime);var a=function(e,t){return window.fetch(t).then(function(e){return e.arrayBuffer()}).then(function(t){return e.decodeAudioData(t)})};n.convolver=n.audioContext.createConvolver(),n.convolver2=n.audioContext.createConvolver(),n.analyser=n.audioContext.createAnalyser(),n.analyser.fftSize=1024;var s=function(e){this.input=e.createGain();var t=e.createGain(),n=e.createDelay(),r=e.createGain(),i=e.createGain();n.delayTime.value=1,r.gain.value=.4,i.gain.value=.4,this.input.connect(n),this.input.connect(t),n.connect(r),n.connect(i),r.connect(n),i.connect(t),this.connect=function(e){t.connect(e)}},u=new s(n.audioContext);return n.analyserGain=n.audioContext.createGain(),n.analyserGain.gain.setTargetAtTime(4,n.audioContext.currentTime,.1),a(n.audioContext,"./assets/sounds/IR/LittlefieldLobby.wav").then(function(e){n.convolver.buffer=e,n.blockAudioBus.connect(n.masterBus),n.masterBus.connect(u.input),u.connect(n.convolver),n.convolver.connect(n.compressor),n.compressor.connect(n.biquadFilter),n.biquadFilter.connect(n.highShelf),n.masterBus.connect(n.analyserGain),n.analyserGain.connect(n.analyser),n.highShelf.connect(n.audioContext.destination)}),a(n.audioContext,"./assets/sounds/IR/Space4ArtGallery.wav").then(function(e){n.convolver2.buffer=e,n.convolver2.connect(n.audioContext.destination)}),n.notes={27.5:"A0",29.1352:"A#0",30.8677:"B0",32.7032:"C1",34.6478:"C#1",36.7081:"D1",38.8909:"D#1",41.2034:"E1",43.6535:"F1",46.2493:"F#1",48.9994:"G1",51.9131:"G#1",55:"A1",58.2705:"A#1",61.7354:"B1",65.4064:"C2",69.2957:"C#2",73.4162:"D2",77.7817:"D#2",82.4069:"E2",87.3071:"F2",92.4986:"F#2",97.9989:"G2",103.826:"G#2",110:"A2",116.541:"A#2",123.471:"B2",130.813:"C3",138.591:"C#3",146.832:"D3",155.563:"D#3",164.814:"E3",174.614:"F3",184.997:"F#3",195.998:"G3",207.652:"G#3",220:"A3",233.082:"A#3",246.942:"B3",261.626:"C4",277.183:"C#4",293.665:"D4",311.127:"D#4",329.628:"E4",349.228:"F4",369.994:"F#4",391.995:"G4",415.305:"G#4",440:"A4",466.164:"A#4",493.883:"B4",523.251:"C5",554.365:"C#5",587.33:"D5",622.254:"D#5",659.255:"E5",698.456:"F5",739.989:"F#5",783.991:"G5",830.609:"G#5",880:"A5",932.328:"A#5",987.767:"B5",1046.5:"C6",1108.73:"C#6",1174.66:"D6",1244.51:"D#6",1318.51:"E6",1396.91:"F6",1479.98:"F#6",1567.98:"G6",1661.22:"G#6",1760:"A6",1864.66:"A#6",1975.53:"B6",2093:"C7",2217.46:"C#7",2349.32:"D7",2489.02:"D#7",2637.02:"E7",2793.83:"F7",2959.96:"F#7",3135.96:"G7",3322.44:"G#7",3520:"A7",3729.31:"A#7",3951.07:"B7",4186.01:"C8",4434.92:"C#8",4698.63:"D8",4978.03:"D#8",5274.04:"E8",5587.65:"F8",5919.91:"F#8",6271.93:"G8",6644.88:"G#8",7040:"A8",7458.62:"A#8",7902.13:"B8"},n.chords={"A#":["A#","D","F"],F:["F","A","C"],"F#M":["G","A#","D"],"C#M":["D","F","A"],"D#":["D#","G","A#"]},n.buffers={},n.noteBuffers={},n.gainNodes={},n.audioSources={},n.noteSources={},n.loops={},n.blockAudioData={},n.offscreenMode="undefined"!==typeof window.OffscreenCanvas,n.narrationFilePath="assets/sounds/narration/",n.narrationSource=null,n.audioFilePath="assets/sounds/",n.loadedAudioSources={},n}return a(t,e),b(t,[{key:"startAudio",value:function(e,t){var n=this;this.buffers[e.height].copyToChannel(t.lArray,0),this.buffers[e.height].copyToChannel(t.rArray,1),this.audioSources[e.height]=this.audioContext.createBufferSource(),this.audioSources[e.height].buffer=this.buffers[e.height],this.gainNodes[e.height]=this.audioContext.createGain(),this.audioSources[e.height].connect(this.gainNodes[e.height]),this.gainNodes[e.height].connect(this.blockAudioBus),this.audioSources[e.height].loop=!0,this.loops[e.height]=function(){setTimeout(function(){this.emit("loopend",e),this.loops[e.height](e)}.bind(n),1e3*n.soundDuration)},this.loops[e.height](e),this.fadeInBlockAudio(),this.audioSources[e.height].start()}},{key:"generate",value:function(e,t,n){var i=this;if(this.buffers[e.height]=this.audioContext.createBuffer(2,this.sampleRate*this.soundDuration,this.sampleRate),!this.offscreenMode){var o=this.audioUtils.generateBlockAudio(e,this.chords,this.notes,t,n),a=new p.a,s=o.frequencies.length>this.config.audio.maxSineBankLoops?this.config.audio.maxSineBankLoops:o.frequencies.length,c=s/15,l=this.soundDuration/15,h=a.createKernel(this.audioUtils.sineBank,{loopMaxIterations:this.config.audio.maxSineBankLoops}).setOutput([Math.floor(this.sampleRate*l)]);h.addNativeFunction("custom_smoothstep",this.audioUtils.customSmoothstep),h.addNativeFunction("custom_step",this.audioUtils.customStep),h.addNativeFunction("custom_random",this.audioUtils.customRandom);for(var f=[],m=0,v=0;v<15;v++){var y=Math.floor(v*c)-c;y<0&&(y=0);var b=h(o.frequencies,o.txTimes,o.spent,o.health,s,this.sampleRate,m*l,y);f.push(b),m++}var _=d.b(f),x=new Float32Array(this.sampleRate*this.soundDuration),w=new Float32Array(this.sampleRate*this.soundDuration);this.audioUtils.fillBuffer(_,1,x,w),o.txTimes=[],o.spent=[];var T={lArray:x,rArray:w,blockAudio:o};return this.startAudio(e,T)}var E=new g.a;E.onmessage=function(){var t=r(u.a.mark(function t(n){var r=n.data;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof r.lArray){t.next=4;break}return i.blockAudioData[e.height]=r.blockAudio,E.terminate(),t.abrupt("return",i.startAudio(e,r));case 4:case"end":return t.stop()}},t,i)}));return function(e){return t.apply(this,arguments)}}();var S={cmd:"get",blockData:e,config:this.config,chords:this.chords,notes:this.notes,sampleRate:this.sampleRate,soundDuration:this.soundDuration,TXValues:t,spentRatios:n,lArray:new Float32Array(this.sampleRate*this.soundDuration),rArray:new Float32Array(this.sampleRate*this.soundDuration)};E.postMessage(S,[S.TXValues.buffer,S.spentRatios.buffer,S.lArray.buffer,S.rArray.buffer])}},{key:"playNote",value:function(e,t){var n=this;if("undefined"!==typeof this.blockAudioData[e.height]&&this.offscreenMode){var i=new y.a;i.onmessage=function(){var t=r(u.a.mark(function t(r){var o=r.data;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof o.lArray){t.next=3;break}return i.terminate(),t.abrupt("return",n.startNote(e,o));case 3:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}(),i.postMessage({cmd:"get",blockAudioData:this.blockAudioData[e.height],txID:t,sampleRate:this.sampleRate,soundDuration:this.soundDuration,noteDuration:this.noteDuration})}}},{key:"muteMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.masterBus.gain.setTargetAtTime(0,this.audioContext.currentTime,e)}},{key:"unMuteMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.masterBus.gain.setTargetAtTime(1,this.audioContext.currentTime,e)}},{key:"fadeOutBlockAudio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.blockAudioBus.gain.setTargetAtTime(0,this.audioContext.currentTime,e)}},{key:"fadeInBlockAudio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.blockAudioBus.gain.setTargetAtTime(this.blockAudioMaxLevel,this.audioContext.currentTime,e)}},{key:"stopNotes",value:function(){var e=this;this.blockAudioBus.gain.setTargetAtTime(this.blockAudioMaxLevel,this.audioContext.currentTime,3),Object.keys(this.noteSources).forEach(function(t){e.noteSources[t].stop()}),this.noteSources=[],this.noteBuffers=[]}},{key:"startNote",value:function(e,t){this.stopNotes(),this.noteBuffers[e.height]=this.audioContext.createBuffer(2,this.sampleRate*this.noteDuration,this.sampleRate);var n=this.noteBuffers[e.height];console.time("fillBuffer");for(var r=n.getChannelData(0),i=n.getChannelData(1),o=0;o<t.lArray.length;o++)r[o]=t.lArray[o],i[o]=t.rArray[o];console.timeEnd("fillBuffer"),this.noteSources[e.height]=this.audioContext.createBufferSource();var a=this.noteSources[e.height];a.buffer=n;var s=this.audioContext.createGain();this.blockAudioBus.gain.setTargetAtTime(.1,this.audioContext.currentTime,1),a.connect(s),s.connect(this.masterBus),a.loop=!0,a.start()}},{key:"playNarrationFile",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(a){var s,c,l,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.narrationPlaying){e.next=17;break}return i.narrationPlaying=!0,s=i.narrationFilePath+t+"/"+n+".mp3",e.next=5,window.fetch(s);case 5:return c=e.sent,e.next=8,c.arrayBuffer();case 8:return l=e.sent,e.next=11,i.audioContext.decodeAudioData(l);case 11:h=e.sent,i.narrationSource=i.audioContext.createBufferSource(),i.narrationSource.buffer=h,i.narrationSource.connect(i.audioContext.destination),i.narrationSource.start(),i.narrationSource.onended=function(){var e=r(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(function(){i.narrationPlaying=!1,a(!0)},o);case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}();case 17:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"playAudioFile",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(r){var o,a,s,c,l,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.audioFilePath+t+".mp3",e.next=3,window.fetch(o);case 3:return a=e.sent,e.next=6,a.arrayBuffer();case 6:return s=e.sent,e.next=9,n.audioContext.decodeAudioData(s);case 9:c=e.sent,l=n.audioContext.createBufferSource(),l.buffer=c,h=n.audioContext.createGain(),h.gain.value=.3,h.connect(n.audioContext.destination),i&&(l.loop=!0),l.connect(h),l.start();case 18:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopNarration",value:function(){this.narrationPlaying&&this.narrationSource.stop()}}]),t}(l.a);t.a=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),u=n(47),c=n(51),l=n(54),h=n(137),p=n(138),f=n(139),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));e=e||{},n._canvas=e.canvas||null,n._webGl=e.webGl||null;var o=e.mode,a=void 0;if(s.isWebGlSupported())if(n._webGl)if("undefined"!==typeof WebGL2RenderingContext&&n._webGl.constructor===WebGL2RenderingContext)a="webgl2";else{if("undefined"===typeof WebGLRenderingContext||n._webGl.constructor!==WebGLRenderingContext)throw new Error("unknown WebGL Context");a="webgl"}else a=o||"gpu";else{if(o&&"cpu"!==o)throw new Error('A requested mode of "'+o+'" and is not supported');console.warn("Warning: gpu not supported, falling back to cpu support"),a="cpu"}n.kernels=[];var f={canvas:n._canvas,webGl:n._webGl};switch(a){case"cpu":n._runner=new l(f);break;case"gpu":var d=n.getGPURunner();n._runner=new d(f);break;case"webgl2":n._runner=new c(f);break;case"webgl":n._runner=new u(f);break;case"webgl2-validator":n._runner=new c(f),n._runner.Kernel=p;break;case"webgl-validator":n._runner=new u(f),n._runner.Kernel=h;break;default:throw new Error('"'+o+'" mode is not defined')}return n}return o(t,e),a(t,[{key:"createKernel",value:function(e,t){if("undefined"===typeof e)throw"Missing fn parameter";if(!s.isFunction(e)&&"string"!==typeof e)throw"fn parameter not a function";var n=Object.assign({webGl:this._webGl,canvas:this._canvas},t||{}),r=this._runner.buildKernel(e,n);return this._canvas||(this._canvas=r.getCanvas()),this._runner.canvas||(this._runner.canvas=r.getCanvas()),this.kernels.push(r),r}},{key:"createKernelMap",value:function(){var e=void 0,t=void 0;"function"===typeof arguments[arguments.length-2]?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],s.isWebGlDrawBuffersSupported()||(this._runner=new l(t));var n=this.createKernel(e,t);if(Array.isArray(arguments[0]))for(var r=arguments[0],i=0;i<r.length;i++)n.addSubKernel(r[i]);else{var o=arguments[0];for(var a in o)o.hasOwnProperty(a)&&n.addSubKernelProperty(a,o[a])}return n}},{key:"combineKernels",value:function(){var e=arguments[arguments.length-2],t=arguments[arguments.length-1];if("cpu"===this.getMode())return t;for(var n=arguments[0].getCanvas(),r=arguments[0].getWebGl(),i=0;i<arguments.length-1;i++)arguments[i].setCanvas(n).setWebGl(r).setOutputToTexture(!0);return function(){t.apply(null,arguments);var n=e.texSize,r=e.getWebGl(),i=e.threadDim,o=void 0;if(e.floatOutput){var a=n[0],u=Math.ceil(n[1]/4);o=new Float32Array(a*u*4),r.readPixels(0,0,a,u,r.RGBA,r.FLOAT,o)}else{var c=new Uint8Array(n[0]*n[1]*4);r.readPixels(0,0,n[0],n[1],r.RGBA,r.UNSIGNED_BYTE,c),o=new Float32Array(c.buffer)}if(o=o.subarray(0,i[0]*i[1]*i[2]),1===e.output.length)return o;if(2===e.output.length)return s.splitArray(o,e.output[0]);if(3===e.output.length){return s.splitArray(o,e.output[0]*e.output[1]).map(function(t){return s.splitArray(t,e.output[0])})}}}},{key:"getGPURunner",value:function(){return"undefined"!==typeof WebGL2RenderingContext&&s.isWebGl2Supported()?c:"undefined"!==typeof WebGLRenderingContext?u:void 0}},{key:"addFunction",value:function(e,t){return this._runner.functionBuilder.addFunction(null,e,t),this}},{key:"addNativeFunction",value:function(e,t){return this._runner.functionBuilder.addNativeFunction(e,t),this}},{key:"getMode",value:function(){return this._runner.getMode()}},{key:"isWebGlSupported",value:function(){return s.isWebGlSupported()}},{key:"hasIntegerDivisionAccuracyBug",value:function(){return s.hasIntegerDivisionAccuracyBug()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getWebGl",value:function(){return this._webGl}},{key:"destroy",value:function(){var e=this;setTimeout(function(){for(var t=e.kernels,n=!e._webGl&&t.length&&t[0]._webGl,r=0;r<e.kernels.length;r++)e.kernels[r].destroy(!0);if(n){n.OES_texture_float=null,n.OES_texture_float_linear=null,n.OES_element_index_uint=null;var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}},0)}}]),t}(f);Object.assign(d,f),e.exports=d},function(e,t,n){"use strict";e.exports="__HEADER__;\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nconst float LOOP_MAX = __LOOP_MAX__;\n\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nvec4 round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 rgba) {\n  __DECODE32_ENDIANNESS__;\n  rgba *= 255.0;\n  vec2 gte128;\n  gte128.x = rgba.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = rgba.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * rgba.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  rgba.b = rgba.b - 128.0 * gte128.x;\n  res = dot(rgba, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nvec4 encode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 rgba = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  rgba.rg = integerMod(rgba.rg, 256.0);\n  rgba.b = integerMod(rgba.b, 128.0);\n  rgba.a = exponent*0.5 + 63.5;\n  rgba.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  rgba = floor(rgba);\n  rgba *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return rgba;\n}\n// Dragons end here\n\nfloat decode(vec4 rgba, int x, int bitRatio) {\n  if (bitRatio == 1) {\n    return decode32(rgba);\n  }\n  __DECODE32_ENDIANNESS__;\n  int channel = integerMod(x, bitRatio);\n  if (bitRatio == 4) {\n    if (channel == 0) return rgba.r * 255.0;\n    if (channel == 1) return rgba.g * 255.0;\n    if (channel == 2) return rgba.b * 255.0;\n    if (channel == 3) return rgba.a * 255.0;\n  }\n  else {\n    if (channel == 0) return rgba.r * 255.0 + rgba.g * 65280.0;\n    if (channel == 1) return rgba.b * 255.0 + rgba.a * 65280.0;\n  }\n}\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio,  int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  __GET_WRAPAROUND__;\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  __GET_TEXTURE_CHANNEL__;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  __GET_TEXTURE_INDEX__;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  __GET_RESULT__;\n  \n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  __GET_WRAPAROUND__;\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  __GET_TEXTURE_CHANNEL__;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  __GET_TEXTURE_INDEX__;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio, int y, int x) {\n  return get(tex, texSize, texDim, bitRatio, int(0), y, x);\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int y, int x) {\n  return getImage2D(tex, texSize, texDim, int(0), y, x);\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio, int x) {\n  return get(tex, texSize, texDim, bitRatio, int(0), int(0), x);\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int x) {\n  return getImage2D(tex, texSize, texDim, int(0), int(0), x);\n}\n\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\n__MAIN_PARAMS__;\n__MAIN_CONSTANTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}"},function(e,t,n){"use strict";e.exports="precision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"},function(e,t,n){"use strict";function r(e){return/^function /.test(e)&&(e=e.substring(9)),e.replace(/[_]typeof/g,"typeof")}function i(e){return e.replace(/[_]typeof/g,"typeof")}var o=n(4),a=n(22);n(16),n(9);e.exports=function(e,t){return"() => {\n    "+a.toString()+";\n    const utils = {\n      allPropertiesOf: "+i(o.allPropertiesOf.toString())+",\n      clone: "+i(o.clone.toString())+",\n      splitArray: "+i(o.splitArray.toString())+",\n      getArgumentType: "+i(o.getArgumentType.toString())+",\n      getDimensions: "+i(o.getDimensions.toString())+",\n      dimToTexSize: "+i(o.dimToTexSize.toString())+",\n      flattenTo: "+i(o.flattenTo.toString())+",\n      flatten2dArrayTo: "+i(o.flatten2dArrayTo.toString())+",\n      flatten3dArrayTo: "+i(o.flatten3dArrayTo.toString())+",\n      systemEndianness: '"+i(o.systemEndianness())+"',\n      initWebGl: "+i(o.initWebGl.toString())+",\n      isArray: "+i(o.isArray.toString())+",\n      checkOutput: "+i(o.checkOutput.toString())+"\n    };\n    const Utils = utils;\n    const canvases = [];\n    const maxTexSizes = {};\n    let Texture = function() {};\n    let Input = function() {}; \n    class "+(t||"Kernel")+" {\n      constructor() {\n        this.maxTexSize = null;\n        this.argumentsLength = 0;\n        this.constantsLength = 0;\n        this._canvas = null;\n        this._webGl = null;\n        this.program = null;\n        this.outputToTexture = "+(e.outputToTexture?"true":"false")+";\n        this.paramNames = "+JSON.stringify(e.paramNames)+";\n        this.paramTypes = "+JSON.stringify(e.paramTypes)+";\n        this.texSize = "+JSON.stringify(e.texSize)+";\n        this.output = "+JSON.stringify(e.output)+";\n        this.compiledFragShaderString = `"+e.compiledFragShaderString+"`;\n\t\t    this.compiledVertShaderString = `"+e.compiledVertShaderString+"`;\n\t\t    this.programUniformLocationCache = {};\n\t\t    this.textureCache = {};\n\t\t    this.subKernelOutputTextures = null;\n\t\t    this.subKernelOutputVariableNames = null;\n\t\t    this.uniform1fCache = {};\n\t\t    this.uniform1iCache = {};\n\t\t    this.uniform2fCache = {};\n\t\t    this.uniform2fvCache = {};\n\t\t    this.uniform2ivCache = {};\n\t\t    this.uniform3fvCache = {};\n\t\t    this.uniform3ivCache = {};\n      }\n      _getFragShaderString() { return this.compiledFragShaderString; }\n      _getVertShaderString() { return this.compiledVertShaderString; }\n      validateOptions() {}\n      setupParams() {}\n      setupConstants() {}\n      setCanvas(canvas) { this._canvas = canvas; return this; }\n      setWebGl(webGl) { this._webGl = webGl; return this; }\n      setTexture(Type) { Texture = Type; }\n      setInput(Type) { Input = Type; }\n      "+r(e.getUniformLocation.toString())+"\n      "+r(e.build.toString())+"\n\t\t  "+r(e.run.toString())+"\n\t\t  "+r(e._addArgument.toString())+"\n\t\t  "+r(e._formatArrayTransfer.toString())+"\n\t\t  "+r(e.getArgumentTexture.toString())+"\n\t\t  "+r(e.getTextureCache.toString())+"\n\t\t  "+r(e.getOutputTexture.toString())+"\n\t\t  "+r(e.renderOutput.toString())+"\n\t\t  "+r(e.updateMaxTexSize.toString())+"\n\t\t  "+r(e._setupOutputTexture.toString())+"\n\t\t  "+r(e.detachTextureCache.toString())+"\n\t\t  "+r(e.setUniform1f.toString())+"\n\t\t  "+r(e.setUniform1i.toString())+"\n\t\t  "+r(e.setUniform2f.toString())+"\n\t\t  "+r(e.setUniform2fv.toString())+"\n\t\t  "+r(e.setUniform2iv.toString())+"\n\t\t  "+r(e.setUniform3fv.toString())+"\n\t\t  "+r(e.setUniform3iv.toString())+"\n    };\n    return kernelRunShortcut(new Kernel());\n  };"}},function(e,t,n){"use strict";function r(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function i(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&j.test(String.fromCharCode(e)):!1!==t&&r(e,V)))}function o(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&G.test(String.fromCharCode(e)):!1!==t&&(r(e,V)||r(e,z)))))}function a(e,t){return new H(e,{beforeExpr:!0,binop:t})}function s(e,t){return void 0===t&&(t={}),t.keyword=e,Y[e]=new H(e,t)}function u(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}function c(e,t){return ee.call(e,t)}function l(e,t){for(var n=1,r=0;;){Q.lastIndex=r;var i=Q.exec(e);if(!(i&&i.index<t))return new re(n,t-r);++n,r=i.index+i[0].length}}function h(e){var t={};for(var n in oe)t[n]=e&&c(e,n)?e[n]:oe[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),ne(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return ne(t.onComment)&&(t.onComment=p(t,t.onComment)),t}function p(e,t){return function(n,r,i,o,a,s){var u={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(u.loc=new ie(this,a,s)),e.ranges&&(u.range=[i,o]),t.push(u)}}function f(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function d(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function m(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}function g(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function v(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function y(e){return i(e,!0)||36===e||95===e}function b(e){return o(e,!0)||36===e||95===e||8204===e||8205===e}function _(e){return e>=65&&e<=90||e>=97&&e<=122}function x(e){return e>=0&&e<=1114111}function w(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function T(e){return _(e)||95===e}function E(e){return T(e)||S(e)}function S(e){return e>=48&&e<=57}function k(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function C(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function M(e){return e>=48&&e<=55}function A(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function O(e,t){return new se(t,e).parse()}function D(e,t,n){var r=new se(n,e,t);return r.nextToken(),r.parseExpression()}function I(e,t){return new se(t,e)}function R(e,t,n){De=e,Ie=t,Re=n}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"version",function(){return Pe}),n.d(t,"parse",function(){return O}),n.d(t,"parseExpressionAt",function(){return D}),n.d(t,"tokenizer",function(){return I}),n.d(t,"parse_dammit",function(){return De}),n.d(t,"LooseParser",function(){return Ie}),n.d(t,"pluginsLoose",function(){return Re}),n.d(t,"addLooseExports",function(){return R}),n.d(t,"Parser",function(){return se}),n.d(t,"plugins",function(){return ae}),n.d(t,"defaultOptions",function(){return oe}),n.d(t,"Position",function(){return re}),n.d(t,"SourceLocation",function(){return ie}),n.d(t,"getLineInfo",function(){return l}),n.d(t,"Node",function(){return _e}),n.d(t,"TokenType",function(){return H}),n.d(t,"tokTypes",function(){return X}),n.d(t,"keywordTypes",function(){return Y}),n.d(t,"TokContext",function(){return we}),n.d(t,"tokContexts",function(){return Te}),n.d(t,"isIdentifierChar",function(){return o}),n.d(t,"isIdentifierStart",function(){return i}),n.d(t,"Token",function(){return Me}),n.d(t,"isNewLine",function(){return u}),n.d(t,"lineBreak",function(){return K}),n.d(t,"lineBreakG",function(){return Q}),n.d(t,"nonASCIIwhitespace",function(){return J});var P={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},L="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",N={5:L,6:L+" const class extends export import super"},U=/^in(stanceof)?$/,F="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",B="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",j=new RegExp("["+F+"]"),G=new RegExp("["+F+B+"]");F=B=null;var V=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],z=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],H=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null},W={beforeExpr:!0},q={startsExpr:!0},Y={},X={num:new H("num",q),regexp:new H("regexp",q),string:new H("string",q),name:new H("name",q),eof:new H("eof"),bracketL:new H("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new H("]"),braceL:new H("{",{beforeExpr:!0,startsExpr:!0}),braceR:new H("}"),parenL:new H("(",{beforeExpr:!0,startsExpr:!0}),parenR:new H(")"),comma:new H(",",W),semi:new H(";",W),colon:new H(":",W),dot:new H("."),question:new H("?",W),arrow:new H("=>",W),template:new H("template"),invalidTemplate:new H("invalidTemplate"),ellipsis:new H("...",W),backQuote:new H("`",q),dollarBraceL:new H("${",{beforeExpr:!0,startsExpr:!0}),eq:new H("=",{beforeExpr:!0,isAssign:!0}),assign:new H("_=",{beforeExpr:!0,isAssign:!0}),incDec:new H("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new H("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new H("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new H("**",{beforeExpr:!0}),_break:s("break"),_case:s("case",W),_catch:s("catch"),_continue:s("continue"),_debugger:s("debugger"),_default:s("default",W),_do:s("do",{isLoop:!0,beforeExpr:!0}),_else:s("else",W),_finally:s("finally"),_for:s("for",{isLoop:!0}),_function:s("function",q),_if:s("if"),_return:s("return",W),_switch:s("switch"),_throw:s("throw",W),_try:s("try"),_var:s("var"),_const:s("const"),_while:s("while",{isLoop:!0}),_with:s("with"),_new:s("new",{beforeExpr:!0,startsExpr:!0}),_this:s("this",q),_super:s("super",q),_class:s("class",q),_extends:s("extends",W),_export:s("export"),_import:s("import"),_null:s("null",q),_true:s("true",q),_false:s("false",q),_in:s("in",{beforeExpr:!0,binop:7}),_instanceof:s("instanceof",{beforeExpr:!0,binop:7}),_typeof:s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},K=/\r\n?|\n|\u2028|\u2029/,Q=new RegExp(K.source,"g"),J=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Z=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,$=Object.prototype,ee=$.hasOwnProperty,te=$.toString,ne=Array.isArray||function(e){return"[object Array]"===te.call(e)},re=function(e,t){this.line=e,this.column=t};re.prototype.offset=function(e){return new re(this.line,this.column+e)};var ie=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)},oe={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},ae={},se=function(e,t,n){this.options=e=h(e),this.sourceFile=e.sourceFile,this.keywords=f(N[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=P[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=f(r);var o=(r?r+" ":"")+P.strict;this.reservedWordsStrict=f(o),this.reservedWordsStrictBind=f(o+" "+P.strictBind),this.input=String(t),this.containsEsc=!1,this.loadPlugins(e.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(K).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=X.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};se.prototype.isKeyword=function(e){return this.keywords.test(e)},se.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},se.prototype.extend=function(e,t){this[e]=t(this[e])},se.prototype.loadPlugins=function(e){var t=this;for(var n in e){var r=ae[n];if(!r)throw new Error("Plugin '"+n+"' not found");r(t,e[n])}},se.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var ue=se.prototype,ce=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;ue.strictDirective=function(e){for(var t=this;;){Z.lastIndex=e,e+=Z.exec(t.input)[0].length;var n=ce.exec(t.input.slice(e));if(!n)return!1;if("use strict"===(n[1]||n[2]))return!0;e+=n[0].length}},ue.eat=function(e){return this.type===e&&(this.next(),!0)},ue.isContextual=function(e){return this.type===X.name&&this.value===e&&!this.containsEsc},ue.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},ue.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},ue.canInsertSemicolon=function(){return this.type===X.eof||this.type===X.braceR||K.test(this.input.slice(this.lastTokEnd,this.start))},ue.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ue.semicolon=function(){this.eat(X.semi)||this.insertSemicolon()||this.unexpected()},ue.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},ue.expect=function(e){this.eat(e)||this.unexpected()},ue.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},ue.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},ue.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ue.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ue.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var le=se.prototype;le.parseTopLevel=function(e){var t=this,n={};for(e.body||(e.body=[]);this.type!==X.eof;){var r=t.parseStatement(!0,!0,n);e.body.push(r)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var he={kind:"loop"},pe={kind:"switch"};le.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Z.lastIndex=this.pos;var e=Z.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(i(n,!0)){for(var r=t+1;o(this.input.charCodeAt(r),!0);)++r;var a=this.input.slice(t,r);if(!U.test(a))return!0}return!1},le.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Z.lastIndex=this.pos;var e=Z.exec(this.input),t=this.pos+e[0].length;return!K.test(this.input.slice(this.pos,t))&&"function"===this.input.slice(t,t+8)&&(t+8===this.input.length||!o(this.input.charAt(t+8)))},le.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet()&&(i=X._var,r="let"),i){case X._break:case X._continue:return this.parseBreakContinueStatement(o,i.keyword);case X._debugger:return this.parseDebuggerStatement(o);case X._do:return this.parseDoStatement(o);case X._for:return this.parseForStatement(o);case X._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1);case X._class:return e||this.unexpected(),this.parseClass(o,!0);case X._if:return this.parseIfStatement(o);case X._return:return this.parseReturnStatement(o);case X._switch:return this.parseSwitchStatement(o);case X._throw:return this.parseThrowStatement(o);case X._try:return this.parseTryStatement(o);case X._const:case X._var:return r=r||this.value,e||"var"===r||this.unexpected(),this.parseVarStatement(o,r);case X._while:return this.parseWhileStatement(o);case X._with:return this.parseWithStatement(o);case X.braceL:return this.parseBlock();case X.semi:return this.parseEmptyStatement(o);case X._export:case X._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===X._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(o,!0);var a=this.value,s=this.parseExpression();return i===X.name&&"Identifier"===s.type&&this.eat(X.colon)?this.parseLabeledStatement(o,a,s):this.parseExpressionStatement(o,s)}},le.parseBreakContinueStatement=function(e,t){var n=this,r="break"===t;this.next(),this.eat(X.semi)||this.insertSemicolon()?e.label=null:this.type!==X.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var o=n.labels[i];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(e.label&&r)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},le.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},le.parseDoStatement=function(e){return this.next(),this.labels.push(he),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(X._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(X.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},le.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(he),this.enterLexicalScope(),this.expect(X.parenL),this.type===X.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===X._var||this.type===X._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),(this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init)?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var o=new d,a=this.parseExpression(!0,o);return this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},le.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},le.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===X._function),e.alternate=this.eat(X._else)?this.parseStatement(!this.strict&&this.type===X._function):null,this.finishNode(e,"IfStatement")},le.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(X.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},le.parseSwitchStatement=function(e){var t=this;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(X.braceL),this.labels.push(pe),this.enterLexicalScope();for(var n,r=!1;this.type!==X.braceR;)if(t.type===X._case||t.type===X._default){var i=t.type===X._case;n&&t.finishNode(n,"SwitchCase"),e.cases.push(n=t.startNode()),n.consequent=[],t.next(),i?n.test=t.parseExpression():(r&&t.raiseRecoverable(t.lastTokStart,"Multiple default clauses"),r=!0,n.test=null),t.expect(X.colon)}else n||t.unexpected(),n.consequent.push(t.parseStatement(!0));return this.exitLexicalScope(),n&&this.finishNode(n,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},le.parseThrowStatement=function(e){return this.next(),K.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var fe=[];le.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===X._catch){var t=this.startNode();this.next(),this.eat(X.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(X.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(X._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},le.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},le.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(he),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},le.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},le.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},le.parseLabeledStatement=function(e,t,n){for(var r=this,i=0,o=r.labels;i<o.length;i+=1){o[i].name===t&&r.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===X._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=r.labels[s];if(u.statementStart!==e.start)break;u.statementStart=r.start,u.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},le.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},le.parseBlock=function(e){var t=this;void 0===e&&(e=!0);var n=this.startNode();for(n.body=[],this.expect(X.braceL),e&&this.enterLexicalScope();!this.eat(X.braceR);){var r=t.parseStatement(!0);n.body.push(r)}return e&&this.exitLexicalScope(),this.finishNode(n,"BlockStatement")},le.parseFor=function(e,t){return e.init=t,this.expect(X.semi),e.test=this.type===X.semi?null:this.parseExpression(),this.expect(X.semi),e.update=this.type===X.parenR?null:this.parseExpression(),this.expect(X.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},le.parseForIn=function(e,t){var n=this.type===X._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(X.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},le.parseVar=function(e,t,n){var r=this;for(e.declarations=[],e.kind=n;;){var i=r.startNode();if(r.parseVarId(i,n),r.eat(X.eq)?i.init=r.parseMaybeAssign(t):"const"!==n||r.type===X._in||r.options.ecmaVersion>=6&&r.isContextual("of")?"Identifier"===i.id.type||t&&(r.type===X._in||r.isContextual("of"))?i.init=null:r.raise(r.lastTokEnd,"Complex binding patterns require an initialization value"):r.unexpected(),e.declarations.push(r.finishNode(i,"VariableDeclarator")),!r.eat(X.comma))break}return e},le.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},le.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(X.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&&(e.id="nullableID"===t&&this.type!==X.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?"let":"var"));var i=this.inGenerator,o=this.inAsync,a=this.yieldPos,s=this.awaitPos,u=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===X.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=i,this.inAsync=o,this.yieldPos=a,this.awaitPos=s,this.inFunction=u,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},le.parseFunctionParams=function(e){this.expect(X.parenL),e.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},le.parseClass=function(e,t){var n=this;this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(X.braceL);!this.eat(X.braceR);){var o=n.parseClassMember(r);o&&"MethodDefinition"===o.type&&"constructor"===o.kind&&(i&&n.raise(o.start,"Duplicate constructor in the same class"),i=!0)}return e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},le.parseClassMember=function(e){var t=this;if(this.eat(X.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===X.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(X.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(X.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor"),this.parseClassMethod(e,n,i,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},le.parseClassMethod=function(e,t,n,r){t.value=this.parseMethod(n,r),e.body.push(this.finishNode(t,"MethodDefinition"))},le.parseClassId=function(e,t){e.id=this.type===X.name?this.parseIdent():!0===t?this.unexpected():null},le.parseClassSuper=function(e){e.superClass=this.eat(X._extends)?this.parseExprSubscripts():null},le.parseExport=function(e,t){var n=this;if(this.next(),this.eat(X.star))return this.expectContextual("from"),this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(X._default)){this.checkExport(t,"default",this.lastTokStart);var r;if(this.type===X._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(i,"nullableID",!1,r)}else if(this.type===X._class){var o=this.startNode();e.declaration=this.parseClass(o,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,s=e.specifiers;a<s.length;a+=1){var u=s[a];n.checkUnreserved(u.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},le.checkExport=function(e,t,n){e&&(c(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},le.checkPatternExport=function(e,t){var n=this,r=t.type;if("Identifier"===r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===r)for(var i=0,o=t.properties;i<o.length;i+=1){var a=o[i];n.checkPatternExport(e,a)}else if("ArrayPattern"===r)for(var s=0,u=t.elements;s<u.length;s+=1){var c=u[s];c&&n.checkPatternExport(e,c)}else"Property"===r?this.checkPatternExport(e,t.value):"AssignmentPattern"===r?this.checkPatternExport(e,t.left):"RestElement"===r?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(e,t.expression)},le.checkVariableExport=function(e,t){var n=this;if(e)for(var r=0,i=t;r<i.length;r+=1){var o=i[r];n.checkPatternExport(e,o.id)}},le.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},le.parseExportSpecifiers=function(e){var t=this,n=[],r=!0;for(this.expect(X.braceL);!this.eat(X.braceR);){if(r)r=!1;else if(t.expect(X.comma),t.afterTrailingComma(X.braceR))break;var i=t.startNode();i.local=t.parseIdent(!0),i.exported=t.eatContextual("as")?t.parseIdent(!0):i.local,t.checkExport(e,i.exported.name,i.exported.start),n.push(t.finishNode(i,"ExportSpecifier"))}return n},le.parseImport=function(e){return this.next(),this.type===X.string?(e.specifiers=fe,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===X.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},le.parseImportSpecifiers=function(){var e=this,t=[],n=!0;if(this.type===X.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,"let"),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(X.comma))return t}if(this.type===X.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,"let"),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(X.braceL);!this.eat(X.braceR);){if(n)n=!1;else if(e.expect(X.comma),e.afterTrailingComma(X.braceR))break;var o=e.startNode();o.imported=e.parseIdent(!0),e.eatContextual("as")?o.local=e.parseIdent():(e.checkUnreserved(o.imported),o.local=o.imported),e.checkLVal(o.local,"let"),t.push(e.finishNode(o,"ImportSpecifier"))}return t},le.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},le.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var de=se.prototype;de.toAssignable=function(e,t,n){var r=this;if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,o=e.properties;i<o.length;i+=1){var a=o[i];r.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||r.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},de.toAssignableList=function(e,t){for(var n=this,r=e.length,i=0;i<r;i++){var o=e[i];o&&n.toAssignable(o,t)}if(r){var a=e[r-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},de.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},de.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==X.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},de.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case X.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(X.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case X.braceL:return this.parseObj(!0)}return this.parseIdent()},de.parseBindingList=function(e,t,n){for(var r=this,i=[],o=!0;!this.eat(e);)if(o?o=!1:r.expect(X.comma),t&&r.type===X.comma)i.push(null);else{if(n&&r.afterTrailingComma(e))break;if(r.type===X.ellipsis){var a=r.parseRestBinding();r.parseBindingListItem(a),i.push(a),r.type===X.comma&&r.raise(r.start,"Comma is not permitted after the rest element"),r.expect(e);break}var s=r.parseMaybeDefault(r.start,r.startLoc);r.parseBindingListItem(s),i.push(s)}return i},de.parseBindingListItem=function(e){return e},de.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(X.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},de.checkLVal=function(e,t,n){var r=this;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(c(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var i=0,o=e.properties;i<o.length;i+=1){var a=o[i];r.checkLVal(a,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var s=0,u=e.elements;s<u.length;s+=1){var l=u[s];l&&r.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var me=se.prototype;me.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0));r="$"+r;var a=t[r];if(a){var s;s="init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o],s&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[o]=!0}},me.parseExpression=function(e,t){var n=this,r=this.start,i=this.startLoc,o=this.parseMaybeAssign(e,t);if(this.type===X.comma){var a=this.startNodeAt(r,i);for(a.expressions=[o];this.eat(X.comma);)a.expressions.push(n.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return o},me.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,i=-1,o=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new d,r=!0);var a=this.start,s=this.startLoc;this.type!==X.parenL&&this.type!==X.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,s)),this.type.isAssign){var c=this.startNodeAt(a,s);return c.operator=this.value,c.left=this.type===X.eq?this.toAssignable(u,!1,t):u,r||d.call(t),t.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),u},me.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(X.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(X.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},me.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},me.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==X._in)&&o>r){var a=this.type===X.logicalOR||this.type===X.logicalAND,s=this.value;this.next();var u=this.start,c=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,o,i),h=this.buildBinary(t,n,e,l,s,a);return this.parseExprOp(h,t,n,r,i)}return e},me.buildBinary=function(e,t,n,r,i,o){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},me.parseMaybeUnary=function(e,t){var n,r=this,i=this.start,o=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var a=this.startNode(),s=this.type===X.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=r.startNodeAt(i,o);u.operator=r.value,u.prefix=!1,u.argument=n,r.checkLVal(n),r.next(),n=r.finishNode(u,"UpdateExpression")}}return!t&&this.eat(X.starstar)?this.buildBinary(i,o,n,this.parseMaybeUnary(null,!1),"**",!1):n},me.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},me.parseSubscripts=function(e,t,n,r){for(var i=this,o=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),a=void 0;;)if((a=i.eat(X.bracketL))||i.eat(X.dot)){var s=i.startNodeAt(t,n);s.object=e,s.property=a?i.parseExpression():i.parseIdent(!0),s.computed=!!a,a&&i.expect(X.bracketR),e=i.finishNode(s,"MemberExpression")}else if(!r&&i.eat(X.parenL)){var u=new d,c=i.yieldPos,l=i.awaitPos;i.yieldPos=0,i.awaitPos=0;var h=i.parseExprList(X.parenR,i.options.ecmaVersion>=8,!1,u);if(o&&!i.canInsertSemicolon()&&i.eat(X.arrow))return i.checkPatternErrors(u,!1),i.checkYieldAwaitInDefaultParams(),i.yieldPos=c,i.awaitPos=l,i.parseArrowExpression(i.startNodeAt(t,n),h,!0);i.checkExpressionErrors(u,!0),i.yieldPos=c||i.yieldPos,i.awaitPos=l||i.awaitPos;var p=i.startNodeAt(t,n);p.callee=e,p.arguments=h,e=i.finishNode(p,"CallExpression")}else{if(i.type!==X.backQuote)return e;var f=i.startNodeAt(t,n);f.tag=e,f.quasi=i.parseTemplate({isTagged:!0}),e=i.finishNode(f,"TaggedTemplateExpression")}},me.parseExprAtom=function(e){var t,n=this.potentialArrowAt===this.start;switch(this.type){case X._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),t=this.startNode(),this.next(),this.type!==X.dot&&this.type!==X.bracketL&&this.type!==X.parenL&&this.unexpected(),this.finishNode(t,"Super");case X._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case X.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(this.type!==X.name);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(X._function))return this.parseFunction(this.startNodeAt(r,i),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(X.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===X.name&&!o)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(X.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case X.regexp:var s=this.value;return t=this.parseLiteral(s.value),t.regex={pattern:s.pattern,flags:s.flags},t;case X.num:case X.string:return this.parseLiteral(this.value);case X._null:case X._true:case X._false:return t=this.startNode(),t.value=this.type===X._null?null:this.type===X._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case X.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case X.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(X.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case X.braceL:return this.parseObj(!1,e);case X._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case X._class:return this.parseClass(this.startNode(),!1);case X._new:return this.parseNew();case X.backQuote:return this.parseTemplate();default:this.unexpected()}},me.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},me.parseParenExpression=function(){this.expect(X.parenL);var e=this.parseExpression();return this.expect(X.parenR),e},me.parseParenAndDistinguishExpression=function(e){var t,n=this,r=this.start,i=this.startLoc,o=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,s=this.start,u=this.startLoc,c=[],l=!0,h=!1,p=new d,f=this.yieldPos,m=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==X.parenR;){if(l?l=!1:n.expect(X.comma),o&&n.afterTrailingComma(X.parenR,!0)){h=!0;break}if(n.type===X.ellipsis){a=n.start,c.push(n.parseParenItem(n.parseRestBinding())),n.type===X.comma&&n.raise(n.start,"Comma is not permitted after the rest element");break}c.push(n.parseMaybeAssign(!1,p,n.parseParenItem))}var g=this.start,v=this.startLoc;if(this.expect(X.parenR),e&&!this.canInsertSemicolon()&&this.eat(X.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=m,this.parseParenArrowList(r,i,c);c.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=m||this.awaitPos,c.length>1?(t=this.startNodeAt(s,u),t.expressions=c,this.finishNodeAt(t,"SequenceExpression",g,v)):t=c[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(r,i);return y.expression=t,this.finishNode(y,"ParenthesizedExpression")}return t},me.parseParenItem=function(e){return e},me.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var ge=[];me.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(X.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(X.parenL)?e.arguments=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ge,this.finishNode(e,"NewExpression")},me.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===X.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===X.backQuote,this.finishNode(n,"TemplateElement")},me.parseTemplate=function(e){var t=this;void 0===e&&(e={});var n=e.isTagged;void 0===n&&(n=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:n});for(r.quasis=[i];!i.tail;)t.type===X.eof&&t.raise(t.pos,"Unterminated template literal"),t.expect(X.dollarBraceL),r.expressions.push(t.parseExpression()),t.expect(X.braceR),r.quasis.push(i=t.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(r,"TemplateLiteral")},me.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===X.name||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===X.star)&&!K.test(this.input.slice(this.lastTokEnd,this.start))},me.parseObj=function(e,t){var n=this,r=this.startNode(),i=!0,o={};for(r.properties=[],this.next();!this.eat(X.braceR);){if(i)i=!1;else if(n.expect(X.comma),n.afterTrailingComma(X.braceR))break;var a=n.parseProperty(e,t);e||n.checkPropClash(a,o,t),r.properties.push(a)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},me.parseProperty=function(e,t){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(X.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===X.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===X.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===X.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(X.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(X.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,o,t,s),this.finishNode(a,"Property")},me.parsePropertyValue=function(e,t,n,r,i,o,a,s){if((n||r)&&this.type===X.colon&&this.unexpected(),this.eat(X.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===X.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===X.comma||this.type===X.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===X.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},me.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(X.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(X.bracketR),e.key;e.computed=!1}return e.key=this.type===X.num||this.type===X.string?this.parseExprAtom():this.parseIdent(!0)},me.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},me.parseMethod=function(e,t){var n=this.startNode(),r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(X.parenL),n.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(n,"FunctionExpression")},me.parseArrowExpression=function(e,t,n){var r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},me.parseFunctionBody=function(e,t){var n=t&&this.type!==X.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=r},me.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},me.checkParams=function(e,t){for(var n=this,r={},i=0,o=e.params;i<o.length;i+=1){var a=o[i];n.checkLVal(a,"var",t?null:r)}},me.parseExprList=function(e,t,n,r){for(var i=this,o=[],a=!0;!this.eat(e);){if(a)a=!1;else if(i.expect(X.comma),t&&i.afterTrailingComma(e))break;var s=void 0;n&&i.type===X.comma?s=null:i.type===X.ellipsis?(s=i.parseSpread(r),r&&i.type===X.comma&&r.trailingComma<0&&(r.trailingComma=i.start)):s=i.parseMaybeAssign(!1,r),o.push(s)}return o},me.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))){(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}},me.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===X.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},me.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===X.semi||this.canInsertSemicolon()||this.type!==X.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(X.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},me.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var ve=se.prototype;ve.raise=function(e,t){var n=l(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},ve.raiseRecoverable=ve.raise,ve.curPosition=function(){if(this.options.locations)return new re(this.curLine,this.pos-this.lineStart)};var ye=se.prototype,be=Object.assign||function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)c(o,a)&&(e[a]=o[a])}return e};ye.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},ye.exitFunctionScope=function(){this.scopeStack.pop()},ye.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),be(t.parentLexical,e.lexical,e.parentLexical)},ye.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];be(t.childVar,e.var,e.childVar)},ye.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!c(t.lexical,e)&&!c(t.parentLexical,e)},ye.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!c(t.lexical,e)&&!c(t.var,e)&&!c(t.childVar,e)},ye.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},ye.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var _e=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new ie(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},xe=se.prototype;xe.startNode=function(){return new _e(this,this.start,this.startLoc)},xe.startNodeAt=function(e,t){return new _e(this,e,t)},xe.finishNode=function(e,t){return m.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},xe.finishNodeAt=function(e,t,n,r){return m.call(this,e,t,n,r)};var we=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Te={b_stat:new we("{",!1),b_expr:new we("{",!0),b_tmpl:new we("${",!1),p_stat:new we("(",!1),p_expr:new we("(",!0),q_tmpl:new we("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new we("function",!1),f_expr:new we("function",!0),f_expr_gen:new we("function",!0,!1,null,!0),f_gen:new we("function",!1,!1,null,!0)},Ee=se.prototype;Ee.initialContext=function(){return[Te.b_stat]},Ee.braceIsBlock=function(e){var t=this.curContext();return t===Te.f_expr||t===Te.f_stat||(e!==X.colon||t!==Te.b_stat&&t!==Te.b_expr?e===X._return||e===X.name&&this.exprAllowed?K.test(this.input.slice(this.lastTokEnd,this.start)):e===X._else||e===X.semi||e===X.eof||e===X.parenR||e===X.arrow||(e===X.braceL?t===Te.b_stat:e!==X._var&&e!==X.name&&!this.exprAllowed):!t.isExpr)},Ee.inGeneratorContext=function(){for(var e=this,t=this.context.length-1;t>=1;t--){var n=e.context[t];if("function"===n.token)return n.generator}return!1},Ee.updateContext=function(e){var t,n=this.type;n.keyword&&e===X.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},X.parenR.updateContext=X.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===Te.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},X.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Te.b_stat:Te.b_expr),this.exprAllowed=!0},X.dollarBraceL.updateContext=function(){this.context.push(Te.b_tmpl),this.exprAllowed=!0},X.parenL.updateContext=function(e){var t=e===X._if||e===X._for||e===X._with||e===X._while;this.context.push(t?Te.p_stat:Te.p_expr),this.exprAllowed=!0},X.incDec.updateContext=function(){},X._function.updateContext=X._class.updateContext=function(e){e.beforeExpr&&e!==X.semi&&e!==X._else&&(e!==X.colon&&e!==X.braceL||this.curContext()!==Te.b_stat)?this.context.push(Te.f_expr):this.context.push(Te.f_stat),this.exprAllowed=!1},X.backQuote.updateContext=function(){this.curContext()===Te.q_tmpl?this.context.pop():this.context.push(Te.q_tmpl),this.exprAllowed=!1},X.star.updateContext=function(e){if(e===X._function){var t=this.context.length-1;this.context[t]===Te.f_expr?this.context[t]=Te.f_expr_gen:this.context[t]=Te.f_gen}this.exprAllowed=!0},X.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==X.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Se={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(Se.$LONE,Se.General_Category),Se.gc=Se.General_Category,Se.sc=Se.Script_Extensions=Se.scx=Se.Script;var ke=se.prototype,Ce=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ce.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Ce.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Ce.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Ce.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},Ce.prototype.current=function(){return this.at(this.pos)},Ce.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Ce.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Ce.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ke.validateRegExpFlags=function(e){for(var t=this,n=e.validFlags,r=e.flags,i=0;i<r.length;i++){var o=r.charAt(i);-1===n.indexOf(o)&&t.raise(e.start,"Invalid regular expression flag"),r.indexOf(o,i+1)>-1&&t.raise(e.start,"Duplicate regular expression flag")}},ke.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ke.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ke.regexp_disjunction=function(e){var t=this;for(this.regexp_alternative(e);e.eat(124);)t.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ke.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ke.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ke.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ke.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ke.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ke.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ke.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ke.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ke.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ke.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ke.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ke.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ke.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!v(t)&&(e.lastIntValue=t,e.advance(),!0)},ke.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!v(n);)e.advance();return e.pos!==t},ke.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},ke.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ke.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ke.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=g(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=g(e.lastIntValue);return!0}return!1},ke.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),y(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ke.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),b(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ke.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ke.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ke.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ke.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ke.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ke.regexp_eatZero=function(e){return 48===e.current()&&!S(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ke.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ke.regexp_eatControlLetter=function(e){var t=e.current();return!!_(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ke.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&x(e.lastIntValue))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=t}return!1},ke.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},ke.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ke.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(w(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ke.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ke.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Se.hasOwnProperty(t)&&-1!==Se[t].indexOf(n)||e.raise("Invalid property name")},ke.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===Se.$LONE.indexOf(t)&&e.raise("Invalid property name")},ke.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";T(t=e.current());)e.lastStringValue+=g(t),e.advance();return""!==e.lastStringValue},ke.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";E(t=e.current());)e.lastStringValue+=g(t),e.advance();return""!==e.lastStringValue},ke.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ke.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ke.regexp_classRanges=function(e){for(var t=this;this.regexp_eatClassAtom(e);){var n=e.lastIntValue;if(e.eat(45)&&t.regexp_eatClassAtom(e)){var r=e.lastIntValue;!e.switchU||-1!==n&&-1!==r||e.raise("Invalid character class"),-1!==n&&-1!==r&&n>r&&e.raise("Range out of order in character class")}}},ke.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||M(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ke.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ke.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!S(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},ke.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ke.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;S(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ke.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;k(n=e.current());)e.lastIntValue=16*e.lastIntValue+C(n),e.advance();return e.pos!==t},ke.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ke.regexp_eatOctalDigit=function(e){var t=e.current();return M(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ke.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!k(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+C(i),e.advance()}return!0};var Me=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new ie(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Ae=se.prototype;Ae.next=function(){this.options.onToken&&this.options.onToken(new Me(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ae.getToken=function(){return this.next(),new Me(this)},"undefined"!==typeof Symbol&&(Ae[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===X.eof,value:t}}}}),Ae.curContext=function(){return this.context[this.context.length-1]},Ae.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(X.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Ae.readToken=function(e){return i(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Ae.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Ae.skipBlockComment=function(){var e=this,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){Q.lastIndex=n;for(var i;(i=Q.exec(this.input))&&i.index<this.pos;)++e.curLine,e.lineStart=i.index+i[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Ae.skipLineComment=function(e){for(var t=this,n=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!u(i);)i=t.input.charCodeAt(++t.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(n+e,this.pos),n,this.pos,r,this.curPosition())},Ae.skipSpace=function(){var e=this;e:for(;this.pos<this.input.length;){var t=e.input.charCodeAt(e.pos);switch(t){case 32:case 160:++e.pos;break;case 13:10===e.input.charCodeAt(e.pos+1)&&++e.pos;case 10:case 8232:case 8233:++e.pos,e.options.locations&&(++e.curLine,e.lineStart=e.pos);break;case 47:switch(e.input.charCodeAt(e.pos+1)){case 42:e.skipBlockComment();break;case 47:e.skipLineComment(2);break;default:break e}break;default:if(!(t>8&&t<14||t>=5760&&J.test(String.fromCharCode(t))))break e;++e.pos}}},Ae.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Ae.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(X.ellipsis)):(++this.pos,this.finishToken(X.dot))},Ae.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(X.assign,2):this.finishOp(X.slash,1)},Ae.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?X.star:X.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=X.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(X.assign,n+1):this.finishOp(r,n)},Ae.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?X.logicalOR:X.logicalAND,2):61===t?this.finishOp(X.assign,2):this.finishOp(124===e?X.bitwiseOR:X.bitwiseAND,1)},Ae.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(X.assign,2):this.finishOp(X.bitwiseXOR,1)},Ae.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!K.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(X.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(X.assign,2):this.finishOp(X.plusMin,1)},Ae.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(X.assign,n+1):this.finishOp(X.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(X.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Ae.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(X.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(X.arrow)):this.finishOp(61===e?X.eq:X.prefix,1)},Ae.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(X.parenL);case 41:return++this.pos,this.finishToken(X.parenR);case 59:return++this.pos,this.finishToken(X.semi);case 44:return++this.pos,this.finishToken(X.comma);case 91:return++this.pos,this.finishToken(X.bracketL);case 93:return++this.pos,this.finishToken(X.bracketR);case 123:return++this.pos,this.finishToken(X.braceL);case 125:return++this.pos,this.finishToken(X.braceR);case 58:return++this.pos,this.finishToken(X.colon);case 63:return++this.pos,this.finishToken(X.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(X.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(X.prefix,1)}this.raise(this.pos,"Unexpected character '"+A(e)+"'")},Ae.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Ae.readRegexp=function(){for(var e,t,n=this,r=this.pos;;){n.pos>=n.input.length&&n.raise(r,"Unterminated regular expression");var i=n.input.charAt(n.pos);if(K.test(i)&&n.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++n.pos}var o=this.input.slice(r,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var u=this.regexpState||(this.regexpState=new Ce(this));u.reset(r,o,s),this.validateRegExpFlags(u),this.validateRegExpPattern(u);var c=null;try{c=new RegExp(o,s)}catch(e){}return this.finishToken(X.regexp,{pattern:o,flags:s,value:c})},Ae.readInt=function(e,t){for(var n=this,r=this.pos,i=0,o=0,a=null==t?1/0:t;o<a;++o){var s=n.input.charCodeAt(n.pos),u=void 0;if((u=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++n.pos,i=i*e+u}return this.pos===r||null!=t&&this.pos-r!==t?null:i},Ae.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,t)},Ae.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(r=this.input.charCodeAt(++this.pos),43!==r&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(t,this.pos),a=n?parseInt(o,8):parseFloat(o);return this.finishToken(X.num,a)},Ae.readCodePoint=function(){var e,t=this.input.charCodeAt(this.pos);if(123===t){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e},Ae.readString=function(e){for(var t=this,n="",r=++this.pos;;){t.pos>=t.input.length&&t.raise(t.start,"Unterminated string constant");var i=t.input.charCodeAt(t.pos);if(i===e)break;92===i?(n+=t.input.slice(r,t.pos),n+=t.readEscapedChar(!1),r=t.pos):(u(i,t.options.ecmaVersion>=10)&&t.raise(t.start,"Unterminated string constant"),++t.pos)}return n+=this.input.slice(r,this.pos++),this.finishToken(X.string,n)};var Oe={};Ae.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Oe)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Ae.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Oe;this.raise(e,t)},Ae.readTmplToken=function(){for(var e=this,t="",n=this.pos;;){e.pos>=e.input.length&&e.raise(e.start,"Unterminated template");var r=e.input.charCodeAt(e.pos);if(96===r||36===r&&123===e.input.charCodeAt(e.pos+1))return e.pos!==e.start||e.type!==X.template&&e.type!==X.invalidTemplate?(t+=e.input.slice(n,e.pos),e.finishToken(X.template,t)):36===r?(e.pos+=2,e.finishToken(X.dollarBraceL)):(++e.pos,e.finishToken(X.backQuote));if(92===r)t+=e.input.slice(n,e.pos),t+=e.readEscapedChar(!0),n=e.pos;else if(u(r)){switch(t+=e.input.slice(n,e.pos),++e.pos,r){case 13:10===e.input.charCodeAt(e.pos)&&++e.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}e.options.locations&&(++e.curLine,e.lineStart=e.pos),n=e.pos}else++e.pos}},Ae.readInvalidTemplateToken=function(){for(var e=this;this.pos<this.input.length;this.pos++)switch(e.input[e.pos]){case"\\":++e.pos;break;case"$":if("{"!==e.input[e.pos+1])break;case"`":return e.finishToken(X.invalidTemplate,e.input.slice(e.start,e.pos))}this.raise(this.start,"Unterminated template")},Ae.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return A(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},Ae.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Ae.readWord1=function(){var e=this;this.containsEsc=!1;for(var t="",n=!0,r=this.pos,a=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=e.fullCharCodeAtPos();if(o(s,a))e.pos+=s<=65535?1:2;else{if(92!==s)break;e.containsEsc=!0,t+=e.input.slice(r,e.pos);var u=e.pos;117!==e.input.charCodeAt(++e.pos)&&e.invalidStringToken(e.pos,"Expecting Unicode escape sequence \\uXXXX"),++e.pos;var c=e.readCodePoint();(n?i:o)(c,a)||e.invalidStringToken(u,"Invalid Unicode escape"),t+=A(c),r=e.pos}n=!1}return t+this.input.slice(r,this.pos)},Ae.readWord=function(){var e=this.readWord1(),t=X.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=Y[e]),this.finishToken(t,e)};var De,Ie,Re,Pe="5.7.3"},function(e,t,n){"use strict";e.exports="#version 300 es\n__HEADER__;\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nconst float LOOP_MAX = __LOOP_MAX__;\n\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 rgba) {\n  __DECODE32_ENDIANNESS__;\n  rgba *= 255.0;\n  vec2 gte128;\n  gte128.x = rgba.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = rgba.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * rgba.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  rgba.b = rgba.b - 128.0 * gte128.x;\n  res = dot(rgba, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nvec4 encode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 rgba = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  rgba.rg = integerMod(rgba.rg, 256.0);\n  rgba.b = integerMod(rgba.b, 128.0);\n  rgba.a = exponent*0.5 + 63.5;\n  rgba.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  rgba = floor(rgba);\n  rgba *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return rgba;\n}\n// Dragons end here\n\nfloat decode(vec4 rgba, int x, int bitRatio) {\n  if (bitRatio == 1) {\n    return decode32(rgba);\n  }\n  __DECODE32_ENDIANNESS__;\n  int channel = integerMod(x, bitRatio);\n  if (bitRatio == 4) {\n    return rgba[channel] * 255.0;\n  }\n  else {\n    return rgba[channel*2] * 255.0 + rgba[channel*2 + 1] * 65280.0;\n  }\n}\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio,  int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  __GET_WRAPAROUND__;\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  __GET_TEXTURE_CHANNEL__;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  __GET_TEXTURE_INDEX__;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  __GET_RESULT__;\n  \n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  __GET_WRAPAROUND__;\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  __GET_TEXTURE_CHANNEL__;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  __GET_TEXTURE_INDEX__;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  __GET_WRAPAROUND__;\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  __GET_TEXTURE_CHANNEL__;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  __GET_TEXTURE_INDEX__;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio, int y, int x) {\n  return get(tex, texSize, texDim, bitRatio, 0, y, x);\n}\n\nfloat get(sampler2D tex, ivec2 texSize, ivec3 texDim, int bitRatio, int x) {\n  return get(tex, texSize, texDim, bitRatio, 0, 0, x);\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int y, int x) {\n  return getImage2D(tex, texSize, texDim, 0, y, x);\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int x) {\n  return getImage2D(tex, texSize, texDim, 0, 0, x);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\n__MAIN_PARAMS__;\n__MAIN_CONSTANTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}"},function(e,t,n){"use strict";e.exports="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"},function(e,t,n){"use strict";function r(e){return/^function /.test(e)&&(e=e.substring(9)),e.replace(/[_]typeof/g,"typeof")}function i(e){return e.replace(/[_]typeof/g,"typeof")}var o=n(4),a=n(22);e.exports=function(e,t){return"() => {\n    "+a.toString()+";\n    const utils = {\n      allPropertiesOf: "+i(o.allPropertiesOf.toString())+",\n      clone: "+i(o.clone.toString())+",\n      checkOutput: "+i(o.checkOutput.toString())+"\n    };\n    const Utils = utils;\n    let Input = function() {};\n    class "+(t||"Kernel")+" {\n      constructor() {        \n        this.argumentsLength = 0;\n        this._canvas = null;\n        this._webGl = null;\n        this.built = false;\n        this.program = null;\n        this.paramNames = "+JSON.stringify(e.paramNames)+";\n        this.paramTypes = "+JSON.stringify(e.paramTypes)+";\n        this.texSize = "+JSON.stringify(e.texSize)+";\n        this.output = "+JSON.stringify(e.output)+";\n        this._kernelString = `"+e._kernelString+"`;\n        this.output = "+JSON.stringify(e.output)+";\n\t\t    this.run = function() {\n          this.run = null;\n          this.build();\n          return this.run.apply(this, arguments);\n        }.bind(this);\n        this.thread = {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n      setCanvas(canvas) { this._canvas = canvas; return this; }\n      setWebGl(webGl) { this._webGl = webGl; return this; }\n      setInput(Type) { Input = Type; }\n      "+r(e.build.toString())+"\n      "+r(e.setupParams.toString())+"\n      "+r(e.setupConstants.toString())+"\n      run () { "+e.kernelString+" }\n      getKernelString() { return this._kernelString; }\n      "+r(e.validateOptions.toString())+"\n    };\n    return kernelRunShortcut(new Kernel());\n  };"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),u=n(4);e.exports=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"validateOptions",value:function(){this.texSize=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},this.output,!0)}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(25),u=n(4);e.exports=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"validateOptions",value:function(){this._webGl.getExtension("EXT_color_buffer_float"),this.texSize=u.dimToTexSize({floatTextures:this.floatTextures,floatOutput:this.floatOutput},this.output,!0)}}]),t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(46);e.exports=function(){function e(){r(this,e)}return i(e,null,[{key:"validateKernelObj",value:function(e){if(null===e)throw"KernelObj being validated is NULL";if("string"===typeof e){try{e=JSON.parse(e)}catch(e){throw console.error(e),"Failed to convert KernelObj from JSON string"}if(null===e)throw"Invalid (NULL) KernelObj JSON string representation"}if(!0!==e.isKernelObj)throw"Failed missing isKernelObj flag check";return e}},{key:"loadKernelObj",value:function(e,t){e=validateKernelObj(e)}}]),e}()},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){var n=t.toString();return new Function("return function "+e+" ("+r.getParamNamesFromString(n).join(", ")+") {"+r.getFunctionBodyFromString(n)+"}")()}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(12),s=n.n(a),u=n(20),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sampleRate=e.sampleRate,n.soundDuration=e.soundDuration,n.noteDuration=e.noteDuration,n.config=e.config,n.customSmoothstep="highp float custom_smoothstep(float edge0, float edge1, float x) {\n      return smoothstep(edge0, edge1, x);\n    }",n.customStep="highp float custom_step(float edge, float x) {\n           return step(edge, x);\n         }",n.customRandom="highp float custom_random(float n){\n           return fract(sin(n) * 43758.5453123);\n         }",n}return o(t,e),c(t,[{key:"generateBlockAudio",value:function(e,t,n,r,i){for(var o=0,a=0;a<e.hash.length;a++)o+=parseInt(e.hash[a],16);var s=o%Object.keys(t).length,c=t[Object.keys(t)[s]],l=Number.MAX_SAFE_INTEGER,h=0;if(1===e.n_tx)l=0,h=2*r[0];else for(var p=0;p<e.n_tx;p++){var f=r[p];l=Math.min(f,l),h=Math.max(f,h)}l=Math.log(l+1),h=Math.log(h+1),l===h&&(l-=.5*l,h+=.5*h);var d={};for(var m in n)if(n.hasOwnProperty(m)){var g=n[m],v=g.replace(/[0-9]/g,"");-1!==c.indexOf(v)&&(d[m]=g)}for(var y=[],b=e.fee/e.outputTotal*2e3,_=[],x=[],w=e.n_tx>this.config.audio.maxSineBankLoops?this.config.audio.maxSineBankLoops:e.n_tx,T=0;T<w;T++){var E=r[T],S=i[T],k=Object(u.a)(T,0,w,0,this.soundDuration-4);x.push(k);var C=Object(u.a)(1-S,1,0,8,1);_.push(C);var M=Object.keys(d),A=Math.floor(Object(u.a)(Math.log(E+1),l,h,M.length-1,0)),O=0;for(var D in d)if(d.hasOwnProperty(D)){if(A===O){y.push(parseFloat(D));break}O++}}return{frequencies:y,txTimes:x,spent:_,health:b}}},{key:"fillBuffer",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],r=arguments[3],i=Number.MAX_SAFE_INTEGER,o=0,a=0;a<e.length;a++)i=Math.min(i,e[a]),o=Math.max(o,e[a]);for(var s=0;s<e.length;s++)n[s]=Object(u.a)(e[s],i,o,-t,t),"undefined"!==typeof e[s+200]&&(r[s]=Object(u.a)(e[s+200],i,o,-t,t))}},{key:"sineBank",value:function(e,t,n,r,i,o,a,s){for(var u=0,c=this.thread.x/o+a,l=0;l+s<i;l++){var h=(t[l+s],e[l+s],6.28318530718*(e[l+s]+Math.sin(NaN*c)*(10*r))),p=c*h,f=(n[l+s],1.5*Math.sin(p)+NaN*Math.sin(p*(2+void 0*r))+NaN*Math.sin(p*(3+void 0*r))+NaN*Math.sin(p*(4+void 0*r))+NaN*Math.sin(p*(5+void 0*r))+NaN*Math.sin(p*(6+void 0*r))+NaN*Math.sin(p*(7+void 0*r))+NaN*Math.sin(p*(8+void 0*r)));f*=Math.max(Math.sin(c*Math.floor(NaN)),void 0),u+=void 0*f*NaN}return u}},{key:"txAudio",value:function(e,t,n,r){var i=0,o=this.thread.x/r,a=6.28318530718*e,s=o*a,u=1.5*Math.sin(s)+NaN*Math.sin(s*(2+void 0*n))+NaN*Math.sin(s*(3+void 0*n))+NaN*Math.sin(s*(4+void 0*n))+NaN*Math.sin(s*(5+void 0*n))+NaN*Math.sin(s*(6+void 0*n))+NaN*Math.sin(s*(7+void 0*n));return u*=Math.max(Math.sin(o*Math.floor(NaN)),.23),i+=void 0*u*NaN}}]),t}(s.a);t.a=l},function(e,t,n){e.exports=function(){return n(10)('/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "/symphony-2/";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\nObject.defineProperty(__webpack_exports__, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__libs_audio_audioUtils__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_array__ = __webpack_require__(4);\n\r\n\r\nimportScripts(\'https://cdnjs.cloudflare.com/ajax/libs/gpu.js/1.10.4/gpu.min.js\')\r\n\r\nself.addEventListener(\'message\', async function (e) {\r\n  let data = e.data\r\n  switch (data.cmd) {\r\n    case \'get\':\r\n\r\n      const blockData = data.blockData\r\n      const config = data.config\r\n      const chords = data.chords\r\n      const notes = data.notes\r\n      const sampleRate = data.sampleRate\r\n      const soundDuration = data.soundDuration\r\n\r\n      const TXValues = data.TXValues\r\n      const spentRatios = data.spentRatios\r\n\r\n      const audioUtils = new __WEBPACK_IMPORTED_MODULE_0__libs_audio_audioUtils__["a" /* default */]({\r\n        sampleRate: sampleRate,\r\n        soundDuration: soundDuration,\r\n        config: config\r\n      })\r\n\r\n      const blockAudio = audioUtils.generateBlockAudio(blockData, chords, notes, TXValues, spentRatios)\r\n\r\n      let parts = 15\r\n\r\n      const gpu = new GPU()\r\n\r\n      const txCount = blockAudio.frequencies.length > config.audio.maxSineBankLoops ? config.audio.maxSineBankLoops : blockAudio.frequencies.length\r\n\r\n      let simultaneousFrequencies = txCount / parts\r\n\r\n      let audioChunkTime = (soundDuration / parts)\r\n\r\n      const sineBank = gpu.createKernel(audioUtils.sineBank, { loopMaxIterations: config.audio.maxSineBankLoops }).setOutput([\r\n        Math.floor(\r\n          sampleRate * audioChunkTime\r\n        )\r\n      ])\r\n      sineBank.addNativeFunction(\'custom_smoothstep\', audioUtils.customSmoothstep)\r\n      sineBank.addNativeFunction(\'custom_step\', audioUtils.customStep)\r\n      sineBank.addNativeFunction(\'custom_random\', audioUtils.customRandom)\r\n\r\n      let sineArrayChunks = []\r\n\r\n      let i = 0\r\n      for (let index = 0; index < parts; index++) {\r\n        let startIndex = Math.floor(index * simultaneousFrequencies) - simultaneousFrequencies\r\n        if (startIndex < 0) {\r\n          startIndex = 0\r\n        }\r\n\r\n        let sineArray = sineBank(\r\n          blockAudio.frequencies,\r\n          blockAudio.txTimes,\r\n          blockAudio.spent,\r\n          blockAudio.health,\r\n          txCount,\r\n          sampleRate,\r\n          i * audioChunkTime,\r\n          startIndex\r\n        )\r\n\r\n        sineArrayChunks.push(sineArray)\r\n        i++\r\n      }\r\n\r\n      let concatArrays = __WEBPACK_IMPORTED_MODULE_1__utils_array__["a" /* concatenate */](sineArrayChunks)\r\n\r\n      audioUtils.fillBuffer(concatArrays, 1.0, data.lArray, data.rArray)\r\n\r\n      blockAudio.txTimes = []\r\n      blockAudio.spent = []\r\n\r\n      let returnData = {\r\n        lArray: data.lArray,\r\n        rArray: data.rArray,\r\n        blockAudio: blockAudio\r\n      }\r\n\r\n      self.postMessage(returnData, [\r\n        data.lArray.buffer,\r\n        data.rArray.buffer\r\n      ])\r\n      break\r\n    case \'stop\':\r\n      self.postMessage(\'WORKER STOPPED\')\r\n      self.close()\r\n      break\r\n    default:\r\n      self.postMessage(\'Unknown command\')\r\n  }\r\n}, false)\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eventemitter3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_math__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n// keep standard js happy\nvar custom_smoothstep = function custom_smoothstep() {};\nvar custom_step = function custom_step() {};\nvar custom_random = function custom_random() {};\n\nvar Audio = function (_EventEmitter) {\n  _inherits(Audio, _EventEmitter);\n\n  function Audio(args) {\n    _classCallCheck(this, Audio);\n\n    var _this = _possibleConstructorReturn(this, (Audio.__proto__ || Object.getPrototypeOf(Audio)).call(this, args));\n\n    _this.sampleRate = args.sampleRate;\n    _this.soundDuration = args.soundDuration;\n    _this.noteDuration = args.noteDuration;\n    _this.config = args.config;\n\n    _this.customSmoothstep = \'highp float custom_smoothstep(float edge0, float edge1, float x) {\\n      return smoothstep(edge0, edge1, x);\\n    }\';\n    _this.customStep = \'highp float custom_step(float edge, float x) {\\n           return step(edge, x);\\n         }\';\n    _this.customRandom = \'highp float custom_random(float n){\\n           return fract(sin(n) * 43758.5453123);\\n         }\';\n    return _this;\n  }\n\n  _createClass(Audio, [{\n    key: \'generateBlockAudio\',\n    value: function generateBlockAudio(blockData, chords, notes, TXValues, spentRatios) {\n      // compute number from hash\n      var total = 0;\n      for (var i = 0; i < blockData.hash.length; i++) {\n        // convert from base 16\n        total += parseInt(blockData.hash[i], 16);\n      }\n\n      // // set unique mode for this block hash\n      var modeIndex = total % Object.keys(chords).length;\n      var mode = chords[Object.keys(chords)[modeIndex]];\n      // let mode = chords[\'dorian\']\n\n      var minOutput = Number.MAX_SAFE_INTEGER;\n      var maxOutput = 0;\n\n      if (blockData.n_tx === 1) {\n        minOutput = 0;\n        maxOutput = TXValues[0] * 2;\n      } else {\n        for (var index = 0; index < blockData.n_tx; index++) {\n          var txValue = TXValues[index];\n          minOutput = Math.min(txValue, minOutput);\n          maxOutput = Math.max(txValue, maxOutput);\n        }\n      }\n\n      minOutput = Math.log(minOutput + 1.0);\n      maxOutput = Math.log(maxOutput + 1.0);\n\n      if (minOutput === maxOutput) {\n        minOutput -= minOutput * 0.5;\n        maxOutput += maxOutput * 0.5;\n      }\n\n      // filter out notes not in mode\n      var filteredNotes = {};\n      for (var frequency in notes) {\n        if (notes.hasOwnProperty(frequency)) {\n          var note = notes[frequency];\n          var noteName = note.replace(/[0-9]/g, \'\');\n          if (mode.indexOf(noteName) !== -1) {\n            // filter out notes not in mode\n            filteredNotes[frequency] = note;\n          }\n        }\n      }\n\n      var frequencies = [];\n\n      var health = blockData.fee / blockData.outputTotal * 2000; // 0 == healthy\n\n      var spent = [];\n\n      var txTimes = [];\n      var txCount = blockData.n_tx > this.config.audio.maxSineBankLoops ? this.config.audio.maxSineBankLoops : blockData.n_tx;\n\n      for (var _i = 0; _i < txCount; _i++) {\n        var _txValue = TXValues[_i];\n\n        var txSpentRatio = spentRatios[_i];\n\n        var txTime = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__["a" /* map */])(_i, 0, txCount, 0, this.soundDuration - 4);\n        txTimes.push(txTime);\n\n        var mappedSpentRatio = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__["a" /* map */])(1.0 - txSpentRatio, 1.0, 0.0, 8.0, 1.0);\n\n        spent.push(mappedSpentRatio);\n\n        var filteredNoteKeys = Object.keys(filteredNotes);\n\n        var pitchIndex = Math.floor(Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__["a" /* map */])(Math.log(_txValue + 1.0), minOutput, maxOutput, filteredNoteKeys.length - 1, 0));\n\n        var j = 0;\n        for (var _frequency in filteredNotes) {\n          if (filteredNotes.hasOwnProperty(_frequency)) {\n            if (pitchIndex === j) {\n              frequencies.push(parseFloat(_frequency));\n              break;\n            }\n            j++;\n          }\n        }\n      }\n\n      return {\n        frequencies: frequencies,\n        txTimes: txTimes,\n        spent: spent,\n        health: health\n      };\n    }\n  }, {\n    key: \'fillBuffer\',\n    value: function fillBuffer(sineArray) {\n      var vol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.0;\n      var lArray = arguments[2];\n      var rArray = arguments[3];\n\n      var min = Number.MAX_SAFE_INTEGER;\n      var max = 0;\n      for (var index = 0; index < sineArray.length; index++) {\n        min = Math.min(min, sineArray[index]);\n        max = Math.max(max, sineArray[index]);\n      }\n\n      // normalize\n      for (var _index = 0; _index < sineArray.length; _index++) {\n        lArray[_index] = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__["a" /* map */])(sineArray[_index], min, max, -vol, vol);\n        if (typeof sineArray[_index + 200] !== \'undefined\') {\n          rArray[_index] = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__["a" /* map */])(sineArray[_index + 200], min, max, -vol, vol); // right channel slightly out of phase with left for stereo effect\n        }\n      }\n    }\n  }, {\n    key: \'sineBank\',\n    value: function sineBank(frequencies, times, spent, health, length, sampleRate, timeOffset, chunkIndex) {\n      var sum = 0;\n      var twoPI = 6.28318530718;\n      var currentTime = this.thread.x / sampleRate + timeOffset;\n\n      for (var i = 0; i + chunkIndex < length; i++) {\n        var time = times[i + chunkIndex];\n\n        var ANGULAR_FREQUENCY = frequencies[i + chunkIndex] * twoPI;\n\n        var ANGULAR_FREQUENCY_MOD = (frequencies[i + chunkIndex] + Math.sin(currentTime * (custom_random(ANGULAR_FREQUENCY) * 0.1)) * (health * 10.0)) * twoPI;\n\n        // let currentAngle = currentTime * ANGULAR_FREQUENCY\n\n        var currentAngleMod = currentTime * ANGULAR_FREQUENCY_MOD;\n\n        var spentRatio = spent[i + chunkIndex];\n\n        // envelope\n        var attack = custom_smoothstep(time, time + 0.1 + custom_random(i) * 2.0, currentTime);\n        var release = 1.0 - custom_smoothstep(time + 2.0, time + 3.0, currentTime);\n\n        var spent1 = 1.5;\n        var spent2 = 0.1 + custom_step(2.0, spentRatio) * 1.0;\n        var spent3 = 0.1 + custom_step(3.0, spentRatio) * 0.9;\n        var spent4 = 0.1 + custom_step(4.0, spentRatio) * 0.8;\n        var spent5 = 0.1 + custom_step(5.0, spentRatio) * 0.7;\n        var spent6 = 0.1 + custom_step(6.0, spentRatio) * 0.6;\n        var spent7 = 0.1 + custom_step(7.0, spentRatio) * 0.5;\n        var spent8 = 0.1 + custom_step(8.0, spentRatio) * 0.4;\n\n        var wave = Math.sin(currentAngleMod) * spent1 + Math.sin(currentAngleMod * (2.0 + custom_random(ANGULAR_FREQUENCY * 2.0) * health)) * spent2 + Math.sin(currentAngleMod * (3.0 + custom_random(ANGULAR_FREQUENCY * 3.0) * health)) * spent3 + Math.sin(currentAngleMod * (4.0 + custom_random(ANGULAR_FREQUENCY * 4.0) * health)) * spent4 + Math.sin(currentAngleMod * (5.0 + custom_random(ANGULAR_FREQUENCY * 5.0) * health)) * spent5 + Math.sin(currentAngleMod * (6.0 + custom_random(ANGULAR_FREQUENCY * 6.0) * health)) * spent6 + Math.sin(currentAngleMod * (7.0 + custom_random(ANGULAR_FREQUENCY * 7.0) * health)) * spent7 + Math.sin(currentAngleMod * (8.0 + custom_random(ANGULAR_FREQUENCY * 8.0) * health)) * spent8;\n\n        wave *= Math.max(Math.sin(currentTime * Math.floor(custom_random(ANGULAR_FREQUENCY) * 20.0)), custom_random(i));\n\n        sum += wave * attack * release;\n      }\n\n      return sum;\n    }\n  }, {\n    key: \'txAudio\',\n    value: function txAudio(frequency, spent, health, sampleRate) {\n      var sum = 0;\n      var twoPI = 6.28318530718;\n      var currentTime = this.thread.x / sampleRate;\n\n      var ANGULAR_FREQUENCY = frequency * twoPI;\n\n      var currentAngle = currentTime * ANGULAR_FREQUENCY;\n\n      var spentRatio = spent;\n\n      // envelope\n      var attack = custom_smoothstep(0.0, 5.0, currentTime);\n      var release = 1.0 - custom_smoothstep(5.0, 10.0, currentTime);\n\n      var spent1 = 1.5;\n      var spent2 = 0.2 + custom_step(2.0, spentRatio) * 1.0;\n      var spent3 = 0.2 + custom_step(3.0, spentRatio) * 0.9;\n      var spent4 = 0.2 + custom_step(4.0, spentRatio) * 0.8;\n      var spent5 = 0.2 + custom_step(5.0, spentRatio) * 0.7;\n      var spent6 = 0.2 + custom_step(6.0, spentRatio) * 0.6;\n      var spent7 = 0.2 + custom_step(7.0, spentRatio) * 0.5;\n      // let spent8 = 0.2 + custom_step(8.0, spentRatio) * 0.4\n\n      var wave = Math.sin(currentAngle) * spent1 + Math.sin(currentAngle * (2.0 + custom_random(ANGULAR_FREQUENCY * 2.0) * health)) * spent2 + Math.sin(currentAngle * (3.0 + custom_random(ANGULAR_FREQUENCY * 3.0) * health)) * spent3 + Math.sin(currentAngle * (4.0 + custom_random(ANGULAR_FREQUENCY * 4.0) * health)) * spent4 + Math.sin(currentAngle * (5.0 + custom_random(ANGULAR_FREQUENCY * 5.0) * health)) * spent5 + Math.sin(currentAngle * (6.0 + custom_random(ANGULAR_FREQUENCY * 6.0) * health)) * spent6 + Math.sin(currentAngle * (7.0 + custom_random(ANGULAR_FREQUENCY * 7.0) * health)) * spent7;\n      // Math.sin(currentAngle * (8.0 + (custom_random(ANGULAR_FREQUENCY * 8.0) * health))) * spent8\n\n      wave *= Math.max(Math.sin(currentTime * Math.floor(custom_random(ANGULAR_FREQUENCY) * 20.0)), 0.23);\n\n      sum += wave * attack * release;\n\n      return sum;\n    }\n  }]);\n\n  return Audio;\n}(__WEBPACK_IMPORTED_MODULE_0_eventemitter3___default.a);\n\n/* harmony default export */ __webpack_exports__["a"] = (Audio);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = \'~\';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== \'function\') {\n    throw new TypeError(\'The listener must be a function\');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n/* unused harmony export PI */\n/* unused harmony export PI2 */\n/* unused harmony export HALF_PI */\n/* unused harmony export DEG2RAD */\n/* unused harmony export RAD2DEG */\n/* unused harmony export step */\n/* unused harmony export clamp */\n/* unused harmony export mix */\n/* unused harmony export cMix */\n/* unused harmony export unMix */\n/* unused harmony export cUnMix */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return map; });\n/* unused harmony export normalize */\n/* unused harmony export smoothstep */\n/* unused harmony export fract */\n/* unused harmony export hash */\n/* unused harmony export hash2 */\n/* unused harmony export sign */\n/* unused harmony export isPowerOfTwo */\n/* unused harmony export powerTwoCeilingBase */\n/* unused harmony export powerTwoCeiling */\n/* unused harmony export latLngBearing */\n/* unused harmony export distanceTo */\n/* unused harmony export distanceSqrTo */\n/* unused harmony export distanceTo3 */\n/* unused harmony export distanceSqrTo3 */\n/* unused harmony export latLngDistance */\n/* unused harmony export cubicBezier */\n/* unused harmony export cubicBezierFn */\n/* unused harmony export safeMod */\n/* unused harmony export loop */\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar HALF_PI = PI * 0.5;\nvar DEG2RAD = PI / 180.0;\nvar RAD2DEG = 180.0 / PI;\n\n// Be aware GLSL order\nvar step = function step(edge, val) {\n  return val < edge ? 0 : 1;\n};\nvar clamp = function clamp(val, min, max) {\n  return val < min ? min : val > max ? max : val;\n};\nvar mix = function mix(min, max, ratio) {\n  return min + (max - min) * ratio;\n};\nvar cMix = function cMix(min, max, ratio) {\n  return min + (max - min) * clamp(ratio, 0, 1);\n};\nvar unMix = function unMix(min, max, val) {\n  return (val - min) / (max - min);\n};\nvar cUnMix = function cUnMix(min, max, val) {\n  return clamp((val - min) / (max - min), 0, 1);\n};\n\n/*\n * Linearly maps n from range [ a, b ] -> [ x, y ]\n */\nvar map = function map(n, a, b, x, y) {\n  return x + (n - a) * (y - x) / (b - a);\n};\n\n/*\n * Linearly maps n from range [ a, b ] -> [ 0, 1 ]\n */\nvar normalize = function normalize(n, a, b) {\n  return map(n, a, b, 0, 1);\n};\n\nvar smoothstep = function smoothstep(edge0, edge1, val) {\n  val = cUnMix(edge0, edge1, val);\n  return val * val * (3 - val * 2);\n};\nvar fract = function fract(val) {\n  return val - Math.floor(val);\n};\nvar hash = function hash(val) {\n  return fract(Math.sin(val) * 43758.5453123);\n};\nvar hash2 = function hash2(val1, val2) {\n  return fract(Math.sin(val1 * 12.9898 + val2 * 4.1414) * 43758.5453);\n};\nvar sign = function sign(val) {\n  return val ? val < 0 ? -1 : 1 : 0;\n};\nvar isPowerOfTwo = function isPowerOfTwo(val) {\n  return (val & -val) === val;\n};\nvar powerTwoCeilingBase = function powerTwoCeilingBase(val) {\n  return Math.ceil(Math.log(val) / Math.log(2));\n};\nvar powerTwoCeiling = function powerTwoCeiling(val) {\n  if (isPowerOfTwo(val)) return val;\n  return 1 << powerTwoCeilingBase(val);\n};\nvar latLngBearing = function latLngBearing(lat1, lng1, lat2, lng2) {\n  // lat lng are in rad\n  // http://www.movable-type.co.uk/scripts/latlong.html\n  var y = Math.sin(lng2 - lng1) * Math.cos(lat2);\n  var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lng2 - lng1);\n  return Math.atan2(y, x);\n};\nvar distanceTo = function distanceTo(dX, dY) {\n  return Math.sqrt(dX * dX + dY * dY);\n};\nvar distanceSqrTo = function distanceSqrTo(dX, dY) {\n  return dX * dX + dY * dY;\n};\nvar distanceTo3 = function distanceTo3(dX, dY, dZ) {\n  return Math.sqrt(dX * dX + dY * dY + dZ * dZ);\n};\nvar distanceSqrTo3 = function distanceSqrTo3(dX, dY, dZ) {\n  return dX * dX + dY * dY + dZ * dZ;\n};\nvar latLngDistance = function latLngDistance(lat1, lng1, lat2, lng2) {\n  // lat lng are in rad\n  // http://www.movable-type.co.uk/scripts/latlong.html\n  var tLat = Math.sin((lat2 - lat1) / 2);\n  var tLng = Math.sin((lng2 - lng1) / 2);\n  var a = tLat * tLat + Math.cos(lat1) * Math.cos(lat2) * tLng * tLng;\n  return 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n};\nvar cubicBezier = function cubicBezier(p0, p1, p2, p3, t) {\n  var c = (p1 - p0) * 3;\n  var b = (p2 - p1) * 3 - c;\n  var a = p3 - p0 - c - b;\n  var t2 = t * t;\n  var t3 = t2 * t;\n  return a * t3 + b * t2 + c * t + p0;\n};\nvar cubicBezierFn = function cubicBezierFn(p0, p1, p2, p3) {\n  var c = (p1 - p0) * 3;\n  var b = (p2 - p1) * 3 - c;\n  var a = p3 - p0 - c - b;\n  return function (t) {\n    var t2 = t * t;\n    var t3 = t2 * t;\n    return a * t3 + b * t2 + c * t + p0;\n  };\n};\n\nvar safeMod = function safeMod(val, mod) {\n  var absVal = Math.abs(val);\n  val = val < 0 ? Math.ceil(absVal / mod) * mod - absVal : val;\n  return Math.abs(val % mod);\n};\n\nvar loop = function loop(val, min, max) {\n  return safeMod(val - min, max - min) + min;\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n/* unused harmony export asyncForEach */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return concatenate; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\nvar asyncForEach = function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(array, callback) {\n    var index;\n    return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = 0;\n\n          case 1:\n            if (!(index < array.length)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return callback(array[index], index, array);\n\n          case 4:\n            index++;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function asyncForEach(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar concatenate = function concatenate(arrays) {\n  var totalLength = 0;\n  arrays.forEach(function (arr) {\n    totalLength += arr.length;\n  });\n\n  var result = new Float32Array(totalLength);\n  var offset = 0;\n  arrays.forEach(function (arr) {\n    result.set(arr, offset);\n    offset += arr.length;\n  });\n  return result;\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(6);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function("return this")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(7);\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  "use strict";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === "function" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || "@@iterator";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";\n  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";\n\n  var inModule = typeof module === "object";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we\'re in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don\'t bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we\'re in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there\'s no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don\'t have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: "normal", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: "throw", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = "suspendedStart";\n  var GenStateSuspendedYield = "suspendedYield";\n  var GenStateExecuting = "executing";\n  var GenStateCompleted = "completed";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don\'t natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = "GeneratorFunction";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    ["next", "throw", "return"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === "function" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === "GeneratorFunction"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = "GeneratorFunction";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, "__await")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === "throw") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === "object" &&\n            hasOwn.call(value, "__await")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke("next", value, resolve, reject);\n          }, function(err) {\n            invoke("throw", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error("Generator is already running");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === "throw") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === "next") {\n          // Setting context._sent for legacy support of Babel\'s\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === "throw") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === "return") {\n          context.abrupt("return", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === "normal") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === "throw") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = "throw";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === "throw") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = "return";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === "throw") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // "return" to "throw", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = "throw";\n        context.arg = new TypeError(\n          "The iterator does not provide a \'throw\' method");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === "throw") {\n      context.method = "throw";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = "throw";\n      context.arg = new TypeError("iterator result is not an object");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was "throw" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was "next", forget context.arg since it has been\n      // "consumed" by the delegate iterator. If context.method was\n      // "return", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== "return") {\n        context.method = "next";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = "Generator";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers\' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn\'t happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return "[object Generator]";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = "normal";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: "root" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === "function") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel\'s\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = "next";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === "t" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === "throw") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = "throw";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = "next";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === "root") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle("end");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, "catchLoc");\n          var hasFinally = hasOwn.call(entry, "finallyLoc");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error("try statement without catch or finally");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, "finallyLoc") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === "break" ||\n           type === "continue") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = "next";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === "throw") {\n        throw record.arg;\n      }\n\n      if (record.type === "break" ||\n          record.type === "continue") {\n        this.next = record.arg;\n      } else if (record.type === "return") {\n        this.rval = this.arg = record.arg;\n        this.method = "return";\n        this.next = "end";\n      } else if (record.type === "normal" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    "catch": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === "throw") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error("illegal catch attempt");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === "next") {\n        // Deliberately forget the last sent value so that we don\'t\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we\'re in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function("return this")()\n);\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=3e2367280695892d298c.worker.js.map',null)}},function(e,t,n){e.exports=function(){return n(10)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/symphony-2/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__libs_audio_audioUtils__ = __webpack_require__(1);\n\r\nimportScripts('https://cdnjs.cloudflare.com/ajax/libs/gpu.js/1.10.4/gpu.min.js')\r\n\r\nself.addEventListener('message', async function (e) {\r\n  let data = e.data\r\n  switch (data.cmd) {\r\n    case 'get':\r\n\r\n      const blockAudioData = data.blockAudioData\r\n      const txID = data.txID\r\n      const sampleRate = data.sampleRate\r\n      const soundDuration = data.soundDuration\r\n      const noteDuration = data.noteDuration\r\n\r\n      const frequency = blockAudioData.frequencies[txID - 1]\r\n      const spent = blockAudioData.spent[txID - 1]\r\n      const health = blockAudioData.health\r\n\r\n      const audioUtils = new __WEBPACK_IMPORTED_MODULE_0__libs_audio_audioUtils__[\"a\" /* default */]({\r\n        sampleRate: sampleRate,\r\n        soundDuration: soundDuration,\r\n        noteDuration: noteDuration\r\n      })\r\n\r\n      const gpu = new GPU()\r\n\r\n      const txAudio = gpu.createKernel(audioUtils.txAudio, { loopMaxIterations: 1 }).setOutput([\r\n        Math.floor(\r\n          sampleRate * noteDuration\r\n        )\r\n      ])\r\n\r\n      txAudio.addNativeFunction('custom_smoothstep', audioUtils.customSmoothstep)\r\n      txAudio.addNativeFunction('custom_step', audioUtils.customStep)\r\n      txAudio.addNativeFunction('custom_random', audioUtils.customRandom)\r\n\r\n      let sineArray = txAudio(\r\n        frequency,\r\n        spent,\r\n        health,\r\n        sampleRate\r\n      )\r\n\r\n      let arrayBuffers = audioUtils.fillBuffer(sineArray, 0.3, noteDuration)\r\n\r\n      let returnData = {\r\n        lArray: arrayBuffers.lArray,\r\n        rArray: arrayBuffers.rArray\r\n      }\r\n\r\n      self.postMessage(returnData)\r\n      break\r\n    case 'stop':\r\n      self.postMessage('WORKER STOPPED')\r\n      self.close()\r\n      break\r\n    default:\r\n      self.postMessage('Unknown command')\r\n  }\r\n\r\n  self.postMessage(e.data)\r\n}, false)\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eventemitter3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eventemitter3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_math__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n// keep standard js happy\nvar custom_smoothstep = function custom_smoothstep() {};\nvar custom_step = function custom_step() {};\nvar custom_random = function custom_random() {};\n\nvar Audio = function (_EventEmitter) {\n  _inherits(Audio, _EventEmitter);\n\n  function Audio(args) {\n    _classCallCheck(this, Audio);\n\n    var _this = _possibleConstructorReturn(this, (Audio.__proto__ || Object.getPrototypeOf(Audio)).call(this, args));\n\n    _this.sampleRate = args.sampleRate;\n    _this.soundDuration = args.soundDuration;\n    _this.noteDuration = args.noteDuration;\n    _this.config = args.config;\n\n    _this.customSmoothstep = 'highp float custom_smoothstep(float edge0, float edge1, float x) {\\n      return smoothstep(edge0, edge1, x);\\n    }';\n    _this.customStep = 'highp float custom_step(float edge, float x) {\\n           return step(edge, x);\\n         }';\n    _this.customRandom = 'highp float custom_random(float n){\\n           return fract(sin(n) * 43758.5453123);\\n         }';\n    return _this;\n  }\n\n  _createClass(Audio, [{\n    key: 'generateBlockAudio',\n    value: function generateBlockAudio(blockData, chords, notes, TXValues, spentRatios) {\n      // compute number from hash\n      var total = 0;\n      for (var i = 0; i < blockData.hash.length; i++) {\n        // convert from base 16\n        total += parseInt(blockData.hash[i], 16);\n      }\n\n      // // set unique mode for this block hash\n      var modeIndex = total % Object.keys(chords).length;\n      var mode = chords[Object.keys(chords)[modeIndex]];\n      // let mode = chords['dorian']\n\n      var minOutput = Number.MAX_SAFE_INTEGER;\n      var maxOutput = 0;\n\n      if (blockData.n_tx === 1) {\n        minOutput = 0;\n        maxOutput = TXValues[0] * 2;\n      } else {\n        for (var index = 0; index < blockData.n_tx; index++) {\n          var txValue = TXValues[index];\n          minOutput = Math.min(txValue, minOutput);\n          maxOutput = Math.max(txValue, maxOutput);\n        }\n      }\n\n      minOutput = Math.log(minOutput + 1.0);\n      maxOutput = Math.log(maxOutput + 1.0);\n\n      if (minOutput === maxOutput) {\n        minOutput -= minOutput * 0.5;\n        maxOutput += maxOutput * 0.5;\n      }\n\n      // filter out notes not in mode\n      var filteredNotes = {};\n      for (var frequency in notes) {\n        if (notes.hasOwnProperty(frequency)) {\n          var note = notes[frequency];\n          var noteName = note.replace(/[0-9]/g, '');\n          if (mode.indexOf(noteName) !== -1) {\n            // filter out notes not in mode\n            filteredNotes[frequency] = note;\n          }\n        }\n      }\n\n      var frequencies = [];\n\n      var health = blockData.fee / blockData.outputTotal * 2000; // 0 == healthy\n\n      var spent = [];\n\n      var txTimes = [];\n      var txCount = blockData.n_tx > this.config.audio.maxSineBankLoops ? this.config.audio.maxSineBankLoops : blockData.n_tx;\n\n      for (var _i = 0; _i < txCount; _i++) {\n        var _txValue = TXValues[_i];\n\n        var txSpentRatio = spentRatios[_i];\n\n        var txTime = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__[\"a\" /* map */])(_i, 0, txCount, 0, this.soundDuration - 4);\n        txTimes.push(txTime);\n\n        var mappedSpentRatio = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__[\"a\" /* map */])(1.0 - txSpentRatio, 1.0, 0.0, 8.0, 1.0);\n\n        spent.push(mappedSpentRatio);\n\n        var filteredNoteKeys = Object.keys(filteredNotes);\n\n        var pitchIndex = Math.floor(Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__[\"a\" /* map */])(Math.log(_txValue + 1.0), minOutput, maxOutput, filteredNoteKeys.length - 1, 0));\n\n        var j = 0;\n        for (var _frequency in filteredNotes) {\n          if (filteredNotes.hasOwnProperty(_frequency)) {\n            if (pitchIndex === j) {\n              frequencies.push(parseFloat(_frequency));\n              break;\n            }\n            j++;\n          }\n        }\n      }\n\n      return {\n        frequencies: frequencies,\n        txTimes: txTimes,\n        spent: spent,\n        health: health\n      };\n    }\n  }, {\n    key: 'fillBuffer',\n    value: function fillBuffer(sineArray) {\n      var vol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.0;\n      var lArray = arguments[2];\n      var rArray = arguments[3];\n\n      var min = Number.MAX_SAFE_INTEGER;\n      var max = 0;\n      for (var index = 0; index < sineArray.length; index++) {\n        min = Math.min(min, sineArray[index]);\n        max = Math.max(max, sineArray[index]);\n      }\n\n      // normalize\n      for (var _index = 0; _index < sineArray.length; _index++) {\n        lArray[_index] = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__[\"a\" /* map */])(sineArray[_index], min, max, -vol, vol);\n        if (typeof sineArray[_index + 200] !== 'undefined') {\n          rArray[_index] = Object(__WEBPACK_IMPORTED_MODULE_1__utils_math__[\"a\" /* map */])(sineArray[_index + 200], min, max, -vol, vol); // right channel slightly out of phase with left for stereo effect\n        }\n      }\n    }\n  }, {\n    key: 'sineBank',\n    value: function sineBank(frequencies, times, spent, health, length, sampleRate, timeOffset, chunkIndex) {\n      var sum = 0;\n      var twoPI = 6.28318530718;\n      var currentTime = this.thread.x / sampleRate + timeOffset;\n\n      for (var i = 0; i + chunkIndex < length; i++) {\n        var time = times[i + chunkIndex];\n\n        var ANGULAR_FREQUENCY = frequencies[i + chunkIndex] * twoPI;\n\n        var ANGULAR_FREQUENCY_MOD = (frequencies[i + chunkIndex] + Math.sin(currentTime * (custom_random(ANGULAR_FREQUENCY) * 0.1)) * (health * 10.0)) * twoPI;\n\n        // let currentAngle = currentTime * ANGULAR_FREQUENCY\n\n        var currentAngleMod = currentTime * ANGULAR_FREQUENCY_MOD;\n\n        var spentRatio = spent[i + chunkIndex];\n\n        // envelope\n        var attack = custom_smoothstep(time, time + 0.1 + custom_random(i) * 2.0, currentTime);\n        var release = 1.0 - custom_smoothstep(time + 2.0, time + 3.0, currentTime);\n\n        var spent1 = 1.5;\n        var spent2 = 0.1 + custom_step(2.0, spentRatio) * 1.0;\n        var spent3 = 0.1 + custom_step(3.0, spentRatio) * 0.9;\n        var spent4 = 0.1 + custom_step(4.0, spentRatio) * 0.8;\n        var spent5 = 0.1 + custom_step(5.0, spentRatio) * 0.7;\n        var spent6 = 0.1 + custom_step(6.0, spentRatio) * 0.6;\n        var spent7 = 0.1 + custom_step(7.0, spentRatio) * 0.5;\n        var spent8 = 0.1 + custom_step(8.0, spentRatio) * 0.4;\n\n        var wave = Math.sin(currentAngleMod) * spent1 + Math.sin(currentAngleMod * (2.0 + custom_random(ANGULAR_FREQUENCY * 2.0) * health)) * spent2 + Math.sin(currentAngleMod * (3.0 + custom_random(ANGULAR_FREQUENCY * 3.0) * health)) * spent3 + Math.sin(currentAngleMod * (4.0 + custom_random(ANGULAR_FREQUENCY * 4.0) * health)) * spent4 + Math.sin(currentAngleMod * (5.0 + custom_random(ANGULAR_FREQUENCY * 5.0) * health)) * spent5 + Math.sin(currentAngleMod * (6.0 + custom_random(ANGULAR_FREQUENCY * 6.0) * health)) * spent6 + Math.sin(currentAngleMod * (7.0 + custom_random(ANGULAR_FREQUENCY * 7.0) * health)) * spent7 + Math.sin(currentAngleMod * (8.0 + custom_random(ANGULAR_FREQUENCY * 8.0) * health)) * spent8;\n\n        wave *= Math.max(Math.sin(currentTime * Math.floor(custom_random(ANGULAR_FREQUENCY) * 20.0)), custom_random(i));\n\n        sum += wave * attack * release;\n      }\n\n      return sum;\n    }\n  }, {\n    key: 'txAudio',\n    value: function txAudio(frequency, spent, health, sampleRate) {\n      var sum = 0;\n      var twoPI = 6.28318530718;\n      var currentTime = this.thread.x / sampleRate;\n\n      var ANGULAR_FREQUENCY = frequency * twoPI;\n\n      var currentAngle = currentTime * ANGULAR_FREQUENCY;\n\n      var spentRatio = spent;\n\n      // envelope\n      var attack = custom_smoothstep(0.0, 5.0, currentTime);\n      var release = 1.0 - custom_smoothstep(5.0, 10.0, currentTime);\n\n      var spent1 = 1.5;\n      var spent2 = 0.2 + custom_step(2.0, spentRatio) * 1.0;\n      var spent3 = 0.2 + custom_step(3.0, spentRatio) * 0.9;\n      var spent4 = 0.2 + custom_step(4.0, spentRatio) * 0.8;\n      var spent5 = 0.2 + custom_step(5.0, spentRatio) * 0.7;\n      var spent6 = 0.2 + custom_step(6.0, spentRatio) * 0.6;\n      var spent7 = 0.2 + custom_step(7.0, spentRatio) * 0.5;\n      // let spent8 = 0.2 + custom_step(8.0, spentRatio) * 0.4\n\n      var wave = Math.sin(currentAngle) * spent1 + Math.sin(currentAngle * (2.0 + custom_random(ANGULAR_FREQUENCY * 2.0) * health)) * spent2 + Math.sin(currentAngle * (3.0 + custom_random(ANGULAR_FREQUENCY * 3.0) * health)) * spent3 + Math.sin(currentAngle * (4.0 + custom_random(ANGULAR_FREQUENCY * 4.0) * health)) * spent4 + Math.sin(currentAngle * (5.0 + custom_random(ANGULAR_FREQUENCY * 5.0) * health)) * spent5 + Math.sin(currentAngle * (6.0 + custom_random(ANGULAR_FREQUENCY * 6.0) * health)) * spent6 + Math.sin(currentAngle * (7.0 + custom_random(ANGULAR_FREQUENCY * 7.0) * health)) * spent7;\n      // Math.sin(currentAngle * (8.0 + (custom_random(ANGULAR_FREQUENCY * 8.0) * health))) * spent8\n\n      wave *= Math.max(Math.sin(currentTime * Math.floor(custom_random(ANGULAR_FREQUENCY) * 20.0)), 0.23);\n\n      sum += wave * attack * release;\n\n      return sum;\n    }\n  }]);\n\n  return Audio;\n}(__WEBPACK_IMPORTED_MODULE_0_eventemitter3___default.a);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Audio);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export PI */\n/* unused harmony export PI2 */\n/* unused harmony export HALF_PI */\n/* unused harmony export DEG2RAD */\n/* unused harmony export RAD2DEG */\n/* unused harmony export step */\n/* unused harmony export clamp */\n/* unused harmony export mix */\n/* unused harmony export cMix */\n/* unused harmony export unMix */\n/* unused harmony export cUnMix */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return map; });\n/* unused harmony export normalize */\n/* unused harmony export smoothstep */\n/* unused harmony export fract */\n/* unused harmony export hash */\n/* unused harmony export hash2 */\n/* unused harmony export sign */\n/* unused harmony export isPowerOfTwo */\n/* unused harmony export powerTwoCeilingBase */\n/* unused harmony export powerTwoCeiling */\n/* unused harmony export latLngBearing */\n/* unused harmony export distanceTo */\n/* unused harmony export distanceSqrTo */\n/* unused harmony export distanceTo3 */\n/* unused harmony export distanceSqrTo3 */\n/* unused harmony export latLngDistance */\n/* unused harmony export cubicBezier */\n/* unused harmony export cubicBezierFn */\n/* unused harmony export safeMod */\n/* unused harmony export loop */\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar HALF_PI = PI * 0.5;\nvar DEG2RAD = PI / 180.0;\nvar RAD2DEG = 180.0 / PI;\n\n// Be aware GLSL order\nvar step = function step(edge, val) {\n  return val < edge ? 0 : 1;\n};\nvar clamp = function clamp(val, min, max) {\n  return val < min ? min : val > max ? max : val;\n};\nvar mix = function mix(min, max, ratio) {\n  return min + (max - min) * ratio;\n};\nvar cMix = function cMix(min, max, ratio) {\n  return min + (max - min) * clamp(ratio, 0, 1);\n};\nvar unMix = function unMix(min, max, val) {\n  return (val - min) / (max - min);\n};\nvar cUnMix = function cUnMix(min, max, val) {\n  return clamp((val - min) / (max - min), 0, 1);\n};\n\n/*\n * Linearly maps n from range [ a, b ] -> [ x, y ]\n */\nvar map = function map(n, a, b, x, y) {\n  return x + (n - a) * (y - x) / (b - a);\n};\n\n/*\n * Linearly maps n from range [ a, b ] -> [ 0, 1 ]\n */\nvar normalize = function normalize(n, a, b) {\n  return map(n, a, b, 0, 1);\n};\n\nvar smoothstep = function smoothstep(edge0, edge1, val) {\n  val = cUnMix(edge0, edge1, val);\n  return val * val * (3 - val * 2);\n};\nvar fract = function fract(val) {\n  return val - Math.floor(val);\n};\nvar hash = function hash(val) {\n  return fract(Math.sin(val) * 43758.5453123);\n};\nvar hash2 = function hash2(val1, val2) {\n  return fract(Math.sin(val1 * 12.9898 + val2 * 4.1414) * 43758.5453);\n};\nvar sign = function sign(val) {\n  return val ? val < 0 ? -1 : 1 : 0;\n};\nvar isPowerOfTwo = function isPowerOfTwo(val) {\n  return (val & -val) === val;\n};\nvar powerTwoCeilingBase = function powerTwoCeilingBase(val) {\n  return Math.ceil(Math.log(val) / Math.log(2));\n};\nvar powerTwoCeiling = function powerTwoCeiling(val) {\n  if (isPowerOfTwo(val)) return val;\n  return 1 << powerTwoCeilingBase(val);\n};\nvar latLngBearing = function latLngBearing(lat1, lng1, lat2, lng2) {\n  // lat lng are in rad\n  // http://www.movable-type.co.uk/scripts/latlong.html\n  var y = Math.sin(lng2 - lng1) * Math.cos(lat2);\n  var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lng2 - lng1);\n  return Math.atan2(y, x);\n};\nvar distanceTo = function distanceTo(dX, dY) {\n  return Math.sqrt(dX * dX + dY * dY);\n};\nvar distanceSqrTo = function distanceSqrTo(dX, dY) {\n  return dX * dX + dY * dY;\n};\nvar distanceTo3 = function distanceTo3(dX, dY, dZ) {\n  return Math.sqrt(dX * dX + dY * dY + dZ * dZ);\n};\nvar distanceSqrTo3 = function distanceSqrTo3(dX, dY, dZ) {\n  return dX * dX + dY * dY + dZ * dZ;\n};\nvar latLngDistance = function latLngDistance(lat1, lng1, lat2, lng2) {\n  // lat lng are in rad\n  // http://www.movable-type.co.uk/scripts/latlong.html\n  var tLat = Math.sin((lat2 - lat1) / 2);\n  var tLng = Math.sin((lng2 - lng1) / 2);\n  var a = tLat * tLat + Math.cos(lat1) * Math.cos(lat2) * tLng * tLng;\n  return 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n};\nvar cubicBezier = function cubicBezier(p0, p1, p2, p3, t) {\n  var c = (p1 - p0) * 3;\n  var b = (p2 - p1) * 3 - c;\n  var a = p3 - p0 - c - b;\n  var t2 = t * t;\n  var t3 = t2 * t;\n  return a * t3 + b * t2 + c * t + p0;\n};\nvar cubicBezierFn = function cubicBezierFn(p0, p1, p2, p3) {\n  var c = (p1 - p0) * 3;\n  var b = (p2 - p1) * 3 - c;\n  var a = p3 - p0 - c - b;\n  return function (t) {\n    var t2 = t * t;\n    var t3 = t2 * t;\n    return a * t3 + b * t2 + c * t + p0;\n  };\n};\n\nvar safeMod = function safeMod(val, mod) {\n  var absVal = Math.abs(val);\n  val = val < 0 ? Math.ceil(absVal / mod) * mod - absVal : val;\n  return Math.abs(val % mod);\n};\n\nvar loop = function loop(val, min, max) {\n  return safeMod(val - min, max - min) + min;\n};\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=d4ff3bcc76ce8f8c087f.worker.js.map",null)}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(12),h=n.n(l),p=n(145),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.FBStorageCircuitRef=e.FBStorageCircuitRef,n.config=e.config,n.merkleTools=new p.a,n.offscreenMode=!1,"undefined"!==typeof window.OffscreenCanvas&&(n.offscreenMode=!0),n.textureLoader=new c.TextureLoader,n.canvas=null,n}return a(t,e),f(t,[{key:"draw",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n,r){var i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=i;if(!i.offscreenMode){i.canvas&&i.canvas.parentNode&&i.canvas.parentNode.removeChild(i.canvas);var o=document.getElementById("sketchboard");o&&o.remove()}i.FBStorageCircuitRef.child(n.blockData.hash+".png").getDownloadURL().then(function(t){r.textureLoader.load(t,e)}).catch(function(){e()})}));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),t}(h.a);t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"getMerklePositions",value:function(e){e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++;var t={4096:13,2048:12,1024:11,512:10,256:9,128:8,64:7,32:6,16:5,8:4,4:3,2:2,1:1,0:1};return{merkleLineWidth:.5*{4096:.4,2048:.525,1024:.65,512:1.15,256:.9,128:1.15,64:1.4,32:2.4,16:2.9,8:3.4,4:4.025,2:4.4,1:4.9,0:4.9}[e],merkleNodeRadius:.5*{4096:1.5,2048:1.25,1024:1.325,512:1.325,256:2.2,128:2.95,64:3.45,32:3.95,16:4.45,8:4.9,4:5.2,2:6.95,1:6.9,0:6.9}[e],positions:n(146)("./merkle-"+t[e])}}},{key:"drawMerkleCanvas",value:function(e,t,n,r,o){for(var a=e.getContext("2d"),s=this.getMerklePositions(n),u=s.positions,c=.5*r,l=Array.from(o),h=0;h<2*n;h+=2){for(var p=u[h+0],f=u[h+1],d=new i.Vector2(p,f),m=Number.MAX_SAFE_INTEGER,g=[],v=0;v<l.length;v+=2){var y=l[v+0],b=l[v+1];if(0!==y||0!==b){var _=new i.Vector2(y,b),x=_.distanceToSquared(d);x<m&&(m=x,g=[v+0,v+1])}}if(g.length&&"undefined"!==typeof l[g[0]]){var w=l[g[0]],T=l[g[1]];l.splice(g[0],1),l.splice(g[0],1);var E=2.0075*w+c,S=2.0075*T+c,k=Math.floor(2.0075*p+c),C=Math.floor(2.0075*f+c),M=E-k,A=S-C,O=0,D="X";Math.abs(M)<Math.abs(A)?O=M:(O=A,D="Z");var I=Math.floor(.5*O);a.beginPath(),a.moveTo(k,C),a.lineWidth=s.merkleLineWidth,a.strokeStyle="rgba(255,255,255,0.50)","X"===D?(a.lineTo(E-I,C),I=A<0?-1*Math.abs(I):Math.abs(I),a.lineTo(E,C+I),a.lineTo(E,S)):(a.lineTo(k,S-I),I=M<0?-1*Math.abs(I):Math.abs(I),a.lineTo(k+I,S),a.lineTo(E,S)),a.lineJoin="round",a.stroke(),a.beginPath(),a.strokeStyle="rgba(255,255,255,0.50)",a.arc(k,C,s.merkleNodeRadius,0,2*Math.PI,!1),a.lineWidth=s.merkleLineWidth+1,a.stroke(),a.beginPath(),a.strokeStyle="rgba(255,255,255,0.40)",a.arc(E,S,s.merkleNodeRadius,0,2*Math.PI,!1),a.stroke()}}a.translate(e.width/2,e.height/2),a.scale(-1,1),a.font="7.5pt Calibri",a.lineWidth=0,a.fillStyle="rgba(255,255,255,0.50)",a.fillText("BLOCK #"+t.blockData.height+"  HASH: "+t.blockData.hash,-495,-495),a.scale(-1,1),a.rotate(Math.PI/6)}}]),e}();t.a=a},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./merkle-1":59,"./merkle-1.js":59,"./merkle-10":60,"./merkle-10.js":60,"./merkle-11":61,"./merkle-11.js":61,"./merkle-12":62,"./merkle-12.js":62,"./merkle-13":63,"./merkle-13.js":63,"./merkle-2":64,"./merkle-2.js":64,"./merkle-3":65,"./merkle-3.js":65,"./merkle-4":66,"./merkle-4.js":66,"./merkle-5":67,"./merkle-5.js":67,"./merkle-6":68,"./merkle-6.js":68,"./merkle-7":69,"./merkle-7.js":69,"./merkle-8":70,"./merkle-8.js":70,"./merkle-9":71,"./merkle-9.js":71};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=146},function(e,t,n){"use strict";function r(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),u=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=e.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+a+"}":"unknown format"}function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(z.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(z.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(z.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(z.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e){if("0"===e||O.isUndefined(e))return 0;var t=e.match(Y);return O.isNull(t)?0:parseFloat(t[1])}function s(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}function u(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}function c(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}function l(e,t,n,r){e.style.background="",O.each(re,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function h(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function p(e){setTimeout(e,1e3/60)}function f(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function d(e){X.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&X.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function m(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function g(e,t,n){if(n.__li=t,n.__gui=e,O.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),y(e,n.object,n.property,{before:r,factoryArgs:[O.toArray(arguments)]})}if(O.isArray(t)||O.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),y(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof ee){var r=new $(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});O.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}}),X.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof $){var i=function(t){if(O.isNumber(n.__min)&&O.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=y(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=O.compose(i,n.min),n.max=O.compose(i,n.max)}else n instanceof K?(X.bind(t,"click",function(){X.fakeEvent(n.__checkbox,"click")}),X.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof te?(X.bind(t,"click",function(){X.fakeEvent(n.__button,"click")}),X.bind(t,"mouseover",function(){X.addClass(n.__button,"hover")}),X.bind(t,"mouseout",function(){X.removeClass(n.__button,"hover")})):n instanceof ne&&(X.addClass(t,"color"),n.updateDisplay=O.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=O.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&m(e.getRoot(),!0),t},n.setValue)}function v(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[ce])return;a=o[ce]}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function y(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new ne(t,n);else{var o=[t,n].concat(r.factoryArgs);i=oe.apply(e,o)}r.before instanceof H&&(r.before=r.before.__li),v(e,i),X.addClass(i.domElement,"c");var a=document.createElement("span");X.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=f(e,s,r.before);return X.addClass(u,ge.CLASS_CONTROLLER_ROW),i instanceof ne?X.addClass(u,"color"):X.addClass(u,U(i.getValue())),g(e,u,i),e.__controllers.push(i),i}function b(e,t){return document.location.href+"."+t}function _(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function x(e,t){t.style.display=e.useLocalStorage?"block":"none"}function w(e){var t=e.__save_row=document.createElement("li");X.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),X.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",X.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",X.addClass(r,"button"),X.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",X.addClass(i,"button"),X.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",X.addClass(o,"button"),X.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?O.each(e.load.remembered,function(t,n){_(e,n,n===e.preset)}):_(e,ce,!1),X.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),le){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(b(e,"isLocal"))&&u.setAttribute("checked","checked"),x(e,s),X.bind(u,"change",function(){e.useLocalStorage=!e.useLocalStorage,x(e,s)})}var c=document.getElementById("dg-new-constructor");X.bind(c,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||he.hide()}),X.bind(n,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),he.show(),c.focus(),c.select()}),X.bind(r,"click",function(){e.save()}),X.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),X.bind(o,"click",function(){e.revert()})}function T(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){X.removeClass(e.__closeButton,ge.CLASS_DRAG),X.unbind(window,"mousemove",t),X.unbind(window,"mouseup",n)}function r(r){return r.preventDefault(),i=r.clientX,X.addClass(e.__closeButton,ge.CLASS_DRAG),X.bind(window,"mousemove",t),X.bind(window,"mouseup",n),!1}var i=void 0;e.__resize_handle=document.createElement("div"),O.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),X.bind(e.__resize_handle,"mousedown",r),X.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function E(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function S(e,t){var n={};return O.each(e.__rememberedObjects,function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];O.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function k(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function C(e){0!==e.length&&ae.call(window,function(){C(e)}),O.each(e,function(e){e.updateDisplay()})}n.d(t,"a",function(){return xe});var M=Array.prototype.forEach,A=Array.prototype.slice,O={BREAK:{},extend:function(e){return this.each(A.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(A.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=A.call(arguments);return function(){for(var t=A.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(M&&e.forEach&&e.forEach===M)e.forEach(t,n);else if(e.length===e.length+0){var r=void 0,i=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){function i(){r=null,n||e.apply(o,a)}var o=this,a=arguments,s=n||!r;clearTimeout(r),r=setTimeout(i,t),s&&e.apply(o,a)}},toArray:function(e){return e.toArray?e.toArray():A.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},D=[{litmus:O.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:O.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:O.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:O.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(O.isNumber(e.r)&&O.isNumber(e.g)&&O.isNumber(e.b)&&O.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(O.isNumber(e.r)&&O.isNumber(e.g)&&O.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(O.isNumber(e.h)&&O.isNumber(e.s)&&O.isNumber(e.v)&&O.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(O.isNumber(e.h)&&O.isNumber(e.s)&&O.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],I=void 0,R=void 0,P=function(){R=!1;var e=arguments.length>1?O.toArray(arguments):arguments[0];return O.each(D,function(t){if(t.litmus(e))return O.each(t.conversions,function(t,n){if(I=t.read(e),!1===R&&!1!==I)return R=I,I.conversionName=n,I.conversion=t,O.BREAK}),O.BREAK}),R},L=void 0,N={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=o/i,a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,a/=6,a<0&&(a+=1),{h:360*a,s:s,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(L=8*t)|e&~(255<<L)}},U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),j=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},G=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},z=function(){function e(){if(F(this,e),this.__state=P.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return B(e,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();z.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=N.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");O.extend(e.__state,N.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},z.recalculateHSV=function(e){var t=N.rgb_to_hsv(e.r,e.g,e.b);O.extend(e.__state,{s:t.s,v:t.v}),O.isNaN(t.h)?O.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},z.COMPONENTS=["r","g","b","h","s","v","hex","a"],i(z.prototype,"r",2),i(z.prototype,"g",1),i(z.prototype,"b",0),o(z.prototype,"h"),o(z.prototype,"s"),o(z.prototype,"v"),Object.defineProperty(z.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(z.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=N.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var H=function(){function e(t,n){F(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return B(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),W={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},q={};O.each(W,function(e,t){O.each(e,function(e){q[e]=t})});var Y=/(\d+(\.\d+)?)px/,X={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;O.isUndefined(i)&&(i=!0),O.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=q[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;O.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}O.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),X},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),X},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return X},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return X},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return a(t["border-left-width"])+a(t["border-right-width"])+a(t["padding-left"])+a(t["padding-right"])+a(t.width)},getHeight:function(e){var t=getComputedStyle(e);return a(t["border-top-width"])+a(t["border-bottom-width"])+a(t["padding-top"])+a(t["padding-bottom"])+a(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},K=function(e){function t(e,n){function r(){o.setValue(!o.__prev)}F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),X.bind(i.__checkbox,"change",r,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return G(t,e),B(t,[{key:"setValue",value:function(e){var n=j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(H),Q=function(e){function t(e,n,r){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),O.isArray(o)){var s={};O.each(o,function(e){s[e]=e}),o=s}return O.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),i.updateDisplay(),X.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),i.domElement.appendChild(i.__select),i}return G(t,e),B(t,[{key:"setValue",value:function(e){var n=j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return X.isActive(this.__select)?this:(this.__select.value=this.getValue(),j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(H),J=function(e){function t(e,n){function r(){a.setValue(a.__input.value)}function i(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}F(this,t);var o=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=o;return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),X.bind(o.__input,"keyup",r),X.bind(o.__input,"change",r),X.bind(o.__input,"blur",i),X.bind(o.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return G(t,e),B(t,[{key:"updateDisplay",value:function(){return X.isActive(this.__input)||(this.__input.value=this.getValue()),j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(H),Z=function(e){function t(e,n,r){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,O.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=s(i.__impliedStep),i}return G(t,e),B(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=s(e),this}}]),t}(H),$=function(e){function t(e,n,r){function i(){var e=parseFloat(h.__input.value);O.isNaN(e)||h.setValue(e)}function o(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function a(){o()}function s(e){var t=p-e.clientY;h.setValue(h.getValue()+t*h.__impliedStep),p=e.clientY}function u(){X.unbind(window,"mousemove",s),X.unbind(window,"mouseup",u),o()}function c(e){X.bind(window,"mousemove",s),X.bind(window,"mouseup",u),p=e.clientY}F(this,t);var l=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));l.__truncationSuspended=!1;var h=l,p=void 0;return l.__input=document.createElement("input"),l.__input.setAttribute("type","text"),X.bind(l.__input,"change",i),X.bind(l.__input,"blur",a),X.bind(l.__input,"mousedown",c),X.bind(l.__input,"keydown",function(e){13===e.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1,o())}),l.updateDisplay(),l.domElement.appendChild(l.__input),l}return G(t,e),B(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():u(this.getValue(),this.__precision),j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Z),ee=function(e){function t(e,n,r,i,o){function a(e){document.activeElement.blur(),X.bind(window,"mousemove",s),X.bind(window,"mouseup",u),s(e)}function s(e){e.preventDefault();var t=d.__background.getBoundingClientRect();return d.setValue(c(e.clientX,t.left,t.right,d.__min,d.__max)),!1}function u(){X.unbind(window,"mousemove",s),X.unbind(window,"mouseup",u),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function l(e){1===e.touches.length&&(X.bind(window,"touchmove",h),X.bind(window,"touchend",p),h(e))}function h(e){var t=e.touches[0].clientX,n=d.__background.getBoundingClientRect();d.setValue(c(t,n.left,n.right,d.__min,d.__max))}function p(){X.unbind(window,"touchmove",h),X.unbind(window,"touchend",p),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}F(this,t);var f=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),d=f;return f.__background=document.createElement("div"),f.__foreground=document.createElement("div"),X.bind(f.__background,"mousedown",a),X.bind(f.__background,"touchstart",l),X.addClass(f.__background,"slider"),X.addClass(f.__foreground,"slider-fg"),f.updateDisplay(),f.__background.appendChild(f.__foreground),f.domElement.appendChild(f.__background),f}return G(t,e),B(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",j(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Z),te=function(e){function t(e,n,r){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,X.bind(i.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),X.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return G(t,e),B(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(H),ne=function(e){function t(e,n){function r(e){c(e),X.bind(window,"mousemove",c),X.bind(window,"touchmove",c),X.bind(window,"mouseup",o),X.bind(window,"touchend",o)}function i(e){p(e),X.bind(window,"mousemove",p),X.bind(window,"touchmove",p),X.bind(window,"mouseup",a),X.bind(window,"touchend",a)}function o(){X.unbind(window,"mousemove",c),X.unbind(window,"touchmove",c),X.unbind(window,"mouseup",o),X.unbind(window,"touchend",o),u()}function a(){X.unbind(window,"mousemove",p),X.unbind(window,"touchmove",p),X.unbind(window,"mouseup",a),X.unbind(window,"touchend",a),u()}function s(){var e=P(this.value);!1!==e?(d.__color.__state=e,d.setValue(d.__color.toOriginal())):this.value=d.__color.toString()}function u(){d.__onFinishChange&&d.__onFinishChange.call(d,d.__color.toOriginal())}function c(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=d.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,i=n.clientY,o=(r-t.left)/(t.right-t.left),a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),d.__color.v=a,d.__color.s=o,d.setValue(d.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=d.__hue_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientY,i=1-(r-t.top)/(t.bottom-t.top);return i>1?i=1:i<0&&(i=0),d.__color.h=360*i,d.setValue(d.__color.toOriginal()),!1}F(this,t);var f=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));f.__color=new z(f.getValue()),f.__temp=new z(0);var d=f;f.domElement=document.createElement("div"),X.makeSelectable(f.domElement,!1),f.__selector=document.createElement("div"),f.__selector.className="selector",f.__saturation_field=document.createElement("div"),f.__saturation_field.className="saturation-field",f.__field_knob=document.createElement("div"),f.__field_knob.className="field-knob",f.__field_knob_border="2px solid ",f.__hue_knob=document.createElement("div"),f.__hue_knob.className="hue-knob",f.__hue_field=document.createElement("div"),f.__hue_field.className="hue-field",f.__input=document.createElement("input"),f.__input.type="text",f.__input_textShadow="0 1px 1px ",X.bind(f.__input,"keydown",function(e){13===e.keyCode&&s.call(this)}),X.bind(f.__input,"blur",s),X.bind(f.__selector,"mousedown",function(){X.addClass(this,"drag").bind(window,"mouseup",function(){X.removeClass(d.__selector,"drag")})}),X.bind(f.__selector,"touchstart",function(){X.addClass(this,"drag").bind(window,"touchend",function(){X.removeClass(d.__selector,"drag")})});var m=document.createElement("div");return O.extend(f.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),O.extend(f.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:f.__field_knob_border+(f.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),O.extend(f.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),O.extend(f.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),O.extend(m.style,{width:"100%",height:"100%",background:"none"}),l(m,"top","rgba(0,0,0,0)","#000"),O.extend(f.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),h(f.__hue_field),O.extend(f.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:f.__input_textShadow+"rgba(0,0,0,0.7)"}),X.bind(f.__saturation_field,"mousedown",r),X.bind(f.__saturation_field,"touchstart",r),X.bind(f.__field_knob,"mousedown",r),X.bind(f.__field_knob,"touchstart",r),X.bind(f.__hue_field,"mousedown",i),X.bind(f.__hue_field,"touchstart",i),f.__saturation_field.appendChild(m),f.__selector.appendChild(f.__field_knob),f.__selector.appendChild(f.__saturation_field),f.__selector.appendChild(f.__hue_field),f.__hue_field.appendChild(f.__hue_knob),f.domElement.appendChild(f.__input),f.domElement.appendChild(f.__selector),f.updateDisplay(),f}return G(t,e),B(t,[{key:"updateDisplay",value:function(){var e=P(this.getValue());if(!1!==e){var t=!1;O.each(z.COMPONENTS,function(n){if(!O.isUndefined(e[n])&&!O.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&O.extend(this.__color.__state,e)}O.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;O.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),O.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(H),re=["-moz-","-o-","-webkit-","-ms-",""],ie={load:function(e,t){var n=t||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}}},oe=function(e,t){var n=e[t];return O.isArray(arguments[2])||O.isObject(arguments[2])?new Q(e,t,arguments[2]):O.isNumber(n)?O.isNumber(arguments[2])&&O.isNumber(arguments[3])?O.isNumber(arguments[4])?new ee(e,t,arguments[2],arguments[3],arguments[4]):new ee(e,t,arguments[2],arguments[3]):O.isNumber(arguments[4])?new $(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new $(e,t,{min:arguments[2],max:arguments[3]}):O.isString(n)?new J(e,t):O.isFunction(n)?new te(e,t,""):O.isBoolean(n)?new K(e,t):null},ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||p,se=function(){function e(){F(this,e),this.backgroundElement=document.createElement("div"),O.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),X.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),O.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;X.bind(this.backgroundElement,"click",function(){t.hide()})}return B(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),O.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",X.unbind(e.domElement,"webkitTransitionEnd",t),X.unbind(e.domElement,"transitionend",t),X.unbind(e.domElement,"oTransitionEnd",t)};X.bind(this.domElement,"webkitTransitionEnd",t),X.bind(this.domElement,"transitionend",t),X.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-X.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-X.getHeight(this.domElement)/2+"px"}}]),e}(),ue=function(e){if(e&&"undefined"!==typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");ie.inject(ue);var ce="Default",le=function(){try{return!!window.localStorage}catch(e){return!1}}(),he=void 0,pe=!0,fe=void 0,de=!1,me=[],ge=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),X.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=O.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=O.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),O.isUndefined(r.load)?r.load={preset:ce}:r.preset&&(r.load.preset=r.preset),O.isUndefined(r.parent)&&r.hideable&&me.push(this),r.resizable=O.isUndefined(r.parent)&&r.resizable,r.autoPlace&&O.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=le&&"true"===localStorage.getItem(b(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,k(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,E(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,a&&(a.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?X.addClass(n.__ul,e.CLASS_CLOSED):X.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(e){le&&(i=e,e?X.bind(window,"unload",o):X.unbind(window,"unload",o),localStorage.setItem(b(n,"isLocal"),e))}}}),O.isUndefined(r.parent)){if(this.closed=r.closed||!1,X.addClass(this.domElement,e.CLASS_MAIN),X.makeSelectable(this.domElement,!1),le&&i){n.useLocalStorage=!0;var s=localStorage.getItem(b(this,"gui"));s&&(r.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,X.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(X.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(X.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),X.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);X.addClass(u,"controller-name"),a=f(n,u);var c=function(e){return e.preventDefault(),n.closed=!n.closed,!1};X.addClass(this.__ul,e.CLASS_CLOSED),X.addClass(a,"title"),X.bind(a,"click",c),r.closed||(this.closed=!1)}r.autoPlace&&(O.isUndefined(r.parent)&&(pe&&(fe=document.createElement("div"),X.addClass(fe,"dg"),X.addClass(fe,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(fe),pe=!1),fe.appendChild(this.domElement),X.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||E(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},X.bind(window,"resize",this.__resizeHandler),X.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),X.bind(this.__ul,"transitionend",this.__resizeHandler),X.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&T(this),o=function(){le&&"true"===localStorage.getItem(b(n,"isLocal"))&&localStorage.setItem(b(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||function(){var e=n.getRoot();e.width+=1,O.defer(function(){e.width-=1})}()};ge.toggleHide=function(){de=!de,O.each(me,function(e){e.domElement.style.display=de?"none":""})},ge.CLASS_AUTO_PLACE="a",ge.CLASS_AUTO_PLACE_CONTAINER="ac",ge.CLASS_MAIN="main",ge.CLASS_CONTROLLER_ROW="cr",ge.CLASS_TOO_TALL="taller-than-window",ge.CLASS_CLOSED="closed",ge.CLASS_CLOSE_BUTTON="close-button",ge.CLASS_CLOSE_TOP="close-top",ge.CLASS_CLOSE_BOTTOM="close-bottom",ge.CLASS_DRAG="drag",ge.DEFAULT_WIDTH=245,ge.TEXT_CLOSED="Close Controls",ge.TEXT_OPEN="Open Controls",ge._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||ge.toggleHide()},X.bind(window,"keydown",ge._keydownHandler,!1),O.extend(ge.prototype,{add:function(e,t){return y(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return y(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;O.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&fe.removeChild(this.domElement);var e=this;O.each(this.__folders,function(t){e.removeFolder(t)}),X.unbind(window,"keydown",ge._keydownHandler,!1),d(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new ge(t);this.__folders[e]=n;var r=f(this,n.domElement);return X.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],d(e);var t=this;O.each(e.__folders,function(t){e.removeFolder(t)}),O.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=X.getOffset(e.__ul).top,n=0;O.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=X.getHeight(t))}),window.innerHeight-t-20<n?(X.addClass(e.domElement,ge.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(X.removeClass(e.domElement,ge.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&O.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:O.debounce(function(){this.onResize()},50),remember:function(){if(O.isUndefined(he)&&(he=new se,he.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;O.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&w(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&E(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=S(this)),e.folders={},O.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=S(this),m(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[ce]=S(this,!0)),this.load.remembered[e]=S(this),this.preset=e,_(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){O.each(this.__controllers,function(t){this.getRoot().load.remembered?v(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),O.each(this.__folders,function(e){e.revert(e)}),e||m(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&C(this.__listening)},updateDisplay:function(){O.each(this.__controllers,function(e){e.updateDisplay()}),O.each(this.__folders,function(e){e.updateDisplay()})}});var ve={Color:z,math:N,interpret:P},ye={Controller:H,BooleanController:K,OptionController:Q,StringController:J,NumberController:Z,NumberControllerBox:$,NumberControllerSlider:ee,FunctionController:te,ColorController:ne},be={dom:X},_e={GUI:ge},xe=ge},function(e,t,n){(function(n){var r,i,o=o||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t,n){if(0===e.length)return!1;var r=0;for(t=void 0!==t?t:o.now();r<e.length;)e[r].update(t)||n?r++:e.splice(r,1);return!0}}}();"undefined"===typeof window&&"undefined"!==typeof n?o.now=function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e){var t,n=e,r={},i={},a={},s=1e3,u=0,c=!1,l=!1,h=!1,p=0,f=null,d=o.Easing.Linear.None,m=o.Interpolation.Linear,g=[],v=null,y=!1,b=null,_=null,x=null;this.to=function(e,t){return i=e,void 0!==t&&(s=t),this},this.start=function(e){o.add(this),l=!0,y=!1,f=void 0!==e?e:o.now(),f+=p;for(var t in i){if(i[t]instanceof Array){if(0===i[t].length)continue;i[t]=[n[t]].concat(i[t])}void 0!==n[t]&&(r[t]=n[t],r[t]instanceof Array===!1&&(r[t]*=1),a[t]=r[t]||0)}return this},this.stop=function(){return l?(o.remove(this),l=!1,null!==x&&x.call(n,n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+s),this},this.stopChainedTweens=function(){for(var e=0,t=g.length;e<t;e++)g[e].stop()},this.delay=function(e){return p=e,this},this.repeat=function(e){return u=e,this},this.repeatDelay=function(e){return t=e,this},this.yoyo=function(e){return c=e,this},this.easing=function(e){return d=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return g=arguments,this},this.onStart=function(e){return v=e,this},this.onUpdate=function(e){return b=e,this},this.onComplete=function(e){return _=e,this},this.onStop=function(e){return x=e,this},this.update=function(e){var o,l,x;if(e<f)return!0;!1===y&&(null!==v&&v.call(n,n),y=!0),l=(e-f)/s,l=l>1?1:l,x=d(l);for(o in i)if(void 0!==r[o]){var w=r[o]||0,T=i[o];T instanceof Array?n[o]=m(T,x):("string"===typeof T&&(T="+"===T.charAt(0)||"-"===T.charAt(0)?w+parseFloat(T):parseFloat(T)),"number"===typeof T&&(n[o]=w+(T-w)*x))}if(null!==b&&b.call(n,x),1===l){if(u>0){isFinite(u)&&u--;for(o in a){if("string"===typeof i[o]&&(a[o]=a[o]+parseFloat(i[o])),c){var E=a[o];a[o]=i[o],i[o]=E}r[o]=a[o]}return c&&(h=!h),f=void 0!==t?e+t:e+p,!0}null!==_&&_.call(n,n);for(var S=0,k=g.length;S<k;S++)g[S].start(f+s);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},function(n){r=[],void 0!==(i=function(){return o}.apply(t,r))&&(e.exports=i)}()}).call(t,n(42))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.renderer=null,this.currentSession=null,this.device=null,this.cameraDepthFar=5e6,this.mode="",this.VRSupported=!1,this.setupDevice()}return i(e,[{key:"setRenderer",value:function(e){this.renderer=e}},{key:"setMode",value:function(e,t){this.VRSupported=!0,this.device=e,this.mode=t,this.renderer.vr.setDevice(e)}},{key:"setupDevice",value:function(){if("xr"in navigator)try{navigator.xr.requestDevice().then(function(e){e.supportsSession({immersive:!0,exclusive:!0}).then(function(){this.setMode(e,"XR")}.bind(this)).catch(this.VRNotFound.bind(this))}.bind(this)).catch(this.VRNotFound.bind(this))}catch(e){}else"getVRDisplays"in navigator?(window.addEventListener("vrdisplayconnect",function(e){this.setMode(e.display,"VR")}.bind(this),!1),window.addEventListener("vrdisplaydisconnect",function(e){this.VRNotFound.bind(this)},!1),window.addEventListener("vrdisplaypresentchange",function(e){},!1),window.addEventListener("vrdisplayactivate",function(e){e.display.requestPresent([{source:this.renderer.domElement}])},!1),navigator.getVRDisplays().then(function(e){e.length>0?this.setMode(e[0],"VR"):this.VRNotFound.bind(this)}.bind(this)).catch(this.VRNotFound.bind(this))):this.VRNotFound.bind(this)}},{key:"enterVR",value:function(){this.device.isPresenting?this.device.exitPresent():this.device.requestPresent([{source:this.renderer.domElement}])}},{key:"enterXR",value:function(){console.log("enterXR"),null===this.currentSession?this.device.requestSession({immersive:!0,exclusive:!0}).then(this.onXRSessionStarted.bind(this)):this.currentSession&&this.currentSession.end()}},{key:"onXRSessionStarted",value:function(e){e.addEventListener("end",this.onSessionEnded.bind(this)),this.renderer.vr.setSession(e),this.currentSession=e,this.currentSession.depthFar=this.cameraDepthFar}},{key:"onSessionEnded",value:function(){this.currentSession.removeEventListener("end",this.onSessionEnded),this.renderer.vr.setSession(null),this.currentSession=null}},{key:"startVRSession",value:function(){switch(console.log("startVRSession"),this.mode){case"VR":this.enterVR();break;case"XR":this.enterXR()}}},{key:"endVRSession",value:function(){switch(this.mode){case"VR":this.device.exitPresent();break;case"XR":this.currentSession&&this.currentSession.end()}}},{key:"VRNotFound",value:function(){this.VRSupported=!1}}]),e}();t.a=o},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,u){var c=this.vertices.length,l=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),p=this.parseVertexIndex(n,c);if(this.addVertex(l,h,p),void 0!==r&&""!==r){var f=this.uvs.length;l=this.parseUVIndex(r,f),h=this.parseUVIndex(i,f),p=this.parseUVIndex(o,f),this.addUV(l,h,p)}if(void 0!==a&&""!==a){var d=this.normals.length;l=this.parseNormalIndex(a,d),h=a===s?l:this.parseNormalIndex(s,d),p=a===u?l:this.parseNormalIndex(u,d),this.addNormal(l,h,p)}this.colors.length>0&&this.addColor(l,h,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));for(var a=0,s=t.length;a<s;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e}function t(e){this.manager=void 0!==e?e:r.DefaultLoadingManager,this.materials=null}var n=/^[og]\s*(.+)?/,i=/^mtllib /,o=/^usemtl /;return t.prototype={constructor:t,load:function(e,t,n,i){var o=this,a=new r.FileLoader(o.manager);a.setPath(this.path),a.load(e,function(e){t(o.parse(e))},n,i)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(t){console.time("OBJLoader");var a=new e;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var s=t.split("\n"),u="",c="",l=[],h="function"===typeof"".trimLeft,p=0,f=s.length;p<f;p++)if(u=s[p],u=h?u.trimLeft():u.trim(),0!==u.length&&"#"!==(c=u.charAt(0)))if("v"===c){var d=u.split(/\s+/);switch(d[0]){case"v":a.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),8===d.length&&a.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":a.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":a.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===c){for(var m=u.substr(1).trim(),g=m.split(/\s+/),v=[],y=0,b=g.length;y<b;y++){var _=g[y];if(_.length>0){var x=_.split("/");v.push(x)}}for(var w=v[0],T=1,E=v.length-1;T<E;T++){var S=v[T],k=v[T+1];a.addFace(w[0],S[0],k[0],w[1],S[1],k[1],w[2],S[2],k[2])}}else if("l"===c){var C=u.substring(1).trim().split(" "),M=[],A=[];if(-1===u.indexOf("/"))M=C;else for(var O=0,D=C.length;O<D;O++){var I=C[O].split("/");""!==I[0]&&M.push(I[0]),""!==I[1]&&A.push(I[1])}a.addLineGeometry(M,A)}else if("p"===c){var R=u.substr(1).trim(),P=R.split(" ");a.addPointGeometry(P)}else if(null!==(l=n.exec(u))){var L=(" "+l[0].substr(1).trim()).substr(1);a.startObject(L)}else if(o.test(u))a.object.startMaterial(u.substring(7).trim(),a.materialLibraries);else if(i.test(u))a.materialLibraries.push(u.substring(7).trim());else{if("s"!==c){if("\0"===u)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+u+'"')}if(l=u.split(" "),l.length>1){var N=l[1].trim().toLowerCase();a.object.smooth="0"!==N&&"off"!==N}else a.object.smooth=!0;var U=a.object.currentMaterial();U&&(U.smooth=a.object.smooth)}a.finalize();var F=new r.Group;F.materialLibraries=[].concat(a.materialLibraries);for(var B=0,j=a.objects.length;B<j;B++){var G=a.objects[B],V=G.geometry,z=G.materials,H="Line"===V.type,W="Points"===V.type,q=!1;if(0!==V.vertices.length){var Y=new r.BufferGeometry;Y.addAttribute("position",new r.Float32BufferAttribute(V.vertices,3)),V.normals.length>0?Y.addAttribute("normal",new r.Float32BufferAttribute(V.normals,3)):Y.computeVertexNormals(),V.colors.length>0&&(q=!0,Y.addAttribute("color",new r.Float32BufferAttribute(V.colors,3))),V.uvs.length>0&&Y.addAttribute("uv",new r.Float32BufferAttribute(V.uvs,2));for(var X=[],K=0,Q=z.length;K<Q;K++){var J=z[K],Z=void 0;if(null!==this.materials)if(Z=this.materials.create(J.name),!H||!Z||Z instanceof r.LineBasicMaterial){if(W&&Z&&!(Z instanceof r.PointsMaterial)){var $=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call($,Z),$.color.copy(Z.color),$.map=Z.map,$.lights=!1,Z=$}}else{var ee=new r.LineBasicMaterial;r.Material.prototype.copy.call(ee,Z),ee.color.copy(Z.color),ee.lights=!1,Z=ee}Z||(Z=H?new r.LineBasicMaterial:W?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial,Z.name=J.name),Z.flatShading=!J.smooth,Z.vertexColors=q?r.VertexColors:r.NoColors,X.push(Z)}var te=void 0;if(X.length>1){for(var ne=0,re=z.length;ne<re;ne++){var ie=z[ne];Y.addGroup(ie.groupStart,ie.groupCount,ne)}te=H?new r.LineSegments(Y,X):W?new r.Points(Y,X):new r.Mesh(Y,X)}else te=H?new r.LineSegments(Y,X[0]):W?new r.Points(Y,X[0]):new r.Mesh(Y,X[0]);te.name=G.name,F.add(te)}}return console.timeEnd("OBJLoader"),F}},t}();t.a=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.index=e,n.gamepad=null,n.axes=[0,0],n.thumbpadIsPressed=!1,n.triggerIsPressed=!1,n.gripsArePressed=!1,n.menuIsPressed=!1,n}return o(t,e),s(t,[{key:"findGamepad",value:function(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0;n<t.length;n++){var i=t[n];if(i&&("OpenVR Gamepad"===i.id||i.id.startsWith("Oculus Touch")||i.id.startsWith("Spatial Controller"))){if(r===e)return i;r++}}}},{key:"update",value:function(){this.gamepad=this.findGamepad(this.index),this.gamepad&&"undefined"!==typeof this.gamepad.buttons&&this.gamepad.buttons.length>1&&(this.axes[0]===this.gamepad.axes[0]&&this.axes[1]===this.gamepad.axes[1]||(this.axes[0]=this.gamepad.axes[0],this.axes[1]=this.gamepad.axes[1],this.dispatchEvent({type:"axischanged",axes:this.axes})),this.thumbpadIsPressed!==this.gamepad.buttons[0].pressed&&(this.thumbpadIsPressed=this.gamepad.buttons[0].pressed,this.dispatchEvent({type:this.thumbpadIsPressed?"thumbpaddown":"thumbpadup",axes:this.axes})),this.triggerIsPressed!==this.gamepad.buttons[1].pressed&&(this.triggerIsPressed=this.gamepad.buttons[1].pressed,this.dispatchEvent({type:this.triggerIsPressed?"triggerdown":"triggerup"})),this.gripsArePressed!==this.gamepad.buttons[2].pressed&&(this.gripsArePressed=this.gamepad.buttons[2].pressed,this.dispatchEvent({type:this.gripsArePressed?"gripsdown":"gripsup"})),this.menuIsPressed!==this.gamepad.buttons[3].pressed&&(this.menuIsPressed=this.gamepad.buttons[3].pressed,this.dispatchEvent({type:this.menuIsPressed?"menudown":"menuup"})))}}]),t}(a.Object3D);t.a=u},function(e,t,n){"use strict";(function(e){function r(e){var t=e?"string"===typeof e||e instanceof String?Object(Ge.a)(e):Object(Be.a)(e):new Date;return o(t)?t:null}function i(e,t,n,r){var i=null,a=x(n)||_(),s=!0;return Array.isArray(t)?(t.forEach(function(t){var n=Object(je.a)(e,t,new Date,{locale:a});r&&(s=o(n)&&e===Object(J.a)(n,t,{awareOfUnicodeTokens:!0})),o(n)&&s&&(i=n)}),i):(i=Object(je.a)(e,t,new Date,{locale:a}),r?s=o(i)&&e===Object(J.a)(i,t,{awareOfUnicodeTokens:!0}):o(i)||(t=t.match(Ze).map(function(e){var t=e[0];if("p"===t||"P"===t){var n=We[t];return a?n(e,a.formatLong):t}return e}).join(""),e.length>0&&(i=Object(je.a)(e,t.slice(0,e.length),new Date)),o(i)||(i=new Date(e))),o(i)&&s?i:null)}function o(e){return Object(Q.a)(e)&&Object(Ne.a)(e,new Date("1/1/1000"))}function a(e,t,n){if("en"===n)return Object(J.a)(e,t,{awareOfUnicodeTokens:!0});var r=x(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'+n+'"].'),!r&&_()&&x(_())&&(r=x(_())),Object(J.a)(e,t,{locale:r||null,awareOfUnicodeTokens:!0})}function s(e,t){var n=t.dateFormat,r=t.locale;return e&&a(e,Array.isArray(n)?n[0]:n,r)||""}function u(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,a=t.second,s=void 0===a?0:a;return Object(ye.a)(Object(ve.a)(Object(ge.a)(e,s),o),r)}function c(e){Object(ke.a)(e,1);return m(Object(De.a)(e),e)?Object(Se.a)(e,Object(Oe.a)(e))+1:1}function l(e,t){return a(e,"ddd",t)}function h(e){return Object(Ce.a)(e)}function p(e,t){var n=x(t?t:_());return Object(Me.a)(e,{locale:n})}function f(e){return Object(Ae.a)(e)}function d(){return Object(Ce.a)(r())}function m(e,t){return e&&t?Object(Le.a)(e,t):!e&&!t}function g(e,t){return e&&t?Object(Pe.a)(e,t):!e&&!t}function v(e,t){return e&&t?Object(Re.a)(e,t):!e&&!t}function y(e,t){return e&&t?Object(Ie.a)(e,t):!e&&!t}function b(e,t,n){var r=void 0;try{r=Object(Fe.a)(e,{start:t,end:n})}catch(e){r=!1}return r}function _(){return("undefined"!==typeof window?window:e).__localeId__}function x(t){if("string"===typeof t){var n="undefined"!==typeof window?window:e;return n.__localeData__?n.__localeData__[t]:null}return t}function w(e,t,n){return t(a(e,"EEEE",n))}function T(e,t){return a(e,"EEEEEE",t)}function E(e,t){return a(e,"EEE",t)}function S(e,t){return a(Object(be.a)(r(),e),"LLLL",t)}function k(e,t){return a(Object(be.a)(r(),e),"LLL",t)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,i=t.maxDate,o=t.excludeDates,a=t.includeDates,s=t.filterDate;return O(e,{minDate:n,maxDate:i})||o&&o.some(function(t){return v(e,t)})||a&&!a.some(function(t){return v(e,t)})||s&&!s(r(e))||!1}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,i=t.maxDate,o=t.excludeDates,a=t.includeDates,s=t.filterDate;return O(e,{minDate:n,maxDate:i})||o&&o.some(function(t){return g(e,t)})||a&&!a.some(function(t){return g(e,t)})||s&&!s(r(e))||!1}function A(e,t,n,r){var i=Object(de.a)(e),o=Object(fe.a)(e),a=Object(de.a)(t),s=Object(fe.a)(t),u=Object(de.a)(r);return i===a&&i===u?o<=n&&n<=s:i<a?u===i&&o<=n||u===a&&s>=n||u<a&&u>i:void 0}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&Object(Te.a)(e,n)<0||r&&Object(Te.a)(e,r)>0}function D(e,t){for(var n=t.length,r=0;r<n;r++)if(Object(le.a)(t[r])===Object(le.a)(e)&&Object(ce.a)(t[r])===Object(ce.a)(e))return!0;return!1}function I(e,t){var n=t.minTime,i=t.maxTime;if(!n||!i)throw new Error("Both minTime and maxTime props required");var o=r(),a=Object(ye.a)(Object(ve.a)(o,Object(ce.a)(e)),Object(le.a)(e)),s=Object(ye.a)(Object(ve.a)(o,Object(ce.a)(n)),Object(le.a)(n)),u=Object(ye.a)(Object(ve.a)(o,Object(ce.a)(i)),Object(le.a)(i)),c=void 0;try{c=!Object(Fe.a)(a,{start:s,end:u})}catch(e){c=!1}return c}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,i=Object(ae.a)(e,1);return n&&Object(Ee.a)(n,i)>0||r&&r.every(function(e){return Object(Ee.a)(e,i)>0})||!1}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,i=Object(ne.a)(e,1);return n&&Object(Ee.a)(i,n)>0||r&&r.every(function(e){return Object(Ee.a)(i,e)>0})||!1}function L(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(e){return Object(Te.a)(e,t)>=0});return Object(xe.a)(r)}return n?Object(xe.a)(n):t}function N(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(e){return Object(Te.a)(e,t)<=0});return Object(we.a)(r)}return n?Object(we.a)(n):t}function U(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,i=e.length;r<i;r++){var o=e[r];if(Object(K.a)(o)){var s=a(o,"MM.dd.yyyy"),u=n.get(s)||[];u.includes(t)||(u.push(t),n.set(s,u))}else if("object"===("undefined"===typeof o?"undefined":qe(o))){var c=Object.keys(o),l=c[0],h=o[c[0]];if("string"===typeof l&&h.constructor===Array)for(var p=0,f=h.length;p<f;p++){var d=a(h[p],"MM.dd.yyyy"),m=n.get(d)||[];m.includes(l)||(m.push(l),n.set(d,m))}}}return n}function F(e,t,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var u=Object(Z.a)(Object($.a)(e,Object(le.a)(i[s])),Object(ce.a)(i[s])),c=Object(Z.a)(e,(n+1)*r);Object(Ne.a)(u,t)&&Object(Ue.a)(u,c)&&a.push(i[s])}return a}function B(e){return e<10?"0"+e:""+e}function j(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;n&&(s=Object(de.a)(n)<=a),r&&s&&(s=Object(de.a)(r)>=a),s&&i.push(a)}return i}function G(e,t){for(var n=[],i=f(e),o=f(t);!Object(Ne.a)(i,o);)n.push(r(i)),i=Object(ne.a)(i,1);return n}function V(e){var t=e.className,n=e.children,r=e.arrowProps,i=void 0===r?{}:r;return W.a.createElement("div",{className:t},W.a.createElement("div",Ke({className:"react-datepicker__triangle"},i)),n)}function z(e,t){return e&&t?Object(fe.a)(e)!==Object(fe.a)(t)||Object(de.a)(e)!==Object(de.a)(t):e!==t}var H=n(5),W=n.n(H),q=n(72),Y=(n.n(q),n(155)),X=n.n(Y),K=n(156),Q=n(73),J=n(157),Z=n(82),$=n(83),ee=n(28),te=n(84),ne=n(29),re=n(86),ie=(n(172),n(173),n(174)),oe=n(175),ae=n(176),se=n(177),ue=n(178),ce=n(179),le=n(180),he=n(181),pe=n(182),fe=n(183),de=n(184),me=n(185),ge=n(186),ve=n(187),ye=n(188),be=n(189),_e=n(190),xe=n(191),we=n(192),Te=n(193),Ee=n(194),Se=n(195),ke=n(196),Ce=n(30),Me=n(87),Ae=n(197),Oe=n(198),De=n(199),Ie=(n(200),n(201)),Re=n(202),Pe=n(203),Le=n(204),Ne=n(205),Ue=n(206),Fe=n(207),Be=n(0),je=n(208),Ge=n(215),Ve=n(216),ze=n(217),He=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){function n(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function r(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function i(e,t){var i=e.match(/(P+)(p+)?/),o=i[1],a=i[2];if(!a)return n(e,t);var s;switch(o){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",n(o,t)).replace("{{time}}",r(a,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={p:r,P:i},a=o;t.default=a,e.exports=t.default}),We=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(He),qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Je=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},Ze=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$e=function(e){function t(n){Ye(this,t);var r=Je(this,e.call(this,n));r.renderOptions=function(){var e=r.props.year,t=r.state.yearsList.map(function(t){return W.a.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,ref:t,onClick:r.onChange.bind(r,t)},e===t?W.a.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)}),n=r.props.minDate?Object(de.a)(r.props.minDate):null,i=r.props.maxDate?Object(de.a)(r.props.maxDate):null;return i&&r.state.yearsList.find(function(e){return e===i})||t.unshift(W.a.createElement("div",{className:"react-datepicker__year-option",ref:"upcoming",key:"upcoming",onClick:r.incrementYears},W.a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&r.state.yearsList.find(function(e){return e===n})||t.push(W.a.createElement("div",{className:"react-datepicker__year-option",ref:"previous",key:"previous",onClick:r.decrementYears},W.a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},r.onChange=function(e){r.props.onChange(e)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(e){var t=r.state.yearsList.map(function(t){return t+e});r.setState({yearsList:t})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=n.yearDropdownItemNumber,o=n.scrollableYearDropdown,a=i||(o?10:5);return r.state={yearsList:j(r.props.year,a,r.props.minDate,r.props.maxDate)},r}return Qe(t,e),t.prototype.render=function(){var e=X()({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return W.a.createElement("div",{className:e},this.renderOptions())},t}(W.a.Component),et=Object(Ve.a)($e),tt=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var e=r.props.minDate?Object(de.a)(r.props.minDate):1900,t=r.props.maxDate?Object(de.a)(r.props.maxDate):2100,n=[],i=e;i<=t;i++)n.push(W.a.createElement("option",{key:i,value:i},i));return n},r.onSelectChange=function(e){r.onChange(e.target.value)},r.renderSelectMode=function(){return W.a.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(e){return W.a.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(e){return r.toggleDropdown(e)}},W.a.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),W.a.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return W.a.createElement(et,{key:"dropdown",ref:"options",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})},r.renderScrollMode=function(){var e=r.state.dropdownVisible,t=[r.renderReadView(!e)];return e&&t.unshift(r.renderDropdown()),t},r.onChange=function(e){r.toggleDropdown(),e!==r.props.year&&r.props.onChange(e)},r.toggleDropdown=function(e){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,e)})},r.handleYearChange=function(e,t){r.onSelect(e,t),r.setOpen()},r.onSelect=function(e,t){r.props.onSelect&&r.props.onSelect(e,t)},r.setOpen=function(){r.props.setOpen&&r.props.setOpen(!0)},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){var e=void 0;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return W.a.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--"+this.props.dropdownMode},e)},t}(W.a.Component),nt=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.renderOptions=function(){return r.props.monthNames.map(function(e,t){return W.a.createElement("div",{className:r.props.month===t?"react-datepicker__month-option --selected_month":"react-datepicker__month-option",key:e,ref:e,onClick:r.onChange.bind(r,t)},r.props.month===t?W.a.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)})},r.onChange=function(e){return r.props.onChange(e)},r.handleClickOutside=function(){return r.props.onCancel()},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){return W.a.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())},t}(W.a.Component),rt=Object(Ve.a)(nt),it=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.state={dropdownVisible:!1},r.renderSelectOptions=function(e){return e.map(function(e,t){return W.a.createElement("option",{key:t,value:t},e)})},r.renderSelectMode=function(e){return W.a.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(e){return r.onChange(e.target.value)}},r.renderSelectOptions(e))},r.renderReadView=function(e,t){return W.a.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},W.a.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),W.a.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},t[r.props.month]))},r.renderDropdown=function(e){return W.a.createElement(rt,{key:"dropdown",ref:"options",month:r.props.month,monthNames:e,onChange:r.onChange,onCancel:r.toggleDropdown})},r.renderScrollMode=function(e){var t=r.state.dropdownVisible,n=[r.renderReadView(!t,e)];return t&&n.unshift(r.renderDropdown(e)),n},r.onChange=function(e){r.toggleDropdown(),e!==r.props.month&&r.props.onChange(e)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){var e=this,t=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(t){return k(t,e.props.locale)}:function(t){return S(t,e.props.locale)}),n=void 0;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode(t);break;case"select":n=this.renderSelectMode(t)}return W.a.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--"+this.props.dropdownMode},n)},t}(W.a.Component),ot=function(e){function t(n){Ye(this,t);var r=Je(this,e.call(this,n));return r.renderOptions=function(){return r.state.monthYearsList.map(function(e){var t=Object(me.a)(e),n=m(r.props.date,e)&&g(r.props.date,e);return W.a.createElement("div",{className:n?"react-datepicker__month-year-option --selected_month-year":"react-datepicker__month-year-option",key:t,ref:t,onClick:r.onChange.bind(r,t)},n?W.a.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",a(e,r.props.dateFormat))})},r.onChange=function(e){return r.props.onChange(e)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:G(r.props.minDate,r.props.maxDate)},r}return Qe(t,e),t.prototype.render=function(){var e=X()({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return W.a.createElement("div",{className:e},this.renderOptions())},t}(W.a.Component),at=Object(Ve.a)(ot),st=function(e){function t(){var n,i,o;Ye(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=i=Je(this,e.call.apply(e,[this].concat(u))),i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var e=f(i.props.minDate),t=f(i.props.maxDate),n=[];!Object(Ne.a)(e,t);){var r=Object(me.a)(e);n.push(W.a.createElement("option",{key:r,value:r},a(e,i.props.dateFormat,i.props.locale))),e=Object(ne.a)(e,1)}return n},i.onSelectChange=function(e){i.onChange(e.target.value)},i.renderSelectMode=function(){return W.a.createElement("select",{value:Object(me.a)(f(i.props.date)),className:"react-datepicker__month-year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(e){var t=a(i.props.date,i.props.dateFormat,i.props.locale);return W.a.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(e){return i.toggleDropdown(e)}},W.a.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),W.a.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},t))},i.renderDropdown=function(){return W.a.createElement(at,{key:"dropdown",ref:"options",date:i.props.date,dateFormat:i.props.dateFormat,onChange:i.onChange,onCancel:i.toggleDropdown,minDate:i.props.minDate,maxDate:i.props.maxDate,scrollableMonthYearDropdown:i.props.scrollableMonthYearDropdown})},i.renderScrollMode=function(){var e=i.state.dropdownVisible,t=[i.renderReadView(!e)];return e&&t.unshift(i.renderDropdown()),t},i.onChange=function(e){i.toggleDropdown();var t=r(parseInt(e));m(i.props.date,t)&&g(i.props.date,t)||i.props.onChange(t)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},o=n,Je(i,o)}return Qe(t,e),t.prototype.render=function(){var e=void 0;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return W.a.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--"+this.props.dropdownMode},e)},t}(W.a.Component),ut=function(e){function t(){var n,i,o;Ye(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=i=Je(this,e.call.apply(e,[this].concat(u))),i.handleClick=function(e){!i.isDisabled()&&i.props.onClick&&i.props.onClick(e)},i.handleMouseEnter=function(e){!i.isDisabled()&&i.props.onMouseEnter&&i.props.onMouseEnter(e)},i.isSameDay=function(e){return v(i.props.day,e)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!i.props.inline&&!i.isSameDay(i.props.selected)&&i.isSameDay(i.props.preSelection)},i.isDisabled=function(){return C(i.props.day,i.props)},i.getHighLightedClass=function(e){var t=i.props,n=t.day,r=t.highlightDates;if(!r)return!1;var o=a(n,"MM.dd.yyyy");return r.get(o)},i.isInRange=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&b(t,n,r)},i.isInSelectingRange=function(){var e=i.props,t=e.day,n=e.selectsStart,r=e.selectsEnd,o=e.selectingDate,a=e.startDate,s=e.endDate;return!(!n&&!r||!o||i.isDisabled())&&(n&&s&&(Object(Ue.a)(o,s)||y(o,s))?b(t,o,s):!(!r||!a||!Object(Ne.a)(o,a)&&!y(o,a))&&b(t,a,o))},i.isSelectingRangeStart=function(){if(!i.isInSelectingRange())return!1;var e=i.props,t=e.day,n=e.selectingDate,r=e.startDate;return e.selectsStart?v(t,n):v(t,r)},i.isSelectingRangeEnd=function(){if(!i.isInSelectingRange())return!1;var e=i.props,t=e.day,n=e.selectingDate,r=e.endDate;return e.selectsEnd?v(t,n):v(t,r)},i.isRangeStart=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&v(n,t)},i.isRangeEnd=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&v(r,t)},i.isWeekend=function(){var e=Object(he.a)(i.props.day);return 0===e||6===e},i.isOutsideMonth=function(){return void 0!==i.props.month&&i.props.month!==Object(fe.a)(i.props.day)},i.getClassNames=function(e){var t=i.props.dayClassName?i.props.dayClassName(e):void 0;return X()("react-datepicker__day",t,"react-datepicker__day--"+l(i.props.day),{"react-datepicker__day--disabled":i.isDisabled(),"react-datepicker__day--selected":i.isSameDay(i.props.selected),"react-datepicker__day--keyboard-selected":i.isKeyboardSelected(),"react-datepicker__day--range-start":i.isRangeStart(),"react-datepicker__day--range-end":i.isRangeEnd(),"react-datepicker__day--in-range":i.isInRange(),"react-datepicker__day--in-selecting-range":i.isInSelectingRange(),"react-datepicker__day--selecting-range-start":i.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":i.isSelectingRangeEnd(),"react-datepicker__day--today":i.isSameDay(r()),"react-datepicker__day--weekend":i.isWeekend(),"react-datepicker__day--outside-month":i.isOutsideMonth()},i.getHighLightedClass("react-datepicker__day--highlighted"))},o=n,Je(i,o)}return Qe(t,e),t.prototype.render=function(){return W.a.createElement("div",{className:this.getClassNames(this.props.day),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,"aria-label":"day-"+Object(pe.a)(this.props.day),role:"option"},this.props.renderDayContents?this.props.renderDayContents(Object(pe.a)(this.props.day),this.props.day):Object(pe.a)(this.props.day))},t}(W.a.Component),ct=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.handleClick=function(e){r.props.onClick&&r.props.onClick(e)},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){var e={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!this.props.onClick};return W.a.createElement("div",{className:X()(e),"aria-label":"week-"+this.props.weekNumber,onClick:this.handleClick},this.props.weekNumber)},t}(W.a.Component),lt=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.handleDayClick=function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)},r.handleDayMouseEnter=function(e){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleWeekClick=function(e,t,n){"function"===typeof r.props.onWeekSelect&&r.props.onWeekSelect(e,t,n),r.props.shouldCloseOnSelect&&r.props.setOpen(!1)},r.formatWeekNumber=function(e){return r.props.formatWeekNumber?r.props.formatWeekNumber(e):c(e)},r.renderDays=function(){var e=p(r.props.day,r.props.locale),t=[],n=r.formatWeekNumber(e);if(r.props.showWeekNumber){var i=r.props.onWeekSelect?r.handleWeekClick.bind(r,e,n):void 0;t.push(W.a.createElement(ct,{key:"W",weekNumber:n,onClick:i}))}return t.concat([0,1,2,3,4,5,6].map(function(t){var n=Object(ee.a)(e,t);return W.a.createElement(ut,{key:t,day:n,month:r.props.month,onClick:r.handleDayClick.bind(r,n),onMouseEnter:r.handleDayMouseEnter.bind(r,n),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,inline:r.props.inline,highlightDates:r.props.highlightDates,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation})}))},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){return W.a.createElement("div",{className:"react-datepicker__week"},this.renderDays())},Xe(t,null,[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),t}(W.a.Component),ht=6,pt=function(e){function t(){var n,r,i;Ye(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Je(this,e.call.apply(e,[this].concat(a))),r.handleDayClick=function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t,r.props.orderInDisplay)},r.handleDayMouseEnter=function(e){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleMouseLeave=function(){r.props.onMouseLeave&&r.props.onMouseLeave()},r.isRangeStart=function(e){var t=r.props,n=t.day,i=t.startDate,o=t.endDate;return!(!i||!o)&&g(Object(be.a)(n,e),i)},r.isRangeEnd=function(e){var t=r.props,n=t.day,i=t.startDate,o=t.endDate;return!(!i||!o)&&g(Object(be.a)(n,e),o)},r.isWeekInMonth=function(e){var t=r.props.day,n=Object(ee.a)(e,6);return g(e,t)||g(n,t)},r.renderWeeks=function(){for(var e=[],t=r.props.fixedHeight,n=p(f(r.props.day),r.props.locale),i=0,o=!1;;){if(e.push(W.a.createElement(lt,{key:i,day:n,month:Object(fe.a)(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,inline:r.props.inline,highlightDates:r.props.highlightDates,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,showWeekNumber:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents})),o)break;i++,n=Object(te.a)(n,1);var a=t&&i>=ht,s=!t&&!r.isWeekInMonth(n);if(a||s){if(!r.props.peekNextMonth)break;o=!0}}return e},r.onMonthClick=function(e,t){r.handleDayClick(f(Object(be.a)(r.props.day,t),e))},r.getMonthClassNames=function(e){var t=r.props,n=t.day,i=t.startDate,o=t.endDate,a=t.selected,s=t.minDate,u=t.maxDate;return X()("react-datepicker__month-text","react-datepicker__month-"+e,{"react-datepicker__month--disabled":(s||u)&&M(Object(be.a)(n,e),r.props),"react-datepicker__month--selected":Object(fe.a)(n)===e&&Object(de.a)(n)===Object(de.a)(a),"react-datepicker__month--in-range":A(i,o,e,n),"react-datepicker__month--range-start":r.isRangeStart(e),"react-datepicker__month--range-end":r.isRangeEnd(e)})},r.renderMonths=function(){return[[0,1,2],[3,4,5],[6,7,8],[9,10,11]].map(function(e,t){return W.a.createElement("div",{className:"react-datepicker__month-wrapper",key:t},e.map(function(e,t){return W.a.createElement("div",{key:t,onClick:function(t){r.onMonthClick(t.target,e)},className:r.getMonthClassNames(e)},k(e,r.props.locale))}))})},r.getClassNames=function(){var e=r.props,t=e.selectingDate,n=e.selectsStart,i=e.selectsEnd,o=e.showMonthYearPicker;return X()("react-datepicker__month",{"react-datepicker__month--selecting-range":t&&(n||i)},{"react-datepicker__monthPicker":o})},i=n,Je(r,i)}return Qe(t,e),t.prototype.render=function(){var e=this.props.showMonthYearPicker;return W.a.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,role:"listbox","aria-label":"month-"+a(this.props.day,"yyyy-MM")},e?this.renderMonths():this.renderWeeks())},t}(W.a.Component),ft=function(e){function t(){var n,i,o;Ye(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=i=Je(this,e.call.apply(e,[this].concat(u))),i.state={height:null},i.handleClick=function(e){(i.props.minTime||i.props.maxTime)&&I(e,i.props)||i.props.excludeTimes&&D(e,i.props.excludeTimes)||i.props.includeTimes&&!D(e,i.props.includeTimes)||i.props.onChange(e)},i.liClasses=function(e,t,n){var r=["react-datepicker__time-list-item"];return t===Object(le.a)(e)&&n===Object(ce.a)(e)&&r.push("react-datepicker__time-list-item--selected"),((i.props.minTime||i.props.maxTime)&&I(e,i.props)||i.props.excludeTimes&&D(e,i.props.excludeTimes)||i.props.includeTimes&&!D(e,i.props.includeTimes))&&r.push("react-datepicker__time-list-item--disabled"),i.props.injectTimes&&(60*Object(le.a)(e)+Object(ce.a)(e))%i.props.intervals!==0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")},i.renderTimes=function(){for(var e=[],t=i.props.format?i.props.format:"p",n=i.props.intervals,o=i.props.selected?i.props.selected:r(),s=Object(le.a)(o),u=Object(ce.a)(o),c=h(r()),l=1440/n,p=i.props.injectTimes&&i.props.injectTimes.sort(function(e,t){return e-t}),f=0;f<l;f++){var d=Object(Z.a)(c,f*n);if(e.push(d),p){var m=F(c,d,f,n,p);e=e.concat(m)}}return e.map(function(e,n){return W.a.createElement("li",{key:n,onClick:i.handleClick.bind(i,e),className:i.liClasses(e,s,u),ref:function(t){(s===Object(le.a)(e)&&u===Object(ce.a)(e)||s===Object(le.a)(e)&&!i.centerLi)&&(i.centerLi=t)}},a(e,t,i.props.locale))})},o=n,Je(i,o)}return Qe(t,e),t.prototype.componentDidMount=function(){this.list.scrollTop=t.calcCenterPosition(this.props.monthRef?this.props.monthRef.clientHeight-this.header.clientHeight:this.list.clientHeight,this.centerLi),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e=this,t=this.state.height;return W.a.createElement("div",{className:"react-datepicker__time-container "+(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},W.a.createElement("div",{className:"react-datepicker__header react-datepicker__header--time",ref:function(t){e.header=t}},W.a.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),W.a.createElement("div",{className:"react-datepicker__time"},W.a.createElement("div",{className:"react-datepicker__time-box"},W.a.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{}},this.renderTimes.bind(this)()))))},Xe(t,null,[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),t}(W.a.Component);ft.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)};var dt=function(e){function t(n){Ye(this,t);var r=Je(this,e.call(this,n));return r.onTimeChange=function(e){r.setState({time:e});var t=new Date;t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),r.props.onChange(t)},r.state={time:r.props.timeString},r}return Qe(t,e),t.prototype.render=function(){var e=this,t=this.state.time,n=this.props.timeString;return W.a.createElement("div",{className:"react-datepicker__input-time-container"},W.a.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),W.a.createElement("div",{className:"react-datepicker-time__input-container"},W.a.createElement("div",{className:"react-datepicker-time__input"},W.a.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:t,onChange:function(t){e.onTimeChange(t.target.value||n)}}))))},t}(W.a.Component),mt=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.className||"").split(/\s+/);return mt.some(function(e){return t.indexOf(e)>=0})},vt=function(e){function t(n){Ye(this,t);var i=Je(this,e.call(this,n));return i.handleClickOutside=function(e){i.props.onClickOutside(e)},i.handleDropdownFocus=function(e){gt(e.target)&&i.props.onDropdownFocus()},i.getDateInView=function(){var e=i.props,t=e.preSelection,n=e.selected,o=e.openToDate,a=L(i.props),s=N(i.props),u=r(),c=o||n||t;return c||(a&&Object(Ue.a)(u,a)?a:s&&Object(Ne.a)(u,s)?s:u)},i.increaseMonth=function(){i.setState({date:Object(ne.a)(i.state.date,1)},function(){return i.handleMonthChange(i.state.date)})},i.decreaseMonth=function(){i.setState({date:Object(ae.a)(i.state.date,1)},function(){return i.handleMonthChange(i.state.date)})},i.handleDayClick=function(e,t,n){return i.props.onSelect(e,t,n)},i.handleDayMouseEnter=function(e){i.setState({selectingDate:e}),i.props.onDayMouseEnter&&i.props.onDayMouseEnter(e)},i.handleMonthMouseLeave=function(){i.setState({selectingDate:null}),i.props.onMonthMouseLeave&&i.props.onMonthMouseLeave()},i.handleYearChange=function(e){i.props.onYearChange&&i.props.onYearChange(e)},i.handleMonthChange=function(e){i.props.onMonthChange&&i.props.onMonthChange(e),i.props.adjustDateOnChange&&(i.props.onSelect&&i.props.onSelect(e),i.props.setOpen&&i.props.setOpen(!0))},i.handleMonthYearChange=function(e){i.handleYearChange(e),i.handleMonthChange(e)},i.changeYear=function(e){i.setState({date:Object(_e.a)(i.state.date,e)},function(){return i.handleYearChange(i.state.date)})},i.changeMonth=function(e){i.setState({date:Object(be.a)(i.state.date,e)},function(){return i.handleMonthChange(i.state.date)})},i.changeMonthYear=function(e){i.setState({date:Object(_e.a)(Object(be.a)(i.state.date,Object(fe.a)(e)),Object(de.a)(e))},function(){return i.handleMonthYearChange(i.state.date)})},i.header=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.date,t=p(e,i.props.locale),n=[];return i.props.showWeekNumbers&&n.push(W.a.createElement("div",{key:"W",className:"react-datepicker__day-name"},i.props.weekLabel||"#")),n.concat([0,1,2,3,4,5,6].map(function(e){var n=Object(ee.a)(t,e),r=i.formatWeekday(n,i.props.locale);return W.a.createElement("div",{key:e,className:"react-datepicker__day-name"},r)}))},i.formatWeekday=function(e,t){return i.props.formatWeekDay?w(e,i.props.formatWeekDay,t):i.props.useWeekdaysShort?E(e,t):T(e,t)},i.decreaseYear=function(){i.setState({date:Object(se.a)(i.state.date,1)},function(){return i.handleYearChange(i.state.date)})},i.renderPreviousButton=function(){if(!i.props.renderCustomHeader){var e=R(i.state.date,i.props);if((i.props.forceShowMonthNavigation||i.props.showDisabledMonthNavigation||!e)&&!i.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=i.decreaseMonth;return i.props.showMonthYearPicker&&(n=i.decreaseYear),e&&i.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null),W.a.createElement("button",{type:"button",className:t.join(" "),onClick:n},i.props.showMonthYearPicker?i.props.previousYearButtonLabel:i.props.previousMonthButtonLabel)}}},i.increaseYear=function(){i.setState({date:Object(re.a)(i.state.date,1)},function(){return i.handleYearChange(i.state.date)})},i.renderNextButton=function(){if(!i.props.renderCustomHeader){var e=P(i.state.date,i.props);if((i.props.forceShowMonthNavigation||i.props.showDisabledMonthNavigation||!e)&&!i.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];i.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),i.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=i.increaseMonth;return i.props.showMonthYearPicker&&(n=i.increaseYear),e&&i.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null),W.a.createElement("button",{type:"button",className:t.join(" "),onClick:n},i.props.showMonthYearPicker?i.props.nextYearButtonLabel:i.props.nextMonthButtonLabel)}}},i.renderCurrentMonth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.date,t=["react-datepicker__current-month"];return i.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),i.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),i.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),W.a.createElement("div",{className:t.join(" ")},a(e,i.props.dateFormat,i.props.locale))},i.renderYearDropdown=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i.props.showYearDropdown&&!e)return W.a.createElement(tt,{adjustDateOnChange:i.props.adjustDateOnChange,date:i.state.date,onSelect:i.props.onSelect,setOpen:i.props.setOpen,dropdownMode:i.props.dropdownMode,onChange:i.changeYear,minDate:i.props.minDate,maxDate:i.props.maxDate,year:Object(de.a)(i.state.date),scrollableYearDropdown:i.props.scrollableYearDropdown,yearDropdownItemNumber:i.props.yearDropdownItemNumber})},i.renderMonthDropdown=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i.props.showMonthDropdown&&!e)return W.a.createElement(it,{dropdownMode:i.props.dropdownMode,locale:i.props.locale,onChange:i.changeMonth,month:Object(fe.a)(i.state.date),useShortMonthInDropdown:i.props.useShortMonthInDropdown})},i.renderMonthYearDropdown=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i.props.showMonthYearDropdown&&!e)return W.a.createElement(st,{dropdownMode:i.props.dropdownMode,locale:i.props.locale,dateFormat:i.props.dateFormat,onChange:i.changeMonthYear,minDate:i.props.minDate,maxDate:i.props.maxDate,date:i.state.date,scrollableMonthYearDropdown:i.props.scrollableMonthYearDropdown})},i.renderTodayButton=function(){if(i.props.todayButton&&!i.props.showTimeSelectOnly)return W.a.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return i.props.onSelect(d(),e)}},i.props.todayButton)},i.renderDefaultHeader=function(e){var t=e.monthDate,n=e.i;return W.a.createElement("div",{className:"react-datepicker__header"},i.renderCurrentMonth(t),W.a.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--"+i.props.dropdownMode,onFocus:i.handleDropdownFocus},i.renderMonthDropdown(0!==n),i.renderMonthYearDropdown(0!==n),i.renderYearDropdown(0!==n)),W.a.createElement("div",{className:"react-datepicker__day-names"},i.header(t)))},i.renderCustomHeader=function(e){var t=e.monthDate;if(0!==e.i)return null;var n=R(i.state.date,i.props),r=P(i.state.date,i.props);return W.a.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:i.props.onDropdownFocus},i.props.renderCustomHeader(Ke({},i.state,{changeMonth:i.changeMonth,changeYear:i.changeYear,decreaseMonth:i.decreaseMonth,increaseMonth:i.increaseMonth,prevMonthButtonDisabled:n,nextMonthButtonDisabled:r})),W.a.createElement("div",{className:"react-datepicker__day-names"},i.header(t)))},i.renderYearHeader=function(){return W.a.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},Object(de.a)(i.state.date))},i.renderMonths=function(){if(!i.props.showTimeSelectOnly){for(var e=[],t=0;t<i.props.monthsShown;++t){var n=t-i.props.monthSelectedIn,r=Object(ne.a)(i.state.date,n),o="month-"+t;e.push(W.a.createElement("div",{key:o,ref:function(e){i.monthContainer=e},className:"react-datepicker__month-container"},i.props.showMonthYearPicker?i.renderYearHeader({monthDate:r,i:t}):i.props.renderCustomHeader?i.renderCustomHeader({monthDate:r,i:t}):i.renderDefaultHeader({monthDate:r,i:t}),W.a.createElement(pt,{onChange:i.changeMonthYear,day:r,dayClassName:i.props.dayClassName,onDayClick:i.handleDayClick,onDayMouseEnter:i.handleDayMouseEnter,onMouseLeave:i.handleMonthMouseLeave,onWeekSelect:i.props.onWeekSelect,orderInDisplay:t,formatWeekNumber:i.props.formatWeekNumber,locale:i.props.locale,minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,highlightDates:i.props.highlightDates,selectingDate:i.state.selectingDate,includeDates:i.props.includeDates,inline:i.props.inline,fixedHeight:i.props.fixedHeight,filterDate:i.props.filterDate,preSelection:i.props.preSelection,selected:i.props.selected,selectsStart:i.props.selectsStart,selectsEnd:i.props.selectsEnd,showWeekNumbers:i.props.showWeekNumbers,startDate:i.props.startDate,endDate:i.props.endDate,peekNextMonth:i.props.peekNextMonth,setOpen:i.props.setOpen,shouldCloseOnSelect:i.props.shouldCloseOnSelect,renderDayContents:i.props.renderDayContents,disabledKeyboardNavigation:i.props.disabledKeyboardNavigation,showMonthYearPicker:i.props.showMonthYearPicker})))}return e}},i.renderTimeSection=function(){if(i.props.showTimeSelect&&(i.state.monthContainer||i.props.showTimeSelectOnly))return W.a.createElement(ft,{selected:i.props.selected,onChange:i.props.onTimeChange,format:i.props.timeFormat,includeTimes:i.props.includeTimes,intervals:i.props.timeIntervals,minTime:i.props.minTime,maxTime:i.props.maxTime,excludeTimes:i.props.excludeTimes,timeCaption:i.props.timeCaption,todayButton:i.props.todayButton,showMonthDropdown:i.props.showMonthDropdown,showMonthYearDropdown:i.props.showMonthYearDropdown,showYearDropdown:i.props.showYearDropdown,withPortal:i.props.withPortal,monthRef:i.state.monthContainer,injectTimes:i.props.injectTimes,locale:i.props.locale})},i.renderInputTimeSection=function(){var e=new Date(i.props.selected),t=B(e.getHours())+":"+B(e.getMinutes());if(i.props.showTimeInput)return W.a.createElement(dt,{timeString:t,timeInputLabel:i.props.timeInputLabel,onChange:i.props.onTimeChange})},i.state={date:i.getDateInView(),selectingDate:null,monthContainer:null},i}return Qe(t,e),Xe(t,null,[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,monthSelectedIn:0,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month"}}}]),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){e.setState({monthContainer:e.monthContainer})}())},t.prototype.componentDidUpdate=function(e){this.props.preSelection&&!v(this.props.preSelection,e.preSelection)?this.setState({date:this.props.preSelection}):this.props.openToDate&&!v(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var e=this.props.container||V;return W.a.createElement(e,{className:X()("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly})},this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.props.children)},t}(W.a.Component),yt=function(e){function t(){return Ye(this,t),Je(this,e.apply(this,arguments))}return Qe(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.hidePopper,r=e.popperComponent,i=e.popperModifiers,o=e.popperPlacement,a=e.popperProps,s=e.targetComponent,u=void 0;if(!n){var c=X()("react-datepicker-popper",t);u=W.a.createElement(ze.b,Ke({modifiers:i,placement:o},a),function(e){var t=e.ref,n=e.style,i=e.placement,o=e.arrowProps;return W.a.createElement("div",Ke({ref:t,style:n},{className:c,"data-placement":i}),W.a.cloneElement(r,{arrowProps:o}))})}return this.props.popperContainer&&(u=W.a.createElement(this.props.popperContainer,{},u)),W.a.createElement(ze.a,null,W.a.createElement(ze.c,null,function(e){var t=e.ref;return W.a.createElement("div",{ref:t,className:"react-datepicker-wrapper"},s)}),u)},Xe(t,null,[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!0,boundariesElement:"viewport"}},popperProps:{},popperPlacement:"bottom-start"}}}]),t}(W.a.Component),bt="react-datepicker-ignore-onclickoutside",_t=Object(Ve.a)(vt),xt="Date input not valid.",wt=function(e){function t(n){Ye(this,t);var o=Je(this,e.call(this,n));return o.getPreSelection=function(){return o.props.openToDate?o.props.openToDate:o.props.selectsEnd&&o.props.startDate?o.props.startDate:o.props.selectsStart&&o.props.endDate?o.props.endDate:r()},o.calcInitialState=function(){var e=o.getPreSelection(),t=L(o.props),n=N(o.props),r=t&&Object(Ue.a)(e,t)?t:n&&Object(Ne.a)(e,n)?n:e;return{open:o.props.startOpen||!1,preventFocus:!1,preSelection:o.props.selected?o.props.selected:r,highlightDates:U(o.props.highlightDates),focused:!1}},o.clearPreventFocusTimeout=function(){o.preventFocusTimeout&&clearTimeout(o.preventFocusTimeout)},o.setFocus=function(){o.input&&o.input.focus&&o.input.focus()},o.setBlur=function(){o.input&&o.input.blur&&o.input.blur(),o.cancelFocusInput()},o.setOpen=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.setState({open:e,preSelection:e&&o.state.open?o.state.preSelection:o.calcInitialState().preSelection,lastPreSelectChange:Et},function(){e||o.setState(function(e){return{focused:!!t&&e.focused}},function(){!t&&o.setBlur(),o.setState({inputValue:null})})})},o.inputOk=function(){return Object(K.a)(o.state.preSelection)},o.isCalendarOpen=function(){return void 0===o.props.open?o.state.open&&!o.props.disabled&&!o.props.readOnly:o.props.open},o.handleFocus=function(e){o.state.preventFocus||(o.props.onFocus(e),o.props.preventOpenOnFocus||o.props.readOnly||o.setOpen(!0)),o.setState({focused:!0})},o.cancelFocusInput=function(){clearTimeout(o.inputFocusTimeout),o.inputFocusTimeout=null},o.deferFocusInput=function(){o.cancelFocusInput(),o.inputFocusTimeout=setTimeout(function(){return o.setFocus()},1)},o.handleDropdownFocus=function(){o.cancelFocusInput()},o.handleBlur=function(e){!o.state.open||o.props.withPortal||o.props.showTimeInput?o.props.onBlur(e):o.deferFocusInput(),o.setState({focused:!1})},o.handleCalendarClickOutside=function(e){o.props.inline||o.setOpen(!1),o.props.onClickOutside(e),o.props.withPortal&&e.preventDefault()},o.handleChange=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(!o.props.onChangeRaw||(o.props.onChangeRaw.apply(o,t),"function"===typeof r.isDefaultPrevented&&!r.isDefaultPrevented())){o.setState({inputValue:r.target.value,lastPreSelectChange:Tt});var a=i(r.target.value,o.props.dateFormat,o.props.locale,o.props.strictParsing);!a&&r.target.value||o.setSelected(a,r,!0)}},o.handleSelect=function(e,t,n){o.setState({preventFocus:!0},function(){return o.preventFocusTimeout=setTimeout(function(){return o.setState({preventFocus:!1})},50),o.preventFocusTimeout}),o.setSelected(e,t,void 0,n),!o.props.shouldCloseOnSelect||o.props.showTimeSelect?o.setPreSelection(e):o.props.inline||o.setOpen(!1)},o.setSelected=function(e,t,n,i){var a=e;if(null===a||!C(a,o.props)){if(!y(o.props.selected,a)||o.props.allowSameDay){if(null!==a){if(o.props.selected){var s=o.props.selected;n&&(s=r(a)),a=u(a,{hour:Object(le.a)(s),minute:Object(ce.a)(s),second:Object(ue.a)(s)})}o.props.inline||o.setState({preSelection:a}),o.props.inline&&o.props.monthsShown>1&&!o.props.inlineFocusSelectedMonth&&o.setState({monthSelectedIn:i})}o.props.onChange(a,t)}o.props.onSelect(a,t),n||o.setState({inputValue:null})}},o.setPreSelection=function(e){var t="undefined"!==typeof o.props.minDate,n="undefined"!==typeof o.props.maxDate,r=!0;e&&(t&&n?r=b(e,o.props.minDate,o.props.maxDate):t?r=Object(Ne.a)(e,o.props.minDate):n&&(r=Object(Ue.a)(e,o.props.maxDate))),r&&o.setState({preSelection:e})},o.handleTimeChange=function(e){var t=o.props.selected?o.props.selected:o.getPreSelection(),n=u(t,{hour:Object(le.a)(e),minute:Object(ce.a)(e)});o.setState({preSelection:n}),o.props.onChange(n),o.props.shouldCloseOnSelect&&o.setOpen(!1),o.props.showTimeInput&&o.setOpen(!0),o.setState({inputValue:null})},o.onInputClick=function(){o.props.disabled||o.props.readOnly||o.setOpen(!0),o.props.onInputClick()},o.onInputKeyDown=function(e){o.props.onKeyDown(e);var t=e.key;if(!o.state.open&&!o.props.inline&&!o.props.preventOpenOnFocus)return void("ArrowDown"!==t&&"ArrowUp"!==t||o.onInputClick());var n=r(o.state.preSelection);if("Enter"===t)e.preventDefault(),o.inputOk()&&o.state.lastPreSelectChange===Et?(o.handleSelect(n,e),!o.props.shouldCloseOnSelect&&o.setPreSelection(n)):o.setOpen(!1);else if("Escape"===t)e.preventDefault(),o.setOpen(!1),o.inputOk()||o.props.onInputError({code:1,msg:xt});else if("Tab"===t)o.setOpen(!1,!0);else if(!o.props.disabledKeyboardNavigation){var i=void 0;switch(t){case"ArrowLeft":i=Object(ie.a)(n,1);break;case"ArrowRight":i=Object(ee.a)(n,1);break;case"ArrowUp":i=Object(oe.a)(n,1);break;case"ArrowDown":i=Object(te.a)(n,1);break;case"PageUp":i=Object(ae.a)(n,1);break;case"PageDown":i=Object(ne.a)(n,1);break;case"Home":i=Object(se.a)(n,1);break;case"End":i=Object(re.a)(n,1)}if(!i)return void(o.props.onInputError&&o.props.onInputError({code:1,msg:xt}));e.preventDefault(),o.setState({lastPreSelectChange:Et}),o.props.adjustDateOnChange&&o.setSelected(i),o.setPreSelection(i)}},o.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),o.props.onChange(null,e),o.setState({inputValue:null})},o.clear=function(){o.onClearClick()},o.renderCalendar=function(){return o.props.inline||o.isCalendarOpen()?W.a.createElement(_t,{ref:function(e){o.calendar=e},locale:o.props.locale,adjustDateOnChange:o.props.adjustDateOnChange,setOpen:o.setOpen,shouldCloseOnSelect:o.props.shouldCloseOnSelect,dateFormat:o.props.dateFormatCalendar,useWeekdaysShort:o.props.useWeekdaysShort,formatWeekDay:o.props.formatWeekDay,dropdownMode:o.props.dropdownMode,selected:o.props.selected,preSelection:o.state.preSelection,onSelect:o.handleSelect,onWeekSelect:o.props.onWeekSelect,openToDate:o.props.openToDate,minDate:o.props.minDate,maxDate:o.props.maxDate,selectsStart:o.props.selectsStart,selectsEnd:o.props.selectsEnd,startDate:o.props.startDate,endDate:o.props.endDate,excludeDates:o.props.excludeDates,filterDate:o.props.filterDate,onClickOutside:o.handleCalendarClickOutside,formatWeekNumber:o.props.formatWeekNumber,highlightDates:o.state.highlightDates,includeDates:o.props.includeDates,includeTimes:o.props.includeTimes,injectTimes:o.props.injectTimes,inline:o.props.inline,peekNextMonth:o.props.peekNextMonth,showMonthDropdown:o.props.showMonthDropdown,useShortMonthInDropdown:o.props.useShortMonthInDropdown,showMonthYearDropdown:o.props.showMonthYearDropdown,showWeekNumbers:o.props.showWeekNumbers,showYearDropdown:o.props.showYearDropdown,withPortal:o.props.withPortal,forceShowMonthNavigation:o.props.forceShowMonthNavigation,showDisabledMonthNavigation:o.props.showDisabledMonthNavigation,scrollableYearDropdown:o.props.scrollableYearDropdown,scrollableMonthYearDropdown:o.props.scrollableMonthYearDropdown,todayButton:o.props.todayButton,weekLabel:o.props.weekLabel,outsideClickIgnoreClass:bt,fixedHeight:o.props.fixedHeight,monthsShown:o.props.monthsShown,monthSelectedIn:o.state.monthSelectedIn,onDropdownFocus:o.handleDropdownFocus,onMonthChange:o.props.onMonthChange,onYearChange:o.props.onYearChange,dayClassName:o.props.dayClassName,showTimeSelect:o.props.showTimeSelect,showTimeSelectOnly:o.props.showTimeSelectOnly,onTimeChange:o.handleTimeChange,timeFormat:o.props.timeFormat,timeIntervals:o.props.timeIntervals,minTime:o.props.minTime,maxTime:o.props.maxTime,excludeTimes:o.props.excludeTimes,timeCaption:o.props.timeCaption,className:o.props.calendarClassName,container:o.props.calendarContainer,yearDropdownItemNumber:o.props.yearDropdownItemNumber,previousMonthButtonLabel:o.props.previousMonthButtonLabel,nextMonthButtonLabel:o.props.nextMonthButtonLabel,timeInputLabel:o.props.timeInputLabel,disabledKeyboardNavigation:o.props.disabledKeyboardNavigation,renderCustomHeader:o.props.renderCustomHeader,popperProps:o.props.popperProps,renderDayContents:o.props.renderDayContents,onDayMouseEnter:o.props.onDayMouseEnter,onMonthMouseLeave:o.props.onMonthMouseLeave,showTimeInput:o.props.showTimeInput,showMonthYearPicker:o.props.showMonthYearPicker},o.props.children):null},o.renderDateInput=function(){var e,t,n=X()(o.props.className,(e={},e[bt]=o.state.open,e)),r=o.props.customInput||W.a.createElement("input",{type:"text"}),i=o.props.customInputRef||"ref",a="string"===typeof o.props.value?o.props.value:"string"===typeof o.state.inputValue?o.state.inputValue:s(o.props.selected,o.props);return W.a.cloneElement(r,(t={},t[i]=function(e){o.input=e},t.value=a,t.onBlur=o.handleBlur,t.onChange=o.handleChange,t.onClick=o.onInputClick,t.onFocus=o.handleFocus,t.onKeyDown=o.onInputKeyDown,t.id=o.props.id,t.name=o.props.name,t.autoFocus=o.props.autoFocus,t.placeholder=o.props.placeholderText,t.disabled=o.props.disabled,t.autoComplete=o.props.autoComplete,t.className=n,t.title=o.props.title,t.readOnly=o.props.readOnly,t.required=o.props.required,t.tabIndex=o.props.tabIndex,t))},o.renderClearButton=function(){return o.props.isClearable&&null!=o.props.selected?W.a.createElement("button",{type:"button",className:"react-datepicker__close-icon",onClick:o.onClearClick,title:o.props.clearButtonTitle,tabIndex:-1}):null},o.state=o.calcInitialState(),o}return Qe(t,e),Xe(t,null,[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showMonthYearPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next month",timeInputLabel:"Time",renderDayContents:function(e){return e},inlineFocusSelectedMonth:!1}}}]),t.prototype.componentDidUpdate=function(e,t){e.inline&&z(e.selected,this.props.selected)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:U(this.props.highlightDates)}),t.focused||y(e.selected,this.props.selected)||this.setState({inputValue:null})},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout()},t.prototype.render=function(){var e=this.renderCalendar();return this.props.inline&&!this.props.withPortal?e:this.props.withPortal?W.a.createElement("div",null,this.props.inline?null:W.a.createElement("div",{className:"react-datepicker__input-container"},this.renderDateInput(),this.renderClearButton()),this.state.open||this.props.inline?W.a.createElement("div",{className:"react-datepicker__portal"},e):null):W.a.createElement(yt,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),popperModifiers:this.props.popperModifiers,targetComponent:W.a.createElement("div",{className:"react-datepicker__input-container"},this.renderDateInput(),this.renderClearButton()),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps})},t}(W.a.Component),Tt="input",Et="navigate";t.a=wt}).call(t,n(7))},function(e,t,n){"use strict";function r(){}function i(){}var o=n(154);i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r,i;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=n.apply(null,r);a&&e.push(a)}else if("object"===i)for(var s in r)o.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(i=function(){return n}.apply(t,r))&&(e.exports=i))}()},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}t.a=r},function(e,t,n){"use strict";function r(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(t),g=n||{},v=g.locale||a.a,b=v.options&&v.options.firstWeekContainsDate,_=null==b?1:Object(f.a)(b),x=null==g.firstWeekContainsDate?_:Object(f.a)(g.firstWeekContainsDate);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=v.options&&v.options.weekStartsOn,T=null==w?0:Object(f.a)(w),E=null==g.weekStartsOn?T:Object(f.a)(g.weekStartsOn);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!v.localize)throw new RangeError("locale must contain localize property");if(!v.formatLong)throw new RangeError("locale must contain formatLong property");var S=Object(u.a)(e);if(!Object(o.a)(S))throw new RangeError("Invalid time value");var k=Object(h.a)(S),C=Object(s.a)(S,k),M={firstWeekContainsDate:x,weekStartsOn:E,locale:v,_originalDate:S};return r.match(m).map(function(e){var t=e[0];if("p"===t||"P"===t){return(0,l.a[t])(e,v.formatLong,M)}return e}).join("").match(d).map(function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return i(e);var n=c.a[t];if(n)return!g.useAdditionalWeekYearTokens&&Object(p.b)(e)&&Object(p.c)(e),!g.useAdditionalDayOfYearTokens&&Object(p.a)(e)&&Object(p.c)(e),n(C,e,v.localize,M);if(t.match(y))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e}).join("")}function i(e){return e.match(g)[1].replace(v,"'")}t.a=r;var o=n(73),a=n(74),s=n(75),u=n(0),c=n(167),l=n(80),h=n(11),p=n(81),f=n(1),d=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g=/^'(.*?)'?$/,v=/''/g,y=/[a-zA-Z]/},function(e,t,n){"use strict";function r(e,t,n){n=n||{};var r;return r="string"===typeof i[e]?i[e]:1===t?i[e].one:i[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r}t.a=r;var i={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}}},function(e,t,n){"use strict";var r=n(160),i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},o={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},a={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},s={date:Object(r.a)({formats:i,defaultWidth:"full"}),time:Object(r.a)({formats:o,defaultWidth:"full"}),dateTime:Object(r.a)({formats:a,defaultWidth:"full"})};t.a=s},function(e,t,n){"use strict";function r(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}t.a=r},function(e,t,n){"use strict";function r(e,t,n,r){return i[e]}t.a=r;var i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"}},function(e,t,n){"use strict";function r(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"}var i=n(163),o={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},a={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},s={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},u={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},h={ordinalNumber:r,era:Object(i.a)({values:o,defaultWidth:"wide"}),quarter:Object(i.a)({values:a,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Object(i.a)({values:s,defaultWidth:"wide"}),day:Object(i.a)({values:u,defaultWidth:"wide"}),dayPeriod:Object(i.a)({values:c,defaultWidth:"wide",formattingValues:l,defaultFormattingWidth:"wide"})};t.a=h},function(e,t,n){"use strict";function r(e){return function(t,n){var r,i=n||{},o=i.context?String(i.context):"standalone";if("formatting"===o&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=i.width?String(i.width):a;r=e.formattingValues[s]||e.formattingValues[a]}else{var u=e.defaultWidth,c=i.width?String(i.width):e.defaultWidth;r=e.values[c]||e.values[u]}return r[e.argumentCallback?e.argumentCallback(t):t]}}t.a=r},function(e,t,n){"use strict";var r=n(165),i=n(166),o=/^(\d+)(th|st|nd|rd)?/i,a=/\d+/i,s={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},c={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l={any:[/1/i,/2/i,/3/i,/4/i]},h={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},d={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},g={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v={ordinalNumber:Object(r.a)({matchPattern:o,parsePattern:a,valueCallback:function(e){return parseInt(e,10)}}),era:Object(i.a)({matchPatterns:s,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:Object(i.a)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:l,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Object(i.a)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:p,defaultParseWidth:"any"}),day:Object(i.a)({matchPatterns:f,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any"}),dayPeriod:Object(i.a)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:g,defaultParseWidth:"any"})};t.a=v},function(e,t,n){"use strict";function r(e){return function(t,n){var r=String(t),i=n||{},o=r.match(e.matchPattern);if(!o)return null;var a=o[0],s=r.match(e.parsePattern);if(!s)return null;var u=e.valueCallback?e.valueCallback(s[0]):s[0];return u=i.valueCallback?i.valueCallback(u):u,{value:u,rest:r.slice(a.length)}}}t.a=r},function(e,t,n){"use strict";function r(e){return function(t,n){var r=String(t),o=n||{},a=o.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],u=r.match(s);if(!u)return null;var c,l=u[0],h=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return c="[object Array]"===Object.prototype.toString.call(h)?h.findIndex(function(e){return e.test(r)}):i(h,function(e){return e.test(r)}),c=e.valueCallback?e.valueCallback(c):c,c=o.valueCallback?o.valueCallback(c):c,{value:c,rest:r.slice(l.length)}}}function i(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}t.a=r},function(e,t,n){"use strict";function r(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+Object(p.a)(o,2)}function i(e,t){if(e%60===0){return(e>0?"-":"+")+Object(p.a)(Math.abs(e)/60,2)}return o(e,t)}function o(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Object(p.a)(Math.floor(i/60),2)+n+Object(p.a)(i%60,2)}var a=n(168),s=n(169),u=n(77),c=n(78),l=n(79),h=n(27),p=n(76),f={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},d={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return a.a.y(e,t)},Y:function(e,t,n,r){var i=Object(h.a)(e,r),o=i>0?i:1-i;if("YY"===t){var a=o%100;return Object(p.a)(a,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Object(p.a)(o,t.length)},R:function(e,t){var n=Object(c.a)(e);return Object(p.a)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return Object(p.a)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Object(p.a)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Object(p.a)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return a.a.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Object(p.a)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Object(l.a)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Object(p.a)(i,t.length)},I:function(e,t,n){var r=Object(u.a)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Object(p.a)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):a.a.d(e,t)},D:function(e,t,n){var r=Object(s.a)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Object(p.a)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Object(p.a)(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Object(p.a)(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Object(p.a)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),i=r/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?f.noon:0===i?f.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?f.evening:i>=12?f.afternoon:i>=4?f.morning:f.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return a.a.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):a.a.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(p.a)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(p.a)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):a.a.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):a.a.s(e,t)},S:function(e,t){return a.a.S(e,t)},X:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return i(s);case"XXXX":case"XX":return o(s);case"XXXXX":case"XXX":default:return o(s,":")}},x:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"x":return i(s);case"xxxx":case"xx":return o(s);case"xxxxx":case"xxx":default:return o(s,":")}},O:function(e,t,n,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+r(s,":");case"OOOO":default:return"GMT"+o(s,":")}},z:function(e,t,n,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+r(s,":");case"zzzz":default:return"GMT"+o(s,":")}},t:function(e,t,n,r){var i=r._originalDate||e,o=Math.floor(i.getTime()/1e3);return Object(p.a)(o,t.length)},T:function(e,t,n,r){var i=r._originalDate||e,o=i.getTime();return Object(p.a)(o,t.length)}};t.a=d},function(e,t,n){"use strict";var r=n(76),i={y:function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return Object(r.a)("yy"===t?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Object(r.a)(n+1,2)},d:function(e,t){return Object(r.a)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Object(r.a)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Object(r.a)(e.getUTCHours(),t.length)},m:function(e,t){return Object(r.a)(e.getUTCMinutes(),t.length)},s:function(e,t){return Object(r.a)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds(),o=Math.floor(i*Math.pow(10,n-3));return Object(r.a)(o,t.length)}};t.a=i},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/o)+1}t.a=r;var i=n(0),o=864e5},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Object(o.a)(n)}t.a=r;var i=n(78),o=n(18)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,s=r&&r.options&&r.options.firstWeekContainsDate,u=null==s?1:Object(i.a)(s),c=null==n.firstWeekContainsDate?u:Object(i.a)(n.firstWeekContainsDate),l=Object(o.a)(e,t),h=new Date(0);return h.setUTCFullYear(l,0,c),h.setUTCHours(0,0,0,0),Object(a.a)(h,t)}t.a=r;var i=n(1),o=n(27),a=n(19)},function(e,t,n){"use strict";n(1),n(82)},function(e,t,n){"use strict";n(1),n(83)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,-n)}t.a=r;var i=n(1),o=n(28)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,-n)}t.a=r;var i=n(1),o=n(84)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,-n)}t.a=r;var i=n(1),o=n(29)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);return Object(o.a)(e,-n)}t.a=r;var i=n(1),o=n(86)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getSeconds()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getMinutes()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getHours()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getDay()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getDate()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getMonth()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getFullYear()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(i.a)(e).getTime()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return n.setSeconds(r),n}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return n.setMinutes(r),n}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return n.setHours(r),n}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t),s=n.getFullYear(),u=n.getDate(),c=new Date(0);c.setFullYear(s,r,15),c.setHours(0,0,0,0);var l=Object(a.a)(c);return n.setMonth(r,Math.min(u,l)),n}t.a=r;var i=n(1),o=n(0),a=n(85)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(r),n)}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t;t=null==e?[]:"function"===typeof e.forEach?e:Array.prototype.slice.call(e);var n;return t.forEach(function(e){var t=Object(i.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)}),n}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t;t=null==e?[]:"function"===typeof e.forEach?e:Array.prototype.slice.call(e);var n;return t.forEach(function(e){var t=Object(i.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)}),n}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(o.a)(t),s=n.getTime()-Object(i.a)(n),u=r.getTime()-Object(i.a)(r);return Math.round((s-u)/a)}t.a=r;var i=n(11),o=n(30),a=864e5},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(i.a)(e,n),s=Object(i.a)(t,n),u=r.getTime()-Object(o.a)(r),c=s.getTime()-Object(o.a)(s);return Math.round((u-c)/a)}t.a=r;var i=n(87),o=n(11),a=6048e5},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t);return n.setMonth(0),n.setDate(r),n}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(i.a)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,s=null==a?0:Object(o.a)(a),u=null==n.weekStartsOn?s:Object(o.a)(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=Object(i.a)(e),l=c.getDay(),h=6+(l<u?-7:0)-(l-u);return c.setDate(c.getDate()+h),c.setHours(23,59,59,999),c}t.a=r;var i=n(0),o=n(1)},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()===r.getTime()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()===r.getTime()}t.a=r;var i=n(30)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getFullYear()===r.getFullYear()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()>r.getTime()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()<r.getTime()}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=t||{},r=Object(i.a)(e).getTime(),o=Object(i.a)(n.start).getTime(),a=Object(i.a)(n.end).getTime();if(!(o<=a))throw new RangeError("Invalid interval");return r>=o&&r<=a}t.a=r;var i=n(0)},function(e,t,n){"use strict";function r(e,t,n,r){if(arguments.length<3)throw new TypeError("3 arguments required, but only "+arguments.length+" present");var y=String(e),b=String(t),w=r||{},T=w.locale||a.a;if(!T.match)throw new RangeError("locale must contain match property");var E=T.options&&T.options.firstWeekContainsDate,S=null==E?1:Object(f.a)(E),k=null==w.firstWeekContainsDate?S:Object(f.a)(w.firstWeekContainsDate);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=T.options&&T.options.weekStartsOn,M=null==C?0:Object(f.a)(C),A=null==w.weekStartsOn?M:Object(f.a)(w.weekStartsOn);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===b)return""===y?Object(u.a)(n):new Date(NaN);var O,D={firstWeekContainsDate:k,weekStartsOn:A,locale:T},I=[{priority:m,set:i,index:0}],R=b.match(v).map(function(e){var t=e[0];if("p"===t||"P"===t){return(0,l.a[t])(e,T.formatLong,D)}return e}).join("").match(g),P=[];for(O=0;O<R.length;O++){var L=R[O];!w.useAdditionalWeekYearTokens&&Object(p.b)(L)&&Object(p.c)(L),!w.useAdditionalDayOfYearTokens&&Object(p.a)(L)&&Object(p.c)(L);var N=L[0],U=d.a[N];if(U){var F=U.incompatibleTokens;if(Array.isArray(F)){for(var B=void 0,j=0;j<P.length;j++){var G=P[j].token;if(-1!==F.indexOf(G)||G===N){B=P[j];break}}if(B)throw new RangeError("The format string mustn't contain `".concat(B.fullToken,"` and `").concat(L,"` at the same time"))}else if("*"===U.incompatibleTokens&&P.length)throw new RangeError("The format string mustn't contain `".concat(L,"` and any other token at the same time"));P.push({token:N,fullToken:L});var V=U.parse(y,L,T.match,D);if(!V)return new Date(NaN);I.push({priority:U.priority,set:U.set,validate:U.validate,value:V.value,index:I.length}),y=V.rest}else{if(N.match(x))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if("''"===L?L="'":"'"===N&&(L=o(L)),0!==y.indexOf(L))return new Date(NaN);y=y.slice(L.length)}}if(y.length>0&&_.test(y))return new Date(NaN);var z=I.map(function(e){return e.priority}).sort(function(e,t){return t-e}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){return I.filter(function(t){return t.priority===e}).reverse()}).map(function(e){return e[0]}),H=Object(u.a)(n);if(isNaN(H))return new Date(NaN);var W=Object(s.a)(H,Object(h.a)(H)),q={};for(O=0;O<z.length;O++){var Y=z[O];if(Y.validate&&!Y.validate(W,Y.value,D))return new Date(NaN);var X=Y.set(W,q,Y.value,D);X[0]?(W=X[0],Object(c.a)(q,X[1])):W=X}return W}function i(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function o(e){return e.match(y)[1].replace(b,"'")}t.a=r;var a=n(74),s=n(75),u=n(0),c=n(209),l=n(80),h=n(11),p=n(81),f=n(1),d=n(210),m=10,g=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y=/^'(.*?)'?$/,b=/''/g,_=/\S/,x=/[a-zA-Z]/},function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");t=t||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}t.a=r},function(e,t,n){"use strict";function r(e,t,n){var r=t.match(e);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:t.slice(r[0].length)}}function i(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*y+o*b+a*_),rest:t.slice(n[0].length)}}function o(e,t){return r(x.anyDigitsSigned,e,t)}function a(e,t,n){switch(e){case 1:return r(x.singleDigit,t,n);case 2:return r(x.twoDigits,t,n);case 3:return r(x.threeDigits,t,n);case 4:return r(x.fourDigits,t,n);default:return r(new RegExp("^\\d{1,"+e+"}"),t,n)}}function s(e,t,n){switch(e){case 1:return r(x.singleDigitSigned,t,n);case 2:return r(x.twoDigitsSigned,t,n);case 3:return r(x.threeDigitsSigned,t,n);case 4:return r(x.fourDigitsSigned,t,n);default:return r(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function u(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function c(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function l(e){return e%400===0||e%4===0&&e%100!==0}var h=n(27),p=n(211),f=n(212),d=n(213),m=n(214),g=n(18),v=n(19),y=36e5,b=6e4,_=1e3,x={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},w={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/},T=[31,28,31,30,31,30,31,31,30,31,30,31],E=[31,29,31,30,31,30,31,31,30,31,30,31],S={G:{priority:140,parse:function(e,t,n,r){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,r){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return a(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return a(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var o=c(n.year,i);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return a(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return a(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=Object(h.a)(e,r);if(n.isTwoDigitYear){var o=c(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Object(v.a)(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Object(v.a)(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,r){return"R"===t?s(4,e):s(t.length,e)},set:function(e,t,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),Object(g.a)(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,r){return"u"===t?s(4,e):s(t.length,e)},set:function(e,t,n,r){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,r){switch(t){case"Q":case"QQ":return a(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,r){switch(t){case"q":case"qq":return a(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,i){var o=function(e){return e-1};switch(t){case"M":return r(x.month,e,o);case"MM":return a(2,e,o);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:o});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,i){var o=function(e){return e-1};switch(t){case"L":return r(x.month,e,o);case"LL":return a(2,e,o);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:o});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,i){switch(t){case"w":return r(x.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Object(v.a)(Object(m.a)(e,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,i){switch(t){case"I":return r(x.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Object(g.a)(Object(d.a)(e,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,parse:function(e,t,n,i){switch(t){case"d":return r(x.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return a(t.length,e)}},validate:function(e,t,n){var r=e.getUTCFullYear(),i=l(r),o=e.getUTCMonth();return i?t>=1&&t<=E[o]:t>=1&&t<=T[o]},set:function(e,t,n,r){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,parse:function(e,t,n,i){switch(t){case"D":case"DD":return r(x.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return a(t.length,e)}},validate:function(e,t,n){return l(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,r){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,r){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Object(p.a)(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return a(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Object(p.a)(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return a(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Object(p.a)(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,r){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return a(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,r){return e=Object(f.a)(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,r){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(u(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,r){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(u(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,r){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(u(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,i){switch(t){case"h":return r(x.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,r){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,i){switch(t){case"H":return r(x.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,r){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,i){switch(t){case"K":return r(x.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,i){switch(t){case"k":return r(x.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,r){var i=n<=24?n%24:n;return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,i){switch(t){case"m":return r(x.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,i){switch(t){case"s":return r(x.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return a(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,r){var i=function(e){return Math.floor(e*Math.pow(10,3-t.length))};return a(t.length,e,i)},set:function(e,t,n,r){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,r){switch(t){case"X":return i(w.basicOptionalMinutes,e);case"XX":return i(w.basic,e);case"XXXX":return i(w.basicOptionalSeconds,e);case"XXXXX":return i(w.extendedOptionalSeconds,e);case"XXX":default:return i(w.extended,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,r){switch(t){case"x":return i(w.basicOptionalMinutes,e);case"xx":return i(w.basic,e);case"xxxx":return i(w.basicOptionalSeconds,e);case"xxxxx":return i(w.extendedOptionalSeconds,e);case"xxx":default:return i(w.extended,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,r){return o(e)},set:function(e,t,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,r){return o(e)},set:function(e,t,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}};t.a=S},function(e,t,n){"use strict";function r(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},a=r.locale,s=a&&a.options&&a.options.weekStartsOn,u=null==s?0:Object(i.a)(s),c=null==r.weekStartsOn?u:Object(i.a)(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Object(o.a)(e),h=Object(i.a)(t),p=l.getUTCDay(),f=h%7,d=(f+7)%7,m=(d<c?7:0)+h-p;return l.setUTCDate(l.getUTCDate()+m),l}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(i.a)(t);n%7===0&&(n-=7);var r=Object(o.a)(e),a=r.getUTCDay(),s=n%7,u=(s+7)%7,c=(u<1?7:0)+n-a;return r.setUTCDate(r.getUTCDate()+c),r}t.a=r;var i=n(1),o=n(0)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(o.a)(e),r=Object(i.a)(t),s=Object(a.a)(n)-r;return n.setUTCDate(n.getUTCDate()-7*s),n}t.a=r;var i=n(1),o=n(0),a=n(77)},function(e,t,n){"use strict";function r(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(o.a)(e),s=Object(i.a)(t),u=Object(a.a)(r,n)-s;return r.setUTCDate(r.getUTCDate()-7*u),r}t.a=r;var i=n(1),o=n(0),a=n(79)},function(e,t,n){"use strict";function r(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=null==n.additionalDigits?w:Object(y.a)(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,c=i(e);if(c.date){var h=o(c.date,r);s=a(h.restDateString,h.year)}if(isNaN(s)||!s)return new Date(NaN);var p,f=s.getTime(),d=0;if(c.time&&(d=u(c.time),isNaN(d)||null===d))return new Date(NaN);if(c.timezone){if(p=l(c.timezone),isNaN(p))return new Date(NaN)}else{var m=f+d,g=new Date(m);p=Object(b.a)(g);var v=new Date(m);v.setDate(g.getDate()+1);var _=Object(b.a)(v)-p;_>0&&(p+=_)}return new Date(f+d+p)}function i(e){var t,n={},r=e.split(T.dateTimeDelimiter);if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],T.timeZoneDelimiter.test(n.date)&&(n.date=e.split(T.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=T.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function o(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),o=r[2]&&parseInt(r[2]);return{year:null==o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function a(e,t){if(null===t)return null;var n=e.match(E);if(!n)return null;var r=!!n[4],i=s(n[1]),o=s(n[2])-1,a=s(n[3]),u=s(n[4]),c=s(n[5])-1;if(r)return m(t,u,c)?h(t,u,c):new Date(NaN);var l=new Date(0);return f(t,o,a)&&d(t,i)?(l.setUTCFullYear(t,o,Math.max(i,a)),l):new Date(NaN)}function s(e){return e?parseInt(e):1}function u(e){var t=e.match(S);if(!t)return null;var n=c(t[1]),r=c(t[2]),i=c(t[3]);return g(n,r,i)?n*_+r*x+1e3*i:NaN}function c(e){return e&&parseFloat(e.replace(",","."))||0}function l(e){if("Z"===e)return 0;var t=e.match(k);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return v(r,i)?n*(r*_+i*x):NaN}function h(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}function p(e){return e%400===0||e%4===0&&e%100}function f(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(C[t]||(p(e)?29:28))}function d(e,t){return t>=1&&t<=(p(e)?366:365)}function m(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function g(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function v(e,t){return t>=0&&t<=59}t.a=r;var y=n(1),b=n(11),_=36e5,x=6e4,w=2,T={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},E=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,k=/^([+-])(\d{2})(?::?(\d{2}))?$/,C=[31,null,31,30,31,30,31,31,30,31,30,31]},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}function a(e,t,n){if(e===t)return!0;for(;e.parentNode;){if(o(e,t,n))return!0;e=e.parentNode}return e}function s(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}function u(e,t){var n=null;return-1!==v.indexOf(t)&&l&&(n={passive:!e.props.preventDefault}),n}function c(e,t){var n,o,c=e.displayName||e.name||"Component";return o=n=function(n){function o(e){var t;return t=n.call(this,e)||this,t.__outsideClickHandler=function(e){if("function"===typeof t.__clickOutsideHandlerProp)return void t.__clickOutsideHandlerProp(e);var n=t.getInstance();if("function"===typeof n.props.handleClickOutside)return void n.props.handleClickOutside(e);if("function"===typeof n.handleClickOutside)return void n.handleClickOutside(e);throw new Error("WrappedComponent: "+c+" lacks a handleClickOutside(event) function for processing outside click events.")},t.enableOnClickOutside=function(){if("undefined"!==typeof document&&!g[t._uid]){"undefined"===typeof l&&(l=f()),g[t._uid]=!0;var e=t.props.eventTypes;e.forEach||(e=[e]),m[t._uid]=function(e){if(null!==t.componentNode&&(t.props.preventDefault&&e.preventDefault(),t.props.stopPropagation&&e.stopPropagation(),!t.props.excludeScrollbar||!s(e))){a(e.target,t.componentNode,t.props.outsideClickIgnoreClass)===document&&t.__outsideClickHandler(e)}},e.forEach(function(e){document.addEventListener(e,m[t._uid],u(t,e))})}},t.disableOnClickOutside=function(){delete g[t._uid];var e=m[t._uid];if(e&&"undefined"!==typeof document){var n=t.props.eventTypes;n.forEach||(n=[n]),n.forEach(function(n){return document.removeEventListener(n,e,u(t,n))}),delete m[t._uid]}},t.getRef=function(e){return t.instanceRef=e},t._uid=d(),t}r(o,n);var v=o.prototype;return v.getInstance=function(){if(!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},v.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+c+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=Object(p.findDOMNode)(this.getInstance()),this.props.disableOnClickOutside||this.enableOnClickOutside()}},v.componentDidUpdate=function(){this.componentNode=Object(p.findDOMNode)(this.getInstance())},v.componentWillUnmount=function(){this.disableOnClickOutside()},v.render=function(){var t=this.props,n=(t.excludeScrollbar,i(t,["excludeScrollbar"]));return e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(h.createElement)(e,n)},o}(h.Component),n.displayName="OnClickOutside("+c+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:y,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},o}var l,h=n(5),p=(n.n(h),n(41)),f=(n.n(p),function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}),d=function(e){return void 0===e&&(e=0),function(){return++e}}(),m={},g={},v=["touchstart","touchmove"],y="ignore-react-onclickoutside";t.a=c},function(e,t,n){"use strict";var r=n(218),i=n(35),o=n(226);n.d(t,"b",function(){return r.a}),n.d(t,"a",function(){return i.b}),n.d(t,"c",function(){return o.a})},function(e,t,n){"use strict";function r(e){var t=e.referenceElement,n=o()(e,["referenceElement"]);return d.createElement(g.a.Consumer,null,function(e){var r=e.referenceNode;return d.createElement(_,s()({referenceElement:void 0!==t?t:r},n))})}t.a=r;var i=n(219),o=n.n(i),a=n(31),s=n.n(a),u=n(32),c=n.n(u),l=n(33),h=n.n(l),p=n(34),f=n.n(p),d=n(5),m=(n.n(d),n(220)),g=n(35),v=n(88),y={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},b={},_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,f()(h()(h()(t)),"state",{data:void 0,placement:void 0}),f()(h()(h()(t)),"popperInstance",void 0),f()(h()(h()(t)),"popperNode",null),f()(h()(h()(t)),"arrowNode",null),f()(h()(h()(t)),"setPopperNode",function(e){e&&t.popperNode!==e&&(Object(v.a)(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())}),f()(h()(h()(t)),"setArrowNode",function(e){t.arrowNode=e}),f()(h()(h()(t)),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var n=e.placement;return t.setState({data:e,placement:n}),e}}),f()(h()(h()(t)),"getOptions",function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:s()({},t.props.modifiers,{arrow:s()({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}}),f()(h()(h()(t)),"getPopperStyle",function(){return t.popperNode&&t.state.data?s()({position:t.state.data.offsets.popper.position},t.state.data.styles):y}),f()(h()(h()(t)),"getPopperPlacement",function(){return t.state.data?t.state.placement:void 0}),f()(h()(h()(t)),"getArrowStyle",function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:b}),f()(h()(h()(t)),"getOutOfBoundariesState",function(){return t.state.data?t.state.data.hide:void 0}),f()(h()(h()(t)),"destroyPopperInstance",function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)}),f()(h()(h()(t)),"updatePopperInstance",function(){t.destroyPopperInstance();var e=h()(h()(t)),n=e.popperNode,r=t.props.referenceElement;r&&n&&(t.popperInstance=new m.a(r,n,t.getOptions()))}),f()(h()(h()(t)),"scheduleUpdate",function(){t.popperInstance&&t.popperInstance.scheduleUpdate()}),t}c()(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){this.props.placement!==e.placement||this.props.referenceElement!==e.referenceElement||this.props.positionFixed!==e.positionFixed?this.updatePopperInstance():this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),t.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){Object(v.a)(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return Object(v.b)(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},t}(d.Component);f()(_,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});m.a.placements},function(e,t){function n(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}e.exports=n},function(e,t,n){"use strict";(function(e){function n(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function r(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},pe))}}function i(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function o(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView,r=n.getComputedStyle(e,null);return t?r[t]:r}function a(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function s(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=o(e),n=t.overflow,r=t.overflowX;return/(auto|scroll|overlay)/.test(n+t.overflowY+r)?e:s(a(e))}function u(e){return 11===e?ge:10===e?ve:ge||ve}function c(e){if(!e)return document.documentElement;for(var t=u(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===o(n,"position")?c(n):n:e?e.ownerDocument.documentElement:document.documentElement}function l(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||c(e.firstElementChild)===e)}function h(e){return null!==e.parentNode?h(e.parentNode):e}function p(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||r.contains(i))return l(a)?a:c(a);var s=h(e);return s.host?p(s.host,t):p(e,h(t).host)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[n]}return e[n]}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f(t,"top"),i=f(t,"left"),o=n?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=i*o,e.right+=i*o,e}function m(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function g(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],u(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function v(e){var t=e.body,n=e.documentElement,r=u(10)&&getComputedStyle(n);return{height:g("Height",t,n,r),width:g("Width",t,n,r)}}function y(e){return xe({},e,{right:e.left+e.width,bottom:e.top+e.height})}function b(e){var t={};try{if(u(10)){t=e.getBoundingClientRect();var n=f(e,"top"),r=f(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?v(e.ownerDocument):{},s=a.width||e.clientWidth||i.right-i.left,c=a.height||e.clientHeight||i.bottom-i.top,l=e.offsetWidth-s,h=e.offsetHeight-c;if(l||h){var p=o(e);l-=m(p,"x"),h-=m(p,"y"),i.width-=l,i.height-=h}return y(i)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=u(10),i="HTML"===t.nodeName,a=b(e),c=b(t),l=s(e),h=o(t),p=parseFloat(h.borderTopWidth,10),f=parseFloat(h.borderLeftWidth,10);n&&i&&(c.top=Math.max(c.top,0),c.left=Math.max(c.left,0));var m=y({top:a.top-c.top-p,left:a.left-c.left-f,width:a.width,height:a.height});if(m.marginTop=0,m.marginLeft=0,!r&&i){var g=parseFloat(h.marginTop,10),v=parseFloat(h.marginLeft,10);m.top-=p-g,m.bottom-=p-g,m.left-=f-v,m.right-=f-v,m.marginTop=g,m.marginLeft=v}return(r&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(m=d(m,t)),m}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=_(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:f(n),s=t?0:f(n,"left");return y({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o})}function w(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===o(e,"position"))return!0;var n=a(e);return!!n&&w(n)}function T(e){if(!e||!e.parentElement||u())return document.documentElement;for(var t=e.parentElement;t&&"none"===o(t,"transform");)t=t.parentElement;return t||document.documentElement}function E(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},u=i?T(e):p(e,t);if("viewport"===r)o=x(u,i);else{var c=void 0;"scrollParent"===r?(c=s(a(t)),"BODY"===c.nodeName&&(c=e.ownerDocument.documentElement)):c="window"===r?e.ownerDocument.documentElement:r;var l=_(c,u,i);if("HTML"!==c.nodeName||w(u))o=l;else{var h=v(e.ownerDocument),f=h.height,d=h.width;o.top+=l.top-l.marginTop,o.bottom=f+l.top,o.left+=l.left-l.marginLeft,o.right=d+l.left}}n=n||0;var m="number"===typeof n;return o.left+=m?n:n.left||0,o.top+=m?n:n.top||0,o.right-=m?n:n.right||0,o.bottom-=m?n:n.bottom||0,o}function S(e){return e.width*e.height}function k(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=E(n,r,o,i),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},u=Object.keys(s).map(function(e){return xe({key:e},s[e],{area:S(s[e])})}).sort(function(e,t){return t.area-e.area}),c=u.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),l=c.length>0?c[0].key:u[0].key,h=e.split("-")[1];return l+(h?"-"+h:"")}function C(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _(n,r?T(t):p(t,n),r)}function M(e){var t=e.ownerDocument.defaultView,n=t.getComputedStyle(e),r=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),i=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+r}}function A(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function O(e,t,n){n=n.split("-")[0];var r=M(e),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[a]=t[a]+t[u]/2-r[u]/2,i[s]=n===s?t[s]-r[c]:t[A(s)],i}function D(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function I(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=D(e,function(e){return e[t]===n});return e.indexOf(r)}function R(e,t,n){return(void 0===n?e:e.slice(0,I(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&i(n)&&(t.offsets.popper=y(t.offsets.popper),t.offsets.reference=y(t.offsets.reference),t=n(t,e))}),t}function P(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=C(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=k(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=O(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=R(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function L(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function N(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],o=i?""+i+n:e;if("undefined"!==typeof document.body.style[o])return o}return null}function U(){return this.state.isDestroyed=!0,L(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function F(e){var t=e.ownerDocument;return t?t.defaultView:window}function B(e,t,n,r){var i="BODY"===e.nodeName,o=i?e.ownerDocument.defaultView:e;o.addEventListener(t,n,{passive:!0}),i||B(s(o.parentNode),t,n,r),r.push(o)}function j(e,t,n,r){n.updateBound=r,F(e).addEventListener("resize",n.updateBound,{passive:!0});var i=s(e);return B(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function G(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}function V(e,t){return F(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function z(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=V(this.reference,this.state))}function H(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function W(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&H(t[n])&&(r="px"),e.style[n]=t[n]+r})}function q(e,t){Object.keys(t).forEach(function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})}function Y(e){return W(e.instance.popper,e.styles),q(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&W(e.arrowElement,e.arrowStyles),e}function X(e,t,n,r,i){var o=C(i,t,e,n.positionFixed),a=k(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),W(t,{position:n.positionFixed?"fixed":"absolute"}),n}function K(e,t){var n=e.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(e){return e},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(e.placement),h=-1!==e.placement.indexOf("-"),p=u%2===c%2,f=u%2===1&&c%2===1,d=t?l||h||p?o:a:s,m=t?o:s;return{left:d(f&&!h&&t?r.left-1:r.left),top:m(r.top),bottom:m(r.bottom),right:d(r.right)}}function Q(e,t){var n=t.x,r=t.y,i=e.offsets.popper,o=D(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=c(e.instance.popper),u=b(s),l={position:i.position},h=K(e,window.devicePixelRatio<2||!we),p="bottom"===n?"top":"bottom",f="right"===r?"left":"right",d=N("transform"),m=void 0,g=void 0;if(g="bottom"===p?"HTML"===s.nodeName?-s.clientHeight+h.bottom:-u.height+h.bottom:h.top,m="right"===f?"HTML"===s.nodeName?-s.clientWidth+h.right:-u.width+h.right:h.left,a&&d)l[d]="translate3d("+m+"px, "+g+"px, 0)",l[p]=0,l[f]=0,l.willChange="transform";else{var v="bottom"===p?-1:1,y="right"===f?-1:1;l[p]=g*v,l[f]=m*y,l.willChange=p+", "+f}var _={"x-placement":e.placement};return e.attributes=xe({},_,e.attributes),e.styles=xe({},l,e.styles),e.arrowStyles=xe({},e.offsets.arrow,e.arrowStyles),e}function J(e,t,n){var r=D(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var o="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function Z(e,t){var n;if(!J(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],a=e.offsets,s=a.popper,u=a.reference,c=-1!==["left","right"].indexOf(i),l=c?"height":"width",h=c?"Top":"Left",p=h.toLowerCase(),f=c?"left":"top",d=c?"bottom":"right",m=M(r)[l];u[d]-m<s[p]&&(e.offsets.popper[p]-=s[p]-(u[d]-m)),u[p]+m>s[d]&&(e.offsets.popper[p]+=u[p]+m-s[d]),e.offsets.popper=y(e.offsets.popper);var g=u[p]+u[l]/2-m/2,v=o(e.instance.popper),b=parseFloat(v["margin"+h],10),_=parseFloat(v["border"+h+"Width"],10),x=g-e.offsets.popper[p]-b-_;return x=Math.max(Math.min(s[l]-m,x),0),e.arrowElement=r,e.offsets.arrow=(n={},_e(n,p,Math.round(x)),_e(n,f,""),n),e}function $(e){return"end"===e?"start":"start"===e?"end":e}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ee.indexOf(e),r=Ee.slice(n+1).concat(Ee.slice(0,n));return t?r.reverse():r}function te(e,t){if(L(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=E(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=A(r),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case Se.FLIP:a=[r,i];break;case Se.CLOCKWISE:a=ee(r);break;case Se.COUNTERCLOCKWISE:a=ee(r,!0);break;default:a=t.behavior}return a.forEach(function(s,u){if(r!==s||a.length===u+1)return e;r=e.placement.split("-")[0],i=A(r);var c=e.offsets.popper,l=e.offsets.reference,h=Math.floor,p="left"===r&&h(c.right)>h(l.left)||"right"===r&&h(c.left)<h(l.right)||"top"===r&&h(c.bottom)>h(l.top)||"bottom"===r&&h(c.top)<h(l.bottom),f=h(c.left)<h(n.left),d=h(c.right)>h(n.right),m=h(c.top)<h(n.top),g=h(c.bottom)>h(n.bottom),v="left"===r&&f||"right"===r&&d||"top"===r&&m||"bottom"===r&&g,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===o&&f||y&&"end"===o&&d||!y&&"start"===o&&m||!y&&"end"===o&&g),_=!!t.flipVariationsByContent&&(y&&"start"===o&&d||y&&"end"===o&&f||!y&&"start"===o&&g||!y&&"end"===o&&m),x=b||_;(p||v||x)&&(e.flipped=!0,(p||v)&&(r=a[u+1]),x&&(o=$(o)),e.placement=r+(o?"-"+o:""),e.offsets.popper=xe({},e.offsets.popper,O(e.instance.popper,e.offsets.reference,e.placement)),e=R(e.instance.modifiers,e,"flip"))}),e}function ne(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",c=a?"width":"height";return n[s]<o(r[u])&&(e.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[s])&&(e.offsets.popper[u]=o(r[s])),e}function re(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return y(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}function ie(e,t,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=a.indexOf(D(a,function(e){return-1!==e.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return c=c.map(function(e,r){var i=(1===r?!o:o)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return re(e,i,t,n)})}),c.forEach(function(e,t){e.forEach(function(n,r){H(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}function oe(e,t){var n=t.offset,r=e.placement,i=e.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=H(+n)?[+n,0]:ie(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),e.popper=o,e}function ae(e,t){var n=t.boundariesElement||c(e.instance.popper);e.instance.reference===n&&(n=c(n));var r=N("transform"),i=e.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var u=E(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=o,i.left=a,i[r]=s,t.boundaries=u;var l=t.priority,h=e.offsets.popper,p={primary:function(e){var n=h[e];return h[e]<u[e]&&!t.escapeWithReference&&(n=Math.max(h[e],u[e])),_e({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=h[n];return h[e]>u[e]&&!t.escapeWithReference&&(r=Math.min(h[n],u[e]-("right"===e?h.width:h.height))),_e({},n,r)}};return l.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";h=xe({},h,p[t](e))}),e.offsets.popper=h,e}function se(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",c=s?"width":"height",l={start:_e({},u,o[u]),end:_e({},u,o[u]+o[c]-a[c])};e.offsets.popper=xe({},a,l[r])}return e}function ue(e){if(!J(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=D(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function ce(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),e.placement=A(t),e.offsets.popper=y(i),e}for(var le="undefined"!==typeof window&&"undefined"!==typeof document,he=["Edge","Trident","Firefox"],pe=0,fe=0;fe<he.length;fe+=1)if(le&&navigator.userAgent.indexOf(he[fe])>=0){pe=1;break}var de=le&&window.Promise,me=de?n:r,ge=le&&!(!window.MSInputMethodContext||!document.documentMode),ve=le&&/MSIE 10/.test(navigator.userAgent),ye=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},be=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_e=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we=le&&/Firefox/i.test(navigator.userAgent),Te=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Ee=Te.slice(3),Se={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},ke={shift:{order:100,enabled:!0,fn:se},offset:{order:200,enabled:!0,fn:oe,offset:0},preventOverflow:{order:300,enabled:!0,fn:ae,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:ne},arrow:{order:500,enabled:!0,fn:Z,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:te,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:ce},hide:{order:800,enabled:!0,fn:ue},computeStyle:{order:850,enabled:!0,fn:Q,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Y,onLoad:X,gpuAcceleration:void 0}},Ce={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:ke},Me=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ye(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=me(this.update.bind(this)),this.options=xe({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(xe({},e.Defaults.modifiers,o.modifiers)).forEach(function(t){r.options.modifiers[t]=xe({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return xe({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&i(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return be(e,[{key:"update",value:function(){return P.call(this)}},{key:"destroy",value:function(){return U.call(this)}},{key:"enableEventListeners",value:function(){return G.call(this)}},{key:"disableEventListeners",value:function(){return z.call(this)}}]),e}();Me.Utils=("undefined"!==typeof window?window:e).PopperUtils,Me.placements=Te,Me.Defaults=Ce,t.a=Me}).call(t,n(7))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(5),o=r(i),a=n(222),s=r(a);t.default=o.default.createContext||s.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}function c(e){return Array.isArray(e)?e[0]:e}function l(e,t){var n,r,l="__create-react-context-"+(0,m.default)()+"__",p=function(e){function n(){var t,r,a;i(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=r=o(this,e.call.apply(e,[this].concat(c))),r.emitter=u(r.props.value),a=t,o(r,a)}return a(n,e),n.prototype.getChildContext=function(){var e;return e={},e[l]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,i=void 0;s(n,r)?i=0:(i="function"===typeof t?t(n,r):v,0!==(i|=0)&&this.emitter.set(e.value,i))}},n.prototype.render=function(){return this.props.children},n}(h.Component);p.childContextTypes=(n={},n[l]=f.default.object.isRequired,n);var d=function(t){function n(){var e,r,a;i(this,n);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return e=r=o(this,t.call.apply(t,[this].concat(u))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},a=e,o(r,a)}return a(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?v:t},n.prototype.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?v:e},n.prototype.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[l]?this.context[l].get():e},n.prototype.render=function(){return c(this.props.children)(this.state.value)},n}(h.Component);return d.contextTypes=(r={},r[l]=f.default.object,r),{Provider:p,Consumer:d}}t.__esModule=!0;var h=n(5),p=(r(h),n(72)),f=r(p),d=n(223),m=r(d),g=n(224),v=(r(g),1073741823);t.default=l,e.exports=t.default},function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(225),i=r;e.exports=i},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(e){return p.createElement(m.a.Consumer,null,function(t){var n=t.setReferenceNode;return p.createElement(v,o()({setReferenceNode:n},e))})}t.a=r;var i=n(31),o=n.n(i),a=n(32),s=n.n(a),u=n(33),c=n.n(u),l=n(34),h=n.n(l),p=n(5),f=(n.n(p),n(227)),d=n.n(f),m=n(35),g=n(88),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,h()(c()(c()(t)),"refHandler",function(e){Object(g.a)(t.props.innerRef,e),Object(g.a)(t.props.setReferenceNode,e)}),t}return s()(t,e),t.prototype.render=function(){return d()(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),Object(g.b)(this.props.children)({ref:this.refHandler})},t}(p.Component)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(45),c=n.n(u),l=n(230),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"UIUndersideButton",value:function(){switch(this.props.controlType){case"underside":case"fly":return s.a.createElement("div",{className:"flip-view-container"},s.a.createElement("button",{tooltip:"Show Block Top",onClick:this.props.toggleTopView,className:"flip-view"}));case"top":return s.a.createElement("div",{className:"flip-view-container"},s.a.createElement("button",{tooltip:"Side View",onClick:this.props.toggleSideView,className:"flip-view"}));case"side":return s.a.createElement("div",{className:"flip-view-container"},s.a.createElement("button",{tooltip:"Bottom View",onClick:this.props.toggleUndersideView,className:"flip-view"}))}}},{key:"UITXDetails",value:function(){if(this.props.txSelected)return s.a.createElement("div",{className:"tx-details"},s.a.createElement("div",{className:"tx-details-border tx-details-border-tl"}),s.a.createElement("div",{className:"tx-details-border tx-details-border-tr"}),s.a.createElement("div",{className:"tx-details-border tx-details-border-bl"}),s.a.createElement("div",{className:"tx-details-border tx-details-border-br"}),s.a.createElement("div",{className:"tx-details-inner"},s.a.createElement("h2",null,s.a.createElement("a",{target:"_blank",href:"https://www.blockchain.com/btc/tx/"+this.props.txSelected.hash},"TX-",this.props.txSelected.hash)),s.a.createElement("span",{className:"tx-detail-item"},s.a.createElement("strong",null,c.a.unix(this.props.txSelected.time).format("YYYY-MM-DD HH:mm:ss"))),s.a.createElement("span",{className:"tx-detail-item"},s.a.createElement("strong",null,this.props.txSelected.size," bytes")),s.a.createElement("span",{className:"tx-detail-item"},s.a.createElement("h3",null,"Relayed By:")," ",s.a.createElement("strong",null,this.props.txSelected.relayed_by)),s.a.createElement("span",{className:"tx-detail-item"},s.a.createElement("h3",null,"Fee:")," ",s.a.createElement("i",{className:"fab fa-btc"}),s.a.createElement("strong",null,this.props.txSelected.fee)),s.a.createElement("ul",{className:"input-output"},s.a.createElement("li",{className:"inputs"},s.a.createElement("h3",null,"Inputs:"),s.a.createElement("ul",null,this.props.txSelected.inputs.slice(0,5).map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("i",{className:"fab fa-btc"}),"undefined"!==typeof e.prev_out?e.prev_out.value/1e8:0)}),this.props.txSelected.inputs.length>5?"...":"")),s.a.createElement("li",{className:"outputs"},s.a.createElement("h3",null,"Outputs:"),s.a.createElement("ul",null,this.props.txSelected.out.slice(0,5).map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("i",{className:"fab fa-btc"}),e.value/1e8," (",e.spent?"Spent":"Unspent",")")}),this.props.txSelected.out.length>5?"...":"",s.a.createElement("li",{className:"out-total"},s.a.createElement("strong",null,"Total:")," ",s.a.createElement("i",{className:"fab fa-btc"}),this.props.txSelected.outTotal.toFixed(2)))))))}},{key:"UICockpitButton",value:function(){if("full"===this.props.config.scene.mode)return"fly"===this.props.controlType?s.a.createElement("div",{className:"explore-container"},s.a.createElement("button",{tooltip:"Exit Flight Simulator",onClick:this.props.toggleTopView,className:"toggle-cockpit-controls leave"}),s.a.createElement("span",{tooltip:"Exit Flight Simulator",className:"cancel",onClick:this.props.toggleTopView})):s.a.createElement("div",{className:"explore-container"},s.a.createElement("button",{tooltip:"Flight Simulator Mode",onClick:this.props.toggleFlyControls,className:"toggle-cockpit-controls enter"}))}},{key:"UIAutoPilot",value:function(){var e=this;if("full"===this.props.config.scene.mode)return s.a.createElement("div",{className:"autopilot-controls"},s.a.createElement("div",{className:"autopilot-inner"},s.a.createElement("span",{tooltip:"Auto-pilot back in time",className:"backward",onClick:function(){return e.props.toggleAutoPilotDirection("backward")}}),s.a.createElement("span",{tooltip:"Stop Auto Pilot",className:"stop",onClick:function(){return e.props.stopAutoPilot()}}),s.a.createElement("span",{tooltip:"Auto-pilot forwards in time",className:"forward",onClick:function(){return e.props.toggleAutoPilotDirection("forward")}})))}},{key:"UIIntroOverlay",value:function(){if(this.props.showInfoOverlay)return s.a.createElement("div",{className:"intro-overlay"},s.a.createElement("p",{className:"intro-overlay-merkle"},"Cycle Through Views\xa0\u2192"),s.a.createElement("p",{className:"intro-overlay-free-explore"},"\u2191",s.a.createElement("br",null),"Flight Simulator Mode"),s.a.createElement("p",{className:"intro-overlay-autopilot"},"\u2190\xa0Autopilot controls"),s.a.createElement("p",{className:"intro-overlay-sidebar"},"\u2190\xa0Search for Blocks and Transactions"),s.a.createElement("button",{className:"intro-overlay-start-explore action-button",onClick:this.props.toggleInfoOverlay,onMouseEnter:this.props.playButtonSound},s.a.createElement("span",{className:"tl"}),s.a.createElement("span",{className:"tr"}),s.a.createElement("span",{className:"bl"}),s.a.createElement("span",{className:"br"}),s.a.createElement("div",{className:"swipe"}),s.a.createElement("p",null,"Start Exploring")))}},{key:"UICockpitInfoOverlay",value:function(){if("fly"===this.props.controlType&&this.props.flyControlsInteractionCount<2)return s.a.createElement("div",{className:"free-explore-info-overlay"},s.a.createElement("p",null,"Flight Simulator mode lets you fly around the Blockchain and listen to the sounds of each block",s.a.createElement("br",null),s.a.createElement("br",null),"Press these keys to navigate:"),s.a.createElement("div",{className:"free-explore-keys"},s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"Q")," ",s.a.createElement("p",{className:"key-q"},"Rotate left")),s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"W")," ",s.a.createElement("p",{className:"key-w"},"Move forward")),s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"E")," ",s.a.createElement("p",{className:"key-e"},"Rotate right")),s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"A"),s.a.createElement("p",{className:"key-a"},"Move left")),s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"S")," ",s.a.createElement("p",{className:"key-s"},"Move backward")),s.a.createElement("div",{className:"free-explore-key-container"},s.a.createElement("div",{className:"free-explore-key"},"D")," ",s.a.createElement("p",{className:"key-d"},"Move right"))),s.a.createElement("button",{className:"go-button action-button",onClick:this.props.closeFlyInfo.bind(this),onMouseEnter:this.props.playButtonSound},s.a.createElement("span",{className:"tl"}),s.a.createElement("span",{className:"tr"}),s.a.createElement("span",{className:"bl"}),s.a.createElement("span",{className:"br"}),s.a.createElement("div",{className:"swipe"}),s.a.createElement("p",null,"Start")))}},{key:"UICockpit",value:function(){if("fly"===this.props.controlType&&this.props.flyControlsInteractionCount>1)return s.a.createElement("div",{className:"hud"},s.a.createElement("div",{className:"coords"},s.a.createElement("div",{className:"posX"},"X: ",this.props.posX),s.a.createElement("div",{className:"posY"},"Y: ",this.props.posY),s.a.createElement("div",{className:"posZ"},"Z: ",this.props.posZ)))}},{key:"UIBlockNavigation",value:function(){var e=this,t="block-navigation-next";this.props.closestBlock.blockData.height!==this.props.maxHeight&&"fly"!==this.props.controlType||(t+=" hide");var n="block-navigation-prev";if(0!==this.props.closestBlock.blockData.height&&"fly"!==this.props.controlType||(n+=" hide"),"underside"===this.props.controlType||"top"===this.props.controlType||"side"===this.props.controlType)return s.a.createElement("div",{className:"block-navigation"},s.a.createElement("button",{tooltip:"Previous Block",onClick:function(){e.props.toggleInfoOverlay(),e.props.gotoPrevBlock()},className:n},"Previous Block"),s.a.createElement("button",{tooltip:"Next Block",onClick:function(){e.props.toggleInfoOverlay(),e.props.gotoNextBlock()},className:t},"Next Block"))}},{key:"infoPanelContent",value:function(){switch(this.props.controlType){case"underside":return s.a.createElement("div",null,s.a.createElement("p",null,"Merkle Trees allow efficient and secure verification of large data sets."),s.a.createElement("p",null,"The branches of the tree connect to the transactions above."),s.a.createElement("p",null,"Merkle Trees cryptographically link one block to the next."));default:return s.a.createElement("div",null,s.a.createElement("p",null,"Transactions are shown as crystals; height is value, brightness is spent output ratio."),s.a.createElement("p",null,"Each crystal creates sound based on value, spent outputs and fee."),s.a.createElement("p",null,"Sounds are cycled through in the order the transactions were made."))}}},{key:"audioMuteControls",value:function(){return this.props.audioMuted?s.a.createElement("div",{className:"volume-controls"},s.a.createElement("i",{className:"fas fa-volume-mute",onClick:this.props.unMuteAudio})):s.a.createElement("div",{className:"volume-controls"},s.a.createElement("i",{className:"fas fa-volume-up",onClick:this.props.muteAudio}))}},{key:"render",value:function(){if(this.props.closestBlock){var e=this.props.closestBlock.blockData.healthRatio>1?1:this.props.closestBlock.blockData.healthRatio,t=1-e,n="block-details-container",r="";"fly"===this.props.controlType&&(r="hide",n+=" cockpit");var i="";return this.props.txSelected&&(i=" tx-selected"),s.a.createElement("div",{className:n},s.a.createElement("div",{className:"cockpit-border"}),this.UICockpitInfoOverlay(),this.UIIntroOverlay(),this.UICockpit(),this.UICockpitButton(),this.UIAutoPilot(),s.a.createElement("div",{className:"grad-left"+r}),s.a.createElement("div",{className:"grad-right"+r}),this.UIUndersideButton(),this.UITXDetails(),s.a.createElement("div",{className:"block-hash"},s.a.createElement("h2",null,"//BLOCK-",this.props.closestBlock.blockData.height),s.a.createElement("h3",null,this.props.closestBlock.blockData.hash)),this.UIBlockNavigation(),s.a.createElement("div",{className:"block-details "+i},s.a.createElement("h2",{className:"block-details-heading"},"//BLOCK-",this.props.closestBlock.blockData.height),s.a.createElement("div",{className:"block-details-border"}),s.a.createElement("div",{className:"block-details-inner"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("h3",null,"Health:")," ",s.a.createElement("div",{className:"health-bar-container",tooltip:t},s.a.createElement("div",{className:"health-bar",style:{width:100*t,background:"rgba("+255*t+", "+255*t+", "+255*t+", 1.0)"}}))),s.a.createElement("li",null,s.a.createElement("h3",null,"No. of Tx:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.n_tx)),s.a.createElement("li",null,s.a.createElement("h3",null,"Output:")," ",s.a.createElement("i",{className:"fab fa-btc"}),s.a.createElement("strong",null,(this.props.closestBlock.blockData.outputTotal/1e8).toFixed(2))),s.a.createElement("li",null,s.a.createElement("h3",null,"Fees:")," ",s.a.createElement("i",{className:"fab fa-btc"}),s.a.createElement("strong",null,(this.props.closestBlock.blockData.fee/1e8).toFixed(2))),s.a.createElement("li",null,s.a.createElement("h3",null,"Date:")," ",s.a.createElement("strong",null,c.a.unix(this.props.closestBlock.blockData.time).format("HH:mm DD/MM/YY"))),s.a.createElement("li",null,s.a.createElement("h3",null,"Bits:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.bits)),s.a.createElement("li",null,s.a.createElement("h3",null,"Size:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.size/1e3," KB")),s.a.createElement("li",null,s.a.createElement("h3",null,"Height:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.height)),s.a.createElement("li",null,s.a.createElement("h3",null,"Merkle Root:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.mrkl_root.substring(0,10))),s.a.createElement("li",null,s.a.createElement("h3",null,"Nonce:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.nonce)),s.a.createElement("li",null,s.a.createElement("h3",null,"Version:")," ",s.a.createElement("strong",null,this.props.closestBlock.blockData.ver)),s.a.createElement("li",{className:"view-details"},s.a.createElement("h3",null,s.a.createElement("strong",null,s.a.createElement("a",{target:"_blank",href:"https://www.blockchain.com/btc/block-height/"+this.props.closestBlock.blockData.height},"View Details"))))))),s.a.createElement("div",{className:"info-panel lower-info"},this.audioMuteControls(),s.a.createElement(l.a,{config:this.props.config})))}return s.a.createElement("div",null)}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(231),c=n.n(u),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.oscilloscope=n,n}return o(t,e),l(t,[{key:"drawScope",value:function(e,t){if(t){var n=t.getContext("2d"),r=n.canvas.width,i=n.canvas.height,o=new Uint8Array(e.frequencyBinCount),a=i/256,s=0;for(e.getByteTimeDomainData(o),n.fillStyle="rgba(0, 0, 0, 0.1)",n.fillRect(0,0,r,i),n.lineWidth=1,n.strokeStyle="rgb(255, 255, 255)",n.beginPath();o[s++]-128>0&&s<=r;);for(s>=r&&(s=0);o[s++]-128<5&&s<=r;);s>=r&&(s=0);for(var u=s;u<o.length&&u-s<r;u++)n.lineTo(u-s,i-o[u]*a);n.stroke()}}},{key:"render",value:function(){return this.props.config.detector.isMobile?null:s.a.createElement("div",{className:c.a.oscilloscope},s.a.createElement("div",{className:c.a.scopeBorder}),s.a.createElement("div",{className:c.a.scopeGridContainer},s.a.createElement("div",{className:c.a.scopeGridContainerChildTopLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildTop}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChildLeft}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild}),s.a.createElement("div",{className:c.a.scopeGridContainerChild})),s.a.createElement("canvas",{id:c.a.scope,ref:"scope",width:"220",height:"80"}))}}]),t}(a.Component);t.a=h},function(e,t){e.exports={scope:"S_kws6Y_QH_6y9cuhE8pE",scopeBorder:"_3F0ChocNEsR4vrPW1acpQC",scopeGridContainer:"b6MxYaEZOWTqdVy8NZ6Qr",scopeGridContainerChild:"_3cVOBECFeO4IXiQcqrfFAn",scopeGridContainerChildTop:"_1v3yo65ghaHqEDulcqfxEM _3cVOBECFeO4IXiQcqrfFAn",scopeGridContainerChildLeft:"_1DCJfej3YAednQOIrhRjUw _3cVOBECFeO4IXiQcqrfFAn",oscilloscope:"aYOi1B46wEemY9Ptxlcur"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(233),c=n.n(u),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={vrActive:!1},n}return o(t,e),l(t,[{key:"toggleState",value:function(){this.state.vrActive?(this.props.initCamera(!1),this.props.endVRSession()):(this.props.initCamera(!0),this.props.startVRSession()),this.setState({vrActive:!this.state.vrActive})}},{key:"render",value:function(){var e="not-supported";return this.props.VRSupported&&(e=this.state.vrActive?c.a.exit:c.a.enter),s.a.createElement("button",{title:this.state.vrActive?"Exit VR":"Enter VR",onClick:this.toggleState.bind(this),className:e})}}]),t}(a.Component);t.a=h},function(e,t){e.exports={enter:"_3c3_mmaKHtIOyppoKn_4SP",exit:"_27F_iwPRqf9mBdUW9AfnMN _3c3_mmaKHtIOyppoKn_4SP"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(235),c=n.n(u),l=n(236),h=n.n(l),p=n(237),f=n.n(p),d=n(238),m=n.n(d),g=n(239),v=n.n(g),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),y(t,[{key:"render",value:function(){var e=this,t="sidebar";return this.props.sidebarOpen?t+=" open":t+=" closed",t+=this.props.animatingCamera?" camera-animating":"",s.a.createElement("div",{className:t},s.a.createElement("button",{className:"expand",onClick:this.props.toggleSidebar}),s.a.createElement("h1",null,"Symphony"),s.a.createElement("h2",null,"3D Blockchain Explorer"),s.a.createElement("div",{className:"section key"},s.a.createElement("h3",null,"Transaction Value"),s.a.createElement("div",{className:"sidebar-show"},s.a.createElement("img",{alt:"Transaction",src:v.a})),s.a.createElement("div",{className:"sidebar-hide"},s.a.createElement("img",{alt:"Transaction Key",src:h.a})),s.a.createElement("h3",null,"Spending"),s.a.createElement("div",{className:"sidebar-show"},s.a.createElement("img",{alt:"Transaction Spending",src:f.a})),s.a.createElement("div",{className:"sidebar-hide"},s.a.createElement("span",{className:"spending-key"},s.a.createElement("img",{alt:"Spent Transaction",src:f.a})," ",s.a.createElement("span",null,"Spent")),s.a.createElement("span",{className:"spending-key"},s.a.createElement("img",{alt:"Unspent Transaction",src:m.a})," ",s.a.createElement("span",null,"Unspent")))),s.a.createElement("div",{className:"section explore"},s.a.createElement("h3",null,"Explore"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("button",{className:"search",onClick:this.props.toggleSidebar}),s.a.createElement("span",{id:"sidebar-locate-block",onClick:this.props.toggleBlockSearch},"Locate Block"),s.a.createElement("span",{id:"sidebar-locate-tx",onClick:this.props.toggleTxSearch},"Locate Transaction"),s.a.createElement("span",{id:"sidebar-random-block",onClick:this.props.goToRandomBlock},"Random Block"),s.a.createElement("span",{id:"sidebar-latest-block",onClick:function(){e.props.goToBlock(e.props.maxHeight,!0)}},"Latest Block"),s.a.createElement("span",{id:"sidebar-jump-date",onClick:this.props.toggleDateSearch},"Jump to Date")))),s.a.createElement("div",{className:"sidebar-footer"},s.a.createElement("div",{className:"sidebar-footer-inner"},s.a.createElement("a",{href:"https://iohk.io"},s.a.createElement("span",{className:"iohk-supported"},"IOHK Supported Project"),s.a.createElement("img",{className:"iohk-logo",alt:"IOHK Logo",src:c.a})))))}}]),t}(a.Component);t.a=b},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAWCAYAAAA8VJfMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0pJREFUeNqklv1PjWEYx+9TT0nqaJIUvRCmEoW8JMOYNfO6GfODza/+KD+SH8gPzMYWJlrDFEp5qaw3Kno9vThFvtf2ebbj7Khwb5+dc57nfq7rur/3976eE+hKTD/vnIsXH8Q3MSa+unnGz/CQ89JzXVZns4tLTXGLGBkiVaSLTI8fS8UnkS02i1UiLBpFq/u3USh2CsvRL0bFnMizC0/EsPgRscJloowHt4tOUb/IZHstsJgW7eKVmOBepmiypG1io7gs3tlFEWLyOCqcFRvEzYgA0cPmnRFxoppFLBf5wvZgE3muezwQz2o+8lkgDiB3L0HsoUviqhiJSriGhHdFlzjFFnXjk06KCtrkgIzkP5jGPq4XzREB9yFXG9twWEaqkZGGMJIFqmKb8njeZG2IiFGCZyzxgBdxw6o/Ki7g5DozKpPNULup1IJViDtIWUmRW9mWW2Il1z28YUo8QAnnRclkq7mCRDYSRRFW/yImRRIutAKSSZyECnbttK0GSeeIlctvFyupTegxCU168V48xhBbxBRFrCDBDN8T8cMScQ8DWqIcvj+KTOLFcGEBjptiJWaKZ+I118MEPIacxeIpidsoqgwTmU++o1LvfEltPwfFLKtIw0zlHAMr5gTJQ0jbwr6VI2mfeEN3C9Ac5l2pI9gcRhpnFWESJIKNBCRNoshJPv2zPBoreKykJuFBkg7TnfzzG+T+fVZnq96BdN0R0mdR2B5ivIhcbaykfVQYIFgtHaUQueY4RjXInYwiCcxromUWc21iIXmz2Zs6upQFLaW7zCD1IAWNIW0Pq3F4oJJi2/m0Ivej1udYSe1YnOOm33t7Ofz5BA2RcAo5RyjOCutA5gJkT6PfBlnI7VhJ65G2kYCOnnsEiewc7+IsOpI14e4WEtir8TnXHSYr4VT8Ju86cYgVtVKpybwaN9bS2mzOjaiGP8YZrqIJhChylldlF00mnzkNftIge5eK66ZJ/pBKj2OK6j+82mwLromTJPNNlk0LzUIFo8PeMmvZuyD74ffcUianRL/EF/i7UkH7C3ESmjGhr2iPRztz7EMOZsmg4pfs1d8Mv7giOtQ2/DCM+S569EUP+Qaw9oD7//EWHM72/5j1/xJgABa0BME4fkX4AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAZCAYAAACrWNlOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE4MEFFOTY1MDJCQjExRTlBOTJDODFBODVCNjA1NkMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE4MEFFOTY2MDJCQjExRTlBOTJDODFBODVCNjA1NkMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTgwQUU5NjMwMkJCMTFFOUE5MkM4MUE4NUI2MDU2QzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTgwQUU5NjQwMkJCMTFFOUE5MkM4MUE4NUI2MDU2QzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4fijlOAAAHGUlEQVR42uxZS2wbVRR9Y8/4b8efpImdOElL2kKhLaIqQtAFtBWlfAqILmDBFiEWiAULJCSECisQCySEQEUIIUCqgAVCokKCRRGISqUpQZRAk+bX1nUcf1In/nvGnDu9didOTOI2Im3lKx05Hr959jtz3r33vEiVSkW0YlHYAC/gAdyAA7ADMmAB2oA48BcwvtQEUovYBfEwE1nk9xpQYmSBXCaTSV9KpztCwWAQ77v4s3PACSDRInZx7E+n01sURfnCbrcnDOTWolQqiYnJSUuxWPSA2LjP56PL24EtgB/IAD8BY3KLTz2Cmqb1xROJwyAtTWJs83gWDMjmciIWiwlJkmSHw2GOJ5NCVhThdrmG8PEQD7sbeBd4zNTiVI8n8vn8kXyhkAbBoqJpiwYgBYhsNivMsiyZTCZZLZf1a3WRr+bclmIvx61Q4QOdHR2S1Wo95nK54vUDOtrbBdKEiFy8WALxc36kga7OTuOQ9cDtwIc3U46lQnIYOAv8CPwKzDRx/95CoZAslcs7XE6nxpX/PHC8bh4T8nCwUCyG2wOBEtKC3dA1UK59H6DEO3yzKPYi8DTQx3kuRqJp4n4LKv1gJBIZ3DgwIJxO5w5c28pz0n6f43Gyx+NRyuWyAlJT1CXw9qeOYRiIArfdTMRSzAMh4FXgvSbvrZjNZoE00D4di6V6urtPWiyWk/zZK6xaep9IpVKFSDRq6uvt1aDu+laNoqxLu/4bxsbHpfGJCYGnsvCbkTImp6Zq78+MjIjzFy5cT8S+ADwP7DEorKmQZVmjlio2syCLnGJSI6nZ2cJMIuG0Wa1BqFuA5OoYSglm4001YhNoH0CWvn1Q9aitMLoQnVi6fnZsTEEv56C/6Sn/j/EQsHMpkwN8RwUIeAqYpHbnKr8DHZQiEbkGYdH6HbR+5Ff6MhUPIK93Ctls44mqPy7g91eSySRNUoTMFbZzFs5ZBRBZCPf0yKqq2vElAUxOCzjDC6F5FM45JnYsqxkf8LwPAveSevg6qfMd4HXgG8P4g03OL7F4iLBKnbCEUViAgr+deE38l7CqxJL3nV3f378Xgx0G16FyEh/nipubm5srzWcyZeQhqoaPsKWjnEDtxVF+GPlVInQz8BHwPfAm0AP8wE7nOS4u+7l4GeOfZnOszq4kWbgQLWb+CtHESWG5bko29GC++fn5u6DEj9HHTRvIpRlPA6O0ReBOvJi0jPwybLB0dwL3cNsxAvyxSr79LeBJnlNwC/QaQL/vM2qTVml3VBVbrJK8zFhzvaIbEbsZjsML0j6BxCOqpqmNLB0+N5Gtq7N0lBKS3G68Dey7xpOlN1id9/MpkjG+YqKHVjHVVEiBWJetqlhTHXFEJKWCymWpqtXU0Ciqn+wiS4fBabyqdZYOaVUtRaNRifo3TObFl7gaWLrC1VZkjh5u8Gm7PbMEqdUYWuUcXt3q5SrJap2tJWGBG71zoOFEKkzFsortIUsHlfpwxzE0y6mZeFyBLxaweW0oau1UJdHnFaBsO/lpm83Wl8vlSmdGR9Ohrq480gedX7qAb69ybZSvD5Fv52O4tQgqXCqtj1rL7lCI1lkTFgiX+ZzWQYUrB6KTaLn8l1PiksQeB/sTisVyB7b24z6v14rJp2DdTqD9yPkDgTwmPodugVoOM6670UWsw2svtgyN7cCv2QMVv4zxW5fLP3VBPeCLwH1rSSr9ZhBHxcsH0kzFYlGBEVgkLIyhHGkll2dRlBLSZxqvJKy8MQvInGDs0enpERSkQ0ZLB/dB7c0mvIZu2bBhi9HS4cmm7DYb5aMkiJ3FHNtgLKL9fX0H8QNWup4O7iSo0h9YQ3OhEXEgl85UL1FxwprydkWpGIUFsjVwEeWOwAwOukGeC24tbDKbwxCn19vWNkcPSScWuWMU+bIIQvwYdKnO0n3KHcIvjSwdvoBUt2HTxo0eJmslsZv7z2eBv9fSsmGrW5HWqH0cLqLz0VSVUoAIdnWRCVLBRT4YDGogV2CcAIm6UQDBU8i5Ars3i51rQXHXQGoI5A5WFdsfDofX4cbzaKkksnQgt+ZygT/Z0gm2dF5Yugt0lMYtF5kDJyalrfzzCtfzEpM6udZemMgiYbndbp1QyrHtgYDRWUoOu130hsMikUjo3RAehu7O+DiRevnjJCzispYKULhIjY+6BwaoIpKr+Q03RehpcFgNlq6M6xmamCyd70ri3sdnkV+vcD0HxHUS2HHbIaxTqC/nljlLEJ0Lz2CF4eDFBWHtAo4uOI+lswJImvz2NiCA69TyjGDgJvwdr9BBBKws3lMCdbLDUjhZy9wDfs6t0o0Wu9nl1YRFO5SLMJ07nMb1Me51a1bNUKKtuE5r/xI4stxB904+hvNjDJ1vqmQMON/m+VwgzUhyD3vD/yehgbB+r5Dba0JYrf/SNo5rEta/AgwAVoBpnlaBP2IAAAAASUVORK5CYII="},function(e,t,n){e.exports=n.p+"static/media/symphony.tx-spent.svg"},function(e,t,n){e.exports=n.p+"static/media/symphony.tx-unspent.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA7VJREFUeNp8VUtPE1EUvvPse0pfKQULmgBREmVBNC5cupG4cOnPcOnfYOPGtSbGH+AaExMSBcSFLIxRwJRSOi0d0nl1Zup3hjswlJabfPO4c+53zzn3O2eE4XDIRkYSmAI0IAekgRQgAyqQB9rAT+DP6GIhRrjGCVz+HgADDhOw+v2+0TOMykytVsP7NP92CHwF9DjhM8MwlhVFeZ9KpfQY6cUYDAbs7/6+6rquBsJ2oVCg6RVgGSgCfeAzhVELgmC+retvYWzQ5nlNu0JmWhZrtVpMEAQ5nU5L7U6HyYrCctnsLj7vcrNHwLqIywvbtj/YjmOAmA2DYNQ5hlCZaZpMkmVBFEXZ97xwbmTYlFMKeR0PG7quC4lEYiObzbbZmHHa67HG0ZGKDZPFQsE4T+PFuAM8Bn4Q4VPHcToDz1vNZjIBP8l/wCZwElskIs81x3Xr5VJpgPBTMRVQLt8AhVAKOLntRqOxvbiwwDKZzCrm7gMveaLPOKGsaZrieZ4Csi6dOg+TFLAHNIF7RDiUJIkh3PJxq9W9NTu7parqFid5zb2kd73b7TqNZlOcn5sLEE085DV+98RoRpblgKTROolHyXY4WaN7euqc6HommUjUEA0DeWRDoUsXeYkthhIUgUgRVrxq0qRV5I8JjPnY2A5P3jTHnV1IKNADFpHhELIgvV0xIkKaBxQ8Z+iZ0jSJMCwVkKgR+bX6vNzAB5wx9T/WQzciv2GQrTQawTUPaUcYJSNycWQBEVCYw3PX/CgFkwijkLyI3B8pP6pllGeoBDInMhTDZMIo9zD0qZ73Dw5CAvIGY9BsNqmiFN4n03QgFr53LqVzKZXIQyygQynAWETXUSBgVq1U8p1Op0wygvDpMKgNJYB5VVEG6FAG7jbq344cJMKAFoCUelqPkg4v7ZSiDKFLq1gq2fDwEJsEqKAmP2EJ0czCiyyqqy5KUh0pmJrK589khJSwLIuKfM+FqAPfZ8lkktWmp0lrPkhsdJYApAx2DItDgYP4ADllpWLRxCGq6JcBnJqRyQi9zc3lciER5RDdJC5cIZ1Ksbl6naHFhY0VToTVVCmXGaKg38Dm0uKihk1uy3B9pV6v76D7Ht4kQPKmWq2O+0TqyMK7J8AnaulfMPGcS6aB+zdqBlxKJJOA8sa1ei6HqyWFiIVXuH8Efsf/eneBB0AJc1Riv2C4hOfvsDgGYwnvdMIZ3oQVLjuZF8U7kpkwoS4fAjP0N8P3VmiIHxT/G9q8uRocHarvaOF/AQYAPVjTWtgYCcMAAAAASUVORK5CYII="},function(e,t,n){e.exports=function(){return n(10)('/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "/symphony-2/";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\nObject.defineProperty(__webpack_exports__, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_array__ = __webpack_require__(1);\n\r\n\r\nimportScripts(\'https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js\')\r\nimportScripts(\'https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js\')\r\nimportScripts(\'https://www.gstatic.com/firebasejs/6.3.3/firebase-auth.js\')\r\n\r\nlet firebaseDB\r\nlet docRef\r\nlet docRefGeo\r\nlet docRefUpdate\r\n\r\nself.addEventListener(\'message\', async function (e) {\r\n  let data = e.data\r\n  switch (data.cmd) {\r\n    case \'init\':\r\n      firebase.initializeApp(data.config.fireBase)\r\n\r\n      firebase.firestore()\r\n      firebaseDB = firebase.firestore()\r\n      docRef = firebaseDB.collection(\'bitcoin_blocks\')\r\n      docRefGeo = firebaseDB.collection(\'bitcoin_blocks_geometry\')\r\n      docRefUpdate = firebaseDB.collection(\'bitcoin_update\')\r\n\r\n      firebase.auth().signInAnonymously().catch(function (error) {\r\n        console.log(error.code)\r\n        console.log(error.message)\r\n      })\r\n      break\r\n\r\n    case \'get\':\r\n\r\n      let blocksToLoadEitherSide = data.blocksToLoadEitherSide\r\n      let blockHeightIndexes = data.blockHeightIndexes\r\n      let geoBlockHeightIndexes = data.geoBlockHeightIndexes\r\n\r\n      let closestBlocksData = {}\r\n\r\n      let blockGeoData = docRefGeo\r\n        .where(\'height\', \'>=\', data.closestHeight - blocksToLoadEitherSide)\r\n        .where(\'height\', \'<=\', data.closestHeight + blocksToLoadEitherSide)\r\n        .orderBy(\'height\', \'asc\')\r\n        .limit(9)\r\n\r\n      let geoSnapshot = await blockGeoData.get()\r\n\r\n      let i = 0\r\n      geoSnapshot.forEach(snapshot => {\r\n        let geoData = snapshot.data()\r\n\r\n        let offsetJSON = JSON.parse(geoData.offsets)\r\n        let offsetsArray = Object.values(offsetJSON)\r\n\r\n        let scalesJSON = JSON.parse(geoData.scales)\r\n        let scalesArray = Object.values(scalesJSON)\r\n\r\n        geoBlockHeightIndexes[i] = geoData.height\r\n\r\n        scalesArray.forEach((scale, index) => {\r\n          data[\'scales\' + i][index] = scale\r\n        })\r\n\r\n        offsetsArray.forEach((offset, index) => {\r\n          data[\'offsets\' + i][index] = offset\r\n        })\r\n\r\n        i++\r\n      })\r\n\r\n      let blockData = docRef\r\n        .where(\'height\', \'>=\', data.closestHeight - blocksToLoadEitherSide)\r\n        .where(\'height\', \'<=\', data.closestHeight + blocksToLoadEitherSide)\r\n        .orderBy(\'height\', \'asc\')\r\n        .limit(9)\r\n\r\n      let querySnapshot = await blockData.get()\r\n\r\n      let dataArr = []\r\n      querySnapshot.forEach(async snapshot => {\r\n        dataArr.push(snapshot.data())\r\n      })\r\n\r\n      let ii = 0\r\n      await __WEBPACK_IMPORTED_MODULE_0__utils_array__["a" /* asyncForEach */](dataArr, async (blockDetails) => {\r\n        // edge struggles with this for some reason\r\n        if (!data.config.detector.isEdge) {\r\n          if (Date.now() - blockDetails.cacheTime.toMillis() > 604800000) {\r\n          // console.log(\'Block: \' + blockDetails.hash + \' is out of date, marked for update\')\r\n            let snapshots = await docRefUpdate.get()\r\n            let heightsToUpdate = []\r\n            snapshots.forEach(snapshot => {\r\n              let updateDataArr = snapshot.data()\r\n              heightsToUpdate = updateDataArr.heights\r\n            })\r\n            if (heightsToUpdate.indexOf(blockDetails.height) === -1) {\r\n              heightsToUpdate.push(blockDetails.height)\r\n            }\r\n            if (heightsToUpdate.length > 0) {\r\n              try {\r\n                await docRefUpdate.doc(\'heights\').set({ heights: heightsToUpdate }, { merge: false })\r\n              } catch (error) {\r\n                console.log(error)\r\n              }\r\n            }\r\n          }\r\n\r\n          if (blockDetails.tx[0].index === 0) {\r\n          // console.log(\'Block: \' + blockDetails.hash + \' data incomplete, marked for update\')\r\n            let snapshots = await docRefUpdate.get()\r\n            let heightsToUpdate = []\r\n            snapshots.forEach(snapshot => {\r\n              let updateDataArr = snapshot.data()\r\n              heightsToUpdate = updateDataArr.heights\r\n            })\r\n            if (heightsToUpdate.indexOf(blockDetails.height) === -1) {\r\n              heightsToUpdate.push(blockDetails.height)\r\n            }\r\n            if (heightsToUpdate.length > 0) {\r\n              try {\r\n                await docRefUpdate.doc(\'heights\').set({ heights: heightsToUpdate }, { merge: false })\r\n              } catch (error) {\r\n                console.log(error)\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        blockHeightIndexes[ii] = blockDetails.height\r\n\r\n        // if (updatedBlockDetails !== null) {\r\n        //   blockDetails = updatedBlockDetails\r\n        // }\r\n\r\n        blockDetails.tx.forEach((tx, index) => {\r\n          data[\'txValues\' + ii][index] = tx.value\r\n          data[\'txIndexes\' + ii][index] = tx.index\r\n          data[\'txSpentRatios\' + ii][index] = tx.spentRatio\r\n        })\r\n\r\n        blockDetails.tx = []\r\n\r\n        closestBlocksData[blockDetails.height] = blockDetails\r\n\r\n        ii++\r\n      })\r\n\r\n      let returnData = {\r\n        closestBlocksData: closestBlocksData,\r\n\r\n        blockHeightIndexes: blockHeightIndexes,\r\n        geoBlockHeightIndexes: geoBlockHeightIndexes,\r\n\r\n        scales0: data.scales0,\r\n        scales1: data.scales1,\r\n        scales2: data.scales2,\r\n        scales3: data.scales3,\r\n        scales4: data.scales4,\r\n        scales5: data.scales5,\r\n        scales6: data.scales6,\r\n        scales7: data.scales7,\r\n        scales8: data.scales8,\r\n\r\n        offsets0: data.offsets0,\r\n        offsets1: data.offsets1,\r\n        offsets2: data.offsets2,\r\n        offsets3: data.offsets3,\r\n        offsets4: data.offsets4,\r\n        offsets5: data.offsets5,\r\n        offsets6: data.offsets6,\r\n        offsets7: data.offsets7,\r\n        offsets8: data.offsets8,\r\n\r\n        txValues0: data.txValues0,\r\n        txValues1: data.txValues1,\r\n        txValues2: data.txValues2,\r\n        txValues3: data.txValues3,\r\n        txValues4: data.txValues4,\r\n        txValues5: data.txValues5,\r\n        txValues6: data.txValues6,\r\n        txValues7: data.txValues7,\r\n        txValues8: data.txValues8,\r\n\r\n        txIndexes0: data.txIndexes0,\r\n        txIndexes1: data.txIndexes1,\r\n        txIndexes2: data.txIndexes2,\r\n        txIndexes3: data.txIndexes3,\r\n        txIndexes4: data.txIndexes4,\r\n        txIndexes5: data.txIndexes5,\r\n        txIndexes6: data.txIndexes6,\r\n        txIndexes7: data.txIndexes7,\r\n        txIndexes8: data.txIndexes8,\r\n\r\n        txSpentRatios0: data.txSpentRatios0,\r\n        txSpentRatios1: data.txSpentRatios1,\r\n        txSpentRatios2: data.txSpentRatios2,\r\n        txSpentRatios3: data.txSpentRatios3,\r\n        txSpentRatios4: data.txSpentRatios4,\r\n        txSpentRatios5: data.txSpentRatios5,\r\n        txSpentRatios6: data.txSpentRatios6,\r\n        txSpentRatios7: data.txSpentRatios7,\r\n        txSpentRatios8: data.txSpentRatios8\r\n      }\r\n\r\n      self.postMessage(returnData,\r\n        [\r\n          data.scales0.buffer,\r\n          data.scales1.buffer,\r\n          data.scales2.buffer,\r\n          data.scales3.buffer,\r\n          data.scales4.buffer,\r\n          data.scales5.buffer,\r\n          data.scales6.buffer,\r\n          data.scales7.buffer,\r\n          data.scales8.buffer,\r\n\r\n          data.offsets0.buffer,\r\n          data.offsets1.buffer,\r\n          data.offsets2.buffer,\r\n          data.offsets3.buffer,\r\n          data.offsets4.buffer,\r\n          data.offsets5.buffer,\r\n          data.offsets6.buffer,\r\n          data.offsets7.buffer,\r\n          data.offsets8.buffer,\r\n\r\n          data.txValues0.buffer,\r\n          data.txValues1.buffer,\r\n          data.txValues2.buffer,\r\n          data.txValues3.buffer,\r\n          data.txValues4.buffer,\r\n          data.txValues5.buffer,\r\n          data.txValues6.buffer,\r\n          data.txValues7.buffer,\r\n          data.txValues8.buffer,\r\n\r\n          data.txIndexes0.buffer,\r\n          data.txIndexes1.buffer,\r\n          data.txIndexes2.buffer,\r\n          data.txIndexes3.buffer,\r\n          data.txIndexes4.buffer,\r\n          data.txIndexes5.buffer,\r\n          data.txIndexes6.buffer,\r\n          data.txIndexes7.buffer,\r\n          data.txIndexes8.buffer,\r\n\r\n          data.txSpentRatios0.buffer,\r\n          data.txSpentRatios1.buffer,\r\n          data.txSpentRatios2.buffer,\r\n          data.txSpentRatios3.buffer,\r\n          data.txSpentRatios4.buffer,\r\n          data.txSpentRatios5.buffer,\r\n          data.txSpentRatios6.buffer,\r\n          data.txSpentRatios7.buffer,\r\n          data.txSpentRatios8.buffer\r\n        ]\r\n      )\r\n      break\r\n    case \'stop\':\r\n      self.postMessage(\'WORKER STOPPED\')\r\n      self.close()\r\n      break\r\n    default:\r\n      self.postMessage(\'Unknown command\')\r\n  }\r\n\r\n  // self.postMessage(e.data)\r\n}, false)\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return asyncForEach; });\n/* unused harmony export concatenate */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\nvar asyncForEach = function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(array, callback) {\n    var index;\n    return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = 0;\n\n          case 1:\n            if (!(index < array.length)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return callback(array[index], index, array);\n\n          case 4:\n            index++;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function asyncForEach(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar concatenate = function concatenate(arrays) {\n  var totalLength = 0;\n  arrays.forEach(function (arr) {\n    totalLength += arr.length;\n  });\n\n  var result = new Float32Array(totalLength);\n  var offset = 0;\n  arrays.forEach(function (arr) {\n    result.set(arr, offset);\n    offset += arr.length;\n  });\n  return result;\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(3);\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function("return this")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(4);\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  "use strict";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === "function" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || "@@iterator";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";\n  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";\n\n  var inModule = typeof module === "object";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we\'re in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don\'t bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we\'re in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there\'s no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don\'t have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: "normal", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: "throw", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = "suspendedStart";\n  var GenStateSuspendedYield = "suspendedYield";\n  var GenStateExecuting = "executing";\n  var GenStateCompleted = "completed";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don\'t natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = "GeneratorFunction";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    ["next", "throw", "return"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === "function" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === "GeneratorFunction"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = "GeneratorFunction";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, "__await")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === "throw") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === "object" &&\n            hasOwn.call(value, "__await")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke("next", value, resolve, reject);\n          }, function(err) {\n            invoke("throw", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error("Generator is already running");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === "throw") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === "next") {\n          // Setting context._sent for legacy support of Babel\'s\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === "throw") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === "return") {\n          context.abrupt("return", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === "normal") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === "throw") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = "throw";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === "throw") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = "return";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === "throw") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // "return" to "throw", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = "throw";\n        context.arg = new TypeError(\n          "The iterator does not provide a \'throw\' method");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === "throw") {\n      context.method = "throw";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = "throw";\n      context.arg = new TypeError("iterator result is not an object");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was "throw" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was "next", forget context.arg since it has been\n      // "consumed" by the delegate iterator. If context.method was\n      // "return", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== "return") {\n        context.method = "next";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = "Generator";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers\' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn\'t happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return "[object Generator]";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = "normal";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: "root" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === "function") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel\'s\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = "next";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === "t" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === "throw") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = "throw";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = "next";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === "root") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle("end");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, "catchLoc");\n          var hasFinally = hasOwn.call(entry, "finallyLoc");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error("try statement without catch or finally");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, "finallyLoc") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === "break" ||\n           type === "continue") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = "next";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === "throw") {\n        throw record.arg;\n      }\n\n      if (record.type === "break" ||\n          record.type === "continue") {\n        this.next = record.arg;\n      } else if (record.type === "return") {\n        this.rval = this.arg = record.arg;\n        this.method = "return";\n        this.next = "end";\n      } else if (record.type === "normal" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    "catch": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === "throw") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error("illegal catch attempt");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === "next") {\n        // Deliberately forget the last sent value so that we don\'t\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we\'re in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function("return this")()\n);\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=c286956c42a2011a0f1f.worker.js.map',null)}},function(e,t,n){e.exports=function(){return n(10)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/symphony-2/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js')\r\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js')\r\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-auth.js')\r\n\r\nlet config = {}\r\n\r\nself.addEventListener('message', async function (e) {\r\n  let data = e.data\r\n  switch (data.cmd) {\r\n    case 'get':\r\n\r\n      config = data.config\r\n\r\n      firebase.initializeApp(config.fireBase)\r\n\r\n      firebase.firestore()\r\n      const firebaseDB = firebase.firestore()\r\n      const docRef = firebaseDB.collection('bitcoin_blocks')\r\n      const docRefUpdate = firebaseDB.collection('bitcoin_update')\r\n\r\n      firebase.auth().signInAnonymously().catch(function (error) {\r\n        console.log(error.code)\r\n        console.log(error.message)\r\n      })\r\n\r\n      // let blockDataHelper = new BlockDataHelper({\r\n      //   config: config\r\n      // })\r\n\r\n      // first check firebase\r\n      let blockRef = docRef.doc(data.hash)\r\n      let snapshot = await blockRef.get()\r\n\r\n      let blockData\r\n      let shouldCache = false\r\n\r\n      if (!snapshot.exists) {\r\n        console.log('Block data not in db')\r\n        shouldCache = true\r\n      } else {\r\n        blockData = snapshot.data()\r\n        // check if block was cached more than a week ago\r\n        if (Date.now() - blockData.cacheTime.toMillis() > 604800000) {\r\n          // console.log('Block: ' + data.hash + ' is out of date, marked for update')\r\n          shouldCache = true\r\n        }\r\n      }\r\n\r\n      if (!shouldCache) {\r\n        // console.log('Block data for: ' + data.hash + ' returned from cache')\r\n      } else {\r\n        let snapshots = await docRefUpdate.get()\r\n        let heightsToUpdate = []\r\n        snapshots.forEach(snapshot => {\r\n          let updateDataArr = snapshot.data()\r\n          heightsToUpdate = updateDataArr.heights\r\n        })\r\n        if (heightsToUpdate.indexOf(data.height) === -1) {\r\n          heightsToUpdate.push(data.height)\r\n        }\r\n        if (heightsToUpdate.length > 0) {\r\n          try {\r\n            await docRefUpdate.doc('heights').set({ heights: heightsToUpdate }, { merge: false })\r\n          } catch (error) {\r\n            console.log(error)\r\n          }\r\n        }\r\n      }\r\n\r\n      if (typeof blockData === 'undefined') {\r\n        let returnData = {\r\n          error: 'Failed to get blockdata from API'\r\n        }\r\n\r\n        self.postMessage(returnData)\r\n      } else {\r\n        blockData.tx.forEach((tx, i) => {\r\n          data.txValues[i] = tx.value\r\n          data.txSpentRatios[i] = tx.spentRatio\r\n          data.txIndexes[i] = tx.index\r\n        })\r\n\r\n        blockData.tx = []\r\n      }\r\n\r\n      let returnData = {\r\n        blockData: blockData,\r\n        txValues: data.txValues,\r\n        txSpentRatios: data.txSpentRatios,\r\n        txIndexes: data.txIndexes\r\n      }\r\n\r\n      self.postMessage(returnData, [\r\n        data.txValues.buffer,\r\n        data.txSpentRatios.buffer,\r\n        data.txIndexes.buffer\r\n      ])\r\n\r\n      break\r\n    case 'stop':\r\n      self.postMessage('WORKER STOPPED')\r\n      self.close()\r\n      break\r\n    default:\r\n      self.postMessage('Unknown command')\r\n  }\r\n}, false)\r\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=af10b1c24e2a751b6b58.worker.js.map",null)}},function(e,t,n){e.exports=function(){return n(10)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/symphony-2/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js')\r\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js')\r\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-auth.js')\r\nimportScripts('https://www.gstatic.com/firebasejs/6.3.3/firebase-storage.js')\r\n\r\n// import SimplexNoise from 'simplex-noise'\r\n// import { map } from '../utils/math'\r\n// import Voronoi from 'voronoi'\r\n// import VoronoiTools from '../utils/VoronoiTools'\r\n// import seedrandom from 'seedrandom'\r\n// import * as THREE from 'three'\r\n\r\nlet config = {}\r\nlet docRefGeo\r\n// let planeSize\r\n\r\nself.addEventListener('message', async function (e) {\r\n  let data = e.data\r\n  switch (data.cmd) {\r\n    case 'get':\r\n\r\n      config = data.config\r\n      let blockData = data.blockData\r\n      // planeSize = data.planeSize\r\n\r\n      firebase.initializeApp(config.fireBase)\r\n\r\n      firebase.firestore()\r\n      const firebaseDB = firebase.firestore()\r\n      docRefGeo = firebaseDB.collection('bitcoin_blocks_geometry')\r\n\r\n      firebase.auth().signInAnonymously().catch(function (error) {\r\n        console.log(error.code)\r\n        console.log(error.message)\r\n      })\r\n\r\n      // check for data in cache\r\n      let blockRefGeo = docRefGeo.doc(blockData.hash)\r\n      let snapshotGeo = await blockRefGeo.get()\r\n\r\n      // let cacheData = !snapshotGeo.exists\r\n\r\n      // let blockGeoData\r\n      // if (cacheData) {\r\n      //   blockGeoData = await save(blockData)\r\n      // } else {\r\n      let rawData = snapshotGeo.data()\r\n\r\n      let offsetJSON = JSON.parse(rawData.offsets)\r\n      let offsetsArray = Object.values(offsetJSON)\r\n\r\n      let scalesJSON = JSON.parse(rawData.scales)\r\n      let scalesArray = Object.values(scalesJSON)\r\n\r\n      let blockGeoData = {\r\n        offsets: offsetsArray,\r\n        scales: scalesArray,\r\n        height: blockData.height\r\n      }\r\n      // }\r\n\r\n      blockGeoData.scales.forEach((scale, index) => {\r\n        data.scales[index] = scale\r\n      })\r\n\r\n      blockGeoData.offsets.forEach((offset, index) => {\r\n        data.offsets[index] = offset\r\n      })\r\n\r\n      delete blockGeoData.scales\r\n      delete blockGeoData.offsets\r\n\r\n      let returnData = {\r\n        blockGeoData: blockGeoData,\r\n        scales: data.scales,\r\n        offsets: data.offsets\r\n      }\r\n\r\n      self.postMessage(returnData, [\r\n        data.scales.buffer,\r\n        data.offsets.buffer\r\n      ])\r\n\r\n      break\r\n    case 'stop':\r\n      self.postMessage('WORKER STOPPED')\r\n      self.close()\r\n      break\r\n    default:\r\n      self.postMessage('Unknown command')\r\n  }\r\n}, false)\r\n\r\n// const save = async function (blockData) {\r\n//   // console.log('Block geo data: ' + blockData.hash + ' does not exist in the db, adding...')\r\n//   let pointCount = Math.max(blockData.n_tx, 4)\r\n\r\n//   const simplex = new SimplexNoise(blockData.height)\r\n\r\n//   const voronoi = new Voronoi()\r\n//   const voronoiTools = new VoronoiTools(voronoi, blockData.height, planeSize)\r\n\r\n//   let sites = []\r\n\r\n//   Math.seedrandom(blockData.height)\r\n\r\n//   for (let index = 0; index < pointCount; index++) {\r\n//     let found = false\r\n//     let x = 0\r\n//     let y = 0\r\n\r\n//     while (found === false) {\r\n//       x = Math.floor(Math.random() * planeSize - (planeSize / 2))\r\n//       y = Math.floor(Math.random() * planeSize - (planeSize / 2))\r\n\r\n//       let noiseVal = simplex.noise2D(x / 300, y / 300)\r\n\r\n//       if (((Math.random() * 5) * noiseVal) > -0.3) {\r\n//         let exists = false\r\n//         for (let existsIndex = 0; existsIndex < sites.length; existsIndex++) {\r\n//           const site = sites[existsIndex]\r\n//           if (site.x === x && site.y === y) {\r\n//             exists = true\r\n//             break\r\n//           }\r\n//         }\r\n//         if (!exists) {\r\n//           found = true\r\n//         }\r\n//       }\r\n//     }\r\n//     sites.push({x: x, y: y})\r\n//   }\r\n\r\n//   let voronoiDiagram = voronoi.compute(sites, {\r\n//     xl: -planeSize / 2,\r\n//     xr: planeSize / 2,\r\n//     yt: -planeSize / 2,\r\n//     yb: planeSize / 2\r\n//   })\r\n\r\n//   // work out network health\r\n//   let feeToValueRatio = 0\r\n//   if (blockData.outputTotal !== 0) {\r\n//     feeToValueRatio = blockData.fee / blockData.outputTotal\r\n//   }\r\n\r\n//   let blockHealth = map(feeToValueRatio, 0, 0.0001, 20, 0)\r\n//   if (blockHealth < 0) {\r\n//     blockHealth = 0\r\n//   }\r\n\r\n//   let relaxIterations = Math.round(blockHealth)\r\n\r\n//   if (blockData.n_tx > 1) {\r\n//     for (let index = 0; index < relaxIterations; index++) {\r\n//       try {\r\n//         voronoiDiagram = voronoiTools.relaxSites(voronoiDiagram)\r\n//       } catch (error) {\r\n//         console.log(error)\r\n//       }\r\n//     }\r\n//   }\r\n\r\n//   let offsets = new THREE.InstancedBufferAttribute(new Float32Array(blockData.n_tx * 2), 2)\r\n//   let scales = new THREE.InstancedBufferAttribute(new Float32Array(blockData.n_tx), 1)\r\n\r\n//   for (let i = 0; i < blockData.n_tx; i++) {\r\n//     // if (typeof blockData.tx[i] === 'undefined') {\r\n//     //   continue\r\n//     // }\r\n//     let cell = voronoiDiagram.cells[i]\r\n\r\n//     let site = new THREE.Vector2(cell.site.x, cell.site.y)\r\n\r\n//     // look at all adjacent cells and get the closest site to this site\r\n//     let minDistToSite = Number.MAX_SAFE_INTEGER\r\n\r\n//     cell.halfedges.forEach((halfEdge) => {\r\n//       if (halfEdge.edge.rSite !== null) {\r\n//         let distanceToSiteSq = new THREE.Vector2(halfEdge.edge.rSite.x, halfEdge.edge.rSite.y).distanceToSquared(site)\r\n//         if (distanceToSiteSq > 0) {\r\n//           minDistToSite = Math.min(minDistToSite, distanceToSiteSq)\r\n//         }\r\n//       }\r\n//       if (halfEdge.edge.lSite !== null) {\r\n//         let distanceToSiteSq = new THREE.Vector2(halfEdge.edge.lSite.x, halfEdge.edge.lSite.y).distanceToSquared(site)\r\n//         if (distanceToSiteSq > 0) {\r\n//           minDistToSite = Math.min(minDistToSite, distanceToSiteSq)\r\n//         }\r\n//       }\r\n//     })\r\n\r\n//     let radius = Math.sqrt(minDistToSite) * 0.5\r\n\r\n//     let planeXEdgeDist = (planeSize / 2) - Math.abs(site.x)\r\n//     let planeYEdgeDist = (planeSize / 2) - Math.abs(site.y)\r\n\r\n//     if (planeXEdgeDist < radius) {\r\n//       radius = planeXEdgeDist\r\n//     }\r\n//     if (planeYEdgeDist < radius) {\r\n//       radius = planeYEdgeDist\r\n//     }\r\n\r\n//     offsets.setXY(\r\n//       i,\r\n//       site.x,\r\n//       site.y\r\n//     )\r\n\r\n//     scales.setX(\r\n//       i,\r\n//       radius\r\n//     )\r\n//   }\r\n\r\n//   let geoData = {\r\n//     offsets: offsets.array,\r\n//     scales: scales.array\r\n//   }\r\n\r\n//   try {\r\n//     await docRefGeo.doc(blockData.hash).set({\r\n//       offsets: JSON.stringify(geoData.offsets),\r\n//       scales: JSON.stringify(geoData.scales),\r\n//       height: blockData.height\r\n//     }, { merge: true })\r\n//     console.log('Geo data for block: ' + blockData.hash + ' successfully written')\r\n//   } catch (error) {\r\n//     console.log('Error writing document: ', error)\r\n//   }\r\n//   return geoData\r\n// }\r\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=76aa5b4559ca8f2e72e6.worker.js.map",null)}},function(e,t,n){"use strict";var r=n(2),i=n(244),o=new i.a,a={scene:{skipLaunchScreen:!0,mode:"lite",showIntro:!1,introTextTime:5500,canvasID:"symphony-stage",autoRotate:!1,autoRotateSpeed:.1,bgColor:1184551,fogDensity:25e-5,particleLifeMin:100,particleLifeMax:o.isMobile?200:1e3,particleEmitterRadius:o.isMobile?5e4:15e4,liveUnconfirmedTX:!1},debug:{debugPicker:!1,showGUI:!1},audio:{sampleRate:22050,soundDuration:30,noteDuration:10,maxSineBankLoops:1e3},blockchainInfo:{apiCode:"0a52b97c-0d8e-4033-a87d-abfda8bfe940"},fireBase:{apiKey:"AIzaSyCwfdzrjQ5GRqyz-napBM29T7Zel_6KIUY",databaseURL:"https://webgl-gource-1da99.firebaseio.com",projectId:"webgl-gource-1da99",storageBucket:"webgl-gource-1da99.appspot.com",messagingSenderId:"532264380396"},camera:{fov:80,initPos:o.isMobile?new r.Vector3(0,15e6,0):new r.Vector3(15e5,1e5,0),initTarget:new r.Vector3(0,0,0)},VR:{interactionTimeout:0,experienceLength:18e4},floatType:o.isMobile&&o.isIOS?r.HalfFloatType:r.FloatType,detector:o};t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(){r(this,e),this.prefixes="Webkit Moz O ms".split(" "),this.ua=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),this.isRetina=window.devicePixelRatio&&window.devicePixelRatio>=1.5,this.isChrome=this.ua.indexOf("chrome")>-1,this.isFirefox=this.ua.indexOf("firefox")>-1,this.isSafari=this.ua.indexOf("safari")>-1,this.isEdge=this.ua.indexOf("edge")>-1,this.isIE=this.ua.indexOf("msie")>-1,this.isMobile=/(iPad|iPhone|Android)/i.test(this.ua),this.isIOS=/(iPad|iPhone)/i.test(this.ua)};t.a=i},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(246),p=n.n(h),f=n(247),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.normalMap=(new c.TextureLoader).load("assets/images/textures/normalMap.jpg"),n.normalMap.minFilter=c.NearestFilter,n.instanceTotal=36e3,"lite"===n.config.scene.mode&&(n.instanceTotal=2e4),n.config.detector.isMobile&&(n.instanceTotal=12e3),n.txCount=0,n.txIndexOffsets={},n.cubeMap=(new c.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa-full/").load(["0004.jpg","0002.jpg","0006.jpg","0005.jpg","0001.jpg","0003.jpg"]),n.material=new v({flatShading:!0,opacity:1,color:16777215,emissive:0,metalness:1,roughness:.2,transparent:!0,side:c.FrontSide,envMap:n.cubeMap,normalMap:n.normalMap,normalScale:new c.Vector2(.01,.01),roughnessMap:n.roughnessMap}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l,h,p,f,d,m,g,v,y,b,_,x,w,T,E,S,k,C,M,A,O;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.offsetsArray=new Float32Array(3*this.instanceTotal),this.offsetsArray2D=new Float32Array(2*this.instanceTotal),this.txValuesArray=new Float32Array(this.instanceTotal),this.scalesArray=new Float32Array(this.instanceTotal),this.quatArray=new Float32Array(4*this.instanceTotal),this.isHovered=new Float32Array(this.instanceTotal),this.isSelected=new Float32Array(this.instanceTotal),n=t.blockData.pos,r=new c.CylinderGeometry(1,1,1,6),r.vertices[12].add(new c.Vector3(0,.01,0)),r.vertices[0].add(new c.Vector3(0,.02,0)),r.vertices[1].add(new c.Vector3(0,.02,0)),r.vertices[2].add(new c.Vector3(0,.01,0)),r.vertices[4].sub(new c.Vector3(0,.01,0)),i=(new c.BufferGeometry).fromGeometry(r),this.geometry=(new c.InstancedBufferGeometry).copy(i),o=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),a=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),s=new c.InstancedBufferAttribute(this.offsetsArray,3),l=new c.InstancedBufferAttribute(this.scalesArray,1),h=new c.InstancedBufferAttribute(this.quatArray,4),p=new c.InstancedBufferAttribute(this.isHovered,1),f=new c.InstancedBufferAttribute(this.isSelected,1),d=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),m=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),g=new c.Object3D,g.position.set(n.x,0,n.z),g.lookAt(0,0,0),this.setTxAttributes(g,t,s,h,l,this.txValuesArray,o,a,this.offsetsArray2D),this.geometry.addAttribute("offset",s),this.geometry.addAttribute("scale",l),this.geometry.addAttribute("spentRatio",o),this.geometry.addAttribute("quaternion",h),this.geometry.addAttribute("txTime",a),this.geometry.addAttribute("blockStartTime",d),this.geometry.addAttribute("blockLoadTime",m),this.geometry.addAttribute("isHovered",p),this.geometry.addAttribute("isSelected",f),v=this.geometry.getAttribute("position"),y=[],b=0;b<v.count/3;b++)23===b||22===b||21===b||20===b||19===b||18===b||17===b||16===b||15===b||14===b||13===b||12===b?y.push(0,0,0,0,0,0,0,0,0):b%2===0?y.push(0,0,1,0,1,0,1,0,1):y.push(0,1,0,0,0,1,1,0,1);return _=new Float32Array(y),x=new c.BufferAttribute(_,3),this.geometry.addAttribute("barycentric",x),w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=new Float32Array(w),E=new c.BufferAttribute(T,1),this.geometry.addAttribute("centerTopVertex",E),S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],k=new Float32Array(S),C=new c.BufferAttribute(k,1),this.geometry.addAttribute("centerBottomVertex",C),M=[1,0,1,0,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=new Float32Array(M),O=new c.BufferAttribute(A,1),this.geometry.addAttribute("topVertex",O),this.txCount+=t.blockData.n_tx,this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 60:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateBlockStartTimes",value:function(e){for(var t=this.txIndexOffsets[e.height],n=window.performance.now(),r=0;r<e.n_tx;r++)this.geometry.attributes.blockStartTime.array[t+r]=n;this.geometry.attributes.blockStartTime.needsUpdate=!0}},{key:"updateBlockLoadTimes",value:function(e){for(var t=this.txIndexOffsets[e.height],n=window.performance.now(),r=0;r<e.n_tx;r++)this.geometry.attributes.blockLoadTime.array[t+r]=n;this.geometry.attributes.blockLoadTime.needsUpdate=!0}},{key:"updateGeometry",value:function(e){this.txCount+e.blockData.n_tx>this.instanceTotal&&(this.txCount=0);var t=e.blockData.pos,n=new c.Object3D;n.position.set(t.x,0,t.z),n.lookAt(0,0,0),this.setTxAttributes(n,e,this.geometry.attributes.offset,this.geometry.attributes.quaternion,this.geometry.attributes.scale,this.txValuesArray,this.geometry.attributes.spentRatio,this.geometry.attributes.txTime,this.offsetsArray2D),this.txCount+=e.blockData.n_tx,this.updateBlockStartTimes(e.blockData),this.updateBlockLoadTimes(e.blockData)}},{key:"update",value:function(e){this.material.uniforms.uIsMobile.value=this.config.detector.isMobile?1:0,this.material.uniforms.uTime.value=e.time,this.material.uniforms.uAudioTime.value=e.time,this.material.uniforms.uCamPos.value=e.camPos,this.material.uniforms.uCamPosYPositive.value=e.camPos.y>1,this.material.uniforms.uAutoPilot.value=e.autoPilot}}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uIsMobile={type:"f",value:0},n.uniforms.uTime={type:"f",value:0},n.uniforms.uAutoPilot={type:"f",value:0},n.uniforms.uCamPos={type:"v3",value:new c.Vector3(0,0,0)},n.uniforms.uCamPosYPositive={type:"f",value:1},n.uniforms.uAudioTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshStandardMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_3_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_3_0(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_3_1(vec4 x) {\n     return mod289_3_0(((x*34.0)+1.0)*x);\n}\n\nfloat permute_3_1(float x) {\n     return mod289_3_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_3_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_3_2(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_3_3(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_3_4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_3_0(i);\n  float j0 = permute_3_1( permute_3_1( permute_3_1( permute_3_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_3_1( permute_3_1( permute_3_1( permute_3_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_3_5 = grad4_3_3(j0,   ip);\n  vec4 p1 = grad4_3_3(j1.x, ip);\n  vec4 p2 = grad4_3_3(j1.y, ip);\n  vec4 p3 = grad4_3_3(j1.z, ip);\n  vec4 p4 = grad4_3_3(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_3_2(vec4(dot(p0_3_5,p0_3_5), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_3_5 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_3_2(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_3_5, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\nfloat random_1_6(float n){\n    return fract(sin(n) * 43758.5453123);\n}\n\n\nfloat random_1_6 (vec2 st_1_7) {\n    return fract(sin(dot(st_1_7.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n\n\nvec2 truchetPattern_2_8(in vec2 _st, in float _index){\n    _index = fract(((_index-0.5)*2.0));\n    if (_index > 0.75) {\n        _st = vec2(1.0) - _st;\n    } else if (_index > 0.5) {\n        _st = vec2(1.0-_st.x,_st.y);\n    } else if (_index > 0.25) {\n        _st = 1.0-vec2(1.0-_st.x,_st.y);\n    }\n    return _st;\n}\n\n\n\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float uTime;\nuniform float uCamPosYPositive;\n\nvarying float vIsSelected;\nvarying float vIsHovered;\nvarying vec3 vBarycentric;\nvarying vec3 vTransformed;\nvarying vec3 vOffset;\nvarying float vScale;\nvarying float vTopVertex;\nvarying float vBottomVertex;\nvarying float vEnvelope;\nvarying vec4 vWorldPosition;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\nvarying float vSpentRatio;\nvarying vec3 vNormal;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n// #include <alphamap_pars_fragment>\n// #include <aomap_pars_fragment>\n// #include <lightmap_pars_fragment>\n// #include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n// #include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tfloat d = min(min(vBarycentric.x, vBarycentric.y), vBarycentric.z);\n\n\tfloat edgeAmount = pow(\n\t\tclamp(\n\t\t\t (1.0 - d),\n\t\t\t 0.9, 1.0\n\t\t), \n\t\t10.0\n\t);\n\n\n\tfloat sideEdgeAmount = edgeAmount * ((1.0-(vBottomVertex * 0.7)));\n\n\tvec3 diffuseVar = vec3( 0.0 );\n\n\tdiffuseVar += 1.0-(vSpentRatio * 0.7);\n\t\n\tvec4 diffuseColor = vec4( diffuseVar + sideEdgeAmount, opacity);\n\n\t#include <normal_fragment_begin>\n\n\tvec3 normalSmooth = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormalSmooth = normalSmooth * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\n\n\t#include <normal_fragment_maps>\n\n\tdiffuseColor.rgb = mix( vec3(23./255., 73./255., 141./255.), diffuseColor.rgb, 0.5 );\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\tvec3 totalEmissiveRadiance = vec3(0.0);\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t// #include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tfloat noiseAmount = snoise_3_4(vec4(vOffset.xyz / (vScale * 8.0), uTime * 0.00025)) * 0.1;\n\n\toutgoingLight += noiseAmount * 0.5;\n\n\tvec2 st = (vec2((vUv.x * vScale * 5.0), vOffset.y) * 0.5);\n\tvec2 ipos = floor(st);  // integer\n\tvec2 fpos = fract(st);  // fraction\n\n\tvec2 tile = truchetPattern_2_8(fpos, random_1_6( ipos ) * uTime * 0.00005);\n\n\t// Maze\n\tfloat tileColor = 0.0;\n\ttileColor = smoothstep(tile.x-0.3, tile.x, tile.y)-\n\t\t\tsmoothstep(tile.x, tile.x+0.3, tile.y);\n\n\t// further smoothing    \n\ttileColor -= smoothstep(tile.x+0.3,tile.x,0.0)-\n\t\t\tsmoothstep(tile.x,tile.x-0.3,-0.15);\n\t\n\ttileColor -= smoothstep(tile.y+0.3,tile.y,0.0)-\n\t\t\tsmoothstep(tile.y,tile.y-0.3,-0.15);\n\t\n\ttileColor -= smoothstep(tile.x+0.3,tile.x,1.15)-\n\t\t\tsmoothstep(tile.x,tile.x-0.3,1.0);\n\t\n\ttileColor -= smoothstep(tile.y+0.3,tile.y,1.15)-\n\t\t\tsmoothstep(tile.y,tile.y-0.3,1.0);\n\n\tfloat absNoise = abs(noiseAmount) * 30.0;\n\t\n\tfloat tileNoiseColor = ((pow(tileColor, 3.0) * 2.0) * absNoise) * (0.1 + (vEnvelope * 3.0));\n\n\n\toutgoingLight.b += (tileNoiseColor * (1.0 - vTopVertex) * (1.0 - vBottomVertex) );\n\toutgoingLight.g += (tileNoiseColor * (1.0 - vTopVertex) * (1.0 - vBottomVertex) ) * 0.3;\n\n\toutgoingLight += smoothstep(0.7, 1.0, edgeAmount) * 0.05;\n\toutgoingLight += (pow(vTopVertex, 5.0) * vEnvelope) * 0.3;\n\toutgoingLight += (pow(vBottomVertex, 5.0) * vEnvelope) * 0.3;\n\n\toutgoingLight += vIsHovered * (edgeAmount * 0.5);\n\toutgoingLight += vIsSelected * (edgeAmount * 0.5);\n\n\tif (vWorldPosition.y < 0.0) {\n\t\tdiffuseColor.a *= 0.8;\n\t}\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a);\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n\t#ifdef USE_FOG\n\n\t\t#ifdef FOG_EXP2\n\n\t\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t\t#else\n\n\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t\t#endif\n\n\t\tgl_FragColor.a = mix( gl_FragColor.a, 0.0, fogFactor );\n\n\t#endif\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}"},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_4_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_4_0(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_4_1(vec4 x) {\n     return mod289_4_0(((x*34.0)+1.0)*x);\n}\n\nfloat permute_4_1(float x) {\n     return mod289_4_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_4_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_4_2(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_4_3(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_4_4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_4_0(i);\n  float j0 = permute_4_1( permute_4_1( permute_4_1( permute_4_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_4_1( permute_4_1( permute_4_1( permute_4_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_4_5 = grad4_4_3(j0,   ip);\n  vec4 p1 = grad4_4_3(j1.x, ip);\n  vec4 p2 = grad4_4_3(j1.y, ip);\n  vec4 p3 = grad4_4_3(j1.z, ip);\n  vec4 p4 = grad4_4_3(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_4_2(vec4(dot(p0_4_5,p0_4_5), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_4_5 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_4_2(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_4_5, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_6( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\nmat4 rotationMatrix_2_7(vec3 axis, float angle) {\n   axis = normalize(axis);\n   float s = sin(angle);\n   float c = cos(angle);\n   float oc = 1.0 - c;\n\n   return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n               oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n               oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n               0.0,                                0.0,                                0.0,                                1.0);\n}\n\n\n\nfloat random_3_8(float n){\n    return fract(sin(n) * 43758.5453123);\n}\n\n\nfloat random_3_8 (vec2 st_3_9) {\n    return fract(sin(dot(st_3_9.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n\n\n\n#define PHYSICAL\n\nuniform float uTime;\nuniform float uIsMobile;\nuniform float uAudioTime;\nuniform vec3 uCamPos;\nuniform float uAutoPilot;\nuniform vec2 uOriginOffset;\nuniform float uCamPosYPositive;\n\nattribute float isHovered;\nattribute float isSelected;\nattribute vec3 pickerColor;\nattribute vec3 offset;\nattribute float scale;\nattribute float spentRatio;\nattribute vec3 barycentric;\nattribute float topVertex;\nattribute float centerTopVertex;\nattribute vec4 quaternion;\nattribute float txTime;\nattribute float blockStartTime;\nattribute float blockLoadTime;\n\nvarying float vIsHovered;\nvarying float vIsSelected;\nvarying vec3 vViewPosition;\nvarying vec3 vTransformed;\nvarying vec3 vOffset;\nvarying float vScale;\nvarying float vSpentRatio;\nvarying vec3 vBarycentric;\nvarying float vTopVertex;\nvarying float vBottomVertex;\nvarying float vEnvelope;\nvarying vec3 vPickerColor;\nvarying vec4 vWorldPosition;\n\n\nvarying vec3 vNormal;\n\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n// #include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvPickerColor = pickerColor;\n\n\tvIsHovered = isHovered;\n\tvIsSelected = isSelected;\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t\n\t#include <defaultnormal_vertex>\n\n\tvNormal = normalize( transformedNormal );\n\n\t#include <begin_vertex>\n\n\tfloat offsetTime = uAudioTime - blockStartTime;\n\tfloat loadTime = uAudioTime - blockLoadTime;\n\n\t// envelope\n\tfloat attack = smoothstep(txTime, txTime + 2.0, offsetTime * 0.001);\n\tfloat release = (1.0 - smoothstep(txTime + 2.0, txTime + 4.0, offsetTime * 0.001));\n\n\tfloat attackLoad = smoothstep(txTime, txTime + 3.0, loadTime * 0.001);\n\n\tfloat blockActive = (blockStartTime == 0.0) ? 0.0 : 1.0;\n\n\tvEnvelope = (attack * release) * blockActive;\n\n\ttransformed.xyz = applyQuaternionToVector_1_6( quaternion, transformed.xyz );\n\tvec3 originalTransform = transformed.xyz;\n\n\ttransformed.xz *= scale;\n\n\ttransformed.y *= max(  ((offset.y + (3.0 * vEnvelope)) * attackLoad) , 0.5 );\n\ttransformed.y *= 2.0;\n\n\tif (uCamPosYPositive != 1.0 || uIsMobile == 1.0) {\n\t\ttransformed.y = max(transformed.y, 0.2) * topVertex;\n\t}\n\n\tmat4 rotation = rotationMatrix_2_7(offset.xyz * vec3(0.0,1.0,0.0), (uTime*0.0002) * isSelected);\n\n\tvec4 newPos = rotation * vec4( transformed, 1.0 );\n\n\ttransformed.xyz = newPos.xyz;\n\n    transformed.xz += offset.xz;\n\n\tvec2 distVec = transformed.xz - uCamPos.xz;\n\n\tif (uAutoPilot > 0.0) {\n\t\tfloat camDistSq = dot(distVec, distVec);\n\t\ttransformed.y *= smoothstep(0.0, 10000.0, camDistSq);\n\n\t\tif (abs(transformed.y) < 1.0) {\n\t\t\ttransformed.y = sign(transformed.y);\n\t\t}\n\t}\n\n\tvOffset = transformed;\n\n    transformed.xz -= uOriginOffset.xy;\n\tvTransformed = transformed;\n\t\n\tvTopVertex = topVertex;\n\tvBottomVertex = 1.0 - topVertex;\n\tvScale = scale;\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\tvSpentRatio = spentRatio;\n\n\tvBarycentric = barycentric;\n\n\t#include <worldpos_vertex>\n\tvWorldPosition = worldPosition;\n\n\t// #include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(249),p=n.n(h),f=n(250),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.instanceTotal=4e3,n.uTime=0,n.material=new v({depthTest:!0,transparent:!1}),n.txMap=[],n}return a(t,e),m(t,[{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l,h,p,f,d,m,g,v,y,b,_,x;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.offsetsArray=new Float32Array(3*this.instanceTotal),n=new Float32Array(2*this.instanceTotal),this.scalesArray=new Float32Array(this.instanceTotal),this.quatArray=new Float32Array(4*this.instanceTotal),this.pickerColorArray=new Float32Array(3*this.instanceTotal),r=t.blockData.pos,i=new c.CylinderGeometry(1,1,1,6),i.vertices[12].add(new c.Vector3(0,.02,0)),i.vertices[0].sub(new c.Vector3(0,.01,0)),i.vertices[2].sub(new c.Vector3(0,.01,0)),i.vertices[4].sub(new c.Vector3(0,.01,0)),o=(new c.BufferGeometry).fromGeometry(i),this.geometry=(new c.InstancedBufferGeometry).copy(o),a=new c.InstancedBufferAttribute(this.offsetsArray,3),s=new c.InstancedBufferAttribute(n,2),l=new c.InstancedBufferAttribute(this.scalesArray,1),h=new c.InstancedBufferAttribute(this.quatArray,4),p=new c.InstancedBufferAttribute(this.pickerColorArray,3),f=new c.Object3D,f.position.set(r.x,0,r.z),f.lookAt(0,0,0),d=new c.Color(10066329),m=0;m<t.blockData.n_tx;m++)d.setHex(m+1),p.array[3*m+0]=d.r,p.array[3*m+1]=d.g,p.array[3*m+2]=d.b,g=t.offsets[2*m+0],v=0,y=t.offsets[2*m+1],b=new c.Vector3(g,v,y),b.applyQuaternion(f.quaternion),b.x+=r.x,b.z+=r.z,a.array[3*m+0]=b.x,a.array[3*m+1]=b.y,a.array[3*m+2]=b.z,s.array[2*m+0]=r.x,s.array[2*m+1]=r.z,h.array[4*m+0]=f.quaternion.x,h.array[4*m+1]=f.quaternion.y,h.array[4*m+2]=f.quaternion.z,h.array[4*m+3]=f.quaternion.w,_=t.scales[m],_>20&&(_=20),l.setX(m,_),x=1e-8*t.blockData.txValues[m],x>2e3&&(x=2e3),x<.5&&(x=.5),this.txMap[m]=t.blockData.txIndexes[m],a.setY(m,x);return this.geometry.addAttribute("offset",a),this.geometry.addAttribute("planeOffset",s),this.geometry.addAttribute("scale",l),this.geometry.addAttribute("quaternion",h),this.geometry.addAttribute("pickerColor",p),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n,r){var i,o,a,s,l,h,p,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.blockData.pos,o=new c.Object3D,o.position.set(i.x,0,i.z),o.lookAt(0,0,0),a=new c.Color(10066329),this.geometry.attributes.offset.array=new Float32Array(3*this.instanceTotal),this.geometry.attributes.planeOffset.array=new Float32Array(2*this.instanceTotal).fill(0),this.geometry.attributes.scale.array=new Float32Array(this.instanceTotal),this.geometry.attributes.quaternion.array=new Float32Array(4*this.instanceTotal),this.geometry.attributes.pickerColor.array=new Float32Array(3*this.instanceTotal),s=0;s<t.blockData.n_tx;s++)a.setHex(s+1),this.geometry.attributes.pickerColor.array[3*s+0]=a.r,this.geometry.attributes.pickerColor.array[3*s+1]=a.g,this.geometry.attributes.pickerColor.array[3*s+2]=a.b,l=n[3*s+0],h=n[3*s+1],p=n[3*s+2],this.geometry.attributes.offset.array[3*s+0]=l,this.geometry.attributes.offset.array[3*s+1]=h,this.geometry.attributes.offset.array[3*s+2]=p,this.geometry.attributes.planeOffset.array[2*s+0]=i.x,this.geometry.attributes.planeOffset.array[2*s+1]=i.z,this.geometry.attributes.quaternion.array[4*s+0]=o.quaternion.x,this.geometry.attributes.quaternion.array[4*s+1]=o.quaternion.y,this.geometry.attributes.quaternion.array[4*s+2]=o.quaternion.z,this.geometry.attributes.quaternion.array[4*s+3]=o.quaternion.w,f=r[s],f>20&&(f=20),this.geometry.attributes.scale.setX(s,f),"undefined"!==typeof t.blockData.txIndexes&&(this.txMap[s]=t.blockData.txIndexes[s]);this.geometry.attributes.quaternion.needsUpdate=!0,this.geometry.attributes.planeOffset.needsUpdate=!0,this.geometry.attributes.offset.needsUpdate=!0,this.geometry.attributes.scale.needsUpdate=!0,this.geometry.attributes.pickerColor.needsUpdate=!0;case 16:case"end":return e.stop()}},e,this)}));return e}()}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.ShaderMaterial)},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vPickerColor;\n\nvoid main() {\n   gl_FragColor = vec4(vPickerColor.rgb, 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\n\nattribute vec3 pickerColor;\nattribute vec3 offset;\nattribute vec2 planeOffset;\nattribute float scale;\nattribute vec4 quaternion;\n\nvarying vec3 vPickerColor;\n\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\tvPickerColor = pickerColor;\n\n\t#include <begin_vertex>\n\n\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n\tvec3 originalTransform = transformed.xyz;\n\n\ttransformed.xz *= scale;\n\ttransformed.y *= (offset.y);\n\ttransformed.y += offset.y * 0.5;\n    transformed.xz += offset.xz;\n\n\t#include <project_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(252),p=n.n(h),f=n(253),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map=(new c.TextureLoader).load("assets/images/textures/ao-hexagon.png"),n.material=new v({flatShading:!0,transparent:!0,side:c.DoubleSide,map:n.map,opacity:.4,depthTest:!0,depthWrite:!1}),n.txIndexOffsets={},n.instanceTotal=3e4,n.txCount=0,"lite"===n.config.scene.mode&&(n.instanceTotal=2e4),n.config.detector.isMobile&&(n.instanceTotal=0),n}return a(t,e),m(t,[{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l,h,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.offsetsArray=new Float32Array(3*this.instanceTotal),this.scalesArray=new Float32Array(this.instanceTotal),this.quatArray=new Float32Array(4*this.instanceTotal),n=t.blockData.pos,r=new c.PlaneGeometry(1,1,1,1),i=(new c.BufferGeometry).fromGeometry(r),this.geometry=(new c.InstancedBufferGeometry).copy(i),this.geometry.rotateX(Math.PI/2),o=new c.InstancedBufferAttribute(this.offsetsArray,3),a=new c.InstancedBufferAttribute(this.scalesArray,1),s=new c.InstancedBufferAttribute(this.quatArray,4),l=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),h=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal),1),p=new c.Object3D,p.position.set(n.x,0,n.z),p.lookAt(0,0,0),this.setTxAttributes(p,t,o,s,a),this.geometry.addAttribute("offset",o),this.geometry.addAttribute("scale",a),this.geometry.addAttribute("quaternion",s),this.geometry.addAttribute("blockStartTime",l),this.geometry.addAttribute("blockLoadTime",h),this.txCount+=t.blockData.n_tx,this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 26:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateBlockStartTimes",value:function(e){for(var t=this.txIndexOffsets[e.height],n=window.performance.now(),r=0;r<e.n_tx;r++)this.geometry.attributes.blockStartTime.array[t+r]=n;this.geometry.attributes.blockStartTime.needsUpdate=!0}},{key:"updateBlockLoadTimes",value:function(e){for(var t=this.txIndexOffsets[e.height],n=window.performance.now(),r=0;r<e.n_tx;r++)this.geometry.attributes.blockLoadTime.array[t+r]=n;this.geometry.attributes.blockLoadTime.needsUpdate=!0}},{key:"update",value:function(e,t){this.material.uniforms.uTime.value=e,this.material.uniforms.uAudioTime.value=e,this.material.uniforms.uFirstLoop.value=t}},{key:"updateGeometry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.txCount+t.blockData.n_tx>this.instanceTotal&&(this.txCount=0),n=t.blockData.pos,r=new c.Object3D,r.position.set(n.x,0,n.z),r.lookAt(0,0,0),this.setTxAttributes(r,t,this.geometry.attributes.offset,this.geometry.attributes.quaternion,this.geometry.attributes.scale),this.txCount+=t.blockData.n_tx,this.updateBlockStartTimes(t.blockData),this.updateBlockLoadTimes(t.blockData);case 9:case"end":return e.stop()}},e,this)}));return e}()}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uFirstLoop={type:"f",value:1},n.uniforms.uAudioTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshBasicMaterial)},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t// modulation\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\n\nuniform float uTime;\nuniform float uAudioTime;\nuniform float uFirstLoop;\nuniform vec2 uOriginOffset;\n\nattribute vec3 offset;\nattribute float scale;\nattribute vec4 quaternion;\n// attribute float txTime;\nattribute float blockStartTime;\nattribute float blockLoadTime;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t\n\tfloat offsetTime = uAudioTime - blockStartTime;\n\tfloat loadTime = uAudioTime - blockLoadTime;\n\n\t// envelope\n\t// float attack = smoothstep(txTime, txTime + 5.0, offsetTime * 0.001);\n\t// float release = (1.0 - smoothstep(txTime + 5.0, txTime + 10.0, offsetTime * 0.001));\n\t// float attackLoad = smoothstep(txTime, txTime + 5.0, loadTime * 0.001);\n\n\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n   \ttransformed.xz *= (scale * 2.7);\n\ttransformed.xz += (offset.xz - uOriginOffset.xy);\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(255),p=n.n(h),f=n(256),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.normalMap=(new c.TextureLoader).load("assets/images/textures/normalMap.jpg"),n.normalMap.wrapS=c.RepeatWrapping,n.normalMap.wrapT=c.RepeatWrapping,n.normalMap.repeat.set(4,4),n.instanceTotal=100,n.config.detector.isMobile&&(n.instanceTotal=20),"lite"===n.config.scene.mode&&(n.instanceTotal=20),n.blockHeightIndex={},n.cubeMap=(new c.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa/").load(["0004.jpg","0002.jpg","0006.jpg","0005.jpg","0001.jpg","0003.jpg"]),n.material=new v({flatShading:!0,color:16777215,emissive:0,metalness:1,roughness:.1,opacity:.5,transparent:!0,side:c.FrontSide,roughnessMap:n.roughnessMap,envMap:n.cubeMap,envMapIntensity:.7,alphaMap:n.alphaMap,normalMap:n.normalMap,normalScale:new c.Vector2(.001,.001)}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.planeOffsetsArray=new Float32Array(2*this.instanceTotal),this.quatArray=new Float32Array(4*this.instanceTotal),n=new c.BoxGeometry(this.planeSize+10,this.planeSize+10,3,1,1,1),r=(new c.BufferGeometry).fromGeometry(n),this.geometry=(new c.InstancedBufferGeometry).copy(r),this.geometry.rotateX(Math.PI/2),this.geometry.rotateY(Math.PI/2),this.geometry.translate(0,-1.5,0),i=t.blockData.pos,o=new c.Object3D,o.position.set(i.x,0,i.z),o.lookAt(0,0,0),this.quatArray[0]=o.quaternion.x,this.quatArray[1]=o.quaternion.y,this.quatArray[2]=o.quaternion.z,this.quatArray[3]=o.quaternion.w,this.planeOffsetsArray[0]=i.x,this.planeOffsetsArray[1]=i.z,this.blockHeightIndex[t.blockData.height]=0,a=new c.InstancedBufferAttribute(this.planeOffsetsArray,2),s=new c.InstancedBufferAttribute(this.quatArray,4),this.geometry.addAttribute("planeOffset",a),this.geometry.addAttribute("quaternion",s),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.index++,e.abrupt("return",this.mesh);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.index+1>this.instanceTotal&&(this.index=0),n=t.blockData.pos,r=new c.Object3D,r.position.set(n.x,0,n.z),r.lookAt(0,0,0),this.blockHeightIndex[t.blockData.height]=2*this.index,this.geometry.attributes.quaternion.array[4*this.index+0]=r.quaternion.x,this.geometry.attributes.quaternion.array[4*this.index+1]=r.quaternion.y,this.geometry.attributes.quaternion.array[4*this.index+2]=r.quaternion.z,this.geometry.attributes.quaternion.array[4*this.index+3]=r.quaternion.w,this.geometry.attributes.quaternion.needsUpdate=!0,this.geometry.attributes.planeOffset.array[2*this.index+0]=n.x,this.geometry.attributes.planeOffset.array[2*this.index+1]=n.z,this.geometry.attributes.planeOffset.needsUpdate=!0,this.index++;case 15:case"end":return e.stop()}},e,this)}));return e}()}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshStandardMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight.rgb, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n\t#ifdef USE_FOG\n\n\t\t#ifdef FOG_EXP2\n\n\t\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t\t#else\n\n\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t\t#endif\n\n\t\tgl_FragColor.a = mix( gl_FragColor.a, 0.0, fogFactor );\n\n\t#endif\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\n\n#define PHYSICAL\n\nuniform vec2 uOriginOffset;\n\nattribute vec3 offset;\nattribute vec2 planeOffset;\nattribute vec4 quaternion;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vTransformed;\nvarying vec3 vOffset;\nvarying vec2 vPlaneOffset;\nvarying vec3 vPosition;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvPlaneOffset = planeOffset;\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\n\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n    transformed.xz += (planeOffset.xy - uOriginOffset);\n\n\tvTransformed = transformed;\n\tvOffset = offset;\n\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\tvPosition = vec3(modelMatrix * vec4(position, 1.0));\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(258),p=n.n(h),f=n(259),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.instanceTotal=100,n.config.detector.isMobile&&(n.instanceTotal=11),"lite"===n.config.scene.mode&&(n.instanceTotal=20),n.blockHeightIndex={},n.material=new v({transparent:!0}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l,h,p,f,d,m;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.planeOffsetsArray=new Float32Array(2*this.instanceTotal),this.quatArray=new Float32Array(4*this.instanceTotal),n=new c.BoxGeometry(this.planeSize+10,.18*this.planeSize,.01,1,1,1),r=n.clone(),i=n.clone(),n.rotateX(Math.PI/2),n.rotateY(Math.PI/2),n.translate(-300,-3,0),n.scale(1,1,1.1),r.rotateX(Math.PI/2),r.scale(1.18,1,25.5),r.translate(0,-3,-1402.5),i.rotateX(Math.PI/2),i.scale(1.18,1,25.5),i.translate(0,-3,1402.5),o=new c.Mesh(n),a=new c.Mesh(r),s=new c.Mesh(i),l=new c.Geometry,o.updateMatrix(),l.merge(o.geometry,o.matrix),a.updateMatrix(),l.merge(a.geometry,a.matrix),s.updateMatrix(),l.merge(s.geometry,s.matrix),h=(new c.BufferGeometry).fromGeometry(l),this.geometry=(new c.InstancedBufferGeometry).copy(h),p=t.blockData.pos,f=new c.Object3D,f.position.set(p.x,0,p.z),f.lookAt(0,0,0),this.quatArray[0]=f.quaternion.x,this.quatArray[1]=f.quaternion.y,this.quatArray[2]=f.quaternion.z,this.quatArray[3]=f.quaternion.w,this.planeOffsetsArray[0]=p.x,this.planeOffsetsArray[1]=p.z,this.blockHeightIndex[t.blockData.height]=0,d=new c.InstancedBufferAttribute(this.planeOffsetsArray,2),m=new c.InstancedBufferAttribute(this.quatArray,4),this.geometry.addAttribute("planeOffset",d),this.geometry.addAttribute("quaternion",m),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.index++,e.abrupt("return",this.mesh);case 46:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.index+1>this.instanceTotal&&(this.index=0),n=t.blockData.pos,r=new c.Object3D,r.position.set(n.x,0,n.z),r.lookAt(0,0,0),this.blockHeightIndex[t.blockData.height]=2*this.index,this.geometry.attributes.quaternion.array[4*this.index+0]=r.quaternion.x,this.geometry.attributes.quaternion.array[4*this.index+1]=r.quaternion.y,this.geometry.attributes.quaternion.array[4*this.index+2]=r.quaternion.z,this.geometry.attributes.quaternion.array[4*this.index+3]=r.quaternion.w,this.geometry.attributes.quaternion.needsUpdate=!0,this.geometry.attributes.planeOffset.array[2*this.index+0]=n.x,this.geometry.attributes.planeOffset.array[2*this.index+1]=n.z,this.geometry.attributes.planeOffset.needsUpdate=!0,this.index++;case 15:case"end":return e.stop()}},e,this)}));return e}()}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms={},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.ShaderMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( 0.0 );\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\n\nattribute vec2 planeOffset;\nattribute vec4 quaternion;\n\nuniform vec2 uOriginOffset;\n\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\n\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n    transformed.xz += (planeOffset.xy - uOriginOffset);\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\n}"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(261),h=n.n(l),p=n(6),f=n(262),d=n.n(f),m=n(263),g=n.n(m),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.normalMap=(new c.TextureLoader).load("assets/images/textures/normalMap.jpg"),n.gltfLoader=new h.a,n.instanceTotal=100,n.config.detector.isMobile&&(n.instanceTotal=20),"lite"===n.config.scene.mode&&(n.instanceTotal=20),n.cubeMap=(new c.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa-full/").load(["0004.png","0002.png","0006.png","0005.png","0001.png","0003.png"]),n.merkleMap={4096:13,2048:12,1024:11,512:10,256:9,128:8,64:7,32:6,16:5,8:4,4:3,2:2,1:2},n.material=new b({color:13421772,emissive:0,metalness:.8,roughness:.2,opacity:1,transparent:!0,envMap:n.cubeMap,normalMap:n.normalMap,normalScale:new c.Vector2(.03,.03)}),n.materialC=n.material.clone(),n.materialL=n.material.clone(),n.materialR=n.material.clone(),n.indexHeightMap={},n.index=0,n.loadedModels={},n.loadedMeshes={},n.preLoadMeshes(),n}return a(t,e),v(t,[{key:"preLoadMeshes",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<3)){e.next=18;break}this.loadedMeshes[t]={},e.t0=u.a.keys(this.merkleMap);case 4:if((e.t1=e.t0()).done){e.next=15;break}if(n=e.t1.value,!this.merkleMap.hasOwnProperty(n)){e.next=13;break}return r={},r.n_tx=n,r.pos=new c.Vector3(0,0,0),e.next=12,this.build(r);case 12:this.loadedMeshes[t][n]=e.sent;case 13:e.next=4;break;case 15:t++,e.next=1;break;case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadTreeModel",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(u.a.mark(function e(r,i){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,e.next=9,n.gltfLoader.load("assets/models/gltf/binary-tree-"+n.merkleMap[t]+".gltf",function(e){var t=e.scene.children[0],n=new c.CylinderGeometry(6,6,600,6),i=new c.Mesh(n);i.rotateZ(Math.PI/2),i.translateY(-295);var o=new c.Geometry;i.updateMatrix(),o.merge(i.geometry,i.matrix),t.updateMatrix();var a=(new c.Geometry).fromBufferGeometry(t.geometry);o.merge(a,t.matrix);var s=(new c.BufferGeometry).fromGeometry(o),u=(new c.InstancedBufferGeometry).copy(s);u.computeVertexNormals(),u.translate(0,-382.5,0),r(u)},function(){},function(e){console.log("An error occurred"),i(new Error(e))});case 9:case"end":return e.stop()}},e,n)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"init",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var r,i,o,a,s,l,h,p,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Float32Array(2*this.instanceTotal),i=new Float32Array(4*this.instanceTotal),o=t.blockData.n_tx,o>128&&(o=128),n&&(o=n),e.next=7,this.loadTreeModel(o);case 7:return a=e.sent,this.geometry=a.clone(),s=t.blockData.pos,l=new c.Object3D,l.position.set(s.x,0,s.z),l.lookAt(0,0,0),i[0]=l.quaternion.x,i[1]=l.quaternion.y,i[2]=l.quaternion.z,i[3]=l.quaternion.w,r[0]=s.x,r[1]=s.z,h=new c.InstancedBufferAttribute(r,2),p=new c.InstancedBufferAttribute(i,4),f=new c.InstancedBufferAttribute(new Float32Array(this.instanceTotal).fill(0),1),this.geometry.addAttribute("planeOffset",h),this.geometry.addAttribute("quaternion",p),this.geometry.addAttribute("display",f),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.indexHeightMap[t.blockData.height]=this.index,e.abrupt("return",this.mesh);case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.index+1>this.instanceTotal&&(this.index=0),n=t.blockData.pos,this.indexHeightMap[t.blockData.height]=this.index,r=new c.Object3D,r.position.set(n.x,0,n.z),r.lookAt(0,0,0),this.geometry.attributes.quaternion.array[4*this.index+0]=r.quaternion.x,this.geometry.attributes.quaternion.array[4*this.index+1]=r.quaternion.y,this.geometry.attributes.quaternion.array[4*this.index+2]=r.quaternion.z,this.geometry.attributes.quaternion.array[4*this.index+3]=r.quaternion.w,this.geometry.attributes.quaternion.needsUpdate=!0,this.geometry.attributes.planeOffset.array[2*this.index+0]=n.x,this.geometry.attributes.planeOffset.array[2*this.index+1]=n.z,this.geometry.attributes.planeOffset.needsUpdate=!0,this.geometry.attributes.display.array[this.index]=1,this.geometry.attributes.display.needsUpdate=!0,this.index++;case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e,t){this.material.uniforms.uTime.value=e,this.material.uniforms.uFirstLoop.value=t}},{key:"build",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l,h,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Float32Array(2),r=new Float32Array(4),i=t.n_tx,i--,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,i++,o=void 0,"undefined"===typeof this.loadedModels[this.merkleMap[i]]){e.next=15;break}o=this.loadedModels[this.merkleMap[i]].clone(),e.next=20;break;case 15:return e.next=17,this.loadTreeModel(t.n_tx);case 17:a=e.sent,o=a.clone(),this.loadedModels[this.merkleMap[i]]=o;case 20:return s=new c.InstancedBufferAttribute(n,2),l=new c.InstancedBufferAttribute(r,4),h=new c.InstancedBufferAttribute(new Float32Array(1).fill(1),1),o.addAttribute("planeOffset",s),o.addAttribute("quaternion",l),o.addAttribute("display",h),p=new c.Mesh(o,this.material),p.frustumCulled=!1,e.abrupt("return",p);case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"get",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t,n){var r,i,o,a,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.n_tx,r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,i=this.loadedMeshes[n][r],o=i.geometry.attributes.planeOffset.array,a=i.geometry.attributes.quaternion.array,s=t.pos,l=new c.Object3D,l.position.set(s.x,0,s.z),l.lookAt(0,0,0),a[0]=l.quaternion.x,a[1]=l.quaternion.y,a[2]=l.quaternion.z,a[3]=l.quaternion.w,o[0]=s.x,o[1]=s.z,i.geometry.attributes.planeOffset.needsUpdate=!0,i.geometry.attributes.quaternion.needsUpdate=!0,e.abrupt("return",i);case 24:case"end":return e.stop()}},e,this)}));return e}()}]),t}(p.a);t.a=y;var b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.uniforms.uFirstLoop={type:"f",value:1},n.vertexShader=g.a,n.fragmentShader=d.a,n}return a(t,e),t}(c.MeshStandardMaterial)},function(e,t,n){var r=n(2),i=function(){function e(e){this.manager=void 0!==e?e:r.DefaultLoadingManager,this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function n(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=w.MSFT_TEXTURE_DDS,this.ddsLoader=e}function i(e){this.name=w.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[w.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function o(){this.name=w.KHR_MATERIALS_UNLIT}function a(e){this.name=w.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,E);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==T)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,E),i=0;i<n.byteLength;){var o=n.getUint32(i,!0);i+=4;var a=n.getUint32(i,!0);if(i+=4,a===S.JSON){var s=new Uint8Array(e,E+i,o);this.content=r.LoaderUtils.decodeText(s)}else if(a===S.BIN){var u=E+i;this.body=e.slice(u,u+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function s(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=w.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function u(){this.name=w.KHR_TEXTURE_TRANSFORM}function c(){return{name:w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return r.ShaderMaterial},extendParams:function(e,t,n){var i=t.extensions[this.name],o=r.ShaderLib.standard,a=r.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new r.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=o.vertexShader,e.fragmentShader=p,e.uniforms=a,e.defines={STANDARD:""},e.color=new r.Color(1,1,1),e.opacity=1;var f=[];if(Array.isArray(i.diffuseFactor)){var d=i.diffuseFactor;e.color.fromArray(d),e.opacity=d[3]}if(void 0!==i.diffuseTexture&&f.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new r.Color(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var m=i.specularGlossinessTexture;f.push(n.assignTexture(e,"glossinessMap",m)),f.push(n.assignTexture(e,"specularMap",m))}return Promise.all(f)},createMaterial:function(e){var t=new r.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++){var o=e[n[r]];t[n[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,n,r,i){if(!0===i.isGLTFSpecularGlossinessMaterial){var o=i.uniforms,a=i.defines;o.opacity.value=i.opacity,o.diffuse.value.copy(i.color),o.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),o.map.value=i.map,o.specularMap.value=i.specularMap,o.alphaMap.value=i.alphaMap,o.lightMap.value=i.lightMap,o.lightMapIntensity.value=i.lightMapIntensity,o.aoMap.value=i.aoMap,o.aoMapIntensity.value=i.aoMapIntensity;var s;i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.glossinessMap?s=i.glossinessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap&&(s=i.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),i.envMap&&(o.envMap.value=i.envMap,o.envMapIntensity.value=i.envMapIntensity,o.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,o.reflectivity.value=i.reflectivity,o.refractionRatio.value=i.refractionRatio,o.maxMipLevel.value=e.properties.get(i.envMap).__maxMipLevel),o.specular.value.copy(i.specular),o.glossiness.value=i.glossiness,o.glossinessMap.value=i.glossinessMap,o.emissiveMap.value=i.emissiveMap,o.bumpMap.value=i.bumpMap,o.normalMap.value=i.normalMap,o.displacementMap.value=i.displacementMap,o.displacementScale.value=i.displacementScale,o.displacementBias.value=i.displacementBias,null!==o.glossinessMap.value&&void 0===a.USE_GLOSSINESSMAP&&(a.USE_GLOSSINESSMAP="",a.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==a.USE_GLOSSINESSMAP&&(delete a.USE_GLOSSINESSMAP,delete a.USE_ROUGHNESSMAP)}}}}function l(e,t,n,i){r.Interpolant.call(this,e,t,n,i)}function h(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function p(){return k=k||new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})}function f(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function d(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function m(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],c=[],o=0,a=t.length;o<a;o++){var s=t[o];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):e.attributes.position;u.push(l)}if(i){var l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):e.attributes.normal;c.push(l)}}return Promise.all([Promise.all(u),Promise.all(c)]).then(function(n){for(var o=n[0],a=n[1],s=0,u=o.length;s<u;s++)e.attributes.position!==o[s]&&(o[s]=b(o[s]));for(var s=0,u=a.length;s<u;s++)e.attributes.normal!==a[s]&&(a[s]=b(a[s]));for(var s=0,u=t.length;s<u;s++){var c=t[s],l="morphTarget"+s;if(r&&void 0!==c.POSITION){var h=o[s];h.name=l;for(var p=e.attributes.position,f=0,d=h.count;f<d;f++)h.setXYZ(f,h.getX(f)+p.getX(f),h.getY(f)+p.getY(f),h.getZ(f)+p.getZ(f))}if(i&&void 0!==c.NORMAL){var m=a[s];m.name=l;for(var g=e.attributes.normal,f=0,d=m.count;f<d;f++)m.setXYZ(f,m.getX(f)+g.getX(f),m.getY(f)+g.getY(f),m.getZ(f)+g.getZ(f))}}return r&&(e.morphAttributes.position=o),i&&(e.morphAttributes.normal=a),e})}function g(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function v(e){var t=e.extensions&&e.extensions[w.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+y(t.attributes):e.indices+":"+y(e.attributes)+":"+e.mode}function y(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function b(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,i=e.array.slice(0,t*n),o=0,a=0;o<t;++o)i[a++]=e.getX(o),n>=2&&(i[a++]=e.getY(o)),n>=3&&(i[a++]=e.getZ(o)),n>=4&&(i[a++]=e.getW(o));return new r.BufferAttribute(i,n,e.normalized)}return e.clone()}function _(e,n,i){this.json=e||{},this.extensions=n||{},this.options=i||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function x(e,t,n){var r=t.attributes,i=[];for(var o in r){var a=I[o]||o.toLowerCase();a in e.attributes||i.push(function(t,r){return n.getDependency("accessor",t).then(function(t){e.addAttribute(r,t)})}(r[o],a))}if(void 0!==t.indices&&!e.index){var s=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(s)}return d(e,t),Promise.all(i).then(function(){return void 0!==t.targets?m(e,t.targets,n):e})}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,i){var o,a=this;o=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:r.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},u=new r.FileLoader(a.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&u.setWithCredentials(!0),u.load(e,function(n){try{a.parse(n,o,function(n){t(n),a.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,l,h){var p,f={};if("string"===typeof e)p=e;else{if(r.LoaderUtils.decodeText(new Uint8Array(e,0,4))===T){try{f[w.KHR_BINARY_GLTF]=new a(e)}catch(e){return void(h&&h(e))}p=f[w.KHR_BINARY_GLTF].content}else p=r.LoaderUtils.decodeText(new Uint8Array(e))}var d=JSON.parse(p);if(void 0===d.asset||d.asset.version[0]<2)return void(h&&h(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")));if(d.extensionsUsed)for(var m=0;m<d.extensionsUsed.length;++m){var g=d.extensionsUsed[m],v=d.extensionsRequired||[];switch(g){case w.KHR_LIGHTS_PUNCTUAL:f[g]=new i(d);break;case w.KHR_MATERIALS_UNLIT:f[g]=new o;break;case w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:f[g]=new c;break;case w.KHR_DRACO_MESH_COMPRESSION:f[g]=new s(d,this.dracoLoader);break;case w.MSFT_TEXTURE_DDS:f[w.MSFT_TEXTURE_DDS]=new n(this.ddsLoader);break;case w.KHR_TEXTURE_TRANSFORM:f[w.KHR_TEXTURE_TRANSFORM]=new u;break;default:v.indexOf(g)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}new _(d,f,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(l,h)}};var w={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};i.prototype.loadLight=function(e){var t,n=this.lightDefs[e],i=new r.Color(16777215);void 0!==n.color&&i.fromArray(n.color);var o=void 0!==n.range?n.range:0;switch(n.type){case"directional":t=new r.DirectionalLight(i),t.target.position.set(0,0,-1),t.add(t.target);break;case"point":t=new r.PointLight(i),t.distance=o;break;case"spot":t=new r.SpotLight(i),t.distance=o,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},o.prototype.getMaterialType=function(){return r.MeshBasicMaterial},o.prototype.extendParams=function(e,t,n){var i=[];e.color=new r.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(i)};var T="glTF",E=12,S={JSON:1313821514,BIN:5130562};s.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var c in o){var l=I[c]||c.toLowerCase();a[l]=o[c]}for(c in e.attributes){var l=I[c]||c.toLowerCase();if(void 0!==o[c]){var h=n.accessors[e.attributes[c]],p=M[h.componentType];u[l]=p,s[l]=!0===h.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)},a,u)})})},u.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},l.prototype=Object.create(r.Interpolant.prototype),l.prototype.constructor=l,l.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},l.prototype.beforeStart_=l.prototype.copySampleValue_,l.prototype.afterEnd_=l.prototype.copySampleValue_,l.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-t,l=(n-t)/c,h=l*l,p=h*l,f=e*u,d=f-u,m=-2*p+3*h,g=p-h,v=1-m,y=g-h+l,b=0;b!==a;b++){var _=o[d+b+a],x=o[d+b+s]*c,w=o[f+b+a],T=o[f+b]*c;i[b]=v*_+y*x+m*w+g*T}return i};var k,C={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},M={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipMapNearestFilter,9985:r.LinearMipMapNearestFilter,9986:r.NearestMipMapLinearFilter,9987:r.LinearMipMapLinearFilter},O={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},D={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},R={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},P={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},L={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},N={"image/png":r.RGBAFormat,"image/jpeg":r.RGBFormat};return _.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};f(i,o,r),d(o,r),e(o)}).catch(t)},_.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,u=0,c=s.length;u<c;u++)e[s[u]].isBone=!0;for(var l=0,h=e.length;l<h;l++){var p=e[l];void 0!==p.mesh&&(void 0===r[p.mesh]&&(r[p.mesh]=i[p.mesh]=0),r[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},_.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[w.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},_.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t},_.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[w.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,i){n.load(h(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},_.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})},_.prototype.loadAccessor=function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(e){var o,a,s=e[0],u=D[i.type],c=M[i.componentType],l=c.BYTES_PER_ELEMENT,h=l*u,p=i.byteOffset||0,f=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;if(f&&f!==h){var m="InterleavedBuffer:"+i.bufferView+":"+i.componentType,g=t.cache.get(m);g||(o=new c(s),g=new r.InterleavedBuffer(o,f/l),t.cache.add(m,g)),a=new r.InterleavedBufferAttribute(g,u,p/l,d)}else o=null===s?new c(i.count*u):new c(s,p,i.count*u),a=new r.BufferAttribute(o,u,d);if(void 0!==i.sparse){var v=D.SCALAR,y=M[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,_=i.sparse.values.byteOffset||0,x=new y(e[1],b,i.sparse.count*v),w=new c(e[2],_,i.sparse.count*u);null!==s&&a.setArray(a.array.slice());for(var T=0,E=x.length;T<E;T++){var S=x[T];if(a.setX(S,w[T*u]),u>=2&&a.setY(S,w[T*u+1]),u>=3&&a.setZ(S,w[T*u+2]),u>=4&&a.setW(S,w[T*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},_.prototype.loadTexture=function(e){var t,n=this,i=this.json,o=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,u=i.textures[e],c=u.extensions||{};t=c[w.MSFT_TEXTURE_DDS]?i.images[c[w.MSFT_TEXTURE_DDS].source]:i.images[u.source];var l=t.uri,p=!1;return void 0!==t.bufferView&&(l=n.getDependency("bufferView",t.bufferView).then(function(e){p=!0;var n=new Blob([e],{type:t.mimeType});return l=s.createObjectURL(n)})),Promise.resolve(l).then(function(e){var t=r.Loader.Handlers.get(e);return t||(t=c[w.MSFT_TEXTURE_DDS]?n.extensions[w.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(n,r){t.load(h(e,o.path),n,void 0,r)})}).then(function(e){!0===p&&s.revokeObjectURL(l),e.flipY=!1,void 0!==u.name&&(e.name=u.name),t.mimeType in N&&(e.format=N[t.mimeType]);var n=i.samplers||{},o=n[u.sampler]||{};return e.magFilter=A[o.magFilter]||r.LinearFilter,e.minFilter=A[o.minFilter]||r.LinearMipMapLinearFilter,e.wrapS=O[o.wrapS]||r.RepeatWrapping,e.wrapT=O[o.wrapT]||r.RepeatWrapping,e})},_.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then(function(o){if(!o.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=r.RGBFormat}if(i.extensions[w.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[w.KHR_TEXTURE_TRANSFORM]:void 0;a&&(o=i.extensions[w.KHR_TEXTURE_TRANSFORM].extendTexture(o,a))}e[t]=o})},_.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,i=this.extensions,o=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,s=void 0===t.attributes.normal,u=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,l=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var h="PointsMaterial:"+n.uuid,p=this.cache.get(h);p||(p=new r.PointsMaterial,r.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.lights=!1,this.cache.add(h,p)),n=p}else if(e.isLine){var h="LineBasicMaterial:"+n.uuid,f=this.cache.get(h);f||(f=new r.LineBasicMaterial,r.Material.prototype.copy.call(f,n),f.color.copy(n.color),f.lights=!1,this.cache.add(h,f)),n=f}if(o||a||s||u||c){var h="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),u&&(h+="skinning:"),o&&(h+="vertex-tangents:"),a&&(h+="vertex-colors:"),s&&(h+="flat-shading:"),c&&(h+="morph-targets:"),l&&(h+="morph-normals:");var d=this.cache.get(h);d||(d=n.isGLTFSpecularGlossinessMaterial?i[w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),u&&(d.skinning=!0),o&&(d.vertexTangents=!0),a&&(d.vertexColors=r.VertexColors),s&&(d.flatShading=!0),c&&(d.morphTargets=!0),l&&(d.morphNormals=!0),this.cache.add(h,d)),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new r.BufferAttribute(t.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=i[w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=n},_.prototype.loadMaterial=function(e){var t,n=this,i=this.json,o=this.extensions,a=i.materials[e],s={},u=a.extensions||{},c=[];if(u[w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=o[w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),c.push(l.extendParams(s,a,n))}else if(u[w.KHR_MATERIALS_UNLIT]){var h=o[w.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),c.push(h.extendParams(s,a,n))}else{t=r.MeshStandardMaterial;var p=a.pbrMetallicRoughness||{};if(s.color=new r.Color(1,1,1),s.opacity=1,Array.isArray(p.baseColorFactor)){var m=p.baseColorFactor;s.color.fromArray(m),s.opacity=m[3]}void 0!==p.baseColorTexture&&c.push(n.assignTexture(s,"map",p.baseColorTexture)),s.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,s.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(n.assignTexture(s,"metalnessMap",p.metallicRoughnessTexture)),c.push(n.assignTexture(s,"roughnessMap",p.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=r.DoubleSide);var g=a.alphaMode||L.OPAQUE;return g===L.BLEND?s.transparent=!0:(s.transparent=!1,g===L.MASK&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==r.MeshBasicMaterial&&(c.push(n.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new r.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==r.MeshBasicMaterial&&(c.push(n.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==r.MeshBasicMaterial&&(s.emissive=(new r.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==r.MeshBasicMaterial&&c.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(c).then(function(){var e;return e=t===r.ShaderMaterial?o[w.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==a.name&&(e.name=a.name),e.map&&(e.map.encoding=r.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=r.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=r.sRGBEncoding),d(e,a),a.extensions&&f(o,e,a),e})},_.prototype.loadGeometries=function(e){for(var t=this,n=this.extensions,i=this.primitiveCache,o=[],a=0,s=e.length;a<s;a++){var u=e[a],c=v(u),l=i[c];if(l)o.push(l.promise);else{var h;h=u.extensions&&u.extensions[w.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[w.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return x(n,e,t)})}(u):x(new r.BufferGeometry,u,t),i[c]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)},_.prototype.loadMesh=function(e){for(var t=this,n=this.json,i=n.meshes[e],o=i.primitives,a=[],s=0,u=o.length;s<u;s++){var c=void 0===o[s].material?p():this.getDependency("material",o[s].material);a.push(c)}return Promise.all(a).then(function(n){return t.loadGeometries(o).then(function(a){for(var s=[],u=0,c=a.length;u<c;u++){var l,h=a[u],p=o[u],f=n[u];if(p.mode===C.TRIANGLES||p.mode===C.TRIANGLE_STRIP||p.mode===C.TRIANGLE_FAN||void 0===p.mode)l=!0===i.isSkinnedMesh?new r.SkinnedMesh(h,f):new r.Mesh(h,f),!0!==l.isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),p.mode===C.TRIANGLE_STRIP?l.drawMode=r.TriangleStripDrawMode:p.mode===C.TRIANGLE_FAN&&(l.drawMode=r.TriangleFanDrawMode);else if(p.mode===C.LINES)l=new r.LineSegments(h,f);else if(p.mode===C.LINE_STRIP)l=new r.Line(h,f);else if(p.mode===C.LINE_LOOP)l=new r.LineLoop(h,f);else{if(p.mode!==C.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);l=new r.Points(h,f)}Object.keys(l.geometry.morphAttributes).length>0&&g(l,i),l.name=i.name||"mesh_"+e,a.length>1&&(l.name+="_"+u),d(l,i),t.assignFinalMaterial(l),s.push(l)}if(1===s.length)return s[0];for(var m=new r.Group,u=0,c=s.length;u<c;u++)m.add(s[u]);return m})})},_.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],i=n[n.type];return i?("perspective"===n.type?t=new r.PerspectiveCamera(r.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==n.name&&(t.name=n.name),d(t,n),Promise.resolve(t)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")},_.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},_.prototype.loadAnimation=function(e){for(var t=this.json,n=t.animations[e],i=[],o=[],a=[],s=[],u=[],c=0,h=n.channels.length;c<h;c++){var p=n.channels[c],f=n.samplers[p.sampler],d=p.target,m=void 0!==d.node?d.node:d.id,g=void 0!==n.parameters?n.parameters[f.input]:f.input,v=void 0!==n.parameters?n.parameters[f.output]:f.output;i.push(this.getDependency("node",m)),o.push(this.getDependency("accessor",g)),a.push(this.getDependency("accessor",v)),s.push(f),u.push(d)}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(u)]).then(function(t){for(var i=t[0],o=t[1],a=t[2],s=t[3],u=t[4],c=[],h=0,p=i.length;h<p;h++){var f=i[h],d=o[h],m=a[h],g=s[h],v=u[h];if(void 0!==f){f.updateMatrix(),f.matrixAutoUpdate=!0;var y;switch(R[v.path]){case R.weights:y=r.NumberKeyframeTrack;break;case R.rotation:y=r.QuaternionKeyframeTrack;break;case R.position:case R.scale:default:y=r.VectorKeyframeTrack}var b=f.name?f.name:f.uuid,_=void 0!==g.interpolation?P[g.interpolation]:r.InterpolateLinear,x=[];R[v.path]===R.weights?f.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)}):x.push(b);var w=m.array;if(m.normalized){var T;if(w.constructor===Int8Array)T=1/127;else if(w.constructor===Uint8Array)T=1/255;else if(w.constructor==Int16Array)T=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");T=1/65535}for(var E=new Float32Array(w.length),S=0,k=w.length;S<k;S++)E[S]=w[S]*T;w=E}for(var S=0,k=x.length;S<k;S++){var C=new y(x[S]+"."+R[v.path],d.array,w,_);"CUBICSPLINE"===g.interpolation&&(C.createInterpolant=function(e){return new l(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(C)}}}var M=void 0!==n.name?n.name:"animation_"+e;return new r.AnimationClip(M,void 0,c)})},_.prototype.loadNode=function(e){var t=this.json,n=this.extensions,i=this,o=t.meshReferences,a=t.meshUses,s=t.nodes[e];return function(){return!0===s.isBone?Promise.resolve(new r.Bone):void 0!==s.mesh?i.getDependency("mesh",s.mesh).then(function(e){var t;if(o[s.mesh]>1){var n=a[s.mesh]++;t=e.clone(),t.name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var r=0,i=t.children.length;r<i;r++)t.children[r].name+="_instance_"+n,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]}),t}):void 0!==s.camera?i.getDependency("camera",s.camera):s.extensions&&s.extensions[w.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[w.KHR_LIGHTS_PUNCTUAL].light?i.getDependency("light",s.extensions[w.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new r.Object3D)}().then(function(e){if(void 0!==s.name&&(e.userData.name=s.name,e.name=r.PropertyBinding.sanitizeNodeName(s.name)),d(e,s),s.extensions&&f(n,e,s),void 0!==s.matrix){var t=new r.Matrix4;t.fromArray(s.matrix),e.applyMatrix(t)}else void 0!==s.translation&&e.position.fromArray(s.translation),void 0!==s.rotation&&e.quaternion.fromArray(s.rotation),void 0!==s.scale&&e.scale.fromArray(s.scale);return e})},_.prototype.loadScene=function(){function e(t,n,i,o){var a=i.nodes[t];return o.getDependency("node",t).then(function(e){if(void 0===a.skin)return e;var t;return o.getDependency("skin",a.skin).then(function(e){t=e;for(var n=[],r=0,i=t.joints.length;r<i;r++)n.push(o.getDependency("node",t.joints[r]));return Promise.all(n)}).then(function(n){for(var i=!0===e.isGroup?e.children:[e],o=0,a=i.length;o<a;o++){for(var s=i[o],u=[],c=[],l=0,h=n.length;l<h;l++){var p=n[l];if(p){u.push(p);var f=new r.Matrix4;void 0!==t.inverseBindMatrices&&f.fromArray(t.inverseBindMatrices.array,16*l),c.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}s.bind(new r.Skeleton(u,c),s.matrixWorld)}return e})}).then(function(t){n.add(t);var r=[];if(a.children)for(var s=a.children,u=0,c=s.length;u<c;u++){var l=s[u];r.push(e(l,t,i,o))}return Promise.all(r)})}return function(t){var n=this.json,i=this.extensions,o=this.json.scenes[t],a=this,s=new r.Scene;void 0!==o.name&&(s.name=o.name),d(s,o),o.extensions&&f(i,s,o);for(var u=o.nodes||[],c=[],l=0,h=u.length;l<h;l++)c.push(e(u[l],s,n,a));return Promise.all(c).then(function(){return s})}}(),e}();e.exports=i},function(e,t){e.exports="#define GLSLIFY 1\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float uTime;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\nvarying float vDistanceFromCenter;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// diffuseColor.a *= (1.0 - step(\n\t// \t(uTime*0.002),\n    //     vDistanceFromCenter / 255.\n\t// ));\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a);\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n\t#ifdef USE_FOG\n\n\t\t#ifdef FOG_EXP2\n\n\t\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t\t#else\n\n\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t\t#endif\n\n\t\tgl_FragColor.a = mix( gl_FragColor.a, 0.0, fogFactor );\n\n\t#endif\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\nfloat random_2_1(float n){\n    return fract(sin(n) * 43758.5453123);\n}\n\n\nfloat random_2_1 (vec2 st_2_2) {\n    return fract(sin(dot(st_2_2.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n\n\n\n#define PHYSICAL\n\nattribute vec3 offset;\nattribute vec2 planeOffset;\nattribute vec4 quaternion;\nattribute float display;\n\nuniform float uTime;\nuniform float uFirstLoop;\nuniform vec2 uOriginOffset;\n\nvarying vec3 vViewPosition;\nvarying vec3 vTransformed;\nvarying vec3 vOffset;\nvarying float vDistanceFromCenter;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tif (display == 1.0) {\n\n\t\t#include <uv_vertex>\n\t\t#include <uv2_vertex>\n\t\t#include <color_vertex>\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t\t#include <begin_vertex>\n\n\t\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n\t\n\t\tvec3 dest = transformed.xyz;\n\t\tdest.x -= 10.0;\n\t\tdest.y -= 100.0;\n\n\t\ttransformed.xz += (planeOffset.xy - uOriginOffset);\n\n\n\t\t//vDistanceFromCenter = distance(transformed.xyz, dest) + (random(transformed.xy) * 100.0 );\n\t\t//vDistanceFromCenter = distance(transformed.xyz + vec3(0.0, 100.0, 0.0), dest * 10.0 );\n\n\t\tvTransformed = transformed;\n\n\t\t#include <morphtarget_vertex>\n\t\t#include <skinning_vertex>\n\t\t#include <displacementmap_vertex>\n\t\t#include <project_vertex>\n\t\t#include <logdepthbuf_vertex>\n\t\t#include <clipping_planes_vertex>\n\n\t\tvViewPosition = - mvPosition.xyz;\n\n\t\t#include <worldpos_vertex>\n\t\t#include <shadowmap_vertex>\n\t\t#include <fog_vertex>\n\n\t}\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(265),p=n.n(h),f=n(266),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uRadiusMultiplier=8257.34,n.uOffset=.88,n.normalMap=(new c.TextureLoader).load("assets/images/textures/normalMap.jpg"),n.cubeMap=(new c.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa/").load(["0004.png","0002.png","0006.png","0005.png","0001.png","0003.png"]),n.material=new v({flatShading:!0,color:16777215,emissive:1118481,metalness:.4,roughness:.3,opacity:1,transparent:!0,side:c.DoubleSide,envMap:n.cubeMap,fog:!1}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.geometry=new c.PlaneBufferGeometry(1e7,1e7,1,1),this.geometry.rotateX(Math.PI/2),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.mesh.rotateY(Math.PI),this.mesh.translateY(-20),e.abrupt("return",this.mesh);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e){this.material.uniforms.uTime.value=.001*e.time,this.material.uniforms.uCamPos.value=e.camPos,this.material.uniforms.uRadiusMultiplier.value=this.uRadiusMultiplier,this.material.uniforms.uOffset.value=this.uOffset,this.material.uniforms.uMaxHeight.value=e.maxHeight}}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uCamPos={type:"v3",value:new c.Vector3(0,0,0)},n.uniforms.uRadiusMultiplier={type:"f",value:8257.308},n.uniforms.uOffset={type:"f",value:.54},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.uniforms.uSpiralStart={type:"f",value:725e3},n.uniforms.uMaxHeight={type:"f",value:0},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshStandardMaterial)},function(e,t){e.exports="#define GLSLIFY 1\nuniform float uTime;\nuniform float uOffset;\nuniform vec3 uCamPos;\nuniform float uRadiusMultiplier;\nuniform vec2 uOriginOffset;\nuniform float uMaxHeight;\nuniform float uSpiralStart;\n\nvarying vec4 vWorldPosition;\n\nfloat maxDerivative;\n\nconst float PI = 3.14159265359;\nconst float twoPI = PI * 2.0;\n\n// arc length of archimedes spiral\nfloat arclength(float a, float theta) {\n\tfloat d = theta * length(theta);\n\treturn a * d;\n}\n\n// calc where in the spiral a coordinate is\nvec2 spiral(vec2 uv, float a, float radius) {\n\tfloat ang = atan(uv.y, uv.x);\n\tfloat turn = length(uv)/radius - ang/twoPI;\n\tang += ceil(turn) * twoPI;\n\tfloat d = arclength(a, ang) + uOffset;\n\t\n\t// return vec2(d, fract(turn)) * ((1.0 - step(d, 154387.)) * (step(d, uMaxHeight + 152571.)));\n\treturn vec2(d, fract(turn)) * ((1.0 - step(d, uSpiralStart)) * (step(d, uMaxHeight + 152571.)));\n}\n\nfloat plane(vec2 uv, vec2 quadUV) {\n    float top = smoothstep(0.47 * (1.0-maxDerivative), 0.476 + maxDerivative * 0.3, 1.0-uv.y);\n    float bottom = smoothstep(0.47 * (1.0-maxDerivative), 0.476 + maxDerivative *0.3, uv.y);\n    float left = smoothstep(0.1 * (1.0-maxDerivative*20.0), 0.1 * (1.0-maxDerivative*20.0), uv.x);\n    float right = smoothstep(0.1 * (1.0-maxDerivative*20.0), 0.1 * (1.0-maxDerivative*20.0), 1.0-uv.x);\n    // float pct = top * bottom * left * right;\n    float pct = top * bottom;\n    return pct;\n}\n\n\nvec3 calc(vec2 uv) {\n\n\tfloat radius = 0.001;\n\tfloat a = (radius / twoPI) * uRadiusMultiplier;\n\n\tvec2 s = spiral(uv, a, radius);\n\tif (s.x == 0.0) {\n\t\treturn vec3(0.0);\n\t} else {\n\t\tvec2 planeUV = fract(s);\n\t\treturn vec3(plane(planeUV, uv), s.x, s.y);\n\t}\n}\n\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n// #include <uv_pars_fragment>\nvarying vec2 vUv;\n//uniform mat3 uvTransform;\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// get derivative of quad UV and blur based on this\n\tvec2 dt = fwidth(vUv-0.5) * 3500.0;\n\tmaxDerivative = clamp(max(dt.t, dt.s), 0.0, 6.0);\n\tmaxDerivative *= maxDerivative;\n\n\tvec3 s = calc(vUv-0.5);\n\tvec4 distVec = vWorldPosition - vec4(uCamPos, 0);\n\tfloat distToFragmentSq = dot(distVec, distVec);\n\n\ts.x *= min(1.0, distToFragmentSq * 0.000000001);\n\n\ts.x *= max(smoothstep(0.0, 500.0, abs(uCamPos.y)), 0.1);\n\n\toutgoingLight += (1.0-(s.y*0.0000013)) * 0.3;\n\toutgoingLight -= sin(1.0-((s.y + uTime*0.1) *0.001 )) * 0.025;\n\n\tfloat toCenter = (1.0-length(vUv-0.5));\n\n\t//outgoingLight.r += pow(toCenter, 80.0) * 10.0;\n\n\tgl_FragColor = vec4( outgoingLight, s.x * 1.0 );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n//varying vec2 vUv;\nuniform vec3 uCamPos;\nuniform float uRadiusMultiplier;\n// uniform mat3 uvTransform;\nuniform float uTime;\n\nuniform vec2 uOriginOffset;\n\nvarying vec4 vWorldPosition;\n\n#define PHYSICAL\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n// #include <uv_pars_vertex>\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t// #include <uv_vertex>\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\n\ttransformed.xz += uOriginOffset;\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t//#include <worldpos_vertex>\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\tvWorldPosition = worldPosition;\n\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(268),p=n.n(h),f=n(269),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uRadiusMultiplier=8257.34,n.uOffset=.88,n.cubeMap=(new c.CubeTextureLoader).setPath("assets/images/textures/cubemaps/playa/").load(["0004.jpg","0002.jpg","0006.jpg","0005.jpg","0001.jpg","0003.jpg"]),n.material=new v({color:16777215,side:c.BackSide,transparent:!0,opacity:1,envMap:n.cubeMap,fog:!1}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.geometry=new c.SphereBufferGeometry(2e6,25,25),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e){this.material.uniforms.uTime.value=.001*e.time,this.material.uniforms.uCamPos.value=e.camPos}}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.basic.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uCamPos={type:"v3",value:new c.Vector3(0,0,0)},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.uniforms.uMaxHeight={type:"f",value:0},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshBasicMaterial)},function(e,t){e.exports="#define GLSLIFY 1\nuniform float uTime;\nuniform vec3 uCamPos;\nuniform vec2 uOriginOffset;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t//#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t #include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t// #ifdef USE_LIGHTMAP\n\n\t// \treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t// #else\n\n\t \treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t// #endif\n\n\t// modulation\n\t//#include <aomap_fragment>\n\n\t//reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tdiffuseColor.a *= min(1.0-smoothstep(0.0, 5000.0, abs(uCamPos.y)), 0.23);\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t// #include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t// #include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float uTime;\nuniform vec3 uCamPos;\nuniform vec2 uOriginOffset;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(271),p=n.n(h),f=n(272),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.material=new v({side:c.FrontSide,blending:c.AdditiveBlending,transparent:!0,fog:!1,depthWrite:!1}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.geometry=new c.SphereBufferGeometry(45e4,100,100),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.mesh.scale.multiplyScalar(1.002),e.abrupt("return",this.mesh);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e){this.material.uniforms.uTime.value=5e-4*e.time,this.material.uniforms.uCamPos.value=e.camPos}}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms={},n.uniforms.uColor={type:"c",value:new c.Color(5011875)},n.uniforms.uCamPos={type:"v3",value:new c.Vector3(0,0,0)},n.uniforms.uTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.ShaderMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_1_0(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nfloat permute_1_1(float x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_1_2(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_1_3(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_1_4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_1_0(i);\n  float j0 = permute_1_1( permute_1_1( permute_1_1( permute_1_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_1_1( permute_1_1( permute_1_1( permute_1_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_1_5 = grad4_1_3(j0,   ip);\n  vec4 p1 = grad4_1_3(j1.x, ip);\n  vec4 p2 = grad4_1_3(j1.y, ip);\n  vec4 p3 = grad4_1_3(j1.z, ip);\n  vec4 p4 = grad4_1_3(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_5,p0_1_5), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_5 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_1_2(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_1_5, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\n\nuniform vec3 uColor;\nuniform float uTime;\nvarying float vIntensity;\nvarying vec3 vPos;\n\nvoid main() {\n\tvec3 glow = uColor * vIntensity;\n\n\tvec4 noisePos = vec4(vPos, uTime * 100000.0);\n\n\tfloat noiseVal2 = 0.3 + snoise_1_4(noisePos * 0.000003);\n\tfloat noiseVal = 0.2 + abs(snoise_1_4(noisePos * 0.000004));\n\n\tgl_FragColor = vec4( glow, 1.0 );\n\n\tgl_FragColor.r *= noiseVal2;\n\n\tgl_FragColor.a *= noiseVal;\n\n\t//gl_FragColor.a *= (0.8 + (sin(uTime) + 1.0 * 0.5));\n\t// gl_FragColor.a *= (0.8);\n}"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 uCamPos;\nvarying float vIntensity;\n\nvarying vec3 vPos;\n\nvoid main() {\n\tvec3 surfaceNormal = normalize( normalMatrix * normal );\n\tvec3 cameraNormal = normalize( normalMatrix * uCamPos );\n\n\tvIntensity = pow( 1.0 - dot(surfaceNormal, cameraNormal), 1.5 );\n\t\n\t//vIntensity /= pow(dot(uCamPos, uCamPos) * 0.0000000000013, 3.5);\n\n\tvPos = position;\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(274),p=n.n(h),f=n(275),d=n.n(f),m=n(276),g=n.n(m),v=n(277),y=n.n(v),b=n(278),_=n.n(b),x=n(279),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.frame=0,n.instanceTotal=1e3,n.textureHelper=new x.a(e),n.textureHelper.setTextureSize(n.instanceTotal),n.material=new E({flatShading:!0,color:16777215,opacity:.6,transparent:!0,fog:!1}),n.textureHeight=n.textureHelper.textureHeight,n.textureWidth=n.textureHelper.textureWidth,n.positionMaterial=new c.ShaderMaterial({uniforms:{positionTexture:{type:"t",value:null},defaultPositionTexture:{type:"t",value:null},uOriginOffset:{type:"v2",value:new c.Vector2(0,0)},uTime:{type:"f",value:0}},vertexShader:g.a,fragmentShader:_.a}),n.initCamera(),n.initPassThrough(),n.positionRenderTarget1=new c.WebGLRenderTarget(n.textureWidth,n.textureHeight,{wrapS:c.ClampToEdgeWrapping,wrapT:c.ClampToEdgeWrapping,minFilter:c.NearestFilter,magFilter:c.NearestFilter,format:c.RGBAFormat,type:n.config.floatType,depthWrite:!1,depthBuffer:!1,stencilBuffer:!1}),n.positionRenderTarget2=n.positionRenderTarget1.clone(),n.outputPositionRenderTarget=n.positionRenderTarget1,n}return a(t,e),w(t,[{key:"initCamera",value:function(){this.quadCamera=new c.OrthographicCamera,this.quadCamera.position.z=1}},{key:"initPassThrough",value:function(){this.passThroughScene=new c.Scene,this.passThroughMaterial=new c.ShaderMaterial({uniforms:{texture:{type:"t",value:null}},vertexShader:g.a,fragmentShader:y.a});var e=new c.Mesh(new c.PlaneBufferGeometry(2,2),this.passThroughMaterial);this.passThroughScene.add(e)}},{key:"passThroughTexture",value:function(e,t){this.passThroughMaterial.uniforms.texture.value=e,this.renderer.vr.enabled=!1,this.renderer.setRenderTarget(t),this.renderer.render(this.passThroughScene,this.quadCamera)}},{key:"setTextureLocations",value:function(e,t){for(var n=0;n<e;n++){var r=this.textureHelper.getNodeTextureLocation(n);t[3*n+0]=r.x,t[3*n+1]=r.y}}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.renderer=t.renderer,this.txHeights=t.txHeights,n=t.blockPositions,r=this.textureHelper.createPositionTexture(n,this.txHeights),this.defaultPositionTexture=r.positionTexture,this.quatArray=r.quatArray,this.passThroughTexture(r.positionTexture,this.positionRenderTarget1),this.passThroughTexture(this.positionRenderTarget1.texture,this.positionRenderTarget2),this.positionMaterial.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.material.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.positionScene=new c.Scene,this.positionMesh=new c.Mesh(new c.PlaneBufferGeometry(2,2),this.positionMaterial),this.positionScene.add(this.positionMesh),i=new c.CylinderGeometry(0,200,8e4,3,64),o=(new c.BufferGeometry).fromGeometry(i),this.geometry=(new c.InstancedBufferGeometry).copy(o),this.geometry.rotateX(Math.PI/2),this.geometry.rotateY(Math.PI),a=new Float32Array(3*this.instanceTotal),this.setTextureLocations(this.instanceTotal,a),s=new c.InstancedBufferAttribute(a,3),this.geometry.addAttribute("offset",s),l=new c.InstancedBufferAttribute(this.quatArray,4),this.geometry.addAttribute("quaternion",l),this.mesh=new c.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateGeometry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.renderer=t.renderer,this.txHeights=t.txHeights,n=t.blockPositions,r=this.textureHelper.createPositionTexture(n,this.txHeights),this.defaultPositionTexture=r.positionTexture,this.quatArray=r.quatArray,this.positionMaterial.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.material.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.geometry.attributes.quaternion.array=this.quatArray,this.geometry.attributes.quaternion.needsUpdate=!0;case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e){this.frame++,this.material.uniforms.uTime.value=e,this.updatePositions()}},{key:"updateOriginOffset",value:function(e){this.positionMaterial.uniforms.uOriginOffset.value=e,this.material.uniforms.uOriginOffset.value=e}},{key:"updatePositions",value:function(){var e=this.positionRenderTarget1;this.outputPositionRenderTarget=this.positionRenderTarget2,this.frame%2===0&&(e=this.positionRenderTarget2,this.outputPositionRenderTarget=this.positionRenderTarget1),this.positionMaterial.uniforms.positionTexture.value=e.texture,this.renderer.vr.enabled=!1,this.renderer.setRenderTarget(this.outputPositionRenderTarget),this.renderer.render(this.positionScene,this.quadCamera),this.material.uniforms.positionTexture.value=this.outputPositionRenderTarget.texture,this.positionMaterial.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.material.uniforms.defaultPositionTexture.value=this.defaultPositionTexture}}]),t}(l.a);t.a=T;var E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.positionTexture={type:"t",value:null},n.uniforms.defaultPositionTexture={type:"t",value:null},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshBasicMaterial)},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\nvarying float vTopVertex;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n// #include <map_pars_fragment>\n// #include <alphamap_pars_fragment>\n// #include <aomap_pars_fragment>\n// #include <lightmap_pars_fragment>\n// #include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n// #include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t// #include <map_fragment>\n\t#include <color_fragment>\n\t// #include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t// #include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t// #include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t// diffuseColor.a *= vTopVertex;\n\t// diffuseColor.a = pow(diffuseColor.a, 10.0);\n\n\t// #include <envmap_fragment>\n\n\t//outgoingLight += 5.0;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n\t#ifdef USE_FOG\n\n\t\t#ifdef FOG_EXP2\n\n\t\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t\t#else\n\n\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t\t#endif\n\n\t\tgl_FragColor.a = mix( gl_FragColor.a, 0.0, fogFactor );\n\n\t#endif\n\n\n\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec3 applyQuaternionToVector_1_0( vec4 q, vec3 v ){\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_2_1(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_2_1(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_2_2(vec4 x) {\n     return mod289_2_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_2_3(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_2_4(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_2_5 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_2_6 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_2_6;\n  vec3 i1 = min( g_2_6.xyz, l.zxy );\n  vec3 i2 = max( g_2_6.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_2_5.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_2_1(i);\n  vec4 p = permute_2_2( permute_2_2( permute_2_2(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_2_5.wyz - D_2_5.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_2_7 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_2_8 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_2_7.xy,h.z);\n  vec3 p3 = vec3(a1_2_7.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_2_3(vec4(dot(p0_2_8,p0_2_8), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_2_8 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_2_8,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n\nuniform float uTime;\nuniform vec2 uOriginOffset;\n\nuniform sampler2D positionTexture;\n\nattribute vec2 offset;\nattribute vec4 quaternion;\n// attribute float topVertex;\n\nvarying float vTopVertex;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n// #include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n// #include <morphtarget_pars_vertex>\n// #include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t// #include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t// #include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\n\tvec4 positionData = texture2D(positionTexture, offset.xy);\n\n\tif (positionData.w == 0.0) {\n\t\ttransformed.xyz = vec3(0.0);\n\t} else {\n    \ttransformed.xyz *= (positionData.w - 1.0);\n\t\ttransformed.xyz = applyQuaternionToVector_1_0( quaternion, transformed.xyz );\n\n    \t// transformed.y += offset.y;\n\n\t\ttransformed.xyz += positionData.xyz;\n\n\t\tfloat noiseVal = snoise_2_4(transformed.xyz * 0.000005) * 10000.0;\n\n\t\ttransformed.x += noiseVal;\n\t\ttransformed.y += noiseVal;\n\t\ttransformed.z += noiseVal;\n\n\t\ttransformed.xz -= uOriginOffset;\n\t}\n\n\t//vTopVertex = topVertex;\n\n\t// #include <morphtarget_vertex>\n\t// #include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t// #include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1.);\n}"},function(e,t){e.exports="#define GLSLIFY 1\nuniform sampler2D texture;\nvarying vec2 vUv;\n\nvoid main() {\n  gl_FragColor = texture2D(texture, vUv);\n}"},function(e,t){e.exports="#define GLSLIFY 1\nfloat random_1_0(float n){\n    return fract(sin(n) * 43758.5453123);\n}\n\n\nfloat random_1_0 (vec2 st_1_1) {\n    return fract(sin(dot(st_1_1.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n\n\n\nvarying vec2 vUv;\n\nuniform sampler2D positionTexture;\nuniform sampler2D defaultPositionTexture;\n\nvoid main() {\n  vec4 currentPosition;\n  vec4 previousPosition = texture2D(positionTexture, vUv);\n  vec4 defaultPosition = texture2D(defaultPositionTexture, vUv);\n\n  if (previousPosition.w == 0.0 && defaultPosition.w == 0.0) {\n     \n      gl_FragColor = vec4(0.0);\n\n   } else {\n\n    if (previousPosition.w == 0.0 && defaultPosition.w == 1.0) {\n      currentPosition = defaultPosition;\n      previousPosition = defaultPosition;\n    } else {\n      currentPosition = previousPosition;\n    }\n\n    float distToCenter = length(-previousPosition.xz);\n\n        vec3 toCenter = normalize(-previousPosition.xyz);\n        currentPosition.xyz += toCenter * (100.0 + (random_1_0(vUv.x) * 50.0));\n\n    if (distToCenter < 200000.0) {\n\n      if (currentPosition.w > 1.0) {\n        currentPosition.w -= 0.002;\n      } else {\n        currentPosition.w = 0.0;\n      }\n\n    } else {\n\n\n\n        if (currentPosition.w < 2.0) {\n          currentPosition.w += 0.002;\n        }\n    }\n\n    gl_FragColor = currentPosition;\n   }\n\n}"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.config=t.config,this.textureIndex=0}return o(e,[{key:"setNodeCount",value:function(e){this.nodeCount=e}},{key:"setTextureSize",value:function(e){this.setNodeCount(e);for(var t=1,n=1;n*t<this.nodeCount&&(t*=2,!(n*t>=this.nodeCount));)n*=2;this.textureWidth=t,this.textureHeight=n}},{key:"getNodeTextureLocation",value:function(e){return{x:e%this.textureWidth*(1/this.textureWidth)+1/(2*this.textureWidth),y:Math.floor(e/this.textureWidth)*(1/this.textureHeight)+1/(2*this.textureHeight)}}},{key:"createPositionTexture",value:function(e,t){var n=this;"undefined"===typeof this.textureArray&&(this.textureArray=new Float32Array(this.textureWidth*this.textureHeight*4)),"undefined"===typeof this.quatArray&&(this.quatArray=new Float32Array(4*this.nodeCount)),this.textureIndex/4>this.nodeCount&&(console.log("reset line texture"),this.textureIndex=0),this.textureArray.forEach(function(e,t){n.textureArray[t]=0}),t.forEach(function(t){if("undefined"!==typeof t){var r=e[2*t+0]+200*Math.random()-100,o=300+1e4*Math.random(),a=e[2*t+1]+200*Math.random()-100,s=new i.Vector3(r,o,a),u=new i.Object3D;u.position.set(r,0,a),u.lookAt(0,0,0);var c=new i.Vector3(r,o,a);c.applyQuaternion(u.quaternion),c.x+=r,c.z+=a,n.quatArray[n.textureIndex+0]=u.quaternion.x,n.quatArray[n.textureIndex+1]=u.quaternion.y,n.quatArray[n.textureIndex+2]=u.quaternion.z,n.quatArray[n.textureIndex+3]=u.quaternion.w,n.textureArray[n.textureIndex+0]=s.x,n.textureArray[n.textureIndex+1]=s.y,n.textureArray[n.textureIndex+2]=s.z,n.textureArray[n.textureIndex+3]=1,n.textureIndex+=4}});var r=new i.DataTexture(this.textureArray,this.textureWidth,this.textureHeight,i.RGBAFormat,i.FloatType);return r.minFilter=i.NearestFilter,r.magFilter=i.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,{positionTexture:r,quatArray:this.quatArray}}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(281),p=n.n(h),f=n(282),d=n.n(f),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.material=new v({transparent:!0,side:c.DoubleSide}),n}return a(t,e),m(t,[{key:"init",value:function(){function e(){return t.apply(this,arguments)}var t=r(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new c.PlaneBufferGeometry(this.planeSize+10,this.planeSize+10,1),this.underside=new c.Mesh(t,this.material),this.underside.frustumCulled=!1,this.underside.visible=!1,this.underside.scale.set(1,-1,1),this.underside.position.y=-.1,this.underside.updateMatrix(),n=this.material.clone(),this.undersideL=this.underside.clone(),this.undersideL.material=n,r=this.material.clone(),this.undersideR=this.underside.clone(),this.undersideR.material=r,e.abrupt("return",{underside:this.underside,undersideL:this.undersideL,undersideR:this.undersideR});case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(e){this.material.uniforms.uTime.value=e}}]),t}(l.a);t.a=g;var v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.standard.uniforms,n.uniforms.uTime={type:"f",value:0},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.MeshBasicMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1_3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_1_4 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_1_5 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_1_5;\n  vec3 i1 = min( g_1_5.xyz, l.zxy );\n  vec3 i2 = max( g_1_5.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_1_4.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1_0(i);\n  vec4 p = permute_1_1( permute_1_1( permute_1_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_1_4.wyz - D_1_4.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_1_6 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_1_7 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_1_6.xy,h.z);\n  vec3 p3 = vec3(a1_1_6.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_7,p0_1_7), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_7 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_1_7,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform float uTime;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nfloat circle(in float dist, in float radius) {\n\treturn 1.0 - smoothstep(\n\t\tradius - (radius * 2.0),\n\t\tradius + (radius * 0.00001),\n        dot(dist, dist) * 4.0\n\t);\n}\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t\n\t#ifdef USE_MAP\n\n\t\tvec4 texelColor = texture2D( map, vUv );\n\n\t\ttexelColor = mapTexelToLinear( texelColor );\n\t\tdiffuseColor *= texelColor;\n\n\n\t#endif\n\n\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\n\t//float dist = dot(vUv-0.5 + noise(vUv*0.5) , vUv-0.5 + noise(vUv*0.5));\n\tfloat dist = dot(vUv-0.5, vUv-0.5);\n\n\t// dist += (noise(vec3(vUv, uTime*0.0005)) * 0.1);\n\t\t\n\t//diffuseColor.rgb += vec3(circle(dist, 0.9));\n\toutgoingLight.rgb += 3.0;\n\n\toutgoingLight.rgb *= 1.0-abs(\n\t\tsin(\n\t\t\t(dist * 5.0) - (uTime * 0.0005)\n\t\t)\n\t) + 0.05;\n\t\n\toutgoingLight.rgb -= abs(snoise_1_3(vec3(vUv*10.0, uTime*0.0005)) *0.5);\n\n\n\t//diffuseColor.rgb *= noise((vUv + (uTime * 0.00000001)) * 5.0)) + 0.1;\n\n\t//diffuseColor.rgb += noise((vUv + (uTime * 0.00000001)) * 5.0) + 0.1;\n\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n.n(s),c=n(2),l=n(6),h=n(284),p=n.n(h),f=n(285),d=n.n(f),m=n(286),g=n.n(m),v=n(287),y=n.n(v),b=n(288),_=n.n(b),x=n(289),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.particleCount=1e4,e.particleCount&&(n.particleCount=e.particleCount),n.frame=0,n.textureHelper=new x.a(e),n.textureHelper.setTextureSize(n.particleCount),n.map=(new c.TextureLoader).load("assets/images/textures/matcap.png"),n.material=new E({color:7380716,transparent:!0,map:n.map,opacity:1,fog:!1,alphaTest:.5,blending:c.AdditiveBlending,depthWrite:!1}),n.textureHeight=n.textureHelper.textureHeight,n.textureWidth=n.textureHelper.textureWidth,n.positionMaterial=new c.ShaderMaterial({uniforms:{positionTexture:{type:"t",value:null},defaultPositionTexture:{type:"t",value:null},uOriginOffset:{type:"v2",value:new c.Vector2(0,0)},uFrame:{type:"f",value:0}},vertexShader:g.a,fragmentShader:_.a}),n.initCamera(),n.initPassThrough(),n.positionRenderTarget1=new c.WebGLRenderTarget(n.textureWidth,n.textureHeight,{wrapS:c.ClampToEdgeWrapping,wrapT:c.ClampToEdgeWrapping,minFilter:c.NearestFilter,magFilter:c.NearestFilter,format:c.RGBAFormat,type:n.config.floatType,depthWrite:!1,depthBuffer:!1,stencilBuffer:!1}),n.positionRenderTarget2=n.positionRenderTarget1.clone(),n.outputPositionRenderTarget=n.positionRenderTarget1,n}return a(t,e),w(t,[{key:"updateOriginOffset",value:function(e){this.positionMaterial.uniforms.uOriginOffset.value=e,this.material.uniforms.uOriginOffset.value=e}},{key:"initPassThrough",value:function(){this.passThroughScene=new c.Scene,this.passThroughMaterial=new c.ShaderMaterial({uniforms:{texture:{type:"t",value:null}},vertexShader:g.a,fragmentShader:y.a});var e=new c.Mesh(new c.PlaneBufferGeometry(2,2),this.passThroughMaterial);e.frustumCulled=!1,this.passThroughScene.add(e)}},{key:"passThroughTexture",value:function(e,t){this.passThroughMaterial.uniforms.texture.value=e,this.renderer.vr.enabled=!1,this.renderer.setRenderTarget(t),this.renderer.render(this.passThroughScene,this.quadCamera)}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=r(u.a.mark(function e(t){var n,r,i,o,a,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.renderer=t.renderer,n=this.textureHelper.createPositionTexture(),this.defaultPositionTexture=n.positionTexture,this.passThroughTexture(n.positionTexture,this.positionRenderTarget1),this.passThroughTexture(this.positionRenderTarget1.texture,this.positionRenderTarget2),this.positionMaterial.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.material.uniforms.defaultPositionTexture.value=this.defaultPositionTexture,this.positionScene=new c.Scene,this.positionMesh=new c.Mesh(new c.PlaneBufferGeometry(2,2),this.positionMaterial),this.positionMesh.frustumCulled=!1,this.positionScene.add(this.positionMesh),this.geometry=new c.BufferGeometry,r=new Float32Array(3*this.particleCount),this.setTextureLocations(this.particleCount,r),i=new c.BufferAttribute(r,3),this.geometry.addAttribute("position",i),o=new c.BufferAttribute(new Float32Array(n.lifeArray),1),this.geometry.addAttribute("life",o),a=new Float32Array(this.particleCount),s=0;s<a.length;s++)a[s]=s;return l=new c.BufferAttribute(a,1),this.geometry.addAttribute("id",l),this.mesh=new c.Points(this.geometry,this.material),this.material.uniforms.uParticleLifeMax.value=this.config.scene.particleLifeMax,this.mesh.frustumCulled=!1,e.abrupt("return",this.mesh);case 26:case"end":return e.stop()}},e,this)}));return e}()},{key:"updatePositions",value:function(){var e=this.positionRenderTarget1;this.outputPositionRenderTarget=this.positionRenderTarget2,this.frame%2===0&&(e=this.positionRenderTarget2,this.outputPositionRenderTarget=this.positionRenderTarget1),this.positionMaterial.uniforms.positionTexture.value=e.texture,this.renderer.vr.enabled=!1,this.renderer.setRenderTarget(this.outputPositionRenderTarget),this.renderer.render(this.positionScene,this.quadCamera),this.material.uniforms.positionTexture.value=this.outputPositionRenderTarget.texture}},{key:"update",value:function(){this.frame++,this.material.uniforms.uFrame.value=this.frame,this.positionMaterial.uniforms.uFrame.value=this.frame,this.updatePositions()}},{key:"initCamera",value:function(){this.quadCamera=new c.OrthographicCamera,this.quadCamera.position.z=1}},{key:"setTextureLocations",value:function(e,t){for(var n=0;n<e;n++){var r=this.textureHelper.getNodeTextureLocation(n);t[3*n+0]=r.x,t[3*n+1]=r.y}}}]),t}(l.a);t.a=T;var E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="ShaderMaterial",n.uniforms=c.ShaderLib.points.uniforms,n.uniforms.uFrame={type:"f",value:0},n.uniforms.uParticleLifeMax={type:"f",value:0},n.uniforms.positionTexture={type:"t",value:null},n.uniforms.defaultPositionTexture={type:"t",value:null},n.uniforms.scale={type:"f",value:10},n.uniforms.uOriginOffset={type:"v2",value:new c.Vector2(0,0)},n.vertexShader=d.a,n.fragmentShader=p.a,n}return a(t,e),t}(c.PointsMaterial)},function(e,t){e.exports="#define GLSLIFY 1\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform float uTime;\nuniform float uParticleLifeMax;\n\nvarying float vLife;\nvarying float vLifeAttr;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n// #include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t// round particles\n\t// vec2 uv = (  vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t// vec2 toCenter = (uv - 0.5) * 2.0;\n\t// if (length(toCenter) > 1.0) {\n\t// \tdiscard;\n\t// }\n\n\t// outgoingLight *= vec3(112./255., 158./255., 236./255.);\n\toutgoingLight.r += (vLife / uParticleLifeMax) * 0.25;\n\t// diffuseColor.a = (vLife / uParticleLifeMax) * (vLife / uParticleLifeMax);\n\t// diffuseColor.a *= 1.0 - (vLife / uParticleLifeMax);\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t//#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nattribute float life;\n\nuniform float size;\nuniform float scale;\nuniform vec2 uOriginOffset;\nuniform sampler2D positionTexture;\n\nvarying float vLifeAttr;\nvarying float vLife;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\n\tvec4 positionData = texture2D(positionTexture, position.xy);\n\t\n\tvLifeAttr = life;\n\tvLife = positionData.w;\n\n\ttransformed.xyz = positionData.xyz;\n\n\ttransformed.xz -= uOriginOffset;\n\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = 1500.0;\n\n\t// #ifdef USE_SIZEATTENUATION\n\n\t \tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t \tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t// #endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1.);\n}"},function(e,t){e.exports="#define GLSLIFY 1\nuniform sampler2D texture;\nvarying vec2 vUv;\n\nvoid main() {\n  gl_FragColor = texture2D(texture, vUv);\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// https://github.com/fazeaction/webgl-001/blob/master/src/shaders/curl.glsl\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_2_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_2_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_2_1(vec4 x) {\n     return mod289_2_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_2_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_2_3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_2_4 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_2_5 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_2_5;\n  vec3 i1 = min( g_2_5.xyz, l.zxy );\n  vec3 i2 = max( g_2_5.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_2_4.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_2_0(i);\n  vec4 p = permute_2_1( permute_2_1( permute_2_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_2_4.wyz - D_2_4.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_2_6 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_2_7 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_2_6.xy,h.z);\n  vec3 p3 = vec3(a1_2_6.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_2_2(vec4(dot(p0_2_7,p0_2_7), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_2_7 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_2_7,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n// Using  @eddietree implementation from\n// His brilliant demo 'Artifacts'\n\nvec3 snoiseVec3_1_8( vec3 x ){\n\n  float s  = snoise_2_3(vec3( x ));\n  float s1 = snoise_2_3(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n  float s2 = snoise_2_3(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n  vec3 c = vec3( s , s1 , s2 );\n  return c;\n\n}\n\n\nvec3 curlNoise_1_9( vec3 p ){\n  \n  const float e = 1e-1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3_1_8( p - dx );\n  vec3 p_x1 = snoiseVec3_1_8( p + dx );\n  vec3 p_y0 = snoiseVec3_1_8( p - dy );\n  vec3 p_y1 = snoiseVec3_1_8( p + dy );\n  vec3 p_z0 = snoiseVec3_1_8( p - dz );\n  vec3 p_z1 = snoiseVec3_1_8( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  vec3 result = normalize( vec3( x , y , z ) * divisor );\n  // return vec3(\n  //   floor(result.x + 0.5),\n  //   floor(result.y + 0.5),\n  //   floor(result.z + 0.5)\n  // );\n  return result;\n  \n}\n\n\n\nvarying vec2 vUv;\n\nuniform sampler2D positionTexture;\nuniform sampler2D defaultPositionTexture;\nuniform float uFrame;\n\nvoid main() {\n  vec4 defaultPosition = texture2D(defaultPositionTexture, vUv);\n  vec4 currentPosition = texture2D(positionTexture, vUv);\n\n  vec3 scaledPosition = vec3(currentPosition.x, currentPosition.y, currentPosition.z + (sin(uFrame * 0.001) * 100000.0)) * 0.0000045;\n\n  currentPosition.xyz = currentPosition.xyz + curlNoise_1_9(scaledPosition) * 300.8;\n\n  currentPosition.w -= 1.0;\n  if (currentPosition.w < 0.0 ) {\n    currentPosition = defaultPosition;\n  }\n\n  gl_FragColor = currentPosition;\n\n}"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.config=t.config}return o(e,[{key:"setNodeCount",value:function(e){this.nodeCount=e}},{key:"setTextureSize",value:function(e){this.setNodeCount(e);for(var t=1,n=1;n*t<this.nodeCount&&(t*=2,!(n*t>=this.nodeCount));)n*=2;this.textureWidth=t,this.textureHeight=n}},{key:"getNodeTextureLocation",value:function(e){return{x:e%this.textureWidth*(1/this.textureWidth)+1/(2*this.textureWidth),y:Math.floor(e/this.textureWidth)*(1/this.textureHeight)+1/(2*this.textureHeight)}}},{key:"createPositionTexture",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultPositions,n=void 0===t?new Float32Array:t,r=new Float32Array(this.textureWidth*this.textureHeight*4),o=[],a=0;a<this.nodeCount;a++){var s=new i.Vector3(200*Math.random()-100,200*Math.random()-100,200*Math.random()-100);s=s.normalize().multiplyScalar(this.config.scene.particleEmitterRadius);var u=Math.ceil(Math.random()*this.config.scene.particleLifeMax);o.push(u),r[4*a+0]=s.x,r[4*a+1]=s.y,r[4*a+2]=s.z,r[4*a+3]=u}if(n.length)for(var c=0;c<n.length;c++)r[c]=n[c];var l=new i.DataTexture(r,this.textureWidth,this.textureHeight,i.RGBAFormat,i.FloatType);return l.minFilter=i.NearestFilter,l.magFilter=i.NearestFilter,l.generateMipmaps=!1,l.needsUpdate=!0,{positionTexture:l,lifeArray:o}}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(3),a=n.n(o),s=n(2),u=n(291),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(302),h=function(){function e(t){i(this,e),this.fontTexture=null,this.textureLoader=new s.TextureLoader,this.SDFShader=n(331),this.defaultFontName="dejavu",this.maxAnisotropy=t.maxAnisotropy,this.fontPaths={dejavu:{font:"../../assets/fonts/DejaVu-sdf.fnt",image:"../../assets/fonts/DejaVu-sdf.png"}},this.loadedFonts={}}return c(e,[{key:"loadFontTexture",value:function(){function e(e){return t.apply(this,arguments)}var t=r(a.a.mark(function e(t){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){"undefined"===typeof n.loadedFonts[t]?l(n.fontPaths[t].font,function(){var n=r(a.a.mark(function n(o,u){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o?i(o):this.textureLoader.load(this.fontPaths[t].image,function(){var n=r(a.a.mark(function n(r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.needsUpdate=!0,r.minFilter=s.LinearMipMapLinearFilter,r.magFilter=s.LinearFilter,r.generateMipmaps=!0,r.anisotropy=this.maxAnisotropy,this.loadedFonts[t]={font:u,texture:r},e(this.loadedFonts[t]);case 7:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}().bind(this));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}().bind(n)):e(n.loadedFonts[t])}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"create",value:function(){function e(e){return t.apply(this,arguments)}var t=r(a.a.mark(function e(t){var n,r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.fontName||(t.fontName=this.defaultFontName),e.next=3,this.loadFontTexture(t.fontName);case 3:return n=e.sent,r=new u.a({width:t.width,align:t.align,font:n.font,flipY:n.texture.flipY,text:t.text,lineHeight:t.lineHeight}),i=new s.RawShaderMaterial(this.SDFShader({map:n.texture,side:s.DoubleSide,transparent:!0,color:16777215})),o=new s.Mesh(r,i),o.scale.set(t.scale,t.scale,t.scale),o.position.x=t.position.x,o.position.y=t.position.y,o.position.z=t.position.z,o.frustumCulled=!1,e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),s=n(292),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(294),l=n(297),h=n(8),p=n(300),f=n(301),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.buffer=new s.a,"string"===typeof e&&(e={text:e}),n.opt=h({},e),e&&n.update(e),n}return o(t,e),u(t,[{key:"update",value:function(e){if("string"===typeof e&&(e={text:e}),e=h({},this.opt,e),!e.font)throw new TypeError("must specify a { font } in options");this.layout=c(e);var t=!1!==e.flipY,n=e.font,r=n.common.scaleW,i=n.common.scaleH,o=this.layout.glyphs.filter(function(e){var t=e.data;return t.width*t.height>0});this.visibleGlyphs=o;var a=p.positions(o),s=p.uvs(o,r,i,t),u=l({clockwise:!0,type:"uint16",count:o.length});if(this.buffer.setIndex(this,u,1,"uint16"),this.buffer.setAttribute(this,"position",a,2),this.buffer.setAttribute(this,"uv",s,2),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var f=p.pages(o);this.buffer.setAttribute(this,"page",f,1)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new a.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);f.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new a.Box3);var e=this.boundingBox,t=this.attributes.position.array,n=this.attributes.position.itemSize;if(!t||!n||t.length<2)return void e.makeEmpty();f.computeBox(t,e)}}]),t}(a.BufferGeometry);t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(293),s=!1,u=function(){function e(){r(this,e)}return o(e,[{key:"setIndex",value:function(e,t,n,r){"number"!==typeof n&&(n=1),"string"!==typeof r&&(r="uint16");var i=!e.index&&"function"!==typeof e.setIndex,o=i?e.getAttribute("index"):e.index,a=this.updateAttribute(o,t,n,r);a&&(i?e.addAttribute("index",a):e.index=a)}},{key:"setAttribute",value:function(e,t,n,r,i){if("number"!==typeof r&&(r=3),"string"!==typeof i&&(i="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==r)throw new Error("Nested vertex array has unexpected size; expected "+r+" but found "+n[0].length);var o=e.getAttribute(t),a=this.updateAttribute(o,n,r,i);a&&e.addAttribute(t,a)}},{key:"updateAttribute",value:function(e,t,n,r){if(t=t||[],!e||this.rebuildAttribute(e,t,n)){t=a(t,r);var o=e&&"function"!==typeof e.setArray;return e&&!o||(o&&!s&&(s=!0,console.warn(["A WebGL buffer is being updated with a new size or itemSize, ","however this version of ThreeJS only supports fixed-size buffers.","\nThe old buffer may still be kept in memory.\n","To avoid memory leaks, it is recommended that you dispose ","your geometries and create new ones, or update to ThreeJS r82 or newer.\n","See here for discussion:\n","https://github.com/mrdoob/three.js/pull/9631"].join(""))),e=new i.BufferAttribute(t,n)),e.itemSize=n,e.needsUpdate=!0,"function"===typeof e.setArray&&e.setArray(t),e}return a(t,e.array),e.needsUpdate=!0,null}},{key:"rebuildAttribute",value:function(e,t,n){if(e.itemSize!==n)return!0;if(!e.array)return!0;var r=e.array.length;return Array.isArray(t)&&Array.isArray(t[0])?r!==t.length*n:r!==t.length}}]),e}();t.a=u},function(e,t,n){function r(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&e[0]&&"number"===typeof e[0][0]){var r,o,a,s,u=e[0].length,c=e.length*u;t&&"string"!==typeof t||(t=new(i(t||"float32"))(c+n));var l=t.length-n;if(c!==l)throw new Error("source length "+c+" ("+u+"x"+e.length+") does not match destination length "+l);for(r=0,a=n;r<e.length;r++)for(o=0;o<u;o++)t[a++]=null===e[r][o]?NaN:e[r][o]}else if(t&&"string"!==typeof t)t.set(e,n);else{var h=i(t||"float32");if(Array.isArray(e)||"array"===t)for(t=new h(e.length+n),r=0,a=n,s=t.length;a<s;a++,r++)t[a]=null===e[r]?NaN:e[r];else 0===n?t=new h(e):(t=new h(e.length+n),t.set(e,n))}return t}var i=n(89);e.exports=r},function(e,t,n){function r(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function i(e){Object.defineProperty(r.prototype,e,{get:o(e),configurable:!0})}function o(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function a(e,t){if(!e.chars||0===e.chars.length)return null;var n=p(e.chars,t);return n>=0?e.chars[n]:null}function s(e){for(var t=0;t<g.length;t++){var n=g[t].charCodeAt(0),r=p(e.chars,n);if(r>=0)return e.chars[r].height}return 0}function u(e){for(var t=0;t<v.length;t++){var n=v[t].charCodeAt(0),r=p(e.chars,n);if(r>=0)return e.chars[r]}return 0}function c(e){for(var t=0;t<y.length;t++){var n=y[t].charCodeAt(0),r=p(e.chars,n);if(r>=0)return e.chars[r].height}return 0}function l(e,t,n){if(!e.kernings||0===e.kernings.length)return 0;for(var r=e.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===t&&o.second===n)return o.amount}return 0}function h(e){return"center"===e?w:"right"===e?T:x}function p(e,t,n){n=n||0;for(var r=n;r<e.length;r++)if(e[r].id===t)return r;return-1}var f=n(295),d=n(36),m=n(296),g=["x","e","a","o","n","s","r","c","u","m","v","w","z"],v=["m","w"],y=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],b="\t".charCodeAt(0),_=" ".charCodeAt(0),x=0,w=1,T=2;e.exports=function(e){return new r(e)},r.prototype.update=function(e){if(e=d({measure:this._measure},e),this._opt=e,this._opt.tabSize=m(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,n=e.text||"",r=e.font;this._setupSpaceGlyphs(r);var i=f.lines(n,e),o=e.width||0;t.length=0;var a=i.reduce(function(e,t){return Math.max(e,t.width,o)},0),u=0,p=0,g=m(e.lineHeight,r.common.lineHeight),v=r.common.base,y=g-v,b=e.letterSpacing||0,_=g*i.length-y,x=h(this._opt.align);p-=_,this._width=a,this._height=_,this._descender=g-v,this._baseline=v,this._xHeight=s(r),this._capHeight=c(r),this._lineHeight=g,this._ascender=g-y-this._xHeight;var E=this;i.forEach(function(e,i){for(var o,s=e.start,c=e.end,h=e.width,f=s;f<c;f++){var d=n.charCodeAt(f),m=E.getGlyph(r,d);if(m){o&&(u+=l(r,o.id,m.id));var v=u;x===w?v+=(a-h)/2:x===T&&(v+=a-h),t.push({position:[v,p],data:m,index:f,line:i}),u+=m.xadvance+b,o=m}}p+=g,u=0}),this._linesTotal=i.length},r.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=a(e,_)||u(e)||e.chars[0],n=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=d(t,{x:0,y:0,xadvance:n,id:b,xoffset:0,yoffset:0,width:0,height:0})}},r.prototype.getGlyph=function(e,t){var n=a(e,t);return n||(t===b?this._fallbackTabGlyph:t===_?this._fallbackSpaceGlyph:null)},r.prototype.computeMetrics=function(e,t,n,r){var i,o,a=this._opt.letterSpacing||0,s=this._opt.font,u=0,c=0,h=0;if(!s.chars||0===s.chars.length)return{start:t,end:t,width:0};n=Math.min(e.length,n);for(var p=t;p<n;p++){var f=e.charCodeAt(p),i=this.getGlyph(s,f);if(i){i.xoffset;u+=o?l(s,o.id,i.id):0;var d=u+i.xadvance+a,m=u+i.width;if(m>=r||d>=r)break;u=d,c=m,o=i}h++}return o&&(c+=o.xoffset),{start:t,end:t+h,width:c}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(i)},function(e,t){function n(e,t,n,r){var i=e.indexOf(t,n);return-1===i||i>r?r:i}function r(e){return c.test(e)}function i(e,t,n,r,i){for(var o=[],a=n,u=n;u<r&&u<t.length;u++){var c=t.charAt(u),l=s.test(c);if(l||u===r-1){var h=l?u:u+1,p=e(t,a,h,i);o.push(p),a=u+1}}return o}function o(e,t,i,o,a,s){var c=[],l=a;for("nowrap"===s&&(l=Number.MAX_VALUE);i<o&&i<t.length;){for(var h=n(t,u,i,o);i<h&&r(t.charAt(i));)i++;var p=e(t,i,h,l),f=i+(p.end-p.start),d=f+u.length;if(f<h){for(;f>i&&!r(t.charAt(f));)f--;if(f===i)d>i+u.length&&d--,f=d;else for(d=f;f>i&&r(t.charAt(f-u.length));)f--}if(f>=i){var m=e(t,i,f,l);c.push(m)}i=d}return c}function a(e,t,n,r){return{start:t,end:t+Math.min(r,n-t)}}var s=/\n/,u="\n",c=/\s/;e.exports=function(t,n){return e.exports.lines(t,n).map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(e,t){if(t=t||{},0===t.width&&"nowrap"!==t.mode)return[];e=e||"";var n="number"===typeof t.width?t.width:Number.MAX_VALUE,r=Math.max(0,t.start||0),s="number"===typeof t.end?t.end:e.length,u=t.mode,c=t.measure||a;return"pre"===u?i(c,e,r,s,n):o(c,e,r,s,n,u)}},function(e,t){e.exports=function(e,t){return"number"===typeof e?e:"number"===typeof t?t:0}},function(e,t,n){var r=n(89),i=n(298),o=n(299),a=[0,2,3],s=[2,1,3];e.exports=function(e,t){e&&(i(e)||o(e))||(t=e||{},e=null),t="number"===typeof t?{count:t}:t||{};for(var n="string"===typeof t.type?t.type:"uint16",u="number"===typeof t.count?t.count:1,c=t.start||0,l=!1!==t.clockwise?a:s,h=l[0],p=l[1],f=l[2],d=6*u,m=e||new(r(n))(d),g=0,v=0;g<d;g+=6,v+=4){var y=g+c;m[y+0]=v+0,m[y+1]=v+1,m[y+2]=v+2,m[y+3]=v+h,m[y+4]=v+p,m[y+5]=v+f}return m}},function(e,t){function n(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===r.call(e.buffer)||Array.isArray(e)}var r=Object.prototype.toString;e.exports=n},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t){e.exports.pages=function(e){var t=new Float32Array(4*e.length*1),n=0;return e.forEach(function(e){var r=e.data.page||0;t[n++]=r,t[n++]=r,t[n++]=r,t[n++]=r}),t},e.exports.uvs=function(e,t,n,r){var i=new Float32Array(4*e.length*2),o=0;return e.forEach(function(e){var a=e.data,s=a.x+a.width,u=a.y+a.height,c=a.x/t,l=a.y/n,h=s/t,p=u/n;r&&(l=(n-a.y)/n,p=(n-u)/n),i[o++]=c,i[o++]=l,i[o++]=c,i[o++]=p,i[o++]=h,i[o++]=p,i[o++]=h,i[o++]=l}),i},e.exports.positions=function(e){var t=new Float32Array(4*e.length*2),n=0;return e.forEach(function(e){var r=e.data,i=e.position[0]+r.xoffset,o=e.position[1]+r.yoffset,a=r.width,s=r.height;t[n++]=i,t[n++]=o,t[n++]=i,t[n++]=o+s,t[n++]=i+a,t[n++]=o+s,t[n++]=i+a,t[n++]=o}),t}},function(e,t){function n(e){var t=e.length/r;i.min[0]=e[0],i.min[1]=e[1],i.max[0]=e[0],i.max[1]=e[1];for(var n=0;n<t;n++){var o=e[n*r+0],a=e[n*r+1];i.min[0]=Math.min(o,i.min[0]),i.min[1]=Math.min(a,i.min[1]),i.max[0]=Math.max(o,i.max[0]),i.max[1]=Math.max(a,i.max[1])}}var r=2,i={min:[0,0],max:[0,0]};e.exports.computeBox=function(e,t){n(e),t.min.set(i.min[0],i.min[1],0),t.max.set(i.max[0],i.max[1],0)},e.exports.computeSphere=function(e,t){n(e);var r=i.min[0],o=i.min[1],a=i.max[0],s=i.max[1],u=a-r,c=s-o,l=Math.sqrt(u*u+c*c);t.center.set(r+u/2,o+c/2,0),t.radius=l/2}},function(e,t,n){(function(t){function r(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function i(e){if(p)return h(e,{responseType:"arraybuffer"});if("undefined"===typeof self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var t=new self.XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),h({xhr:t},e)}var o=n(306),a=function(){},s=n(324),u=n(325),c=n(328),l=n(329),h=n(36),p=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();e.exports=function(e,n){n="function"===typeof n?n:a,"string"===typeof e?e={uri:e}:e||(e={}),e.binary&&(e=i(e)),o(e,function(i,o,h){if(i)return n(i);if(!/^2/.test(o.statusCode))return n(new Error("http status code: "+o.statusCode));if(!h)return n(new Error("no body result"));var p=!1;if(r(h)){var f=new Uint8Array(h);h=new t(f,"binary")}l(h)&&(p=!0,"string"===typeof h&&(h=new t(h,"binary"))),p||(t.isBuffer(h)&&(h=h.toString(e.encoding)),h=h.trim());var d;try{var m=o.headers["content-type"];d=p?c(h):/json/.test(m)||"{"===h.charAt(0)?JSON.parse(h):/xml/.test(m)||"<"===h.charAt(0)?u(h):s(h)}catch(e){n(new Error("error parsing font "+e.message)),n=a}n(null,d)})}}).call(t,n(37).Buffer)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new p(o(e,i,a)),u=0,c=a>0?i-4:i,l=0;l<c;l+=4)t=h[e.charCodeAt(l)]<<18|h[e.charCodeAt(l+1)]<<12|h[e.charCodeAt(l+2)]<<6|h[e.charCodeAt(l+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=h[e.charCodeAt(l)]<<2|h[e.charCodeAt(l+1)]>>4,s[u++]=255&t),1===a&&(t=h[e.charCodeAt(l)]<<10|h[e.charCodeAt(l+1)]<<4|h[e.charCodeAt(l+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var l=[],h=[],p="undefined"!==typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=f.length;d<m;++d)l[d]=f[d],h[f.charCodeAt(d)]=d;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?p/u:p*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=d,a/=256,c-=8);e[n+f-d]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return l(t)?(n=t,"string"===typeof e&&(r={uri:e})):r=p(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=i(e,t,n),a(t)}function a(e){function t(){4===l.readyState&&setTimeout(a,0)}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||s(l),_)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,x)}function a(){if(!f){var t;clearTimeout(d),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=x,i=null;return 0!==t?(r={body:n(),statusCode:t,method:g,headers:{},url:m,rawRequest:l},l.getAllResponseHeaders&&(r.headers=h(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),c(i,r,r.body)}}if("undefined"===typeof e.callback)throw new Error("callback argument missing");var u=!1,c=function(t,n,r){u||(u=!0,e.callback(t,n,r))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var p,f,d,m=l.url=e.uri||e.url,g=l.method=e.method||"GET",v=e.body||e.data,y=l.headers=e.headers||{},b=!!e.sync,_=!1,x={body:void 0,headers:{},statusCode:0,method:g,url:m,rawRequest:l};if("json"in e&&!1!==e.json&&(_=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),v=JSON.stringify(!0===e.json?v:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){f=!0},l.ontimeout=i,l.open(g,m,!b,e.username,e.password),b||(l.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(d=setTimeout(function(){if(!f){f=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),l.setRequestHeader)for(p in y)y.hasOwnProperty(p)&&l.setRequestHeader(p,y[p]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(l),l.send(v||null),l}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function u(){}var c=n(307),l=n(308),h=n(309),p=n(36);e.exports=o,e.exports.default=o,o.XMLHttpRequest=c.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),a(n)}})},function(e,t,n){(function(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=n}).call(t,n(7))},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t,n){var r=n(310),i=n(323),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));"undefined"===typeof t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},function(e,t,n){"use strict";var r=n(38),i=n(90),o=n(92),a=n(95),s=n(322),u=r.call(Function.call,a());i(u,{getPolyfill:a,implementation:o,shim:s}),e.exports=u},function(e,t,n){"use strict";var r=Array.prototype.slice,i=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!==typeof t||"[object Function]"!==i.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,o=r.call(arguments,1),a=function(){if(this instanceof n){var i=t.apply(this,o.concat(r.call(arguments)));return Object(i)===i?i:this}return t.apply(e,o.concat(r.call(arguments)))},s=Math.max(0,t.length-o.length),u=[],c=0;c<s;c++)u.push("$"+c);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var l=function(){};l.prototype=t.prototype,n.prototype=new l,l.prototype=null}return n}},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(91),o=Object.keys,a=o?function(e){return o(e)}:n(313),s=Object.keys;a.shim=function(){if(Object.keys){(function(){var e=Object.keys(arguments);return e&&e.length===arguments.length})(1,2)||(Object.keys=function(e){return s(i(e)?r.call(e):e)})}else Object.keys=a;return Object.keys||a},e.exports=a},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(91),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(e){if("undefined"===typeof window||!f)return h(e);try{return h(e)}catch(e){return!1}};r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),h=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=c&&n;if(s&&e.length>0&&!i.call(e,0))for(var f=0;f<e.length;++f)h.push(String(f));if(r&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var g in e)p&&"prototype"===g||!i.call(e,g)||h.push(String(g));if(u)for(var v=d(e),y=0;y<l.length;++y)v&&"constructor"===l[y]||!i.call(e,l[y])||h.push(l[y]);return h}}e.exports=r},function(e,t,n){"use strict";var r=n(93),i=r("%Object%"),o=r("%TypeError%"),a=r("%String%"),s=n(315),u=n(316),c=n(317),l=n(318),h=n(319),p=n(39),f=n(320),d=n(94),m={ToPrimitive:f,ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return u(t)?0:0!==t&&c(t)?l(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);if(u(t)||0===t||!c(t))return 0;var n=l(t)*Math.floor(Math.abs(t));return h(n,65536)},ToString:function(e){return a(e)},ToObject:function(e){return this.CheckObjectCoercible(e),i(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new o(t||"Cannot call method on "+e);return e},IsCallable:p,SameValue:function(e,t){return e===t?0!==e||1/e===1/t:u(e)&&u(t)},Type:function(e){return null===e?"Null":"undefined"===typeof e?"Undefined":"function"===typeof e||"object"===typeof e?"Object":"number"===typeof e?"Number":"boolean"===typeof e?"Boolean":"string"===typeof e?"String":void 0},IsPropertyDescriptor:function(e){if("Object"!==this.Type(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(d(e,n)&&!t[n])return!1;var r=d(e,"[[Value]]"),i=d(e,"[[Get]]")||d(e,"[[Set]]");if(r&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(e){return"undefined"!==typeof e&&(s(this,"Property Descriptor","Desc",e),!(!d(e,"[[Get]]")&&!d(e,"[[Set]]")))},IsDataDescriptor:function(e){return"undefined"!==typeof e&&(s(this,"Property Descriptor","Desc",e),!(!d(e,"[[Value]]")&&!d(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return"undefined"!==typeof e&&(s(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if("undefined"===typeof e)return e;if(s(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new o("ToPropertyDescriptor requires an object");var t={};if(d(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),d(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),d(e,"value")&&(t["[[Value]]"]=e.value),d(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),d(e,"get")){var n=e.get;if("undefined"!==typeof n&&!this.IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(d(e,"set")){var r=e.set;if("undefined"!==typeof r&&!this.IsCallable(r))throw new o("setter must be a function");t["[[Set]]"]=r}if((d(t,"[[Get]]")||d(t,"[[Set]]"))&&(d(t,"[[Value]]")||d(t,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}};e.exports=m},function(e,t,n){"use strict";var r=n(93),i=r("%TypeError%"),o=r("%SyntaxError%"),a=n(94),s={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(a(t,r)&&!n[r])return!1;var o=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(o&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(e,t,n,r){var a=s[t];if("function"!==typeof a)throw new o("unknown record type: "+t);if(!a(e,r))throw new i(n+" must be a "+t);console.log(a(e,r),r)}},function(e,t){e.exports=Number.isNaN||function(e){return e!==e}},function(e,t){var n=Number.isNaN||function(e){return e!==e};e.exports=Number.isFinite||function(e){return"number"===typeof e&&!n(e)&&e!==1/0&&e!==-1/0}},function(e,t){e.exports=function(e){return e>=0?1:-1}},function(e,t){e.exports=function(e,t){var n=e%t;return Math.floor(n>=0?n:n+t)}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=n(321),o=n(39),a={"[[DefaultValue]]":function(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===r.call(e)?String:Number)===String||t===Number){var n,a,s=t===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(o(e[s[a]])&&(n=e[s[a]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};e.exports=function(e){return i(e)?e:arguments.length>1?a["[[DefaultValue]]"](e,arguments[1]):a["[[DefaultValue]]"](e)}},function(e,t){e.exports=function(e){return null===e||"function"!==typeof e&&"object"!==typeof e}},function(e,t,n){"use strict";var r=n(90),i=n(95);e.exports=function(){var e=i();return r(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},function(e,t,n){"use strict";var r=n(39),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},u=function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},c=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(e)?a(e,t,o):"string"===typeof e?s(e,t,o):u(e,t,o)};e.exports=c},function(e,t){function n(e,t){if(!(e=e.replace(/\t+/g," ").trim()))return null;var n=e.indexOf(" ");if(-1===n)throw new Error("no named row at line "+t);var i=e.substring(0,n);e=e.substring(n+1),e=e.replace(/letter=[\'\"]\S+[\'\"]/gi,""),e=e.split("="),e=e.map(function(e){return e.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],a=0;a<e.length;a++){var s=e[a];0===a?o.push({key:s[0],data:""}):a===e.length-1?o[o.length-1].data=r(s[0]):(o[o.length-1].data=r(s[0]),o.push({key:s[1],data:""}))}var u={key:i,data:{}};return o.forEach(function(e){u.data[e.key]=e.data}),u}function r(e){return e&&0!==e.length?0===e.indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):-1!==e.indexOf(",")?i(e):parseInt(e,10):""}function i(e){return e.split(",").map(function(e){return parseInt(e,10)})}e.exports=function(e){if(!e)throw new Error("no data provided");e=e.toString().trim();var t={pages:[],chars:[],kernings:[]},r=e.split(/\r\n?|\n/g);if(0===r.length)throw new Error("no data in BMFont file");for(var i=0;i<r.length;i++){var o=n(r[i],i);if(o)if("page"===o.key){if("number"!==typeof o.data.id)throw new Error("malformed file at line "+i+" -- needs page id=N");if("string"!==typeof o.data.file)throw new Error("malformed file at line "+i+' -- needs page file="path"');t.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?t.chars.push(o.data):"kerning"===o.key?t.kernings.push(o.data):t[o.key]=o.data)}return t}},function(e,t,n){function r(e){return i(e).reduce(function(e,t){return e[o(t.nodeName)]=t.nodeValue,e},{})}function i(e){for(var t=[],n=0;n<e.attributes.length;n++)t.push(e.attributes[n]);return t}function o(e){return u[e.toLowerCase()]||e}var a=n(326),s=n(327),u={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};e.exports=function(e){e=e.toString();var t=s(e),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(e){var i=t.getElementsByTagName(e)[0];i&&(n[e]=a(r(i)))});var i=t.getElementsByTagName("pages")[0];if(!i)throw new Error("malformed file -- no <pages> element");for(var o=i.getElementsByTagName("page"),u=0;u<o.length;u++){var c=o[u],l=parseInt(c.getAttribute("id"),10),h=c.getAttribute("file");if(isNaN(l))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(l,10)]=h}return["chars","kernings"].forEach(function(e){var i=t.getElementsByTagName(e)[0];if(i)for(var o=e.substring(0,e.length-1),s=i.getElementsByTagName(o),u=0;u<s.length;u++){var c=s[u];n[e].push(a(r(c)))}}),n}},function(e,t){function n(e){return e.split(",").map(function(e){return parseInt(e,10)})}e.exports=function(e){"chasrset"in e&&(e.charset=e.chasrset,delete e.chasrset);for(var t in e)"face"!==t&&"charset"!==t&&(e[t]="padding"===t||"spacing"===t?n(e[t]):parseInt(e[t],10));return e}},function(e,t){e.exports=function(){return"undefined"!==typeof self.DOMParser?function(e){return(new self.DOMParser).parseFromString(e,"application/xml")}:"undefined"!==typeof self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new self.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}}()},function(e,t){function n(e,t,n){if(n>t.length-1)return 0;var u=t.readUInt8(n++),c=t.readInt32LE(n);switch(n+=4,u){case 1:e.info=r(t,n);break;case 2:e.common=i(t,n);break;case 3:e.pages=o(t,n,c);break;case 4:e.chars=a(t,n,c);break;case 5:e.kernings=s(t,n,c)}return 5+c}function r(e,t){var n={};n.size=e.readInt16LE(t);var r=e.readUInt8(t+2);return n.smooth=r>>7&1,n.unicode=r>>6&1,n.italic=r>>5&1,n.bold=r>>4&1,r>>3&1&&(n.fixedHeight=1),n.charset=e.readUInt8(t+3)||"",n.stretchH=e.readUInt16LE(t+4),n.aa=e.readUInt8(t+6),n.padding=[e.readInt8(t+7),e.readInt8(t+8),e.readInt8(t+9),e.readInt8(t+10)],n.spacing=[e.readInt8(t+11),e.readInt8(t+12)],n.outline=e.readUInt8(t+13),n.face=c(e,t+14),n}function i(e,t){var n={};n.lineHeight=e.readUInt16LE(t),n.base=e.readUInt16LE(t+2),n.scaleW=e.readUInt16LE(t+4),n.scaleH=e.readUInt16LE(t+6),n.pages=e.readUInt16LE(t+8);e.readUInt8(t+10);return n.packed=0,n.alphaChnl=e.readUInt8(t+11),n.redChnl=e.readUInt8(t+12),n.greenChnl=e.readUInt8(t+13),n.blueChnl=e.readUInt8(t+14),n}function o(e,t,n){for(var r=[],i=u(e,t),o=i.length+1,a=n/o,s=0;s<a;s++)r[s]=e.slice(t,t+i.length).toString("utf8"),t+=o;return r}function a(e,t,n){for(var r=[],i=n/20,o=0;o<i;o++){var a={},s=20*o;a.id=e.readUInt32LE(t+0+s),a.x=e.readUInt16LE(t+4+s),a.y=e.readUInt16LE(t+6+s),a.width=e.readUInt16LE(t+8+s),a.height=e.readUInt16LE(t+10+s),a.xoffset=e.readInt16LE(t+12+s),a.yoffset=e.readInt16LE(t+14+s),a.xadvance=e.readInt16LE(t+16+s),a.page=e.readUInt8(t+18+s),a.chnl=e.readUInt8(t+19+s),r[o]=a}return r}function s(e,t,n){for(var r=[],i=n/10,o=0;o<i;o++){var a={},s=10*o;a.first=e.readUInt32LE(t+0+s),a.second=e.readUInt32LE(t+4+s),a.amount=e.readInt16LE(t+8+s),r[o]=a}return r}function u(e,t){for(var n=t;n<e.length&&0!==e[n];n++);return e.slice(t,n)}function c(e,t){return u(e,t).toString("utf8")}var l=[66,77,70];e.exports=function(e){if(e.length<6)throw new Error("invalid buffer length for BMFont");if(!l.every(function(t,n){return e.readUInt8(n)===t}))throw new Error("BMFont missing BMF byte header");var t=3;if(e.readUInt8(t++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var r={kernings:[],chars:[]},i=0;i<5;i++)t+=n(r,e,t);return r}},function(e,t,n){(function(t){var r=n(330),i=new t([66,77,70,3]);e.exports=function(e){return"string"===typeof e?"BMF"===e.substring(0,3):e.length>4&&r(e.slice(0,4),i)}}).call(t,n(37).Buffer)},function(e,t,n){var r=n(37).Buffer;e.exports=function(e,t){if(r.isBuffer(e)&&r.isBuffer(t)){if("function"===typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}},function(e,t,n){var r=n(2),i=n(8);e.exports=function(e){e=e||{};var t="number"===typeof e.opacity?e.opacity:1,n="number"===typeof e.alphaTest?e.alphaTest:.1,o=e.precision||"highp",a=e.color,s=e.map;return delete e.map,delete e.color,delete e.precision,delete e.opacity,i({uniforms:{opacity:{type:"f",value:t},map:{type:"t",value:s||new r.Texture},color:{type:"c",value:new r.Color(a)}},vertexShader:["attribute vec2 uv;","attribute vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","varying float vFragDepth;","void main() {","vUv = uv;","vec4 flippedPosition = position;","flippedPosition.y *= -1.0;","gl_Position = projectionMatrix * modelViewMatrix * flippedPosition;","vFragDepth = 1.0 + gl_Position.w;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives : enable","#endif","precision "+o+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","uniform float logDepthBufFC;","varying float vFragDepth;","varying vec2 vUv;","float aastep(float value) {","  #ifdef GL_OES_standard_derivatives","    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;","  #else","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  #endif","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","void main() {","  vec4 texColor = texture2D(map, vUv);","  float alpha = aastep(texColor.a);","  gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;","  gl_FragColor = vec4(color, opacity * alpha);",0===n?"":"  if (gl_FragColor.a < "+n+") discard;","}"].join("\n")},e)}},function(e,t){},function(e,t,n){e.exports=n.p+"static/media/symphony.logo-square.png"}]);
//# sourceMappingURL=symphony.main.js.map